function css_beautify(e,t){function a(){return u=e.charAt(++o)}function f(){return e.charAt(o+1)}function l(t){var n=o;while(a())if(u=="\\")a(),a();else{if(u==t)break;if(u=="\n")break}return e.substring(n,o+1)}function c(){var e=o;while(i.test(f()))o++;return o!=e}function h(){var e=o;do;while(i.test(a()));return o!=e+1}function p(){var t=o;a();while(a())if(u=="*"&&f()=="/"){o++;break}return e.substring(t,o+1)}function d(e,t){return w.slice(-e.length+(t||0),t).join("").toLowerCase()==e}function y(){g++,v+=m}function b(){g--,v=v.slice(0,-n)}t=t||{};var n=t.indent_size||4,r=t.indent_char||" ";typeof n=="string"&&(n=parseInt(n));var i=/^\s+$/,s=/[\w$\-_]/,o=-1,u,v=e.match(/^[\r\n]*[\t ]*/)[0],m=Array(n+1).join(r),g=0;print={},print["{"]=function(e){print.singleSpace(),w.push(e),print.newLine()},print["}"]=function(e){print.newLine(),w.push(e),print.newLine()},print.newLine=function(e){if(!e)while(i.test(w[w.length-1]))w.pop();w.length&&w.push("\n"),v&&w.push(v)},print.singleSpace=function(){w.length&&!i.test(w[w.length-1])&&w.push(" ")};var w=[];v&&w.push(v);for(;;){var E=h();if(!u)break;u=="{"?(y(),print["{"](u)):u=="}"?(b(),print["}"](u)):u=='"'||u=="'"?w.push(l(u)):u==";"?w.push(u,"\n",v):u=="/"&&f()=="*"?(print.newLine(),w.push(p(),"\n",v)):u=="("?(w.push(u),c(),d("url",-1)&&a()&&(u!=")"&&u!='"'&&u!="'"?w.push(l(")")):o--)):u==")"?w.push(u):u==","?(c(),w.push(u),print.singleSpace()):u=="]"?w.push(u):u=="["||u=="="?(c(),w.push(u)):(E&&print.singleSpace(),w.push(u))}var S=w.join("").replace(/[\n ]+$/,"");return S}function style_html(e,t){function u(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.get_content=function(){var e="",t=[],n=!1;while(this.input.charAt(this.pos)!=="<"){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];e=this.input.charAt(this.pos),this.pos++,this.line_char_count++;if(this.Utils.in_array(e,this.Utils.whitespace)){t.length&&(n=!0),this.line_char_count--;continue}if(n){if(this.line_char_count>=this.max_char){t.push("\n");for(var r=0;r<this.indent_level;r++)t.push(this.indent_string);this.line_char_count=0}else t.push(" "),this.line_char_count++;n=!1}t.push(e)}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n="",r=new RegExp("</"+e+"\\s*>","igm");r.lastIndex=this.pos;var i=r.exec(this.input),s=i?i.index:this.input.length;return this.pos<s&&(n=this.input.substring(this.pos,s),this.pos=s),n},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){var t=this.tags.parent;while(t){if(e+this.tags[e+"count"]===t)break;t=this.tags[t+"parent"]}t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],this.tags[e+"count"]==1?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.get_tag=function(){var e="",t=[],n=!1;do{if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];e=this.input.charAt(this.pos),this.pos++,this.line_char_count++;if(this.Utils.in_array(e,this.Utils.whitespace)){n=!0,this.line_char_count--;continue}if(e==="'"||e==='"')if(!t[1]||t[1]!=="!")e+=this.get_unformatted(e),n=!0;e==="="&&(n=!1),t.length&&t[t.length-1]!=="="&&e!==">"&&n&&(this.line_char_count>=this.max_char?(this.print_newline(!1,t),this.line_char_count=0):(t.push(" "),this.line_char_count++),n=!1),t.push(e)}while(e!==">");var r=t.join(""),i;r.indexOf(" ")!=-1?i=r.indexOf(" "):i=r.indexOf(">");var s=r.substring(1,i).toLowerCase();if(r.charAt(r.length-2)==="/"||this.Utils.in_array(s,this.Utils.single_token))this.tag_type="SINGLE";else if(s==="script")this.record_tag(s),this.tag_type="SCRIPT";else if(s==="style")this.record_tag(s),this.tag_type="STYLE";else if(this.Utils.in_array(s,unformatted)){var o=this.get_unformatted("</"+s+">",r);t.push(o),this.tag_type="SINGLE"}else if(s.charAt(0)==="!")if(s.indexOf("[if")!=-1){if(r.indexOf("!IE")!=-1){var o=this.get_unformatted("-->",r);t.push(o)}this.tag_type="START"}else if(s.indexOf("[endif")!=-1)this.tag_type="END",this.unindent();else if(s.indexOf("[cdata[")!=-1){var o=this.get_unformatted("]]>",r);t.push(o),this.tag_type="SINGLE"}else{var o=this.get_unformatted("-->",r);t.push(o),this.tag_type="SINGLE"}else s.charAt(0)==="/"?(this.retrieve_tag(s.substring(1)),this.tag_type="END"):(this.record_tag(s),this.tag_type="START"),this.Utils.in_array(s,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return t.join("")},this.get_unformatted=function(e,t){if(t&&t.indexOf(e)!=-1)return"";var n="",r="",i=!0;do{if(this.pos>=this.input.length)return r;n=this.input.charAt(this.pos),this.pos++;if(this.Utils.in_array(n,this.Utils.whitespace)){if(!i){this.line_char_count--;continue}if(n==="\n"||n==="\r"){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,i=!0}while(r.indexOf(e)==-1);return r},this.get_token=function(){var e;if(this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"){var t=this.last_token.substr(7);return e=this.get_contents_to(t),typeof e!="string"?e:[e,"TK_"+t]}if(this.current_mode==="CONTENT")return e=this.get_content(),typeof e!="string"?e:[e,"TK_CONTENT"];if(this.current_mode==="TAG"){e=this.get_tag();if(typeof e!="string")return e;reg1=/(<(a|div|span))([^>]*)>/,reg2=/( *[\w]*=\"[-\/@ç'&*+%éèëïîù`ê;~ $#=?.:\w]*\")/g,attributes=reg1.exec(e),attributes&&attributes.length>2&&(ele=attributes[1],attributes[3]!==""&&(attributes=attributes[3].match(reg2),e=ele+attributes.sort().join("")+">"));var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":Array(e+1).join(this.indent_string)},this.printer=function(e,t,n,r,i){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=i,this.indent_level=0,this.max_char=r,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0;if(!t||!t.length)return;if(!e)while(this.Utils.in_array(t[t.length-1],this.Utils.whitespace))t.pop();t.push("\n");for(var n=0;n<this.indent_level;n++)t.push(this.indent_string)},this.print_token=function(e){this.output.push(e)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var n,r,i,s,o;t=t||{},r=t.indent_size||4,i=t.indent_char||" ",o=t.brace_style||"collapse",s=t.max_char||"70",unformatted=t.unformatted||["a"],n=new u,n.printer(e,i,r,s,o);for(;;){var a=n.get_token();n.token_text=a[0],n.token_type=a[1];if(n.token_type==="TK_EOF")break;switch(n.token_type){case"TK_TAG_START":n.print_newline(!1,n.output),n.print_token(n.token_text),n.indent(),n.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_END":if(n.last_token==="TK_CONTENT"&&n.last_text===""){var f=n.token_text.match(/\w+/)[0],l=n.output[n.output.length-1].match(/<\s*(\w+)/);(l===null||l[1]!==f)&&n.print_newline(!0,n.output)}n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_SINGLE":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_CONTENT":n.token_text!==""&&n.print_token(n.token_text),n.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(n.token_text!==""){n.output.push("\n");var c=n.token_text;if(n.token_type=="TK_SCRIPT")var h=typeof js_beautify=="function"&&js_beautify;else if(n.token_type=="TK_STYLE")var h=typeof css_beautify=="function"&&css_beautify;if(t.indent_scripts=="keep")var p=0;else if(t.indent_scripts=="separate")var p=-n.indent_level;else var p=1;var d=n.get_full_indent(p);if(h)c=h(c.replace(/^\s*/,d),t);else{var v=c.match(/^\s*/)[0],m=v.match(/[^\n\r]*$/)[0].split(n.indent_string).length-1,g=n.get_full_indent(p-m);c=c.replace(/^\s*/,d).replace(/\r\n|\r|\n/g,"\n"+g).replace(/\s*$/,"")}c&&(n.print_token(c),n.print_newline(!0,n.output))}n.current_mode="TAG"}n.last_token=n.token_type,n.last_text=n.token_text}return n.output.join("")}function js_beautify(e,t){function H(e){e=typeof e=="undefined"?!1:e;while(r.length&&(r[r.length-1]===" "||r[r.length-1]===c||r[r.length-1]===T||e&&(r[r.length-1]==="\n"||r[r.length-1]==="\r")))r.pop()}function B(e){return e.replace(/^\s\s*|\s\s*$/,"")}function j(){var e=M;M=!1,F(),M=e}function F(e){f.eat_next_space=!1;if(M&&W(f.mode))return;e=typeof e=="undefined"?!0:e,f.if_line=!1,H();if(!r.length)return;if(r[r.length-1]!=="\n"||!e)S=!0,r.push("\n");T&&r.push(T);for(var t=0;t<f.indentation_level;t+=1)r.push(c);f.var_line&&f.var_line_reindented&&r.push(c),f.case_body&&r.push(c)}function I(){if(f.eat_next_space){f.eat_next_space=!1;return}var e=" ";r.length&&(e=r[r.length-1]),e!==" "&&e!=="\n"&&e!==c&&r.push(" ")}function q(){S=!1,f.eat_next_space=!1,r.push(i)}function R(){f.indentation_level+=1}function U(){r.length&&r[r.length-1]===c&&r.pop()}function z(e){f&&l.push(f),f={previous_mode:f?f.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:f?f.indentation_level+(f.case_body?1:0)+(f.var_line&&f.var_line_reindented?1:0):0,ternary_depth:0}}function W(e){return e==="[EXPRESSION]"||e==="[INDENTED-EXPRESSION]"}function X(e){return e==="[EXPRESSION]"||e==="[INDENTED-EXPRESSION]"||e==="(EXPRESSION)"}function V(){w=f.mode==="DO_BLOCK",l.length>0&&(f=l.pop())}function $(e,t){for(var n=0;n<e.length;n++)if(B(e[n])[0]!=t)return!1;return!0}function J(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function K(e){var t=v,r=n.charAt(t);while(J(r,h)&&r!=e){t++;if(t>=P)return 0;r=n.charAt(t)}return r}function Q(){x=0;if(v>=P)return["","TK_EOF"];E=!1;var e=n.charAt(v);v+=1;var t=M&&W(f.mode);if(t){var i=0;while(J(e,h)){e==="\n"?(H(),r.push("\n"),S=!0,i=0):e==="	"?i+=4:e!=="\r"&&(i+=1);if(v>=P)return["","TK_EOF"];e=n.charAt(v),v+=1}f.indentation_baseline===-1&&(f.indentation_baseline=i);if(S){var u;for(u=0;u<f.indentation_level+1;u+=1)r.push(c);if(f.indentation_baseline!==-1)for(u=0;u<i-f.indentation_baseline;u++)r.push(" ")}}else{while(J(e,h)){e==="\n"&&(x+=A?x<=A?1:0:1);if(v>=P)return["","TK_EOF"];e=n.charAt(v),v+=1}if(L&&x>1)for(u=0;u<x;u+=1)F(u===0),S=!0;E=x>0}if(J(e,p)){if(v<P)while(J(n.charAt(v),p)){e+=n.charAt(v),v+=1;if(v===P)break}if(v===P||!e.match(/^[0-9]+[Ee]$/)||n.charAt(v)!=="-"&&n.charAt(v)!=="+")return e==="in"?[e,"TK_OPERATOR"]:(E&&s!=="TK_OPERATOR"&&s!=="TK_EQUALS"&&!f.if_line&&(L||o!=="var")&&F(),[e,"TK_WORD"]);var a=n.charAt(v);v+=1;var l=Q(v);return e+=a+l[0],[e,"TK_WORD"]}if(e==="("||e==="[")return[e,"TK_START_EXPR"];if(e===")"||e==="]")return[e,"TK_END_EXPR"];if(e==="{")return[e,"TK_START_BLOCK"];if(e==="}")return[e,"TK_END_BLOCK"];if(e===";")return[e,"TK_SEMICOLON"];if(e==="/"){var m="",y=!0;if(n.charAt(v)==="*"){v+=1;if(v<P)while((n.charAt(v)!=="*"||!n.charAt(v+1)||n.charAt(v+1)!=="/")&&v<P){e=n.charAt(v),m+=e;if(e==="\r"||e==="\n")y=!1;v+=1;if(v>=P)break}return v+=2,y?["/*"+m+"*/","TK_INLINE_COMMENT"]:["/*"+m+"*/","TK_BLOCK_COMMENT"]}if(n.charAt(v)==="/"){m=e;while(n.charAt(v)!=="\r"&&n.charAt(v)!=="\n"){m+=n.charAt(v),v+=1;if(v>=P)break}return v+=1,E&&F(),[m,"TK_COMMENT"]}}if(e==="'"||e==='"'||e==="/"&&(s==="TK_WORD"&&J(o,["return","do"])||s==="TK_COMMENT"||s==="TK_START_EXPR"||s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_OPERATOR"||s==="TK_EQUALS"||s==="TK_EOF"||s==="TK_SEMICOLON")){var b=e,w=!1,T=e;if(v<P)if(b==="/"){var N=!1;while(w||N||n.charAt(v)!==b){T+=n.charAt(v),w?w=!1:(w=n.charAt(v)==="\\",n.charAt(v)==="["?N=!0:n.charAt(v)==="]"&&(N=!1)),v+=1;if(v>=P)return[T,"TK_STRING"]}}else while(w||n.charAt(v)!==b){T+=n.charAt(v),w?w=!1:w=n.charAt(v)==="\\",v+=1;if(v>=P)return[T,"TK_STRING"]}v+=1,T+=b;if(b==="/")while(v<P&&J(n.charAt(v),p))T+=n.charAt(v),v+=1;return[T,"TK_STRING"]}if(e==="#"){if(r.length===0&&n.charAt(v)==="!"){T=e;while(v<P&&e!="\n")e=n.charAt(v),T+=e,v+=1;return r.push(B(T)+"\n"),F(),Q()}var C="#";if(v<P&&J(n.charAt(v),g)){do e=n.charAt(v),C+=e,v+=1;while(v<P&&e!=="#"&&e!=="=");return e!=="#"&&(n.charAt(v)==="["&&n.charAt(v+1)==="]"?(C+="[]",v+=2):n.charAt(v)==="{"&&n.charAt(v+1)==="}"&&(C+="{}",v+=2)),[C,"TK_WORD"]}}if(e==="<"&&n.substring(v-1,v+3)==="<!--")return v+=3,f.in_html_comment=!0,["<!--","TK_COMMENT"];if(e==="-"&&f.in_html_comment&&n.substring(v-1,v+2)==="-->")return f.in_html_comment=!1,v+=2,E&&F(),["-->","TK_COMMENT"];if(J(e,d)){while(v<P&&J(e+n.charAt(v),d)){e+=n.charAt(v),v+=1;if(v>=P)break}return e==="="?[e,"TK_EQUALS"]:[e,"TK_OPERATOR"]}return[e,"TK_UNKNOWN"]}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T="";t=t?t:{};var N;t.space_after_anon_function!==undefined&&t.jslint_happy===undefined&&(t.jslint_happy=t.space_after_anon_function),t.braces_on_own_line!==undefined&&(N=t.braces_on_own_line?"expand":"collapse"),N=t.brace_style?t.brace_style:N?N:"collapse";var C=t.indent_size?t.indent_size:4,k=t.indent_char?t.indent_char:" ",L=typeof t.preserve_newlines=="undefined"?!0:t.preserve_newlines,A=typeof t.max_preserve_newlines=="undefined"?!1:t.max_preserve_newlines,O=t.jslint_happy==="undefined"?!1:t.jslint_happy,M=typeof t.keep_array_indentation=="undefined"?!1:t.keep_array_indentation,_=typeof t.space_before_conditional=="undefined"?!0:t.space_before_conditional,D=typeof t.indent_case=="undefined"?!1:t.indent_case;S=!1;var P=e.length;c="";while(C>0)c+=k,C-=1;while(e&&(e[0]===" "||e[0]==="	"))T+=e[0],e=e.substring(1);n=e,a="",s="TK_START_EXPR",o="",u="",r=[],w=!1,h="\n\r	 ".split(""),p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),g="0123456789".split(""),d="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",d+=" <%= <% %> <?= <? ?>",d=d.split(" "),m="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),l=[],z("BLOCK"),v=0;for(;;){var G=Q(v);i=G[0],b=G[1];if(b==="TK_EOF")break;switch(b){case"TK_START_EXPR":if(i==="["){if(s==="TK_WORD"||o===")"){J(o,m)&&I(),z("(EXPRESSION)"),q();break}f.mode==="[EXPRESSION]"||f.mode==="[INDENTED-EXPRESSION]"?u==="]"&&o===","?(f.mode==="[EXPRESSION]"&&(f.mode="[INDENTED-EXPRESSION]",M||R()),z("[EXPRESSION]"),M||F()):o==="["?(f.mode==="[EXPRESSION]"&&(f.mode="[INDENTED-EXPRESSION]",M||R()),z("[EXPRESSION]"),M||F()):z("[EXPRESSION]"):z("[EXPRESSION]")}else z("(EXPRESSION)");o===";"||s==="TK_START_BLOCK"?F():s!=="TK_END_EXPR"&&s!=="TK_START_EXPR"&&s!=="TK_END_BLOCK"&&o!=="."&&(s!=="TK_WORD"&&s!=="TK_OPERATOR"?I():a==="function"||a==="typeof"?O&&I():(J(o,m)||o==="catch")&&_&&I()),q();break;case"TK_END_EXPR":if(i==="]")if(M){if(o==="}"){U(),q(),V();break}}else if(f.mode==="[INDENTED-EXPRESSION]"&&o==="]"){V(),F(),q();break}V(),q();break;case"TK_START_BLOCK":a==="do"?z("DO_BLOCK"):z("BLOCK");if(N=="expand"||N=="expand-strict"){var Y=!1;N=="expand-strict"?(Y=K()=="}",Y||F(!0)):s!=="TK_OPERATOR"&&(o==="return"||o==="="?I():F(!0)),q(),Y||R()}else s!=="TK_OPERATOR"&&s!=="TK_START_EXPR"?s==="TK_START_BLOCK"?F():I():W(f.previous_mode)&&o===","&&(u==="}"?I():F()),R(),q();break;case"TK_END_BLOCK":V(),N=="expand"||N=="expand-strict"?(o!=="{"&&F(),q()):(s==="TK_START_BLOCK"?S?U():H():W(f.mode)&&M?(M=!1,F(),M=!0):F(),q());break;case"TK_WORD":if(w){I(),q(),I(),w=!1;break}if(i==="function"){f.var_line&&(f.var_line_reindented=!0);if((S||o===";")&&o!=="{"&&s!="TK_BLOCK_COMMENT"&&s!="TK_COMMENT"){x=S?x:0,L||(x=1);for(var Z=0;Z<2-x;Z++)F(!1)}}if(i==="case"||i==="default"){o===":"||f.case_body?U():(D||f.indentation_level--,F(),D||f.indentation_level++),q(),f.in_case=!0,f.case_body=!1;break}y="NONE",s==="TK_END_BLOCK"?J(i.toLowerCase(),["else","catch","finally"])?N=="expand"||N=="end-expand"||N=="expand-strict"?y="NEWLINE":(y="SPACE",I()):y="NEWLINE":s!=="TK_SEMICOLON"||f.mode!=="BLOCK"&&f.mode!=="DO_BLOCK"?s==="TK_SEMICOLON"&&X(f.mode)?y="SPACE":s==="TK_STRING"?y="NEWLINE":s==="TK_WORD"?(o==="else"&&H(!0),y="SPACE"):s==="TK_START_BLOCK"?y="NEWLINE":s==="TK_END_EXPR"&&(I(),y="NEWLINE"):y="NEWLINE",J(i,m)&&o!==")"&&(o=="else"?y="SPACE":y="NEWLINE"),f.if_line&&s==="TK_END_EXPR"&&(f.if_line=!1);if(J(i.toLowerCase(),["else","catch","finally"]))s!=="TK_END_BLOCK"||N=="expand"||N=="end-expand"||N=="expand-strict"?F():(H(!0),I());else if(y==="NEWLINE"){if(s!=="TK_START_EXPR"&&o!=="="&&o!==","||i!=="function")i==="function"&&o=="new"?I():o==="return"||o==="throw"?I():s!=="TK_END_EXPR"?(s!=="TK_START_EXPR"||i!=="var")&&o!==":"&&(i==="if"&&a==="else"&&o!=="{"?I():(f.var_line=!1,f.var_line_reindented=!1,F())):J(i,m)&&o!=")"&&(f.var_line=!1,f.var_line_reindented=!1,F())}else W(f.mode)&&o===","&&u==="}"?F():y==="SPACE"&&I();q(),a=i,i==="var"&&(f.var_line=!0,f.var_line_reindented=!1,f.var_line_tainted=!1),i==="if"&&(f.if_line=!0),i==="else"&&(f.if_line=!1);break;case"TK_SEMICOLON":q(),f.var_line=!1,f.var_line_reindented=!1,f.mode=="OBJECT"&&(f.mode="BLOCK");break;case"TK_STRING":s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_SEMICOLON"?F():s==="TK_WORD"&&I(),q();break;case"TK_EQUALS":f.var_line&&(f.var_line_tainted=!0),I(),q(),I();break;case"TK_OPERATOR":var et=!0,tt=!0;f.var_line&&i===","&&X(f.mode)&&(f.var_line_tainted=!1);if(f.var_line&&i===","){if(f.var_line_tainted){q(),f.var_line_reindented=!0,f.var_line_tainted=!1,F();break}f.var_line_tainted=!1}if(o==="return"||o==="throw"){I(),q();break}if(i===":"&&f.in_case){D&&(f.case_body=!0),q(),F(),f.in_case=!1;break}if(i==="::"){q();break}if(i===","){f.var_line?f.var_line_tainted?(q(),F(),f.var_line_tainted=!1):(q(),I()):s==="TK_END_BLOCK"&&f.mode!=="(EXPRESSION)"?(q(),f.mode==="OBJECT"&&o==="}"?F():I()):f.mode==="OBJECT"?(q(),F()):(q(),I());break}J(i,["--","++","!"])||J(i,["-","+"])&&(J(s,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||J(o,m))?(et=!1,tt=!1,o===";"&&X(f.mode)&&(et=!0),s==="TK_WORD"&&J(o,m)&&(et=!0),f.mode==="BLOCK"&&(o==="{"||o===";")&&F()):i==="."?et=!1:i===":"?f.ternary_depth==0?(f.mode="OBJECT",et=!1):f.ternary_depth-=1:i==="?"&&(f.ternary_depth+=1),et&&I(),q(),tt&&I(),i==="!";break;case"TK_BLOCK_COMMENT":var nt=i.split(/\x0a|\x0d\x0a/);if($(nt.slice(1),"*")){F(),r.push(nt[0]);for(Z=1;Z<nt.length;Z++)F(),r.push(" "),r.push(B(nt[Z]))}else{nt.length>1?(F(),H()):I();for(Z=0;Z<nt.length;Z++)r.push(nt[Z]),r.push("\n")}K("\n")!="\n"&&F();break;case"TK_INLINE_COMMENT":I(),q(),X(f.mode)?I():j();break;case"TK_COMMENT":E?F():I(),q(),K("\n")!="\n"&&j();break;case"TK_UNKNOWN":(o==="return"||o==="throw")&&I(),q()}u=o,s=b,o=i}var rt=T+r.join("").replace(/[\n ]+$/,"");return rt}function style_html(e,t){function u(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.get_content=function(){var e="",t=[],n=!1;while(this.input.charAt(this.pos)!=="<"){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];e=this.input.charAt(this.pos),this.pos++,this.line_char_count++;if(this.Utils.in_array(e,this.Utils.whitespace)){t.length&&(n=!0),this.line_char_count--;continue}if(n){if(this.line_char_count>=this.max_char){t.push("\n");for(var r=0;r<this.indent_level;r++)t.push(this.indent_string);this.line_char_count=0}else t.push(" "),this.line_char_count++;n=!1}t.push(e)}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n="",r=new RegExp("</"+e+"\\s*>","igm");r.lastIndex=this.pos;var i=r.exec(this.input),s=i?i.index:this.input.length;return this.pos<s&&(n=this.input.substring(this.pos,s),this.pos=s),n},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){var t=this.tags.parent;while(t){if(e+this.tags[e+"count"]===t)break;t=this.tags[t+"parent"]}t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],this.tags[e+"count"]==1?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.get_tag=function(){var e="",t=[],n=!1;do{if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];e=this.input.charAt(this.pos),this.pos++,this.line_char_count++;if(this.Utils.in_array(e,this.Utils.whitespace)){n=!0,this.line_char_count--;continue}if(e==="'"||e==='"')if(!t[1]||t[1]!=="!")e+=this.get_unformatted(e),n=!0;e==="="&&(n=!1),t.length&&t[t.length-1]!=="="&&e!==">"&&n&&(this.line_char_count>=this.max_char?(this.print_newline(!1,t),this.line_char_count=0):(t.push(" "),this.line_char_count++),n=!1),t.push(e)}while(e!==">");var r=t.join(""),i;r.indexOf(" ")!=-1?i=r.indexOf(" "):i=r.indexOf(">");var s=r.substring(1,i).toLowerCase();if(r.charAt(r.length-2)==="/"||this.Utils.in_array(s,this.Utils.single_token))this.tag_type="SINGLE";else if(s==="script")this.record_tag(s),this.tag_type="SCRIPT";else if(s==="style")this.record_tag(s),this.tag_type="STYLE";else if(this.Utils.in_array(s,unformatted)){var o=this.get_unformatted("</"+s+">",r);t.push(o),this.tag_type="SINGLE"}else if(s.charAt(0)==="!")if(s.indexOf("[if")!=-1){if(r.indexOf("!IE")!=-1){var o=this.get_unformatted("-->",r);t.push(o)}this.tag_type="START"}else if(s.indexOf("[endif")!=-1)this.tag_type="END",this.unindent();else if(s.indexOf("[cdata[")!=-1){var o=this.get_unformatted("]]>",r);t.push(o),this.tag_type="SINGLE"}else{var o=this.get_unformatted("-->",r);t.push(o),this.tag_type="SINGLE"}else s.charAt(0)==="/"?(this.retrieve_tag(s.substring(1)),this.tag_type="END"):(this.record_tag(s),this.tag_type="START"),this.Utils.in_array(s,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return t.join("")},this.get_unformatted=function(e,t){if(t&&t.indexOf(e)!=-1)return"";var n="",r="",i=!0;do{if(this.pos>=this.input.length)return r;n=this.input.charAt(this.pos),this.pos++;if(this.Utils.in_array(n,this.Utils.whitespace)){if(!i){this.line_char_count--;continue}if(n==="\n"||n==="\r"){r+="\n",this.line_char_count=0;continue}}r+=n,this.line_char_count++,i=!0}while(r.indexOf(e)==-1);return r},this.get_token=function(){var e;if(this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"){var t=this.last_token.substr(7);return e=this.get_contents_to(t),typeof e!="string"?e:[e,"TK_"+t]}if(this.current_mode==="CONTENT")return e=this.get_content(),typeof e!="string"?e:[e,"TK_CONTENT"];if(this.current_mode==="TAG"){e=this.get_tag();if(typeof e!="string")return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,e<1?"":Array(e+1).join(this.indent_string)},this.printer=function(e,t,n,r,i){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=i,this.indent_level=0,this.max_char=r,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0;if(!t||!t.length)return;if(!e)while(this.Utils.in_array(t[t.length-1],this.Utils.whitespace))t.pop();t.push("\n");for(var n=0;n<this.indent_level;n++)t.push(this.indent_string)},this.print_token=function(e){this.output.push(e)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var n,r,i,s,o;t=t||{},r=t.indent_size||4,i=t.indent_char||" ",o=t.brace_style||"collapse",s=t.max_char||"70",unformatted=t.unformatted||["a"],n=new u,n.printer(e,i,r,s,o);for(;;){var a=n.get_token();n.token_text=a[0],n.token_type=a[1];if(n.token_type==="TK_EOF")break;switch(n.token_type){case"TK_TAG_START":n.print_newline(!1,n.output),n.print_token(n.token_text),n.indent(),n.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_END":if(n.last_token==="TK_CONTENT"&&n.last_text===""){var f=n.token_text.match(/\w+/)[0],l=n.output[n.output.length-1].match(/<\s*(\w+)/);(l===null||l[1]!==f)&&n.print_newline(!0,n.output)}n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_SINGLE":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_CONTENT":n.token_text!==""&&n.print_token(n.token_text),n.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(n.token_text!==""){n.output.push("\n");var c=n.token_text;if(n.token_type=="TK_SCRIPT")var h=typeof js_beautify=="function"&&js_beautify;else if(n.token_type=="TK_STYLE")var h=typeof css_beautify=="function"&&css_beautify;if(t.indent_scripts=="keep")var p=0;else if(t.indent_scripts=="separate")var p=-n.indent_level;else var p=1;var d=n.get_full_indent(p);if(h)c=h(c.replace(/^\s*/,d),t);else{var v=c.match(/^\s*/)[0],m=v.match(/[^\n\r]*$/)[0].split(n.indent_string).length-1,g=n.get_full_indent(p-m);c=c.replace(/^\s*/,d).replace(/\r\n|\r|\n/g,"\n"+g).replace(/\s*$/,"")}c&&(n.print_token(c),n.print_newline(!0,n.output))}n.current_mode="TAG"}n.last_token=n.token_type,n.last_text=n.token_text}return n.output.join("")}function js_beautify(e,t){function H(e){e=typeof e=="undefined"?!1:e;while(r.length&&(r[r.length-1]===" "||r[r.length-1]===c||r[r.length-1]===T||e&&(r[r.length-1]==="\n"||r[r.length-1]==="\r")))r.pop()}function B(e){return e.replace(/^\s\s*|\s\s*$/,"")}function j(){var e=M;M=!1,F(),M=e}function F(e){f.eat_next_space=!1;if(M&&W(f.mode))return;e=typeof e=="undefined"?!0:e,f.if_line=!1,H();if(!r.length)return;if(r[r.length-1]!=="\n"||!e)S=!0,r.push("\n");T&&r.push(T);for(var t=0;t<f.indentation_level;t+=1)r.push(c);f.var_line&&f.var_line_reindented&&r.push(c),f.case_body&&r.push(c)}function I(){if(f.eat_next_space){f.eat_next_space=!1;return}var e=" ";r.length&&(e=r[r.length-1]),e!==" "&&e!=="\n"&&e!==c&&r.push(" ")}function q(){S=!1,f.eat_next_space=!1,r.push(i)}function R(){f.indentation_level+=1}function U(){r.length&&r[r.length-1]===c&&r.pop()}function z(e){f&&l.push(f),f={previous_mode:f?f.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:f?f.indentation_level+(f.case_body?1:0)+(f.var_line&&f.var_line_reindented?1:0):0,ternary_depth:0}}function W(e){return e==="[EXPRESSION]"||e==="[INDENTED-EXPRESSION]"}function X(e){return e==="[EXPRESSION]"||e==="[INDENTED-EXPRESSION]"||e==="(EXPRESSION)"}function V(){w=f.mode==="DO_BLOCK",l.length>0&&(f=l.pop())}function $(e,t){for(var n=0;n<e.length;n++)if(B(e[n])[0]!=t)return!1;return!0}function J(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function K(e){var t=v,r=n.charAt(t);while(J(r,h)&&r!=e){t++;if(t>=P)return 0;r=n.charAt(t)}return r}function Q(){x=0;if(v>=P)return["","TK_EOF"];E=!1;var e=n.charAt(v);v+=1;var t=M&&W(f.mode);if(t){var i=0;while(J(e,h)){e==="\n"?(H(),r.push("\n"),S=!0,i=0):e==="	"?i+=4:e!=="\r"&&(i+=1);if(v>=P)return["","TK_EOF"];e=n.charAt(v),v+=1}f.indentation_baseline===-1&&(f.indentation_baseline=i);if(S){var u;for(u=0;u<f.indentation_level+1;u+=1)r.push(c);if(f.indentation_baseline!==-1)for(u=0;u<i-f.indentation_baseline;u++)r.push(" ")}}else{while(J(e,h)){e==="\n"&&(x+=A?x<=A?1:0:1);if(v>=P)return["","TK_EOF"];e=n.charAt(v),v+=1}if(L&&x>1)for(u=0;u<x;u+=1)F(u===0),S=!0;E=x>0}if(J(e,p)){if(v<P)while(J(n.charAt(v),p)){e+=n.charAt(v),v+=1;if(v===P)break}if(v===P||!e.match(/^[0-9]+[Ee]$/)||n.charAt(v)!=="-"&&n.charAt(v)!=="+")return e==="in"?[e,"TK_OPERATOR"]:(E&&s!=="TK_OPERATOR"&&s!=="TK_EQUALS"&&!f.if_line&&(L||o!=="var")&&F(),[e,"TK_WORD"]);var a=n.charAt(v);v+=1;var l=Q(v);return e+=a+l[0],[e,"TK_WORD"]}if(e==="("||e==="[")return[e,"TK_START_EXPR"];if(e===")"||e==="]")return[e,"TK_END_EXPR"];if(e==="{")return[e,"TK_START_BLOCK"];if(e==="}")return[e,"TK_END_BLOCK"];if(e===";")return[e,"TK_SEMICOLON"];if(e==="/"){var m="",y=!0;if(n.charAt(v)==="*"){v+=1;if(v<P)while((n.charAt(v)!=="*"||!n.charAt(v+1)||n.charAt(v+1)!=="/")&&v<P){e=n.charAt(v),m+=e;if(e==="\r"||e==="\n")y=!1;v+=1;if(v>=P)break}return v+=2,y?["/*"+m+"*/","TK_INLINE_COMMENT"]:["/*"+m+"*/","TK_BLOCK_COMMENT"]}if(n.charAt(v)==="/"){m=e;while(n.charAt(v)!=="\r"&&n.charAt(v)!=="\n"){m+=n.charAt(v),v+=1;if(v>=P)break}return v+=1,E&&F(),[m,"TK_COMMENT"]}}if(e==="'"||e==='"'||e==="/"&&(s==="TK_WORD"&&J(o,["return","do"])||s==="TK_COMMENT"||s==="TK_START_EXPR"||s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_OPERATOR"||s==="TK_EQUALS"||s==="TK_EOF"||s==="TK_SEMICOLON")){var b=e,w=!1,T=e;if(v<P)if(b==="/"){var N=!1;while(w||N||n.charAt(v)!==b){T+=n.charAt(v),w?w=!1:(w=n.charAt(v)==="\\",n.charAt(v)==="["?N=!0:n.charAt(v)==="]"&&(N=!1)),v+=1;if(v>=P)return[T,"TK_STRING"]}}else while(w||n.charAt(v)!==b){T+=n.charAt(v),w?w=!1:w=n.charAt(v)==="\\",v+=1;if(v>=P)return[T,"TK_STRING"]}v+=1,T+=b;if(b==="/")while(v<P&&J(n.charAt(v),p))T+=n.charAt(v),v+=1;return[T,"TK_STRING"]}if(e==="#"){if(r.length===0&&n.charAt(v)==="!"){T=e;while(v<P&&e!="\n")e=n.charAt(v),T+=e,v+=1;return r.push(B(T)+"\n"),F(),Q()}var C="#";if(v<P&&J(n.charAt(v),g)){do e=n.charAt(v),C+=e,v+=1;while(v<P&&e!=="#"&&e!=="=");return e!=="#"&&(n.charAt(v)==="["&&n.charAt(v+1)==="]"?(C+="[]",v+=2):n.charAt(v)==="{"&&n.charAt(v+1)==="}"&&(C+="{}",v+=2)),[C,"TK_WORD"]}}if(e==="<"&&n.substring(v-1,v+3)==="<!--")return v+=3,f.in_html_comment=!0,["<!--","TK_COMMENT"];if(e==="-"&&f.in_html_comment&&n.substring(v-1,v+2)==="-->")return f.in_html_comment=!1,v+=2,E&&F(),["-->","TK_COMMENT"];if(J(e,d)){while(v<P&&J(e+n.charAt(v),d)){e+=n.charAt(v),v+=1;if(v>=P)break}return e==="="?[e,"TK_EQUALS"]:[e,"TK_OPERATOR"]}return[e,"TK_UNKNOWN"]}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T="";t=t?t:{};var N;t.space_after_anon_function!==undefined&&t.jslint_happy===undefined&&(t.jslint_happy=t.space_after_anon_function),t.braces_on_own_line!==undefined&&(N=t.braces_on_own_line?"expand":"collapse"),N=t.brace_style?t.brace_style:N?N:"collapse";var C=t.indent_size?t.indent_size:4,k=t.indent_char?t.indent_char:" ",L=typeof t.preserve_newlines=="undefined"?!0:t.preserve_newlines,A=typeof t.max_preserve_newlines=="undefined"?!1:t.max_preserve_newlines,O=t.jslint_happy==="undefined"?!1:t.jslint_happy,M=typeof t.keep_array_indentation=="undefined"?!1:t.keep_array_indentation,_=typeof t.space_before_conditional=="undefined"?!0:t.space_before_conditional,D=typeof t.indent_case=="undefined"?!1:t.indent_case;S=!1;var P=e.length;c="";while(C>0)c+=k,C-=1;while(e&&(e[0]===" "||e[0]==="	"))T+=e[0],e=e.substring(1);n=e,a="",s="TK_START_EXPR",o="",u="",r=[],w=!1,h="\n\r	 ".split(""),p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),g="0123456789".split(""),d="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",d+=" <%= <% %> <?= <? ?>",d=d.split(" "),m="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),l=[],z("BLOCK"),v=0;for(;;){var G=Q(v);i=G[0],b=G[1];if(b==="TK_EOF")break;switch(b){case"TK_START_EXPR":if(i==="["){if(s==="TK_WORD"||o===")"){J(o,m)&&I(),z("(EXPRESSION)"),q();break}f.mode==="[EXPRESSION]"||f.mode==="[INDENTED-EXPRESSION]"?u==="]"&&o===","?(f.mode==="[EXPRESSION]"&&(f.mode="[INDENTED-EXPRESSION]",M||R()),z("[EXPRESSION]"),M||F()):o==="["?(f.mode==="[EXPRESSION]"&&(f.mode="[INDENTED-EXPRESSION]",M||R()),z("[EXPRESSION]"),M||F()):z("[EXPRESSION]"):z("[EXPRESSION]")}else z("(EXPRESSION)");o===";"||s==="TK_START_BLOCK"?F():s!=="TK_END_EXPR"&&s!=="TK_START_EXPR"&&s!=="TK_END_BLOCK"&&o!=="."&&(s!=="TK_WORD"&&s!=="TK_OPERATOR"?I():a==="function"||a==="typeof"?O&&I():(J(o,m)||o==="catch")&&_&&I()),q();break;case"TK_END_EXPR":if(i==="]")if(M){if(o==="}"){U(),q(),V();break}}else if(f.mode==="[INDENTED-EXPRESSION]"&&o==="]"){V(),F(),q();break}V(),q();break;case"TK_START_BLOCK":a==="do"?z("DO_BLOCK"):z("BLOCK");if(N=="expand"||N=="expand-strict"){var Y=!1;N=="expand-strict"?(Y=K()=="}",Y||F(!0)):s!=="TK_OPERATOR"&&(o==="return"||o==="="?I():F(!0)),q(),Y||R()}else s!=="TK_OPERATOR"&&s!=="TK_START_EXPR"?s==="TK_START_BLOCK"?F():I():W(f.previous_mode)&&o===","&&(u==="}"?I():F()),R(),q();break;case"TK_END_BLOCK":V(),N=="expand"||N=="expand-strict"?(o!=="{"&&F(),q()):(s==="TK_START_BLOCK"?S?U():H():W(f.mode)&&M?(M=!1,F(),M=!0):F(),q());break;case"TK_WORD":if(w){I(),q(),I(),w=!1;break}if(i==="function"){f.var_line&&(f.var_line_reindented=!0);if((S||o===";")&&o!=="{"&&s!="TK_BLOCK_COMMENT"&&s!="TK_COMMENT"){x=S?x:0,L||(x=1);for(var Z=0;Z<2-x;Z++)F(!1)}}if(i==="case"||i==="default"){o===":"||f.case_body?U():(D||f.indentation_level--,F(),D||f.indentation_level++),q(),f.in_case=!0,f.case_body=!1;break}y="NONE",s==="TK_END_BLOCK"?J(i.toLowerCase(),["else","catch","finally"])?N=="expand"||N=="end-expand"||N=="expand-strict"?y="NEWLINE":(y="SPACE",I()):y="NEWLINE":s!=="TK_SEMICOLON"||f.mode!=="BLOCK"&&f.mode!=="DO_BLOCK"?s==="TK_SEMICOLON"&&X(f.mode)?y="SPACE":s==="TK_STRING"?y="NEWLINE":s==="TK_WORD"?(o==="else"&&H(!0),y="SPACE"):s==="TK_START_BLOCK"?y="NEWLINE":s==="TK_END_EXPR"&&(I(),y="NEWLINE"):y="NEWLINE",J(i,m)&&o!==")"&&(o=="else"?y="SPACE":y="NEWLINE"),f.if_line&&s==="TK_END_EXPR"&&(f.if_line=!1);if(J(i.toLowerCase(),["else","catch","finally"]))s!=="TK_END_BLOCK"||N=="expand"||N=="end-expand"||N=="expand-strict"?F():(H(!0),I());else if(y==="NEWLINE"){if(s!=="TK_START_EXPR"&&o!=="="&&o!==","||i!=="function")i==="function"&&o=="new"?I():o==="return"||o==="throw"?I():s!=="TK_END_EXPR"?(s!=="TK_START_EXPR"||i!=="var")&&o!==":"&&(i==="if"&&a==="else"&&o!=="{"?I():(f.var_line=!1,f.var_line_reindented=!1,F())):J(i,m)&&o!=")"&&(f.var_line=!1,f.var_line_reindented=!1,F())}else W(f.mode)&&o===","&&u==="}"?F():y==="SPACE"&&I();q(),a=i,i==="var"&&(f.var_line=!0,f.var_line_reindented=!1,f.var_line_tainted=!1),i==="if"&&(f.if_line=!0),i==="else"&&(f.if_line=!1);break;case"TK_SEMICOLON":q(),f.var_line=!1,f.var_line_reindented=!1,f.mode=="OBJECT"&&(f.mode="BLOCK");break;case"TK_STRING":s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_SEMICOLON"?F():s==="TK_WORD"&&I(),q();break;case"TK_EQUALS":f.var_line&&(f.var_line_tainted=!0),I(),q(),I();break;case"TK_OPERATOR":var et=!0,tt=!0;f.var_line&&i===","&&X(f.mode)&&(f.var_line_tainted=!1);if(f.var_line&&i===","){if(f.var_line_tainted){q(),f.var_line_reindented=!0,f.var_line_tainted=!1,F();break}f.var_line_tainted=!1}if(o==="return"||o==="throw"){I(),q();break}if(i===":"&&f.in_case){D&&(f.case_body=!0),q(),F(),f.in_case=!1;break}if(i==="::"){q();break}if(i===","){f.var_line?f.var_line_tainted?(q(),F(),f.var_line_tainted=!1):(q(),I()):s==="TK_END_BLOCK"&&f.mode!=="(EXPRESSION)"?(q(),f.mode==="OBJECT"&&o==="}"?F():I()):f.mode==="OBJECT"?(q(),F()):(q(),I());break}J(i,["--","++","!"])||J(i,["-","+"])&&(J(s,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||J(o,m))?(et=!1,tt=!1,o===";"&&X(f.mode)&&(et=!0),s==="TK_WORD"&&J(o,m)&&(et=!0),f.mode==="BLOCK"&&(o==="{"||o===";")&&F()):i==="."?et=!1:i===":"?f.ternary_depth==0?(f.mode="OBJECT",et=!1):f.ternary_depth-=1:i==="?"&&(f.ternary_depth+=1),et&&I(),q(),tt&&I(),i==="!";break;case"TK_BLOCK_COMMENT":var nt=i.split(/\x0a|\x0d\x0a/);if($(nt.slice(1),"*")){F(),r.push(nt[0]);for(Z=1;Z<nt.length;Z++)F(),r.push(" "),r.push(B(nt[Z]))}else{nt.length>1?(F(),H()):I();for(Z=0;Z<nt.length;Z++)r.push(nt[Z]),r.push("\n")}K("\n")!="\n"&&F();break;case"TK_INLINE_COMMENT":I(),q(),X(f.mode)?I():j();break;case"TK_COMMENT":E?F():I(),q(),K("\n")!="\n"&&j();break;case"TK_UNKNOWN":(o==="return"||o==="throw")&&I(),q()}u=o,s=b,o=i}var rt=T+r.join("").replace(/[\n ]+$/,"");return rt}(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o,t)}},u=function(e,t){var r={id:e,exports:{}};return n[e]=r,t(r.exports,o(e),r),r.exports},a=function(e,s){var o=i(e,".");s==null&&(s="/");if(r(n,o))return n[o].exports;if(r(t,o))return u(o,t[o]);var a=i(o,"./index");if(r(n,a))return n[a].exports;if(r(t,a))return u(a,t[a]);throw new Error('Cannot find module "'+e+'" from '+'"'+s+'"')},f=function(e,n){if(typeof e=="object")for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n},l=function(){var e=[];for(var n in t)r(t,n)&&e.push(n);return e};e.require=a,e.require.define=f,e.require.register=f,e.require.list=l,e.require.brunch=!0})(),function(e){var t,n=function(){},r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");while(t=r.pop())e[t]=e[t]||n}(window.console=window.console||{}),function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(s.expando)}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function vt(e,t){t.src?s.ajax({url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function Lt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?xt:Tt,o=0,u=i.length;if(r>0){if(n!=="border")for(;o<u;o++)n||(r-=parseFloat(s.css(e,"padding"+i[o]))||0),n==="margin"?r+=parseFloat(s.css(e,n+i[o]))||0:r-=parseFloat(s.css(e,"border"+i[o]+"Width"))||0;return r+"px"}r=Nt(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;o<u;o++)r+=parseFloat(s.css(e,"padding"+i[o]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+i[o]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+i[o]))||0);return r+"px"}function Gt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(Rt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Yt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Xt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Yt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Yt(e,n,r,i,"*",o)),c}function Zt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function en(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||Ot.test(e)?r(e,i):en(e+"["+(typeof i=="object"||s.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)en(e+"["+i+"]",t[i],n,r);else r(e,t)}function tn(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function nn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function fn(){try{return new e.XMLHttpRequest}catch(t){}}function ln(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function bn(){return setTimeout(wn,0),yn=s.now()}function wn(){yn=t}function En(e,t){var n={};return s.each(gn.concat.apply([],gn.slice(0,t)),function(){n[this]=e}),n}function Sn(e){if(!cn[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){hn||(hn=n.createElement("iframe"),hn.frameBorder=hn.width=hn.height=0),t.appendChild(hn);if(!pn||!hn.createElement)pn=(hn.contentWindow||hn.contentDocument).document,pn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),pn.close();r=pn.createElement(e),pn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(hn)}cn[e]=i}return cn[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)i.access(e,f,n[f],s,o,r);return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++)o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test(" ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?h(o):u==="function"&&(!e.unique||!d.has(o))&&n.push(o)},p=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,c=f||0,f=0,l=n.length;for(;n&&c<l;c++)if(n[c].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}a=!1,n&&(e.once?i===!0?d.disable():n=[]:r&&r.length&&(i=r.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(n){var e=n.length;h(arguments),a?l=n.length:i&&i!==!0&&(f=e,p(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){a&&s<=l&&(l--,s<=c&&c--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(a?e.once||r.push([t,n]):(!e.once||!i)&&p(t,n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v,m=n.createElement("div"),g=n.documentElement;m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=m.getElementsByTagName("*"),i=m.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=m.getElementsByTagName("input")[0],t={leadingWhitespace:m.firstChild.nodeType===3,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:m.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete m.test}catch(y){t.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){t.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),m.appendChild(a),l=n.createDocumentFragment(),l.appendChild(m.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,l.removeChild(a),l.appendChild(m),m.innerHTML="",e.getComputedStyle&&(f=n.createElement("div"),f.style.width="0",f.style.marginRight="0",m.style.width="2px",m.appendChild(f),t.reliableMarginRight=(parseInt((e.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);if(m.attachEvent)for(d in{submit:1,change:1,focusin:1})p="on"+d,v=p in m,v||(m.setAttribute(p,"return;"),v=typeof m[p]=="function"),t[d+"Bubbles"]=v;return l.removeChild(m),l=o=u=f=m=a=null,s(function(){var e,r,i,o,u,a,f,l,h,p,d,g=n.getElementsByTagName("body")[0];if(!g)return;f=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",h="visibility:hidden;border:0;",p="style='"+l+"border:5px solid #000;padding:0;'",d="<div "+p+"><div></div></div>"+"<table "+p+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=n.createElement("div"),e.style.cssText=h+"width:0;height:0;position:static;top:0;margin-top:"+f+"px",g.insertBefore(e,g.firstChild),m=n.createElement("div"),e.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=m.getElementsByTagName("td"),v=c[0].offsetHeight===0,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=v&&c[0].offsetHeight===0,m.innerHTML="",m.style.width=m.style.paddingLeft="1px",s.boxModel=t.boxModel=m.offsetWidth===2,typeof m.style.zoom!="undefined"&&(m.style.display="inline",m.style.zoom=1,t.inlineBlockNeedsLayout=m.offsetWidth===2,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=m.offsetWidth!==2),m.style.cssText=l+h,m.innerHTML=d,r=m.firstChild,i=r.firstChild,u=r.nextSibling.firstChild.firstChild,a={doesNotAddBorder:i.offsetTop!==5,doesAddBorderForTableAndCells:u.offsetTop===5},i.style.position="fixed",i.style.top="20px",a.fixedPosition=i.offsetTop===20||i.offsetTop===15,i.style.position=i.style.top="",r.style.overflow="hidden",r.style.position="relative",a.subtractsBorderForOverflowNotVisible=i.offsetTop===-5,a.doesNotIncludeMarginInBodyOffset=g.offsetTop!==f,g.removeChild(e),m=e=null,s.extend(t,a)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e=="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++)o=i[a].name,o.indexOf("data-")===0&&(o=s.camelCase(o.substring(5)),c(this[0],o,u[o]));s._data(this[0],"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(u=this.triggerHandler("getData"+r[1]+"!",[r[0]]),u===t&&this.length&&(u=s.data(this[0],e),u=c(this[0],e,u)),u===t&&r[1]?this.data(r[0]):u):this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),s.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?s.queue(this[0],e):this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise()}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,!0,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,e,t,!0,s.prop)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;u<o;u++)i=r[u],i&&(n=s.propFix[i]||i,s.attr(e,i,""),e.removeAttribute(E?i:n),w.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/\bhover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=[],f,l,c,h,p,d,v,m,g,y,b;o[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){h=s(this),h.context=this.ownerDocument||this;for(c=n.target;c!=this;c=c.parentNode||this){d={},m=[],h[0]=c;for(f=0;f<i;f++)g=r[f],y=g.selector,d[y]===t&&(d[y]=g.quick?D(c,g.quick):h.is(y)),d[y]&&m.push(g);m.length&&a.push({elem:c,matches:m})}}r.length>i&&a.push({elem:this,matches:r.slice(i)});for(f=0;f<a.length&&!n.isPropagationStopped();f++){v=a[f],n.currentTarget=v.elem;for(l=0;l<v.matches.length&&!n.isImmediatePropagationStopped();l++){g=v.matches[l];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace))n.data=g.data,n.handleObj=g,p=((s.event.special[g.origType]||{}).handle||g.handler).apply(v.elem,o),p!==t&&(n.result=p,p===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.POS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.isFunction(e)?this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):s.text(this)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(s.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else s.isFunction(e)?this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,vt)}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||!nt.test("<"+e.nodeName)?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o;t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!Z.test(l))l=t.createTextNode(l);else{l=l.replace(Q,"<$1></$2>");var c=(G.exec(l)||["",""])[1].toLowerCase(),h=ot[c]||ot._default,p=h[0],d=t.createElement("div");t===n?ut.appendChild(d):V(t).appendChild(d),d.innerHTML=h[1]+l+h[2];while(p--)d=d.lastChild;if(!s.support.tbody){var v=Y.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a)s.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!s.support.leadingWhitespace&&K.test(l)&&d.insertBefore(t.createTextNode(K.exec(l)[0]),d.firstChild),l=d.childNodes}var g;if(!s.support.appendChecked)if(l[0]&&typeof (g=l.length)=="number")for(a=0;a<g;a++)pt(l[a]);else pt(l);l.nodeType?u.push(l):u=s.merge(u,l)}if(r){o=function(e){return!e.type||it.test(e.type)};for(f=0;u[f];f++)if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript"))i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f]);else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var mt=/alpha\([^)]*\)/i,gt=/opacity=([^)]*)/,yt=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,wt=/^-?\d/,Et=/^([\-+])=([\-+.\de]+)/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Left","Right"],Tt=["Top","Bottom"],Nt,Ct,kt;s.fn.css=function(e,n){return arguments.length===2&&n===t?this:s.access(this,e,n,!0,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Nt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=Et.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Nt)return Nt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),s.curCSS=s.css,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?Lt(e,t,r):(s.swap(e,St,function(){i=Lt(e,t,r)}),i)},set:function(e,t){if(!bt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(mt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=mt.test(o)?o.replace(mt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){var n;return s.swap(e,{display:"inline-block"},function(){t?n=Nt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),n.defaultView&&n.defaultView.getComputedStyle&&(Ct=function(e,t){var n,r,i;return t=t.replace(yt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),n}),n.documentElement.currentStyle&&(kt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!bt.test(s)&&wt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Nt=Ct||kt,s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)});var At=/%20/g,Ot=/\[\]$/,Mt=/\r?\n/g,_t=/#.*$/,Dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Pt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ht=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ft=/\?/,It=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,qt=/^(?:select|textarea)/i,Rt=/\s+/,Ut=/([?&])_=[^&]*/,zt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Wt=s.fn.load,Xt={},Vt={},$t,Jt,Kt=["*/"]+["*"];try{$t=i.href}catch(Qt){$t=n.createElement("a"),$t.href="",$t=$t.href}Jt=zt.exec($t.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&Wt)return Wt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(It,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||qt.test(this.nodeName)||Pt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Zt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Zt(e,t),e},ajaxSettings:{url:$t,isLocal:Ht.test(Jt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Kt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Gt(Xt),ajaxTransport:Gt(Vt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?tn(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=nn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=Dt.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(_t,"").replace(jt,Jt[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(Rt),r.crossDomain==null&&(g=zt.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==Jt[1]&&g[2]==Jt[2]&&(g[3]||(g[1]==="http:"?80:443))==(Jt[3]||(Jt[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Yt(Xt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Bt.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(Ft.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Ut,"$1_="+x);r.url=T+(T===r.url?(Ft.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Kt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Yt(Vt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)en(o,e[o],n,i);return r.join("&").replace(At,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var rn=s.now(),sn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+rn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(sn.test(t.url)||i&&sn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(sn,c),t.url===f&&(i&&(l=l.replace(sn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var on=e.ActiveXObject?function(){for(var e in an)an[e](0,1)}:!1,un=0,an;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&fn()||ln()}:fn,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,on&&delete an[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p),h.text=u.responseText;try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++un,on&&(an||(an={},s(e).unload(on)),an[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var cn={},hn,pn,dn=/^(?:toggle|show|hide)$/,vn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,mn,gn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],yn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(En("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),i===""&&s.css(r,"display")==="none"&&s._data(r,"olddisplay",Sn(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(En("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(En("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]),u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||Sn(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],dn.test(u)?(d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),d?(s._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=vn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(s.cssNumber[a]?"":"px"),p!=="px"&&(s.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,s.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:En("show",1),slideUp:En("hide",1),slideToggle:En("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=yn||bn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t&&s._data(i.elem,"fxshow"+i.prop,i.start)},u()&&s.timers.push(u)&&!mn&&(mn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=yn||bn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(mn),mn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?s.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=i.body,a=Nn(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:s.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===r&&(c+=t.offsetTop,h+=t.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return s.support.fixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;return n===t?(i=this[0],i?(o=Nn(i),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]):null):this.each(function(){o=Nn(this),o?o.scrollTo(e?s(o).scrollLeft():n,e?n:s(o).scrollTop()):this[r]=n})}}),s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null},s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null},s.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(s.isFunction(e))return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))});if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})}(window),function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),i&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var f=this.relative_container.offset();u=[this.containment[0]+f.left,this.containment[1]+f.top,this.containment[2]+f.left,this.containment[3]+f.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var l=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?l-this.offset.click.top<u[1]||l-this.offset.click.top>u[3]?l-this.offset.click.top<u[1]?l+n.grid[1]:l-n.grid[1]:l:l;var c=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?c-this.offset.click.left<u[0]||c-this.offset.click.left>u[2]?c-this.offset.click.left<u[0]?c+n.grid[0]:c-n.grid[0]:c:c}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.23"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,f=t.top,l=t.left;return e.ui.isOver(i+n,s+r,f,l,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,f=n.offset.top,l=f+r.helperProportions.height;for(var c=r.snapElements.length-1;c>=0;c--){var h=r.snapElements[c].left,p=h+r.snapElements[c].width,d=r.snapElements[c].top,v=d+r.snapElements[c].height;if(!(h-s<o&&o<p+s&&d-s<f&&f<v+s||h-s<o&&o<p+s&&d-s<l&&l<v+s||h-s<u&&u<p+s&&d-s<f&&f<v+s||h-s<u&&u<p+s&&d-s<l&&l<v+s)){r.snapElements[c].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=!1;continue}if(i.snapMode!="inner"){var m=Math.abs(d-l)<=s,g=Math.abs(v-f)<=s,y=Math.abs(h-u)<=s,b=Math.abs(p-o)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p}).left-r.margins.left)}var w=m||g||y||b;if(i.snapMode!="outer"){var m=Math.abs(d-f)<=s,g=Math.abs(v-l)<=s,y=Math.abs(h-o)<=s,b=Math.abs(p-u)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[c].snapping&&(m||g||y||b||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=m||g||y||b||w}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),function(b){var Ca=Math.min,D=Math.max,qa=Math.floor,S=function(e){return"string"===b.type(e)},ja=function(a,c){if(b.isArray(c))for(var d=0,f=c.length;d<f;d++){var h=c[d];try{S(h)&&(h=eval(h)),b.isFunction(h)&&h(a)}catch(j){}}};b.layout={version:"1.3.rc30.62",revision:.033006,browser:{mozilla:!!b.browser.mozilla,webkit:!!b.browser.webkit||!!b.browser.safari,msie:!!b.browser.msie,isIE6:b.browser.msie&&6==b.browser.version,boxModel:!1!==b.support.boxModel||!b.browser.msie,version:b.browser.version},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"Top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"Bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"Right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"Left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){e=b(e);if(e=e.data("layout")||e.data("parentLayout")){e=e.container;if(e.data("layoutPane"))return e;e=e.closest("."+b.layout.defaults.panes.paneClass);if(e.data("layoutPane"))return e}return null},getParentPaneInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("layoutPane"):null},getParentLayoutInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("parentLayout"):null},getEventObject:function(e){return"object"==typeof e&&e.stopPropagation?e:null},parsePaneName:function(e){var t=b.layout.getEventObject(e);return t?(t.stopPropagation(),b(this).data("layoutEdge")):e},plugins:{draggable:!!b.fn.draggable,effects:{core:!!b.effects,slide:b.effects&&b.effects.slide}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||b.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||b.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=b('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n=e[0].style,n={display:n.display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),n}return{}},getElementDimensions:function(e){var t={},n=t.css={},r={},i,s,o=b.layout.cssNum,u=e.offset();return t.offsetLeft=u.left,t.offsetTop=u.top,b.each(["Left","Right","Top","Bottom"],function(o,u){i=n["border"+u]=b.layout.borderWidth(e,u),s=n["padding"+u]=b.layout.cssNum(e,"padding"+u),r[u]=i+s,t["inset"+u]=s}),t.offsetWidth=e.innerWidth(),t.offsetHeight=e.innerHeight(),t.outerWidth=e.outerWidth(),t.outerHeight=e.outerHeight(),t.innerWidth=D(0,t.outerWidth-r.Left-r.Right),t.innerHeight=D(0,t.outerHeight-r.Top-r.Bottom),n.width=e.width(),n.height=e.height(),n.top=o(e,"top",!0),n.bottom=o(e,"bottom",!0),n.left=o(e,"left",!0),n.right=o(e,"right",!0),t},getElementCSS:function(e,t){var n={},r=e[0].style,i=t.split(","),s=["Top","Bottom","Left","Right"],o=["Color","Style","Width"],u,a,f,l,c,h;for(l=0;l<i.length;l++)if(u=i[l],u.match(/(border|padding|margin)$/))for(c=0;4>c;c++)if(a=s[c],"border"===u)for(h=0;3>h;h++)f=o[h],n[u+a+f]=r[u+a+f];else n[u+a]=r[u+a];else n[u]=r[u];return n},cssWidth:function(e,t){if(0>=t)return 0;if(!b.layout.browser.boxModel)return t;var n=b.layout.borderWidth,r=b.layout.cssNum,n=t-n(e,"Left")-n(e,"Right")-r(e,"paddingLeft")-r(e,"paddingRight");return D(0,n)},cssHeight:function(e,t){if(0>=t)return 0;if(!b.layout.browser.boxModel)return t;var n=b.layout.borderWidth,r=b.layout.cssNum,n=t-n(e,"Top")-n(e,"Bottom")-r(e,"paddingTop")-r(e,"paddingBottom");return D(0,n)},cssNum:function(e,t,n){e.jquery||(e=b(e));var r=b.layout.showInvisibly(e),t=b.css(e[0],t,!0),n=n&&"auto"==t?t:parseInt(t,10)||0;return e.css(r),n},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===b.css(e,n+"Style",!0)?0:parseInt(b.css(e,n+"Width",!0),10)||0},isMouseOverElem:function(e,t){var n=b(t||this),r=n.offset(),i=r.top,r=r.left,s=r+n.outerWidth(),n=i+n.outerHeight(),o=e.pageX,u=e.pageY;return b.layout.browser.msie&&0>o&&0>u||o>=r&&o<=s&&u>=i&&u<=n},msg:function(e,t,n,r){b.isPlainObject(e)&&window.debugData?("string"==typeof t?(r=n,n=t):"object"==typeof n&&(r=n,n=null),n=n||"log( <object> )",r=b.extend({sort:!1,returnHTML:!1,display:!1},r),!0===t||r.display?debugData(e,n,r):window.console&&console.log(debugData(e,n,r))):t?alert(e):window.console?console.log(e):(t=b("#layoutLogger"),t.length||(t=b('<div id="layoutLogger" style="position: '+(b.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),t.css("left",b(window).width()-t.outerWidth()-5),b.ui.draggable&&t.draggable({handle:":first-child"})),t.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}},b.layout.defaults={name:"",containerSelector:"",containerClass:"ui-layout-container",scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button \n\nInvalid ",containerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\n\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:b.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,childOptions:null,initChildLayout:!0,destroyChildLayout:!0,resizeChildLayout:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},b.layout.optionsMap={layout:"stateManagement effects zIndexes errors name zIndex scrollToBookmarkOnLoad showErrorMessages resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onunload".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing childOptions initChildLayout resizeChildLayout destroyChildLayout onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]},b.layout.transformData=function(e){var t={panes:{},center:{}},n,r,i,s,o,u,a;if("object"!=typeof e)return t;for(r in e){n=t,o=e[r],i=r.split("__"),a=i.length-1;for(u=0;u<=a;u++)s=i[u],u===a?n[s]=o:n[s]||(n[s]={}),n=n[s]}return t},b.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",resizeNestedLayout:"resizeChildLayout",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){function t(t,n){for(var r=t.split("."),i=r.length-1,s={branch:e,key:r[i]},o=0,u;o<i;o++)u=r[o],s.branch=void 0==s.branch[u]?n?s.branch[u]={}:{}:s.branch[u];return s}var n=b.layout.backwardCompatibility.map,r,i,s,o;for(o in n)r=t(o),s=r.branch[r.key],void 0!==s&&(i=t(n[o],!0),i.branch[i.key]=s,delete r.branch[r.key])},renameAllOptions:function(e){var t=b.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!=typeof e.panes&&(e.panes={}),b.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),b.each(b.layout.config.allPanes,function(n,r){e[r]&&t(e[r])}),e}},b.fn.layout=function(a){function c(e){if(!e)return!0;var n=e.keyCode;if(33>n)return!0;var r={38:"north",40:"south",37:"west",39:"east"},i=e.shiftKey,s=e.ctrlKey,u,a,f,l;return s&&37<=n&&40>=n&&p[r[n]].enableCursorHotkey?l=r[n]:(s||i)&&b.each(j.borderPanes,function(e,t){u=p[t],a=u.customHotkey,f=u.customHotkeyModifier;if(i&&"SHIFT"==f||s&&"CTRL"==f||s&&i)if(a&&n===(isNaN(a)||9>=a?a.toUpperCase().charCodeAt(0):a))return l=t,!1}),!l||!t[l]||!p[l].closable||o[l].isHidden?!0:(ka(l),e.stopPropagation(),e.returnValue=!1)}function d(e){if(E()){this&&this.tagName&&(e=this);var n;S(e)?n=t[e]:b(e).data("layoutRole")?n=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole"))return n=b(this),!1});if(n&&n.length){var r=n.data("layoutEdge"),e=o[r];e.cssSaved&&f(r);if(e.isSliding||e.isResizing||e.isClosed)e.cssSaved=!1;else{var i={zIndex:p.zIndexes.resizer_normal+1},s={},u=n.css("overflow"),a=n.css("overflowX"),l=n.css("overflowY");"visible"!=u&&(s.overflow=u,i.overflow="visible"),a&&!a.match(/(visible|auto)/)&&(s.overflowX=a,i.overflowX="visible"),l&&!l.match(/(visible|auto)/)&&(s.overflowY=a,i.overflowY="visible"),e.cssSaved=s,n.css(i),b.each(j.allPanes,function(e,t){t!=r&&f(t)})}}}}function f(e){if(E()){this&&this.tagName&&(e=this);var n;S(e)?n=t[e]:b(e).data("layoutRole")?n=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole"))return n=b(this),!1});if(n&&n.length){var e=n.data("layoutEdge"),e=o[e],r=e.cssSaved||{};!e.isSliding&&!e.isResizing&&n.css("zIndex",p.zIndexes.pane_normal),n.css(r),e.cssSaved=!1}}}var h=b.layout.browser,j=b.layout.config,m=b.layout.cssWidth,r=b.layout.cssHeight,y=b.layout.getElementDimensions,T=b.layout.getElementCSS,I=b.layout.getEventObject,x=b.layout.parsePaneName,p=b.extend(!0,{},b.layout.defaults);p.effects=b.extend(!0,{},b.layout.effects);var o={id:"layout"+b.now(),initialized:!1,container:{},north:{},south:{},east:{},west:{},center:{}},M={north:null,south:null,east:null,west:null,center:null},F={data:{},set:function(e,t,n){F.clear(e),F.data[e]=setTimeout(t,n)},clear:function(e){var t=F.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},U=function(e,t,n){var r=p;return(r.showErrorMessages&&!n||n&&r.showDebugMessages)&&b.layout.msg(r.name+" / "+e,!1!==t),!1},A=function(g,w,a){var z=w&&S(w),e=z?o[w]:o,i=z?p[w]:p,c=p.name,d=g+(g.match(/_/)?"":"_end"),k=d.match(/_end$/)?d.substr(0,d.length-4):"",l=i[d]||i[k],j="NC",f=[];!z&&"boolean"!==b.type(a)&&(a=w);if(l)try{S(l)&&(l.match(/,/)?(f=l.split(","),l=eval(f[0])):l=eval(l)),b.isFunction(l)&&(j=f.length?l(f[1]):z?l(w,t[w],e,i,c):l(s,e,i,c))}catch(h){U(p.errors.callbackError.replace(/EVENT/,b.trim(w+" "+d)),!1)}return!a&&!1!==j&&(z?(a=t[w],i=p[w],e=o[w],a.triggerHandler("layoutpane"+d,[w,a,e,i,c]),k&&a.triggerHandler("layoutpane"+k,[w,a,e,i,c])):(u.triggerHandler("layout"+d,[s,e,i,c]),k&&u.triggerHandler("layout"+k,[s,e,i,c]))),("onresize_end"===g||"onsizecontent_end"===g)&&Da(w),j},Ua=function(e){if(!h.mozilla){var n=t[e];"IFRAME"===o[e].tagName?n.css(j.hidden).css(j.visible):n.find("IFRAME").css(j.hidden).css(j.visible)}},ra=function(e){var n=t[e],e=j[e].dir,n={minWidth:1001-m(n,1e3),minHeight:1001-r(n,1e3)};return"horz"===e&&(n.minSize=n.minHeight),"vert"===e&&(n.minSize=n.minWidth),n},V=function(e,n,r){r||(r=j[e].dir),S(n)&&n.match(/%/)&&(n="100%"===n?-1:parseInt(n,10)/100);if(0===n)return 0;if(1<=n)return parseInt(n,10);var i=p,s=0;"horz"==r?s=q.innerHeight-(t.north?i.north.spacing_open:0)-(t.south?i.south.spacing_open:0):"vert"==r&&(s=q.innerWidth-(t.west?i.west.spacing_open:0)-(t.east?i.east.spacing_open:0));if(-1===n)return s;if(0<n)return qa(s*n);if("center"==e)return 0;var r="horz"===r?"height":"width",i=t[e],e="height"===r?L[e]:!1,s=b.layout.showInvisibly(i),o=i.css(r),u=e?e.css(r):0;return i.css(r,"auto"),e&&e.css(r,"auto"),n="height"===r?i.outerHeight():i.outerWidth(),i.css(r,o).css(s),e&&e.css(r,u),n},aa=function(e,n){var r=t[e],i=p[e],s=o[e],u=n?i.spacing_open:0,i=n?i.spacing_closed:0;return!r||s.isHidden?0:s.isClosed||s.isSliding&&n?i:"horz"===j[e].dir?r.outerHeight()+u:r.outerWidth()+u},P=function(e,n){if(E()){var r=p[e],i=o[e],s=j[e],u=s.dir;s.side.toLowerCase(),s.sizeType.toLowerCase();var s=void 0!=n?n:i.isSliding,a=r.spacing_open,f=j.oppositeEdge[e],l=o[f],c=t[f],h=!c||!1===l.isVisible||l.isSliding?0:"horz"==u?c.outerHeight():c.outerWidth(),f=(!c||l.isHidden?0:p[f][!1!==l.isClosed?"spacing_closed":"spacing_open"])||0,l="horz"==u?q.innerHeight:q.innerWidth,c=ra("center"),c="horz"==u?D(p.center.minHeight,c.minHeight):D(p.center.minWidth,c.minWidth),s=l-a-(s?0:V("center",c,u)+h+f),u=i.minSize=D(V(e,r.minSize),ra(e).minSize),s=i.maxSize=Ca(r.maxSize?V(e,r.maxSize):1e5,s),i=i.resizerPosition={},a=q.insetTop,h=q.insetLeft,f=q.innerWidth,l=q.innerHeight,r=r.spacing_open;switch(e){case"north":i.min=a+u,i.max=a+s;break;case"west":i.min=h+u,i.max=h+s;break;case"south":i.min=a+l-s-r,i.max=a+l-u-r;break;case"east":i.min=h+f-s-r,i.max=h+f-u-r}}},Ea=function(e,t){var n=b(e),r=n.data("layoutRole"),i=n.data("layoutEdge"),s=p[i][r+"Class"],i="-"+i,o=n.hasClass(s+"-closed")?"-closed":"-open",u="-closed"===o?"-open":"-closed",o=s+"-hover "+(s+i+"-hover ")+(s+o+"-hover ")+(s+i+o+"-hover ");return t&&(o+=s+u+"-hover "+(s+i+u+"-hover ")),"resizer"==r&&n.hasClass(s+"-sliding")&&(o+=s+"-sliding-hover "+(s+i+"-sliding-hover ")),b.trim(o)},Fa=function(e,t){var n=b(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(Ea(n))},Q=function(e,t){var n=b(t||this);n.removeClass(Ea(n,!0))},Va=function(){b.fn.disableSelection&&b("body").disableSelection()},Wa=function(e,t){var n=t||this,r=b(n).data("layoutEdge"),i=r+"ResizerLeave";F.clear(r+"_openSlider"),F.clear(i),t?!o[r].isResizing&&b.fn.enableSelection&&b("body").enableSelection():F.set(i,function(){Wa(e,n)},200)},E=function(){return o.initialized||o.creatingLayout?!0:sa()},sa=function(e){var n=p;return u.is(":visible")?Xa("center").length?(o.creatingLayout=!0,b.extend(q,y(u)),x(void 0),b.each(j.allPanes,function(e,t){Ya(t,!0)}),Ga(),b.each(j.borderPanes,function(e,n){t[n]&&o[n].isVisible&&(P(n),W(n))}),X("center"),b.each(j.allPanes,function(e,n){var r=p[n];t[n]&&(o[n].isVisible&&(da(n),r.triggerEventsOnLoad?A("onresize_end",n):Da(n)),r.initChildLayout&&r.childOptions&&Ha(n))}),n.scrollToBookmarkOnLoad&&(e=self.location,e.hash&&e.replace(e.hash)),s.hasParentLayout?n.resizeWithWindow=!1:n.resizeWithWindow&&b(window).bind("resize."+H,ob),delete o.creatingLayout,o.initialized=!0,ja(s,b.layout.onReady),A("onload_end"),!0):U(n.errors.centerPaneMissing):(!e&&h.webkit&&"BODY"===u[0].tagName&&setTimeout(function(){sa(!0)},50),!1)},Ha=function(e,n){var r=x.call(this,e),i=t[r];if(i){var o=L[r],u=n||p[r].childOptions,i=u.containerSelector?i.find(u.containerSelector):o||i,a=(o=i.length)?M[r]=i.data("layout")||null:null;!a&&o&&u&&(a=M[r]=i.eq(0).layout(u)||null),a&&(a.hasParentLayout=!0)}s[r].child=M[r]},ob=function(){var e=Number(p.resizeWithWindowDelay);10>e&&(e=100),F.clear("winResize"),F.set("winResize",function(){F.clear("winResize"),F.clear("winResizeRepeater");var e=y(u);(e.innerWidth!==q.innerWidth||e.innerHeight!==q.innerHeight)&&ea()},e),F.data.winResizeRepeater||Za()},Za=function(){var e=Number(p.resizeWithWindowMaxDelay);0<e&&F.set("winResizeRepeater",function(){Za(),ea()},e)},$a=function(){A("onunload_start"),ja(s,b.layout.onUnload),A("onunload_end")},ab=function(e){e=e?e.split(","):j.borderPanes,b.each(e,function(e,t){var n=p[t];if(n.enableCursorHotkey||n.customHotkey)return b(document).bind("keydown."+H,c),!1})},Xa=function(e){e=p[e].paneSelector;if("#"===e.substr(0,1))return u.find(e).eq(0);var t=u.children(e).eq(0);return t.length?t:u.children("form:first").children(e).eq(0)},Ya=function(e,n){if(n||E()){var i=p[e],u=o[e],a=j[e],l=a.dir,c="center"===e,h={},v=t[e],g,y;v?Ia(e,!1,!0,!1):L[e]=!1,v=t[e]=Xa(e);if(v.length){v.data("layoutCSS")||v.data("layoutCSS",T(v,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border")),s[e]={name:e,pane:t[e],content:L[e],options:p[e],state:o[e],child:M[e]},v.data({parentLayout:s,layoutPane:s[e],layoutEdge:e,layoutRole:"pane"}).css(a.cssReq).css("zIndex",p.zIndexes.pane_normal).css(i.applyDemoStyles?a.cssDemo:{}).addClass(i.paneClass+" "+i.paneClass+"-"+e).bind("mouseenter."+H,Fa).bind("mouseleave."+H,Q),a={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildLayout:"",resizeChildLayout:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(y in a)v.bind("layoutpane"+y.toLowerCase()+"."+H,s[a[y]||y]);Ja(e,!1),c||(g=u.size=V(e,i.size),c=V(e,i.minSize)||1,y=V(e,i.maxSize)||1e5,0<g&&(g=D(Ca(g,y),c)),u.isClosed=!1,u.isSliding=!1,u.isResizing=!1,u.isHidden=!1,u.pins||(u.pins=[])),u.tagName=v[0].tagName,u.edge=e,u.noRoom=!1,u.isVisible=!0;switch(e){case"north":h.top=q.insetTop,h.left=q.insetLeft,h.right=q.insetRight;break;case"south":h.bottom=q.insetBottom,h.left=q.insetLeft,h.right=q.insetRight;break;case"west":h.left=q.insetLeft;break;case"east":h.right=q.insetRight}"horz"===l?h.height=r(v,g):"vert"===l&&(h.width=m(v,g)),v.css(h),"horz"!=l&&X(e,!0),i.initClosed&&i.closable&&!i.initHidden?Y(e,!0,!0):i.initHidden||i.initClosed?Ka(e):u.noRoom||v.css("display","block"),v.css("visibility","visible"),i.showOverflowOnHover&&v.hover(d,f),o.initialized&&(Ga(e),ab(e),ea(),u.isVisible&&(i.triggerEventsOnLoad?A("onresize_end",e):Da(e)),i.initChildLayout&&i.childOptions&&Ha(e))}else t[e]=!1}},Ga=function(e){e=e?e.split(","):j.borderPanes,b.each(e,function(e,n){var r=t[n];B[n]=!1,J[n]=!1;if(r){var i=p[n],r=o[n],a=j[n],f="#"===i.paneSelector.substr(0,1)?i.paneSelector.substr(1):"",l=i.resizerClass,c=i.togglerClass;a.side.toLowerCase();var a="-"+n,h=s[n],d=h.resizer=B[n]=b("<div></div>"),h=h.toggler=i.closable?J[n]=b("<div></div>"):!1;!r.isVisible&&i.slidable&&d.attr("title",i.tips.Slide).css("cursor",i.sliderCursor),d.attr("id",f?f+"-resizer":"").data({parentLayout:s,layoutPane:s[n],layoutEdge:n,layoutRole:"resizer"}).css(j.resizers.cssReq).css("zIndex",p.zIndexes.resizer_normal).css(i.applyDemoStyles?j.resizers.cssDemo:{}).addClass(l+" "+l+a).hover(Fa,Q).hover(Va,Wa).appendTo(u),h&&(h.attr("id",f?f+"-toggler":"").data({parentLayout:s,layoutPane:s[n],layoutEdge:n,layoutRole:"toggler"}).css(j.togglers.cssReq).css(i.applyDemoStyles?j.togglers.cssDemo:{}).addClass(c+" "+c+a).hover(Fa,Q).bind("mouseenter",Va).appendTo(d),i.togglerContent_open&&b("<span>"+i.togglerContent_open+"</span>").data({layoutEdge:n,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",n).addClass("content content-open").css("display","none").appendTo(h),i.togglerContent_closed&&b("<span>"+i.togglerContent_closed+"</span>").data({layoutEdge:n,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(h),bb(n));var i=n,v=b.layout.plugins.draggable,i=i?i.split(","):j.borderPanes;b.each(i,function(e,n){var r=p[n];if(!v||!t[n]||!r.resizable)return r.resizable=!1,!0;var i=o[n],s=p.zIndexes,a=j[n],f=a.dir=="horz"?"top":"left",l=n+",center,"+j.oppositeEdge[n]+(a.dir=="horz"?",west,east":""),c=B[n],h=r.resizerClass,d=0,g,y,w=h+"-drag",E=h+"-"+n+"-drag",S=h+"-dragging",x=h+"-"+n+"-dragging",T=h+"-dragging-limit",N=h+"-"+n+"-dragging-limit",C=!1;i.isClosed||c.attr("title",r.tips.Resize).css("cursor",r.resizerCursor),c.draggable({containment:u[0],axis:a.dir=="horz"?"y":"x",delay:0,distance:1,grid:r.resizingGrid,helper:"clone",opacity:r.resizerDragOpacity,addClasses:!1,zIndex:s.resizer_drag,start:function(e,t){r=p[n],i=o[n],y=r.livePaneResizing;if(!1===A("ondrag_start",n))return!1;i.isResizing=!0,F.clear(n+"_closeSlider"),P(n),g=i.resizerPosition,d=t.position[f],c.addClass(w+" "+E),C=!1,b("body").disableSelection(),ma(l)},drag:function(e,o){C||(o.helper.addClass(S+" "+x).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),C=!0,i.isSliding&&t[n].css("zIndex",s.pane_sliding));var u=0;o.position[f]<g.min?(o.position[f]=g.min,u=-1):o.position[f]>g.max&&(o.position[f]=g.max,u=1),u?(o.helper.addClass(T+" "+N),window.defaultStatus=u>0&&n.match(/(north|west)/)||u<0&&n.match(/(south|east)/)?r.tips.maxSizeWarning:r.tips.minSizeWarning):(o.helper.removeClass(T+" "+N),window.defaultStatus=""),y&&Math.abs(o.position[f]-d)>=r.liveResizingTolerance&&(d=o.position[f],m(e,o,n))},stop:function(e,t){b("body").enableSelection(),window.defaultStatus="",c.removeClass(w+" "+E),i.isResizing=!1,m(e,t,n,!0,l)}})});var m=function(e,t,n,r,i){var s=t.position,u=j[n],e=p[n],t=o[n],a;switch(n){case"north":a=s.top;break;case"west":a=s.left;break;case"south":a=q.offsetHeight-s.top-e.spacing_open;break;case"east":a=q.offsetWidth-s.left-e.spacing_open}a-=q["inset"+u.side],r?(!1!==A("ondrag_end",n)&&ta(n,a,!1,!0),ua(),t.isSliding&&i&&ma(i,!0)):Math.abs(a-t.size)<e.liveResizingTolerance||(ta(n,a,!1,!0),ba.each(cb))};r.isVisible?La(n):(Ma(n),ca(n,!0))}}),fa()},Ja=function(e,n){if(E()){var r=p[e],i=r.contentSelector,u=s[e],a=t[e],f;i&&(f=u.content=L[e]=r.findNestedContent?a.find(i).eq(0):a.children(i).eq(0)),f&&f.length?(f.data("layoutRole","content"),f.data("layoutCSS")||f.data("layoutCSS",T(f,"height")),f.css(j.content.cssReq),r.applyDemoStyles&&(f.css(j.content.cssDemo),a.css(j.content.cssDemoPane)),o[e].content={},!1!==n&&da(e)):u.content=L[e]=!1}},cb=function(){var e=b(this),t=e.data("layoutMask"),t=o[t];"IFRAME"==t.tagName&&t.isVisible&&e.css({top:t.offsetTop,left:t.offsetLeft,width:t.outerWidth,height:t.outerHeight})},ma=function(e,n){var r=e?e.split(","):b.layout.config.allPanes,i=p.zIndexes,s,a;b.each(r,function(e,r){a=o[r],s=p[r];if(a.isVisible&&(!n&&s.maskContents||s.maskObjects)){for(var l=b([]),h,d=0,v=ba.length;d<v;d++)h=ba.eq(d),h.data("layoutMask")===r&&(l=l.add(h));if(!l.length){l=t[r],h=o[r];var d=p[r],v=p.zIndexes,m=b([]),g,y,w,E,S;if(d.maskContents||d.maskObjects)for(S=0;S<(d.maskObjects?2:1);S++)g=d.maskObjects&&0==S,y=document.createElement(g?"iframe":"div"),w=b(y).data("layoutMask",r),y.className="ui-layout-mask ui-layout-mask-"+r,E=y.style,E.display="block",E.position="absolute",g&&(y.frameborder=0,y.src="about:blank",E.opacity=0,E.filter="Alpha(Opacity='0')",E.border=0),"IFRAME"==h.tagName?(E.zIndex=v.pane_normal+1,u.append(y)):(w.addClass("ui-layout-mask-inside-pane"),E.zIndex=d.maskZindex||v.content_mask,E.top=0,E.left=0,E.width="100%",E.height="100%",l.append(y)),m=m.add(y),ba=ba.add(y);l=m}l.each(function(){cb.call(this),this.style.zIndex=a.isSliding?i.pane_sliding+1:i.pane_normal+1,this.style.display="block"})}})},ua=function(){var e;b.each(b.layout.config.borderPanes,function(t,n){if(o[n].isResizing)return e=!0,!1}),e||ba.hide()},Ia=function(e,n,r,i){if(E()){var e=x.call(this,e),o=t[e],u=L[e],a=B[e],f=J[e];o&&b.isEmptyObject(o.data())&&(o=!1),u&&b.isEmptyObject(u.data())&&(u=!1),a&&b.isEmptyObject(a.data())&&(a=!1),f&&b.isEmptyObject(f.data())&&(f=!1),o&&o.stop(!0,!0);var l=p[e],c=M[e]||(o?o.data("layout"):0)||(u?u.data("layout"):0)||null;(void 0!==i?i:l.destroyChildLayout)&&c&&!c.destroyed&&(c.destroy(!0),c.destroyed&&(c=null)),o&&n&&!c?o.remove():o&&o[0]&&(n=l.paneClass,i=n+"-"+e,n=[n,n+"-open",n+"-closed",n+"-sliding",i,i+"-open",i+"-closed",i+"-sliding"],b.merge(n,Ea(o,!0)),o.removeClass(n.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+H),u&&u.data("layout")?(u.width(u.width()),c.resizeAll()):u&&u.css(u.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),o.data("layout")||o.css(o.data("layoutCSS")).removeData("layoutCSS")),f&&f.remove(),a&&a.remove(),s[e]=t[e]=L[e]=B[e]=J[e]=M[e]=!1,r||ea()}},va=function(e){var n=t[e],r=n[0].style;p[e].useOffscreenClose?(n.data(j.offscreenReset)||n.data(j.offscreenReset,{left:r.left,right:r.right}),n.css(j.offscreenCSS)):n.hide().removeData(j.offscreenReset)},db=function(e){var n=t[e],e=p[e],r=j.offscreenCSS,i=n.data(j.offscreenReset),s=n[0].style;n.show().removeData(j.offscreenReset),e.useOffscreenClose&&i&&(s.left==r.left&&(s.left=i.left),s.right==r.right)&&(s.right=i.right)},Ka=function(e,n){if(E()){var r=x.call(this,e),i=p[r],s=o[r],u=B[r];t[r]&&!s.isHidden&&(!o.initialized||!1!==A("onhide_start",r))&&(s.isSliding=!1,u&&u.hide(),!o.initialized||s.isClosed?(s.isClosed=!0,s.isHidden=!0,s.isVisible=!1,o.initialized||va(r),X("horz"===j[r].dir?"":"center"),(o.initialized||i.triggerEventsOnLoad)&&A("onhide_end",r)):(s.isHiding=!0,Y(r,!1,n)))}},wa=function(e,n,r,i){if(E()){var e=x.call(this,e),s=o[e];t[e]&&s.isHidden&&!1!==A("onshow_start",e)&&(s.isSliding=!1,s.isShowing=!0,!1===n?Y(e,!0):ga(e,!1,r,i))}},ka=function(e,t){if(E()){var n=I(e),r=x.call(this,e),i=o[r];n&&n.stopImmediatePropagation(),i.isHidden?wa(r):i.isClosed?ga(r,!!t):Y(r)}},Y=function(e,n,r,i){function s(){c.isMoving=!1,ca(a,!0);var e=j.oppositeEdge[a];o[e].noRoom&&(P(e),W(e)),ua(),!i&&(o.initialized||l.triggerEventsOnLoad)&&(v||A("onclose_end",a),v&&A("onshow_end",a),m&&A("onhide_end",a))}var a=x.call(this,e);if(!o.initialized&&t[a])e=o[a],va(a),e.isClosed=!0,e.isVisible=!1;else if(E()){var f=t[a],l=p[a],c=o[a],h=j[a],d,v,m;u.queue(function(e){if(!f||!l.closable&&!c.isShowing&&!c.isHiding||!n&&c.isClosed&&!c.isShowing)return e();var t=!c.isShowing&&!1===A("onclose_start",a);v=c.isShowing,m=c.isHiding,delete c.isShowing,delete c.isHiding;if(t)return e();d=!r&&!c.isClosed&&"none"!=l.fxName_close,c.isMoving=!0,c.isClosed=!0,c.isVisible=!1,m?c.isHidden=!0:v&&(c.isHidden=!1),c.isSliding?na(a,!1):X("horz"===j[a].dir?"":"center",!1),Ma(a),d?(ma("center"+("horz"==h.dir?",west,east":""),!0),xa(a,!0),f.hide(l.fxName_close,l.fxSettings_close,l.fxSpeed_close,function(){xa(a,!1),c.isClosed&&s(),e()})):(va(a),s(),e())})}},Ma=function(e){var t=B[e],n=J[e],r=p[e],i=j[e].side.toLowerCase(),s=r.resizerClass,u=r.togglerClass,a="-"+e;t.css(i,q["inset"+j[e].side]).removeClass(s+"-open "+s+a+"-open").removeClass(s+"-sliding "+s+a+"-sliding").addClass(s+"-closed "+s+a+"-closed").unbind("dblclick."+H),r.resizable&&b.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(u+"-open "+u+a+"-open").addClass(u+"-closed "+u+a+"-closed").attr("title",r.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),Na(e,!1),o.initialized&&fa()},ga=function(e,n,r,i){function s(){c.isMoving=!1,Ua(a),c.isSliding||(ua(),X("vert"==j[a].dir?"center":"",!1)),La(a)}if(E()){var a=x.call(this,e),f=t[a],l=p[a],c=o[a],h=j[a],d,v;u.queue(function(e){if(!f||!l.resizable&&!l.closable&&!c.isShowing||c.isVisible&&!c.isSliding)return e();if(c.isHidden&&!c.isShowing)e(),wa(a,!0);else{l.autoResize&&c.size!=l.size?Z(a,l.size,!0,!0,!0):P(a,n);var t=A("onopen_start",a);if("abort"===t)return e();"NC"!==t&&P(a,n);if(c.minSize>c.maxSize)return Na(a,!1),!i&&l.tips.noRoomToOpen&&alert(l.tips.noRoomToOpen),e();n?na(a,!0):c.isSliding?na(a,!1):l.slidable&&ca(a,!1),c.noRoom=!1,W(a),v=c.isShowing,delete c.isShowing,d=!r&&c.isClosed&&"none"!=l.fxName_open,c.isMoving=!0,c.isVisible=!0,c.isClosed=!1,v&&(c.isHidden=!1),d?(t="center"+("horz"==h.dir?",west,east":""),c.isSliding&&(t+=","+j.oppositeEdge[a]),ma(t,!0),xa(a,!0),f.show(l.fxName_open,l.fxSettings_open,l.fxSpeed_open,function(){xa(a,!1),c.isVisible&&s(),e()})):(db(a),s(),e())}})}},La=function(e,n){var r=t[e],i=B[e],s=J[e],u=p[e],a=o[e],f=j[e].side.toLowerCase(),l=u.resizerClass,c=u.togglerClass,h="-"+e;i.css(f,q["inset"+j[e].side]+aa(e)).removeClass(l+"-closed "+l+h+"-closed").addClass(l+"-open "+l+h+"-open"),a.isSliding?i.addClass(l+"-sliding "+l+h+"-sliding"):i.removeClass(l+"-sliding "+l+h+"-sliding"),u.resizerDblClickToggle&&i.bind("dblclick",ka),Q(0,i),u.resizable&&b.layout.plugins.draggable?i.draggable("enable").css("cursor",u.resizerCursor).attr("title",u.tips.Resize):a.isSliding||i.css("cursor","default"),s&&(s.removeClass(c+"-closed "+c+h+"-closed").addClass(c+"-open "+c+h+"-open").attr("title",u.tips.Close),Q(0,s),s.children(".content-closed").hide(),s.children(".content-open").css("display","block")),Na(e,!a.isSliding),b.extend(a,y(r)),o.initialized&&(fa(),da(e,!0)),!n&&(o.initialized||u.triggerEventsOnLoad)&&r.is(":visible")&&(A("onopen_end",e),a.isShowing&&A("onshow_end",e),o.initialized&&A("onresize_end",e))},eb=function(e){function t(){i.isClosed?i.isMoving||ga(r,!0):na(r,!0)}if(E()){var n=I(e),r=x.call(this,e),i=o[r],e=p[r].slideDelay_open;n&&n.stopImmediatePropagation(),i.isClosed&&n&&"mouseenter"===n.type&&0<e?F.set(r+"_openSlider",t,e):t()}},Oa=function(e){function n(){s.isClosed?na(i,!1):s.isMoving||Y(i)}if(E()){var r=I(e),i=x.call(this,e),e=p[i],s=o[i],u=s.isMoving?1e3:300;!s.isClosed&&!s.isResizing&&("click"===e.slideTrigger_close?n():e.preventQuickSlideClose&&s.isMoving||e.preventPrematureSlideClose&&r&&b.layout.isMouseOverElem(r,t[i])||(r?F.set(i+"_closeSlider",n,D(e.slideDelay_close,u)):n()))}},xa=function(e,n){var r=t[e],i=o[e],s=p[e],u=p.zIndexes;n?(r.css({zIndex:u.pane_animate}),"south"==e?r.css({top:q.insetTop+q.innerHeight-r.outerHeight()}):"east"==e&&r.css({left:q.insetLeft+q.innerWidth-r.outerWidth()})):(r.css({zIndex:i.isSliding?u.pane_sliding:u.pane_normal}),"south"==e?r.css({top:"auto"}):"east"==e&&!r.css("left").match(/\-99999/)&&r.css({left:"auto"}),h.msie&&s.fxOpacityFix&&"slide"!=s.fxName_open&&r.css("filter")&&1==r.css("opacity")&&r[0].style.removeAttribute("filter"))},ca=function(e,t){var n=p[e],r=B[e],i=n.slideTrigger_open.toLowerCase();r&&(!t||n.slidable)&&(i.match(/mouseover/)?i=n.slideTrigger_open="mouseenter":i.match(/(click|dblclick|mouseenter)/)||(i=n.slideTrigger_open="click"),r[t?"bind":"unbind"](i+"."+H,eb).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},na=function(e,n){function r(t){F.clear(e+"_closeSlider"),t.stopPropagation()}var i=p[e],s=o[e],u=p.zIndexes,a=i.slideTrigger_close.toLowerCase(),f=n?"bind":"unbind",l=t[e],c=B[e];s.isSliding=n,F.clear(e+"_closeSlider"),n&&ca(e,!1),l.css("zIndex",n?u.pane_sliding:u.pane_normal),c.css("zIndex",n?u.pane_sliding+2:u.resizer_normal),a.match(/(click|mouseleave)/)||(a=i.slideTrigger_close="mouseleave"),c[f](a,Oa),"mouseleave"===a&&(l[f]("mouseleave."+H,Oa),c[f]("mouseenter."+H,r),l[f]("mouseenter."+H,r)),n?"click"===a&&!i.resizable&&(c.css("cursor",n?i.sliderCursor:"default"),c.attr("title",n?i.tips.Close:"")):F.clear(e+"_closeSlider")},W=function(e,n,r,i){var n=p[e],s=o[e],u=j[e],a=t[e],f=B[e],l="vert"===u.dir,c=!1;if("center"===e||l&&s.noVerticalRoom)(c=0<=s.maxHeight)&&s.noRoom?(db(e),f&&f.show(),s.isVisible=!0,s.noRoom=!1,l&&(s.noVerticalRoom=!1),Ua(e)):!c&&!s.noRoom&&(va(e),f&&f.hide(),s.isVisible=!1,s.noRoom=!0);if("center"!==e)if(s.minSize<=s.maxSize){if(s.size>s.maxSize?Z(e,s.maxSize,r,i,!0):s.size<s.minSize?Z(e,s.minSize,r,i,!0):f&&s.isVisible&&a.is(":visible")&&(r=u.side.toLowerCase(),i=s.size+q["inset"+u.side],b.layout.cssNum(f,r)!=i&&f.css(r,i)),s.noRoom)s.wasOpen&&n.closable?n.autoReopen?ga(e,!1,!0,!0):s.noRoom=!1:wa(e,s.wasOpen,!0,!0)}else s.noRoom||(s.noRoom=!0,s.wasOpen=!s.isClosed&&!s.isSliding,s.isClosed||(n.closable?Y(e,!0,!0):Ka(e,!0)))},ta=function(e,t,n,r){if(E()){var e=x.call(this,e),i=p[e],s=o[e],s=i.livePaneResizing&&!s.isResizing;i.autoResize=!1,Z(e,t,n,s,r)}},Z=function(e,n,i,s,a){function f(){for(var e="width"===w?d.outerWidth():d.outerHeight(),e=[{pane:l,count:1,target:n,actual:e,correct:n===e,attempt:n,cssSize:k}],u=e[0],a={},f="Inaccurate size after resizing the "+l+"-pane.";!u.correct;){a={pane:l,count:u.count+1,target:n},a.attempt=u.actual>n?D(0,u.attempt-(u.actual-n)):D(0,u.attempt+(n-u.actual)),a.cssSize=("horz"==j[l].dir?r:m)(t[l],a.attempt),d.css(w,a.cssSize),a.actual="width"==w?d.outerWidth():d.outerHeight(),a.correct=n===a.actual,1===e.length&&(U(f,!1,!0),U(u,!1,!0)),U(a,!1,!0);if(3<e.length)break;e.push(a),u=e[e.length-1]}h.size=n,b.extend(h,y(d)),h.isVisible&&d.is(":visible")&&(v&&v.css(g,n+q[S]),da(l)),!i&&!T&&o.initialized&&h.isVisible&&A("onresize_end",l),i||(h.isSliding||X("horz"==j[l].dir?"":"center",T,s),fa()),u=j.oppositeEdge[l],n<C&&o[u].noRoom&&(P(u),W(u,!1,i)),1<e.length&&U(f+"\nSee the Error Console for details.",!0,!0)}if(E()){var l=x.call(this,e),c=p[l],h=o[l],d=t[l],v=B[l],g=j[l].side.toLowerCase(),w=j[l].sizeType.toLowerCase(),S="inset"+j[l].side,T=h.isResizing&&!c.triggerEventsDuringLiveResize,N=!0!==a&&c.animatePaneSizing,C,k;u.queue(function(e){P(l),C=h.size,n=V(l,n),n=D(n,V(l,c.minSize)),n=Ca(n,h.maxSize);if(n<h.minSize)e(),W(l,!1,i);else{if(!s&&n===C)return e();!i&&o.initialized&&h.isVisible&&A("onresize_start",l),k=("horz"==j[l].dir?r:m)(t[l],n);if(N&&d.is(":visible")){var u=b.layout.effects.size[l]||b.layout.effects.size.all,u=c.fxSettings_size.easing||u.easing,a=p.zIndexes,v={};v[w]=k+"px",h.isMoving=!0,d.css({zIndex:a.pane_animate}).show().animate(v,c.fxSpeed_size,u,function(){d.css({zIndex:h.isSliding?a.pane_sliding:a.pane_normal}),h.isMoving=!1,f(),e()})}else d.css(w,k),d.is(":visible")?f():(h.size=n,b.extend(h,y(d))),e()}})}},X=function(e,n,i){e=(e?e:"east,west,center").split(","),b.each(e,function(e,s){if(t[s]){var u=p[s],a=o[s],f=t[s],l=!0,v={},l={top:aa("north",!0),bottom:aa("south",!0),left:aa("west",!0),right:aa("east",!0),width:0,height:0};l.width=q.innerWidth-l.left-l.right,l.height=q.innerHeight-l.bottom-l.top,l.top+=q.insetTop,l.bottom+=q.insetBottom,l.left+=q.insetLeft,l.right+=q.insetRight,b.extend(a,y(f));if("center"===s){if(!i&&a.isVisible&&l.width===a.outerWidth&&l.height===a.outerHeight)return!0;b.extend(a,ra(s),{maxWidth:l.width,maxHeight:l.height}),v=l,v.width=m(f,v.width),v.height=r(f,v.height),l=0<=v.width&&0<=v.height;if(!o.initialized&&u.minWidth>a.outerWidth){var u=u.minWidth-a.outerWidth,g=p.east.minSize||0,w=p.west.minSize||0,E=o.east.size,S=o.west.size,x=E,T=S;0<u&&o.east.isVisible&&E>g&&(x=D(E-g,E-u),u-=E-x),0<u&&o.west.isVisible&&S>w&&(T=D(S-w,S-u),u-=S-T);if(0===u){E&&E!=g&&Z("east",x,!0,i,!0),S&&S!=w&&Z("west",T,!0,i,!0),X("center",n,i);return}}}else{a.isVisible&&!a.noVerticalRoom&&b.extend(a,y(f),ra(s));if(!i&&!a.noVerticalRoom&&l.height===a.outerHeight)return!0;v.top=l.top,v.bottom=l.bottom,v.height=r(f,l.height),a.maxHeight=v.height,l=0<=a.maxHeight,l||(a.noVerticalRoom=!0)}l?(!n&&o.initialized&&A("onresize_start",s),f.css(v),"center"!==s&&fa(s),a.noRoom&&!a.isClosed&&!a.isHidden&&W(s),a.isVisible&&(b.extend(a,y(f)),o.initialized&&da(s))):!a.noRoom&&a.isVisible&&W(s);if(!a.isVisible)return!0;"center"===s&&(a=h.isIE6||!h.boxModel,t.north&&(a||"IFRAME"==o.north.tagName)&&t.north.css("width",m(t.north,q.innerWidth)),t.south&&(a||"IFRAME"==o.south.tagName)&&t.south.css("width",m(t.south,q.innerWidth))),!n&&o.initialized&&A("onresize_end",s)}})},ea=function(e){x(e);if(o.initialized){if(u.is(":visible")&&(b.extend(o.container,y(u)),q.outerHeight)){if(!1===A("onresizeall_start"))return!1;var n,r,i;b.each(["south","north","east","west"],function(e,n){t[n]&&(i=o[n],r=p[n],r.autoResize&&i.size!=r.size?Z(n,r.size,!0,!0,!0):(P(n),W(n,!1,!0,!0)))}),X("",!0,!0),fa(),r=p,b.each(j.allPanes,function(e,r){(n=t[r])&&o[r].isVisible&&A("onresize_end",r)}),A("onresizeall_end")}}else sa()},Da=function(e){e=x.call(this,e);if(p[e].resizeChildLayout){var n=t[e],r=L[e],i=s[e],o=M[e];i.child&&!o&&(o=i.child.container,o=M[e]=(o?o.data("layout"):0)||null),o&&o.destroyed&&(o=M[e]=null),o||(o=M[e]=n.data("layout")||(r?r.data("layout"):0)||null),i.child=M[e],o&&o.resizeAll()}},da=function(e,n){if(E()){var i=x.call(this,e),i=i?i.split(","):j.allPanes;b.each(i,function(e,i){function s(e){return D(d.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function u(){var e=p[i].contentIgnoreSelector,e=f.nextAll().not(e||":lt(0)"),t=e.filter(":visible"),n=t.filter(":last");v={top:f[0].offsetTop,height:f.outerHeight(),numFooters:e.length,hiddenFooters:e.length-t.length,spaceBelow:0},v.spaceAbove=v.top,v.bottom=v.top+v.height,v.spaceBelow=n.length?n[0].offsetTop+n.outerHeight()-v.bottom+s(n):s(f)}var a=t[i],f=L[i],l=p[i],d=o[i],v=d.content;if(!a||!f||!a.is(":visible"))return!0;if(!f.length&&(Ja(i,!1),!f))return;if(!1!==A("onsizecontent_start",i)){if(!d.isMoving&&!d.isResizing||l.liveContentResizing||n||void 0==v.top)u(),0<v.hiddenFooters&&"hidden"===a.css("overflow")&&(a.css("overflow","visible"),u(),a.css("overflow","hidden"));a=d.innerHeight-(v.spaceAbove-d.css.paddingTop)-(v.spaceBelow-d.css.paddingBottom);if(!f.is(":visible")||v.height!=a){var m=f,l=m;S(m)?l=t[m]:m.jquery||(l=b(m)),m=r(l,a),l.css({height:m,visibility:"visible"}),0<m&&0<l.innerWidth()?l.data("autoHidden")&&(l.show().data("autoHidden",!1),h.mozilla||l.css(j.hidden).css(j.visible)):!l.data("autoHidden")&&l.hide().data("autoHidden",!0),v.height=a}o.initialized&&A("onsizecontent_end",i)}})}},fa=function(e){e=(e=x.call(this,e))?e.split(","):j.borderPanes,b.each(e,function(e,n){var i=p[n],s=o[n],u=t[n],a=B[n],f=J[n],l;if(u&&a){var c=j[n].dir,h=s.isClosed?"_closed":"_open",d=i["spacing"+h],v=i["togglerAlign"+h],h=i["togglerLength"+h],g;if(0===d)a.hide();else{!s.noRoom&&!s.isHidden&&a.show(),"horz"===c?(g=q.innerWidth,s.resizerLength=g,u=b.layout.cssNum(u,"left"),a.css({width:m(a,g),height:r(a,d),left:-9999<u?u:q.insetLeft})):(g=u.outerHeight(),s.resizerLength=g,a.css({height:r(a,g),width:m(a,d),top:q.insetTop+aa("north",!0)})),Q(i,a);if(f){if(0===h||s.isSliding&&i.hideTogglerOnSlide){f.hide();return}f.show();if(!(0<h)||"100%"===h||h>g)h=g,v=0;else if(S(v))switch(v){case"top":case"left":v=0;break;case"bottom":case"right":v=g-h;break;default:v=qa((g-h)/2)}else u=parseInt(v,10),v=0<=v?u:g-h+u;if("horz"===c){var y=m(f,h);f.css({width:y,height:r(f,d),left:v,top:0}),f.children(".content").each(function(){l=b(this),l.css("marginLeft",qa((y-l.outerWidth())/2))})}else{var w=r(f,h);f.css({height:w,width:m(f,d),top:v,left:0}),f.children(".content").each(function(){l=b(this),l.css("marginTop",qa((w-l.outerHeight())/2))})}Q(0,f)}!o.initialized&&(i.initHidden||s.noRoom)&&(a.hide(),f&&f.hide())}}})},bb=function(e){if(E()){var t=x.call(this,e),e=J[t],n=p[t];e&&(n.closable=!0,e.bind("click."+H,function(e){e.stopPropagation(),ka(t)}).css("visibility","visible").css("cursor","pointer").attr("title",o[t].isClosed?n.tips.Open:n.tips.Close).show())}},Na=function(e,t){b.layout.plugins.buttons&&b.each(o[e].pins,function(n,r){b.layout.buttons.setPinState(s,b(r),e,t)})},u=b(this).eq(0);if(!u.length)return U(p.errors.containerMissing);if(u.data("layoutContainer")&&u.data("layout"))return u.data("layout");var t={},L={},B={},J={},ba=b([]),q=o.container,H=o.id,s={options:p,state:o,container:u,panes:t,contents:L,resizers:B,togglers:J,hide:Ka,show:wa,toggle:ka,open:ga,close:Y,slideOpen:eb,slideClose:Oa,slideToggle:function(e){e=x.call(this,e),ka(e,!0)},setSizeLimits:P,_sizePane:Z,sizePane:ta,sizeContent:da,swapPanes:function(e,n){function r(e){var n=t[e],r=L[e];return n?{pane:e,P:n?n[0]:!1,C:r?r[0]:!1,state:b.extend(!0,{},o[e]),options:b.extend(!0,{},p[e])}:!1}function i(e,n){if(e){var r=e.P,i=e.C,u=e.pane,a=j[n],f=a.side.toLowerCase(),c="inset"+a.side,h=b.extend(!0,{},o[n]),d=p[n],v={resizerCursor:d.resizerCursor};b.each(["fxName","fxSpeed","fxSettings"],function(e,t){v[t+"_open"]=d[t+"_open"],v[t+"_close"]=d[t+"_close"],v[t+"_size"]=d[t+"_size"]}),t[n]=b(r).data({layoutPane:s[n],layoutEdge:n}).css(j.hidden).css(a.cssReq),L[n]=i?b(i):!1,p[n]=b.extend(!0,{},e.options,v),o[n]=b.extend(!0,{},e.state),r.className=r.className.replace(RegExp(d.paneClass+"-"+u,"g"),d.paneClass+"-"+n),Ga(n),a.dir!=j[u].dir?(r=l[n]||0,P(n),r=D(r,o[n].minSize),ta(n,r,!0,!0)):B[n].css(f,q[c]+(o[n].isVisible?aa(n):0)),e.state.isVisible&&!h.isVisible?La(n,!0):(Ma(n),ca(n,!0)),e=null}}if(E()){var u=x.call(this,e);o[u].edge=n,o[n].edge=u;if(!1===A("onswap_start",u)||!1===A("onswap_start",n))o[u].edge=u,o[n].edge=n;else{var a=r(u),f=r(n),l={};l[u]=a?a.state.size:0,l[n]=f?f.state.size:0,t[u]=!1,t[n]=!1,o[u]={},o[n]={},J[u]&&J[u].remove(),J[n]&&J[n].remove(),B[u]&&B[u].remove(),B[n]&&B[n].remove(),B[u]=B[n]=J[u]=J[n]=!1,i(a,n),i(f,u),a=f=l=null,t[u]&&t[u].css(j.visible),t[n]&&t[n].css(j.visible),ea(),A("onswap_end",u),A("onswap_end",n)}}},showMasks:ma,hideMasks:ua,initContent:Ja,addPane:Ya,removePane:Ia,createChildLayout:Ha,enableClosable:bb,disableClosable:function(e,t){if(E()){var n=x.call(this,e),r=J[n];r&&(p[n].closable=!1,o[n].isClosed&&ga(n,!1,!0),r.unbind("."+H).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(e){if(E()){var e=x.call(this,e),t=B[e];t&&t.data("draggable")&&(p[e].slidable=!0,o[e].isClosed&&ca(e,!0))}},disableSlidable:function(e){if(E()){var e=x.call(this,e),t=B[e];t&&(p[e].slidable=!1,o[e].isSliding?Y(e,!1,!0):(ca(e,!1),t.css("cursor","default").attr("title",""),Q(null,t[0])))}},enableResizable:function(e){if(E()){var e=x.call(this,e),t=B[e],n=p[e];t&&t.data("draggable")&&(n.resizable=!0,t.draggable("enable"),o[e].isClosed||t.css("cursor",n.resizerCursor).attr("title",n.tips.Resize))}},disableResizable:function(e){if(E()){var e=x.call(this,e),t=B[e];t&&t.data("draggable")&&(p[e].resizable=!1,t.draggable("disable").css("cursor","default").attr("title",""),Q(null,t[0]))}},allowOverflow:d,resetOverflow:f,destroy:function(e,t){b(window).unbind("."+H),b(document).unbind("."+H),"object"==typeof e?x(e):t=e,u.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(p.containerClass).unbind("."+H),ba.remove(),b.each(j.allPanes,function(e,n){Ia(n,!1,!0,t)}),u.data("layoutCSS")&&!u.data("layoutRole")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),"BODY"===q.tagName&&(u=b("html")).data("layoutCSS")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),ja(s,b.layout.onDestroy),$a();for(n in s)n.match(/^(container|options)$/)||delete s[n];return s.destroyed=!0,s},initPanes:E,resizeAll:ea,runCallbacks:A,hasParentLayout:!1,children:M,north:!1,south:!1,west:!1,east:!1,center:!1},Pa,N,Qa,G,ya,$,ha,O,a=b.layout.transformData(a),a=b.layout.backwardCompatibility.renameAllOptions(a);if(!b.isEmptyObject(a.panes)){N=b.layout.optionsMap.noDefault,$=0;for(ha=N.length;$<ha;$++)G=N[$],delete a.panes[G];N=b.layout.optionsMap.layout,$=0;for(ha=N.length;$<ha;$++)G=N[$],delete a.panes[G]}N=b.layout.optionsMap.layout;var pb=b.layout.config.optionRootKeys;for(G in a)ya=a[G],0>b.inArray(G,pb)&&0>b.inArray(G,N)&&(a.panes[G]||(a.panes[G]=b.isPlainObject(ya)?b.extend(!0,{},ya):ya),delete a[G]);b.extend(!0,p,a),b.each(j.allPanes,function(e,t){j[t]=b.extend(!0,{},j.panes,j[t]),Qa=p.panes,O=p[t];if("center"===t){N=b.layout.optionsMap.center,e=0;for(ha=N.length;e<ha;e++)if(G=N[e],!a.center[G]&&(a.panes[G]||!O[G]))O[G]=Qa[G]}else{O=p[t]=b.extend(!0,{},Qa,O);var n=p[t],r=p.panes;n.fxSettings||(n.fxSettings={}),r.fxSettings||(r.fxSettings={}),b.each(["_open","_close","_size"],function(e,i){var s="fxName"+i,o="fxSpeed"+i,u="fxSettings"+i,a=n[s]=n[s]||r[s]||n.fxName||r.fxName||"none";if(a==="none"||!b.effects||!b.effects[a]||!p.effects[a])a=n[s]="none";a=p.effects[a]||{},s=a.all||null,a=a[t]||null,n[o]=n[o]||r[o]||n.fxSpeed||r.fxSpeed||null,n[u]=b.extend(!0,{},s,a,r.fxSettings,n.fxSettings,r[u],n[u])}),delete n.fxName,delete n.fxSpeed,delete n.fxSettings,O.resizerClass||(O.resizerClass="ui-layout-resizer"),O.togglerClass||(O.togglerClass="ui-layout-toggler")}O.paneClass||(O.paneClass="ui-layout-pane")});var za=a.zIndex,oa=p.zIndexes;0<za&&(oa.pane_normal=za,oa.content_mask=D(za+1,oa.content_mask),oa.resizer_normal=D(za+2,oa.resizer_normal)),delete p.panes;var qb=p;o.creatingLayout=!0,ja(s,b.layout.onCreate);if(!1===A("onload_start"))Pa="cancel";else{var Ra=u[0],fb=q.tagName=Ra.tagName,gb=q.id=Ra.id,hb=q.className=Ra.className,pa=p,Aa=pa.name,ib="BODY"===fb,ia={},Sa=u.data("parentLayout"),Ta=u.data("layoutEdge"),jb=Sa&&Ta;q.selector=u.selector.split(".slice")[0],q.ref=(pa.name?pa.name+" layout / ":"")+fb+(gb?"#"+gb:hb?".["+hb+"]":""),u.data({layout:s,layoutContainer:H}).addClass(pa.containerClass);var kb={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(Aa in kb)u.bind("layout"+Aa.toLowerCase()+"."+H,s[kb[Aa]||Aa]);jb&&(s.hasParentLayout=!0,Sa[Ta].child=Sa.children[Ta]=u.data("layout"));if(!u.data("layoutCSS")){if(ib){var ia=b.extend(T(u,"overflow,position,margin,padding,border"),{height:u.css("height"),overflow:u.css("overflow"),overflowX:u.css("overflowX"),overflowY:u.css("overflowY")}),Ba=b("html");Ba.data("layoutCSS",{height:"auto",overflow:Ba.css("overflow"),overflowX:Ba.css("overflowX"),overflowY:Ba.css("overflowY")})}else ia=T(u,"overflow,position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY");u.data("layoutCSS",ia)}try{if(ib)b("html").css({height:"100%",overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}),b("body").css({position:"relative",height:"100%",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",margin:0,padding:0,border:"none"}),b.extend(q,y(u));else{var ia={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},lb=u.css("position");u.css("height"),!jb&&(!lb||!lb.match(/fixed|absolute|relative/))&&(ia.position="relative"),u.css(ia),u.is(":visible")&&(b.extend(q,y(u)),1>q.innerHeight&&U(pa.errors.noContainerHeight.replace(/CONTAINER/,q.ref)))}}catch(rb){}ab(),b(window).bind("unload."+H,$a),ja(s,b.layout.onLoad),qb.initPanes&&sa(),delete o.creatingLayout,Pa=o.initialized}return"cancel"===Pa?null:s},b(function(){var e=b.layout.browser;e.msie&&(e.boxModel=b.support.boxModel)}),b.ui||(b.ui={}),b.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){for(var t=document.cookie,t=t?t.split(";"):[],n,r=0,i=t.length;r<i;r++){n=b.trim(t[r]).split("=");if(n[0]==e)return decodeURIComponent(n[1])}return null},write:function(e,t,n){var r="",i="",s=!1,n=n||{},o=n.expires;if(o&&o.toUTCString)i=o;else if(o===null||typeof o=="number")i=new Date,o>0?i.setDate(i.getDate()+o):(i.setFullYear(1970),s=!0);i&&(r+=";expires="+i.toUTCString()),n.path&&(r+=";path="+n.path),n.domain&&(r+=";domain="+n.domain),n.secure&&(r+=";secure"),document.cookie=e+"="+(s?"":encodeURIComponent(t))+r},clear:function(e){b.ui.cookie.write(e,"",{expires:-1})}},b.cookie||(b.cookie=function(e,t,n){var r=b.ui.cookie;if(t===null)r.clear(e);else{if(t===void 0)return r.read(e);r.write(e,t,n)}}),b.layout.plugins.stateManagement=!0,b.layout.config.optionRootKeys.push("stateManagement"),b.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},b.layout.optionsMap.layout.push("stateManagement"),b.layout.state={saveCookie:function(e,t,n){var r=e.options,i=r.stateManagement,n=b.extend(!0,{},i.cookie,n||null),e=e.state.stateData=e.readState(t||i.stateKeys);return b.ui.cookie.write(n.name||r.name||"Layout",b.layout.state.encodeJSON(e),n),b.extend(!0,{},e)},deleteCookie:function(e){e=e.options,b.ui.cookie.clear(e.stateManagement.cookie.name||e.name||"Layout")},readCookie:function(e){return e=e.options,(e=b.ui.cookie.read(e.stateManagement.cookie.name||e.name||"Layout"))?b.layout.state.decodeJSON(e):{}},loadCookie:function(e){var t=b.layout.state.readCookie(e);return t&&(e.state.stateData=b.extend(!0,{},t),e.loadState(t)),t},loadState:function(e,t,n){t=b.layout.transformData(t);if(!b.isEmptyObject(t)){b.extend(!0,e.options,t);if(e.state.initialized){var r,i,s,o,u,a=n===!1;b.each(b.layout.config.borderPanes,function(n,l){state=e.state[l],i=t[l],typeof i=="object"&&(s=i.size,u=i.initClosed,o=i.initHidden,(r=state.isVisible)||e.sizePane(l,s,!1,!1),o===!0?e.hide(l,a):u===!1?e.open(l,!1,a):u===!0?e.close(l,!1,a):o===!1&&e.show(l,!1,a),r&&e.sizePane(l,s,!1,a))})}}},readState:function(e,t){var n={},r={isClosed:"initClosed",isHidden:"initHidden"},i=e.state,s=b.layout.config.allPanes,o,u,a;t||(t=e.options.stateManagement.stateKeys),b.isArray(t)&&(t=t.join(","));for(var t=t.replace(/__/g,".").split(","),f=0,l=t.length;f<l;f++)o=t[f].split("."),u=o[0],o=o[1],b.inArray(u,s)<0||(a=i[u][o],a!=void 0&&(o=="isClosed"&&i[u].isSliding&&(a=!0),(n[u]||(n[u]={}))[r[o]?r[o]:o]=a));return n},encodeJSON:function(e){function t(e){var n=[],r=0,i,s,o;for(i in e)s=e[i],o=typeof s,o=="string"?s='"'+s+'"':o=="object"&&(s=t(s)),n[r++]='"'+i+'":'+s;return"{"+n.join(",")+"}"}return t(e)},decodeJSON:function(e){try{return b.parseJSON?b.parseJSON(e):window.eval("("+e+")")||{}}catch(t){return{}}},_create:function(e){var t=b.layout.state;b.extend(e,{readCookie:function(){return t.readCookie(e)},deleteCookie:function(){t.deleteCookie(e)},saveCookie:function(n,r){return t.saveCookie(e,n,r)},loadCookie:function(){return t.loadCookie(e)},loadState:function(n,r){t.loadState(e,n,r)},readState:function(n){return t.readState(e,n)},encodeJSON:t.encodeJSON,decodeJSON:t.decodeJSON}),e.state.stateData={};var n=e.options.stateManagement;n.enabled&&(n.autoLoad?e.loadCookie():e.state.stateData=e.readCookie())},_unload:function(e){var t=e.options.stateManagement;t.enabled&&(t.autoSave?e.saveCookie():e.state.stateData=e.readState())}},b.layout.onCreate.push(b.layout.state._create),b.layout.onUnload.push(b.layout.state._unload),b.layout.plugins.buttons=!0,b.layout.defaults.autoBindCustomButtons=!1,b.layout.optionsMap.layout.push("autoBindCustomButtons"),b.layout.buttons={init:function(e){var t=e.options.name||"",n;b.each(["toggle","open","close","pin","toggle-slide","open-slide"],function(r,i){b.each(b.layout.config.borderPanes,function(r,s){b(".ui-layout-button-"+i+"-"+s).each(function(){n=b(this).data("layoutName")||b(this).attr("layoutName"),(n==void 0||n===t)&&e.bindButton(this,i,s)})})})},get:function(e,t,n,r){var i=b(t),e=e.options,s=e.errors.addButtonError;return i.length?b.inArray(n,b.layout.config.borderPanes)<0?(b.layout.msg(s+" "+e.errors.pane+": "+n,!0),i=b("")):(t=e[n].buttonClass+"-"+r,i.addClass(t+" "+t+"-"+n).data("layoutName",e.name)):b.layout.msg(s+" "+e.errors.selector+": "+t,!0),i},bind:function(e,t,n,r){var i=b.layout.buttons;switch(n.toLowerCase()){case"toggle":i.addToggle(e,t,r);break;case"open":i.addOpen(e,t,r);break;case"close":i.addClose(e,t,r);break;case"pin":i.addPin(e,t,r);break;case"toggle-slide":i.addToggle(e,t,r,!0);break;case"open-slide":i.addOpen(e,t,r,!0)}return e},addToggle:function(e,t,n,r){return b.layout.buttons.get(e,t,n,"toggle").click(function(t){e.toggle(n,!!r),t.stopPropagation()}),e},addOpen:function(e,t,n,r){return b.layout.buttons.get(e,t,n,"open").attr("title",e.options[n].tips.Open).click(function(t){e.open(n,!!r),t.stopPropagation()}),e},addClose:function(e,t,n){return b.layout.buttons.get(e,t,n,"close").attr("title",e.options[n].tips.Close).click(function(t){e.close(n),t.stopPropagation()}),e},addPin:function(e,t,n){var r=b.layout.buttons,i=r.get(e,t,n,"pin");if(i.length){var s=e.state[n];i.click(function(t){r.setPinState(e,b(this),n,s.isSliding||s.isClosed),s.isSliding||s.isClosed?e.open(n):e.close(n),t.stopPropagation()}),r.setPinState(e,i,n,!s.isClosed&&!s.isSliding),s.pins.push(t)}return e},setPinState:function(e,t,n,r){var i=t.attr("pin");if(!i||r!==(i=="down")){var e=e.options[n],i=e.buttonClass+"-pin",s=i+"-"+n,n=i+"-up "+s+"-up",i=i+"-down "+s+"-down";t.attr("pin",r?"down":"up").attr("title",r?e.tips.Unpin:e.tips.Pin).removeClass(r?n:i).addClass(r?i:n)}},syncPinBtns:function(e,t,n){b.each(e.state[t].pins,function(r,i){b.layout.buttons.setPinState(e,b(i),t,n)})},_load:function(e){var t=b.layout.buttons;b.extend(e,{bindButton:function(n,r,i){return t.bind(e,n,r,i)},addToggleBtn:function(n,r,i){return t.addToggle(e,n,r,i)},addOpenBtn:function(n,r,i){return t.addOpen(e,n,r,i)},addCloseBtn:function(n,r){return t.addClose(e,n,r)},addPinBtn:function(n,r){return t.addPin(e,n,r)}});for(var n=0;n<4;n++)e.state[b.layout.config.borderPanes[n]].pins=[];e.options.autoBindCustomButtons&&t.init(e)},_unload:function(){}},b.layout.onLoad.push(b.layout.buttons._load),b.layout.plugins.browserZoom=!0,b.layout.defaults.browserZoomCheckInterval=1e3,b.layout.optionsMap.layout.push("browserZoomCheckInterval"),b.layout.browserZoom={_init:function(e){b.layout.browserZoom.ratio()!==!1&&b.layout.browserZoom._setTimer(e)},_setTimer:function(e){if(!e.destroyed){var t=e.options,n=e.state,r=e.hasParentLayout?5e3:Math.max(t.browserZoomCheckInterval,100);setTimeout(function(){if(!e.destroyed&&t.resizeWithWindow){var r=b.layout.browserZoom.ratio();r!==n.browserZoom&&(n.browserZoom=r,e.resizeAll()),b.layout.browserZoom._setTimer(e)}},r)}},ratio:function(){function e(e,t){return(parseInt(e,10)/parseInt(t,10)*100).toFixed()}var t=window,n=screen,r=document,i=r.documentElement||r.body,s=b.layout.browser,o=s.version,u,a,f;return s.msie&&o>8||!s.msie?!1:n.deviceXDPI?e(n.deviceXDPI,n.systemXDPI):s.webkit&&(u=r.body.getBoundingClientRect)?e(u.left-u.right,r.body.offsetWidth):s.webkit&&(a=t.outerWidth)?e(a,t.innerWidth):(a=n.width)&&(f=i.clientWidth)?e(a,f):!1}},b.layout.onReady.push(b.layout.browserZoom._init)}(jQuery),window.rangy=function(){function u(n,r){var i=typeof n[r];return i==t||i==e&&!!n[r]||i=="unknown"}function a(t,n){return typeof t[n]==e&&!!t[n]}function f(e,t){return typeof e[t]!=n}function l(e){return function(t,n){var r=n.length;while(r--)if(!e(t,n[r]))return!1;return!0}}function d(e){return e&&c(e,o)&&p(e,s)}function m(e){window.alert("Rangy not supported in your browser. Reason: "+e),v.initialized=!0,v.supported=!1}function g(e){var t="Rangy warning: "+e;v.config.alertOnWarn?window.alert(t):typeof window.console!=n&&typeof window.console.log!=n&&window.console.log(t)}function w(){if(v.initialized)return;var e,t=!1,n=!1;u(document,"createRange")&&(e=document.createRange(),c(e,i)&&p(e,r)&&(t=!0),e.detach());var s=a(document,"body")?document.body:document.getElementsByTagName("body")[0];s&&u(s,"createTextRange")&&(e=s.createTextRange(),d(e)&&(n=!0)),!t&&!n&&m("Neither Range nor TextRange are implemented"),v.initialized=!0,v.features={implementsDomRange:t,implementsTextRange:n};var o=b.concat(y);for(var f=0,l=o.length;f<l;++f)try{o[f](v)}catch(h){a(window,"console")&&u(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",h)}}function S(e){e=e||window,w();for(var t=0,n=E.length;t<n;++t)E[t](e)}function x(e){this.name=e,this.initialized=!1,this.supported=!1}var e="object",t="function",n="undefined",r=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],i=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],o=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],c=l(u),h=l(a),p=l(f),v={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:u,isHostObject:a,isHostProperty:f,areHostMethods:c,areHostObjects:h,areHostProperties:p,isTextRange:d},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};v.fail=m,v.warn=g,{}.hasOwnProperty?v.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:m("hasOwnProperty not supported");var y=[],b=[];v.init=w,v.addInitListener=function(e){v.initialized?e(v):y.push(e)};var E=[];v.addCreateMissingNativeApiListener=function(e){E.push(e)},v.createMissingNativeApi=S,x.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},x.prototype.warn=function(e){v.warn("Module "+this.name+": "+e)},x.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},v.createModule=function(e,t){var n=new x(e);v.modules[e]=n,b.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},v.requireModules=function(e){for(var t=0,n=e.length,r,i;t<n;++t){i=e[t],r=v.modules[i];if(!r||!(r instanceof x))throw new Error("Module '"+i+"' not found");if(!r.supported)throw new Error("Module '"+i+"' not supported")}};var T=!1,N=function(e){T||(T=!0,v.initialized||w())};if(typeof window==n){m("No window found");return}if(typeof document==n){m("No document found");return}return u(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),u(window,"addEventListener")?window.addEventListener("load",N,!1):u(window,"attachEvent")?window.attachEvent("onload",N):m("Window does not have required addEventListener or attachEvent method"),v}(),rangy.createModule("DomUtil",function(e,t){function u(e){var t;return typeof e.namespaceURI==n||(t=e.namespaceURI)===null||t=="http://www.w3.org/1999/xhtml"}function a(e){var t=e.parentNode;return t.nodeType==1?t:null}function f(e){var t=0;while(e=e.previousSibling)t++;return t}function l(e){var t;return d(e)?e.length:(t=e.childNodes)?t.length:0}function c(e,t){var n=[],r;for(r=e;r;r=r.parentNode)n.push(r);for(r=t;r;r=r.parentNode)if(o(n,r))return r;return null}function h(e,t,n){var r=n?t:t.parentNode;while(r){if(r===e)return!0;r=r.parentNode}return!1}function p(e,t,n){var r,i=n?e:e.parentNode;while(i){r=i.parentNode;if(r===t)return i;i=r}return null}function d(e){var t=e.nodeType;return t==3||t==4||t==8}function v(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function m(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),v(n,e),n}function g(e){if(e.nodeType==9)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return g(e.parentNode);throw new Error("getDocument: no document found for node")}function y(e){var t=g(e);if(typeof t.defaultView!=n)return t.defaultView;if(typeof t.parentWindow!=n)return t.parentWindow;throw new Error("Cannot get a window object for node")}function b(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function w(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function E(e){return r.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function S(e){var t;while(t=e.parentNode)e=t;return e}function x(e,t,n,r){var i,s,o,u,a;if(e==n)return t===r?0:t<r?-1:1;if(i=p(n,e,!0))return t<=f(i)?-1:1;if(i=p(e,n,!0))return f(i)<r?-1:1;s=c(e,n),o=e===s?s:p(e,s,!0),u=n===s?s:p(n,s,!0);if(o===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");a=s.firstChild;while(a){if(a===o)return-1;if(a===u)return 1;a=a.nextSibling}throw new Error("Should not be here!")}function T(e){var t=g(e).createDocumentFragment(),n;while(n=e.firstChild)t.appendChild(n);return t}function N(e){if(!e)return"[No node]";if(d(e))return'"'+e.data+'"';if(e.nodeType==1){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function C(e){this.root=e,this._next=e}function k(e){return new C(e)}function L(e,t){this.node=e,this.offset=t}function A(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var n="undefined",r=e.util;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),r.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var i=document.createElement("div");r.areHostMethods(i,["insertBefore","appendChild","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),r.isHostProperty(i,"innerHTML")||t.fail("Element is missing innerHTML property");var s=document.createTextNode("test");r.areHostMethods(s,["splitText","deleteData","insertData","appendData","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"])||!r.areHostProperties(s,["data"]))||t.fail("Incomplete Text Node implementation");var o=function(e,t){var n=e.length;while(n--)if(e[n]===t)return!0;return!1};C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next,t,n;if(this._current){t=e.firstChild;if(t)this._next=t;else{n=null;while(e!==this.root&&!(n=e.nextSibling))e=e.parentNode;this._next=n}}return this._current},detach:function(){this._current=this._next=this.root=null}},L.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+N(this.node)+":"+this.offset+")]"}},A.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},A.prototype.toString=function(){return this.message},e.dom={arrayContains:o,isHtmlNamespace:u,parentElement:a,getNodeIndex:f,getNodeLength:l,getCommonAncestor:c,isAncestorOf:h,getClosestAncestorIn:p,isCharacterDataNode:d,insertAfter:v,splitDataNode:m,getDocument:g,getWindow:y,getIframeWindow:w,getIframeDocument:b,getBody:E,getRootContainer:S,comparePoints:x,inspectNode:N,fragmentFromNodeChildren:T,createIterator:k,DomPosition:L},e.DOMException=A}),rangy.createModule("DomRange",function(e,t){function s(e,t){return e.nodeType!=3&&(n.isAncestorOf(e,t.startContainer,!0)||n.isAncestorOf(e,t.endContainer,!0))}function o(e){return n.getDocument(e.startContainer)}function u(e,t,n){var r=e._listeners[t];if(r)for(var i=0,s=r.length;i<s;++i)r[i].call(e,{target:e,args:n})}function a(e){return new r(e.parentNode,n.getNodeIndex(e))}function f(e){return new r(e.parentNode,n.getNodeIndex(e)+1)}function l(e,t,r){var i=e.nodeType==11?e.firstChild:e;return n.isCharacterDataNode(t)?r==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,r==0?t:n.splitDataNode(t,r)):r>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[r]),i}function c(e){var t;for(var n,r=o(e.range).createDocumentFragment(),s;n=e.next();){t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(s=e.getSubtreeIterator(),n.appendChild(c(s)),s.detach(!0));if(n.nodeType==10)throw new i("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function h(e,t,r){var i,s;r=r||{stop:!1};for(var o,u;o=e.next();)if(e.isPartiallySelectedSubtree()){if(t(o)===!1){r.stop=!0;return}u=e.getSubtreeIterator(),h(u,t,r),u.detach(!0);if(r.stop)return}else{i=n.createIterator(o);while(s=i.next())if(t(s)===!1){r.stop=!0;return}}}function p(e){var t;while(e.next())e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),p(t),t.detach(!0)):e.remove()}function d(e){for(var t,n=o(e.range).createDocumentFragment(),r;t=e.next();){e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),r=e.getSubtreeIterator(),t.appendChild(d(r)),r.detach(!0)):e.remove();if(t.nodeType==10)throw new i("HIERARCHY_REQUEST_ERR");n.appendChild(t)}return n}function v(e,t,n){var r=!!t&&!!t.length,i,s=!!n;r&&(i=new RegExp("^("+t.join("|")+")$"));var o=[];return h(new g(e,!1),function(e){(!r||i.test(e.nodeType))&&(!s||n(e))&&o.push(e)}),o}function m(e){var t=typeof e.getName=="undefined"?"Range":e.getName();return"["+t+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(e,t){this.range=e,this.clonePartiallySelectedTextNodes=t;if(!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var r=e.commonAncestorContainer;this.sc===this.ec&&n.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===r&&!n.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:n.getClosestAncestorIn(this.sc,r,!0),this._last=this.ec===r&&!n.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:n.getClosestAncestorIn(this.ec,r,!0))}}function y(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function b(e,t,n){this.nodes=v(e,t,n),this._next=this.nodes[0],this._position=0}function N(e){return function(t,r){var i,s=r?t:t.parentNode;while(s){i=s.nodeType;if(n.arrayContains(e,i))return s;s=s.parentNode}return null}}function O(e,t){if(A(e,t))throw new y("INVALID_NODE_TYPE_ERR")}function M(e){if(!e.startContainer)throw new i("INVALID_STATE_ERR")}function _(e,t){if(!n.arrayContains(t,e.nodeType))throw new y("INVALID_NODE_TYPE_ERR")}function D(e,t){if(t<0||t>(n.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new i("INDEX_SIZE_ERR")}function P(e,t){if(k(e,!0)!==k(t,!0))throw new i("WRONG_DOCUMENT_ERR")}function H(e){if(L(e,!0))throw new i("NO_MODIFICATION_ALLOWED_ERR")}function B(e,t){if(!e)throw new i(t)}function j(e){return!n.arrayContains(E,e.nodeType)&&!k(e,!0)}function F(e,t){return t<=(n.isCharacterDataNode(e)?e.length:e.childNodes.length)}function I(e){return!!e.startContainer&&!!e.endContainer&&!j(e.startContainer)&&!j(e.endContainer)&&F(e.startContainer,e.startOffset)&&F(e.endContainer,e.endOffset)}function q(e){M(e);if(!I(e))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function et(){}function tt(e){e.START_TO_START=V,e.START_TO_END=$,e.END_TO_END=J,e.END_TO_START=K,e.NODE_BEFORE=Q,e.NODE_AFTER=G,e.NODE_BEFORE_AND_AFTER=Y,e.NODE_INSIDE=Z}function nt(e){tt(e),tt(e.prototype)}function rt(e,t){return function(){q(this);var r=this.startContainer,i=this.startOffset,s=this.commonAncestorContainer,o=new g(this,!0),u,a;r!==s&&(u=n.getClosestAncestorIn(r,s,!0),a=f(u),r=a.node,i=a.offset),h(o,H),o.reset();var l=e(o);return o.detach(),t(this,r,i,r,i),l}}function it(t,r,i){function o(e,t){return function(n){M(this),_(n,w),_(C(n),E);var r=(e?a:f)(n);(t?u:l)(this,r.node,r.offset)}}function u(e,t,i){var s=e.endContainer,o=e.endOffset;if(t!==e.startContainer||i!==e.startOffset){if(C(t)!=C(s)||n.comparePoints(t,i,s,o)==1)s=t,o=i;r(e,t,i,s,o)}}function l(e,t,i){var s=e.startContainer,o=e.startOffset;if(t!==e.endContainer||i!==e.endOffset){if(C(t)!=C(s)||n.comparePoints(t,i,s,o)==-1)s=t,o=i;r(e,s,o,t,i)}}function c(e,t,n){(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset)&&r(e,t,n,t,n)}t.prototype=new et,e.util.extend(t.prototype,{setStart:function(e,t){M(this),O(e,!0),D(e,t),u(this,e,t)},setEnd:function(e,t){M(this),O(e,!0),D(e,t),l(this,e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){q(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){M(this),O(e,!0),r(this,e,0,e,n.getNodeLength(e))},selectNode:function(e){M(this),O(e,!1),_(e,w);var t=a(e),n=f(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:rt(d,r),deleteContents:rt(p,r),canSurroundContents:function(){q(this),H(this.startContainer),H(this.endContainer);var e=new g(this,!0),t=e._first&&s(e._first,this)||e._last&&s(e._last,this);return e.detach(),!t},detach:function(){i(this)},splitBoundaries:function(){q(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,s=this.endOffset,o=e===i;n.isCharacterDataNode(i)&&s>0&&s<i.length&&n.splitDataNode(i,s),n.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=n.splitDataNode(e,t),o?(s-=t,i=e):i==e.parentNode&&s>=n.getNodeIndex(e)&&s++,t=0),r(this,e,t,i,s)},normalizeBoundaries:function(){q(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,s=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,s=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},u=function(r){var o=r.previousSibling;if(o&&o.nodeType==r.nodeType){e=r;var u=r.length;t=o.length,r.insertData(0,o.data),o.parentNode.removeChild(o);if(e==i)s+=t,i=e;else if(i==r.parentNode){var a=n.getNodeIndex(r);s==a?(i=r,s=u):s>a&&s--}}},a=!0;if(n.isCharacterDataNode(i))i.length==s&&o(i);else{if(s>0){var f=i.childNodes[s-1];f&&n.isCharacterDataNode(f)&&o(f)}a=!this.collapsed}if(a){if(n.isCharacterDataNode(e))t==0&&u(e);else if(t<e.childNodes.length){var l=e.childNodes[t];l&&n.isCharacterDataNode(l)&&u(l)}}else e=i,t=s;r(this,e,t,i,s)},collapseToPoint:function(e,t){M(this),O(e,!0),D(e,t),c(this,e,t)}}),nt(t)}function st(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function ot(e,t,n,r,i){var s=e.startContainer!==t||e.startOffset!==n,o=e.endContainer!==r||e.endOffset!==i;e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,st(e),u(e,"boundarychange",{startMoved:s,endMoved:o})}function ut(e){M(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,u(e,"detach",null),e._listeners=null}function at(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},st(this)}e.requireModules(["DomUtil"]);var n=e.dom,r=n.DomPosition,i=e.DOMException;g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,n.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e=this._current,t,r;!n.isCharacterDataNode(e)||e!==this.sc&&e!==this.ec?e.parentNode&&e.parentNode.removeChild(e):(t=e===this.sc?this.so:0,r=e===this.ec?this.eo:e.length,t!=r&&e.deleteData(t,r-t))},isPartiallySelectedSubtree:function(){var e=this._current;return s(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new at(o(this.range));var t=this._current,r=t,i=0,s=t,u=n.getNodeLength(t);n.isAncestorOf(t,this.sc,!0)&&(r=this.sc,i=this.so),n.isAncestorOf(t,this.ec,!0)&&(s=this.ec,u=this.eo),ot(e,r,i,s,u)}return new g(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},y.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},y.prototype.toString=function(){return this.message},b.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var w=[1,3,4,5,7,8,10],E=[2,9,11],S=[5,6,10,12],x=[1,3,4,5,7,8,10,11],T=[1,3,4,5,7,8],C=n.getRootContainer,k=N([9,11]),L=N(S),A=N([6,10,12]),R=document.createElement("style"),U=!1;try{R.innerHTML="<b>x</b>",U=R.firstChild.nodeType==3}catch(z){}e.features.htmlParsingConforms=U;var W=U?function(e){var t=this.startContainer,r=n.getDocument(t);if(!t)throw new i("INVALID_STATE_ERR");var s=null;return t.nodeType==1?s=t:n.isCharacterDataNode(t)&&(s=n.parentElement(t)),s===null||s.nodeName=="HTML"&&n.isHtmlNamespace(n.getDocument(s).documentElement)&&n.isHtmlNamespace(s)?s=r.createElement("body"):s=s.cloneNode(!1),s.innerHTML=e,n.fragmentFromNodeChildren(s)}:function(e){M(this);var t=o(this),r=t.createElement("body");return r.innerHTML=e,n.fragmentFromNodeChildren(r)},X=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],V=0,$=1,J=2,K=3,Q=0,G=1,Y=2,Z=3;et.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){q(this),P(this.startContainer,t.startContainer);var r,i,s,o,u=e==K||e==V?"start":"end",a=e==$||e==V?"start":"end";return r=this[u+"Container"],i=this[u+"Offset"],s=t[a+"Container"],o=t[a+"Offset"],n.comparePoints(r,i,s,o)},insertNode:function(e){q(this),_(e,x),H(this.startContainer);if(n.isAncestorOf(e,this.startContainer,!0))throw new i("HIERARCHY_REQUEST_ERR");var t=l(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){q(this);var e,t;if(this.collapsed)return o(this).createDocumentFragment();if(this.startContainer===this.endContainer&&n.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=o(this).createDocumentFragment(),t.appendChild(e),t;var r=new g(this,!0);return e=c(r),r.detach(),e},canSurroundContents:function(){q(this),H(this.startContainer),H(this.endContainer);var e=new g(this,!0),t=e._first&&s(e._first,this)||e._last&&s(e._last,this);return e.detach(),!t},surroundContents:function(e){_(e,T);if(!this.canSurroundContents())throw new y("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())while(e.lastChild)e.removeChild(e.lastChild);l(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){q(this);var e=new at(o(this)),t=X.length,n;while(t--)n=X[t],e[n]=this[n];return e},toString:function(){q(this);var e=this.startContainer;if(e===this.endContainer&&n.isCharacterDataNode(e))return e.nodeType==3||e.nodeType==4?e.data.slice(this.startOffset,this.endOffset):"";var t=[],r=new g(this,!0);return h(r,function(e){(e.nodeType==3||e.nodeType==4)&&t.push(e.data)}),r.detach(),t.join("")},compareNode:function(e){q(this);var t=e.parentNode,r=n.getNodeIndex(e);if(!t)throw new i("NOT_FOUND_ERR");var s=this.comparePoint(t,r),o=this.comparePoint(t,r+1);return s<0?o>0?Y:Q:o>0?G:Z},comparePoint:function(e,t){return q(this),B(e,"HIERARCHY_REQUEST_ERR"),P(e,this.startContainer),n.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:n.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:W,toHtml:function(){q(this);var e=o(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){q(this),B(e,"NOT_FOUND_ERR");if(n.getDocument(e)!==o(this))return!1;var r=e.parentNode,i=n.getNodeIndex(e);B(r,"NOT_FOUND_ERR");var s=n.comparePoints(r,i,this.endContainer,this.endOffset),u=n.comparePoints(r,i+1,this.startContainer,this.startOffset);return t?s<=0&&u>=0:s<0&&u>0},isPointInRange:function(e,t){return q(this),B(e,"HIERARCHY_REQUEST_ERR"),P(e,this.startContainer),n.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&n.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){q(this);if(o(e)!=o(this))throw new i("WRONG_DOCUMENT_ERR");var r=n.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),s=n.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?r<=0&&s>=0:r<0&&s>0},intersection:function(e){if(this.intersectsRange(e)){var t=n.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),r=n.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return t==-1&&i.setStart(e.startContainer,e.startOffset),r==1&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return n.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1&&t.setStart(e.startContainer,e.startOffset),n.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1&&t.setEnd(e.endContainer,e.endOffset),t}throw new y("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==Z},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,n.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();t.setEnd(r,r.length);var i=this.containsRange(t);return t.detach(),i}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return q(this),new b(this,e,t)},getNodes:function(e,t){return q(this),v(this,e,t)},getDocument:function(){return o(this)},collapseBefore:function(e){M(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){M(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return at.rangesEqual(this,e)},isValid:function(){return I(this)},inspect:function(){return m(this)}},it(at,ot,ut),e.rangePrototype=et.prototype,at.rangeProperties=X,at.RangeIterator=g,at.copyComparisonConstants=nt,at.createPrototypeRange=it,at.inspect=m,at.getRangeDocument=o,at.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=at,e.RangeException=y}),rangy.createModule("WrappedRange",function(e,t){function o(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();n=e.duplicate(),n.collapse(!1);var s=n.parentElement(),o=i==s?i:r.getCommonAncestor(i,s);return o==t?o:r.getCommonAncestor(t,o)}function u(e){return e.compareEndPoints("StartToEnd",e)==0}function a(e,t,n,s){var o=e.duplicate();o.collapse(n);var u=o.parentElement();r.isAncestorOf(t,u,!0)||(u=t);if(!u.canHaveHTML)return new i(u.parentNode,r.getNodeIndex(u));var a=r.getDocument(u).createElement("span"),f,l=n?"StartToStart":"StartToEnd",c,h,p,d;do u.insertBefore(a,a.previousSibling),o.moveToElementText(a);while((f=o.compareEndPoints(l,e))>0&&a.previousSibling);d=a.nextSibling;if(f==-1&&d&&r.isCharacterDataNode(d)){o.setEndPoint(n?"EndToStart":"EndToEnd",e);var v;if(/[\r\n]/.test(d.data)){var m=o.duplicate(),g=m.text.replace(/\r\n/g,"\r").length;v=m.moveStart("character",g);while((f=m.compareEndPoints("StartToEnd",m))==-1)v++,m.moveStart("character",1)}else v=o.text.length;p=new i(d,v)}else c=(s||!n)&&a.previousSibling,h=(s||n)&&a.nextSibling,h&&r.isCharacterDataNode(h)?p=new i(h,0):c&&r.isCharacterDataNode(c)?p=new i(c,c.length):p=new i(u,r.getNodeIndex(a));return a.parentNode.removeChild(a),p}function f(e,t){var n,i,s=e.offset,o=r.getDocument(e.node),u,a,f=o.body.createTextRange(),l=r.isCharacterDataNode(e.node);return l?(n=e.node,i=n.parentNode):(a=e.node.childNodes,n=s<a.length?a[s]:null,i=e.node),u=o.createElement("span"),u.innerHTML="&#feff;",n?i.insertBefore(u,n):i.appendChild(u),f.moveToElementText(u),f.collapse(!t),i.removeChild(u),l&&f[t?"moveStart":"moveEnd"]("character",s),f}e.requireModules(["DomUtil","DomRange"]);var n,r=e.dom,i=r.DomPosition,s=e.DomRange;if(e.features.implementsDomRange&&(!e.features.implementsTextRange||!e.config.preferTextRange))(function(){function u(e){var t=i.length,n;while(t--)n=i[t],e[n]=e.nativeRange[n]}function a(e,t,n,r,i){var s=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==r||e.endOffset!=i;if(s||o)e.setEnd(r,i),e.setStart(t,n)}function f(e){e.nativeRange.detach(),e.detached=!0;var t=i.length,n;while(t--)n=i[t],e[n]=null}var t,i=s.rangeProperties,o,l;n=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,u(this)},s.createPrototypeRange(n,a,f),t=n.prototype,t.selectNode=function(e){this.nativeRange.selectNode(e),u(this)},t.deleteContents=function(){this.nativeRange.deleteContents(),u(this)},t.extractContents=function(){var e=this.nativeRange.extractContents();return u(this),e},t.cloneContents=function(){return this.nativeRange.cloneContents()},t.surroundContents=function(e){this.nativeRange.surroundContents(e),u(this)},t.collapse=function(e){this.nativeRange.collapse(e),u(this)},t.cloneRange=function(){return new n(this.nativeRange.cloneRange())},t.refresh=function(){u(this)},t.toString=function(){return this.nativeRange.toString()};var c=document.createTextNode("test");r.getBody(document).appendChild(c);var h=document.createRange();h.setStart(c,0),h.setEnd(c,0);try{h.setStart(c,1),o=!0,t.setStart=function(e,t){this.nativeRange.setStart(e,t),u(this)},t.setEnd=function(e,t){this.nativeRange.setEnd(e,t),u(this)},l=function(e){return function(t){this.nativeRange[e](t),u(this)}}}catch(p){o=!1,t.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}u(this)},t.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}u(this)},l=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}u(this)}}}t.setStartBefore=l("setStartBefore","setEndBefore"),t.setStartAfter=l("setStartAfter","setEndAfter"),t.setEndBefore=l("setEndBefore","setStartBefore"),t.setEndAfter=l("setEndAfter","setStartAfter"),h.selectNodeContents(c),h.startContainer==c&&h.endContainer==c&&h.startOffset==0&&h.endOffset==c.length?t.selectNodeContents=function(e){this.nativeRange.selectNodeContents(e),u(this)}:t.selectNodeContents=function(e){this.setStart(e,0),this.setEnd(e,s.getEndOffset(e))},h.selectNodeContents(c),h.setEnd(c,3);var d=document.createRange();d.selectNodeContents(c),d.setEnd(c,4),d.setStart(c,2),h.compareBoundaryPoints(h.START_TO_END,d)==-1&h.compareBoundaryPoints(h.END_TO_START,d)==1?t.compareBoundaryPoints=function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:t.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(h,"createContextualFragment")&&(t.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),r.getBody(document).removeChild(c),h.detach(),d.detach()})(),e.createNativeRange=function(e){return e=e||document,e.createRange()};else if(e.features.implementsTextRange){n=function(e){this.textRange=e,this.refresh()},n.prototype=new s(document),n.prototype.refresh=function(){var e,t,n=o(this.textRange);u(this.textRange)?t=e=a(this.textRange,n,!0,!0):(e=a(this.textRange,n,!0,!1),t=a(this.textRange,n,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},s.copyComparisonConstants(n);var l=function(){return this}();typeof l.Range=="undefined"&&(l.Range=n),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}e.features.implementsTextRange&&(n.rangeToTextRange=function(e){if(e.collapsed){var t=f(new i(e.startContainer,e.startOffset),!0);return t}var n=f(new i(e.startContainer,e.startOffset),!0),s=f(new i(e.endContainer,e.endOffset),!1),o=r.getDocument(e.startContainer).body.createTextRange();return o.setEndPoint("StartToStart",n),o.setEndPoint("EndToEnd",s),o}),n.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createRange=function(t){return t=t||document,new n(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new s(e)},e.createIframeRange=function(t){return e.createRange(r.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(r.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){var n=t.document;typeof n.createRange=="undefined"&&(n.createRange=function(){return e.createRange(this)}),n=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function p(e){return(e||window).getSelection()}function d(e){return(e||window).document.selection}function L(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function A(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function O(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function M(t){var n;return t instanceof o?(n=t._selectionNativeRange,n||(n=e.createNativeRange(i.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof u?n=t.nativeRange:e.features.implementsDomRange&&t instanceof i.getWindow(t.startContainer).Range&&(n=t),n}function _(e){if(!e.length||e[0].nodeType!=1)return!1;for(var t=1,n=e.length;t<n;++t)if(!i.isAncestorOf(e[0],e[t]))return!1;return!0}function D(e){var t=e.getNodes();if(!_(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function P(e){return!!e&&typeof e.text!="undefined"}function H(e,t){var n=new u(t);e._ranges=[n],L(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function B(t){t._ranges.length=0;if(t.docSelection.type=="None")O(t);else{var n=t.docSelection.createRange();if(P(n))H(t,n);else{t.rangeCount=n.length;var r,s=i.getDocument(n.item(0));for(var o=0;o<t.rangeCount;++o)r=e.createRange(s),r.selectNode(n.item(o)),t._ranges.push(r);t.isCollapsed=t.rangeCount==1&&t._ranges[0].collapsed,L(t,t._ranges[t.rangeCount-1],!1)}}}function j(e,t){var n=e.docSelection.createRange(),r=D(t),s=i.getDocument(n.item(0)),o=i.getBody(s).createControlRange();for(var u=0,a=n.length;u<a;++u)o.add(n.item(u));try{o.add(r)}catch(f){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),B(e)}function I(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function R(e,t){var n=i.getDocument(t[0].startContainer),r=i.getBody(n).createControlRange();for(var s=0,o;s<rangeCount;++s){o=D(t[s]);try{r.add(o)}catch(u){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),B(e)}function V(e,t){if(e.anchorNode&&i.getDocument(e.anchorNode)!==i.getDocument(t))throw new a("WRONG_DOCUMENT_ERR")}function $(e){var t=[],n=new f(e.anchorNode,e.anchorOffset),r=new f(e.focusNode,e.focusOffset),i=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount!="undefined")for(var s=0,u=e.rangeCount;s<u;++s)t[s]=o.inspect(e.getRangeAt(s));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var n="boolean",r="_rangySelection",i=e.dom,s=e.util,o=e.DomRange,u=e.WrappedRange,a=e.DOMException,f=i.DomPosition,l,c,h="Control",v=e.util.isHostMethod(window,"getSelection"),m=e.util.isHostObject(document,"selection"),g=m&&(!v||e.config.preferTextRange);g?(l=d,e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return n.type!="None"||i.getDocument(n.createRange().parentElement())==t}):v?(l=p,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=l;var y=l(),b=e.createNativeRange(document),w=i.getBody(document),E=s.areHostObjects(y,["anchorNode","focusNode"]&&s.areHostProperties(y,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=E;var S=s.isHostMethod(y,"extend");e.features.selectionHasExtend=S;var x=typeof y.rangeCount=="number";e.features.selectionHasRangeCount=x;var T=!1,N=!0;s.areHostMethods(y,["addRange","getRangeAt","removeAllRanges"])&&typeof y.rangeCount=="number"&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");e.frameBorder=0,e.style.position="absolute",e.style.left="-10000px",w.appendChild(e);var t=i.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=i.getIframeWindow(e).getSelection(),r=t.documentElement,s=r.lastChild,o=s.firstChild,u=t.createRange();u.setStart(o,1),u.collapse(!0),n.addRange(u),N=n.rangeCount==1,n.removeAllRanges();var a=u.cloneRange();u.setStart(o,0),a.setEnd(o,2),n.addRange(u),n.addRange(a),T=n.rangeCount==2,u.detach(),a.detach(),w.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=T,e.features.collapsedNonEditableSelectionsSupported=N;var C=!1,k;w&&s.isHostMethod(w,"createControlRange")&&(k=w.createControlRange(),s.areHostProperties(k,["item","add"])&&(C=!0)),e.features.implementsControlRange=C,E?c=function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:c=function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var F;s.isHostMethod(y,"getRangeAt")?F=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:E&&(F=function(t){var n=i.getDocument(t.anchorNode),r=e.createRange(n);return r.setStart(t.anchorNode,t.anchorOffset),r.setEnd(t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&(r.setStart(t.focusNode,t.focusOffset),r.setEnd(t.anchorNode,t.anchorOffset)),r}),e.getSelection=function(e){e=e||window;var t=e[r],n=l(e),i=m?d(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh(e)):(t=new I(n,i,e),e[r]=t),t},e.getIframeSelection=function(t){return e.getSelection(i.getIframeWindow(t))};var q=I.prototype;if(!g&&E&&s.areHostMethods(y,["removeAllRanges","addRange"])){q.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),O(this)};var U=function(t,n){var r=o.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(M(i)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};x?q.addRange=function(t,n){if(C&&m&&this.docSelection.type==h)j(this,t);else if(n&&S)U(this,t);else{var r;T?r=this.rangeCount:(this.removeAllRanges(),r=0),this.nativeSelection.addRange(M(t)),this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==r+1){if(e.config.checkSelectionRanges){var i=F(this.nativeSelection,this.rangeCount-1);i&&!o.rangesEqual(i,t)&&(t=new u(i))}this._ranges[this.rangeCount-1]=t,L(this,t,X(this.nativeSelection)),this.isCollapsed=c(this)}else this.refresh()}}:q.addRange=function(e,t){t&&S?U(this,e):(this.nativeSelection.addRange(M(e)),this.refresh())},q.setRanges=function(e){if(C&&e.length>1)R(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(s.isHostMethod(y,"empty")&&s.isHostMethod(b,"select")&&C&&g))return t.fail("No means of selecting a Range or TextRange was found"),!1;q.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var e;if(this.anchorNode)e=i.getDocument(this.anchorNode);else if(this.docSelection.type==h){var t=this.docSelection.createRange();t.length&&(e=i.getDocument(t.item(0)).body.createTextRange())}if(e){var n=e.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(r){}O(this)},q.addRange=function(e){this.docSelection.type==h?j(this,e):(u.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,L(this,e,!1))},q.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?R(this,e):t&&this.addRange(e[0])}}q.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new a("INDEX_SIZE_ERR");return this._ranges[e]};var z;if(g)z=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=i.getBody(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==h?B(t):P(n)?H(t,n):O(t)};else if(s.isHostMethod(y,"getRangeAt")&&typeof y.rangeCount=="number")z=function(t){if(C&&m&&t.docSelection.type==h)B(t);else{t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount;if(t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));L(t,t._ranges[t.rangeCount-1],X(t.nativeSelection)),t.isCollapsed=c(t)}else O(t)}};else{if(!E||typeof y.isCollapsed!=n||typeof b.collapsed!=n||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;z=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=F(n,0),e._ranges=[t],e.rangeCount=1,A(e),e.isCollapsed=c(e)):O(e)}}q.refresh=function(e){var t=e?this._ranges.slice(0):null;z(this);if(e){var n=t.length;if(n!=this._ranges.length)return!1;while(n--)if(!o.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var W=function(e,t){var n=e.getAllRanges(),r=!1;e.removeAllRanges();for(var i=0,s=n.length;i<s;++i)r||t!==n[i]?e.addRange(n[i]):r=!0;e.rangeCount||O(e)};C?q.removeRange=function(e){if(this.docSelection.type==h){var t=this.docSelection.createRange(),n=D(e),r=i.getDocument(t.item(0)),s=i.getBody(r).createControlRange(),o,u=!1;for(var a=0,f=t.length;a<f;++a)o=t.item(a),o!==n||u?s.add(t.item(a)):u=!0;s.select(),B(this)}else W(this,e)}:q.removeRange=function(e){W(this,e)};var X;!g&&E&&e.features.implementsDomRange?(X=function(e){var t=!1;return e.anchorNode&&(t=i.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1),t},q.isBackwards=function(){return X(this)}):X=q.isBackwards=function(){return!1},q.toString=function(){var e=[];for(var t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},q.collapse=function(t,n){V(this,t);var r=e.createRange(i.getDocument(t));r.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(r),this.isCollapsed=!0},q.collapseToStart=function(){if(!this.rangeCount)throw new a("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},q.collapseToEnd=function(){if(!this.rangeCount)throw new a("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},q.selectAllChildren=function(t){V(this,t);var n=e.createRange(i.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},q.deleteFromDocument=function(){if(C&&m&&this.docSelection.type==h){var e=this.docSelection.createRange(),t;while(e.length)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var r=0,i=n.length;r<i;++r)n[r].deleteContents();this.addRange(n[i-1])}},q.getAllRanges=function(){return this._ranges.slice(0)},q.setSingleRange=function(e){this.setRanges([e])},q.containsNode=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},q.toHtml=function(){var e="";if(this.rangeCount){var t=o.getRangeDocument(this._ranges[0]).createElement("div");for(var n=0,r=this._ranges.length;n<r;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},q.getName=function(){return"WrappedSelection"},q.inspect=function(){return $(this)},q.detach=function(){this.win[r]=null,this.win=this.anchorNode=this.focusNode=null},I.inspect=$,e.Selection=I,e.selectionPrototype=q,e.addCreateMissingNativeApiListener(function(t){typeof t.getSelection=="undefined"&&(t.getSelection=function(){return e.getSelection(this)}),t=null})}),rangy.createModule("SaveRestore",function(e,t){function i(e,t){return(t||document).getElementById(e)}function s(e,t){var i="selectionBoundary_"+ +(new Date)+"_"+(""+Math.random()).slice(2),s,o=n.getDocument(e.startContainer),u=e.cloneRange();return u.collapse(t),s=o.createElement("span"),s.id=i,s.style.lineHeight="0",s.style.display="none",s.className="rangySelectionBoundary",s.appendChild(o.createTextNode(r)),u.insertNode(s),u.detach(),s}function o(e,n,r,s){var o=i(r,e);o?(n[s?"setStartBefore":"setEndBefore"](o),o.parentNode.removeChild(o)):t.warn("Marker element has been removed. Cannot restore selection.")}function u(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function a(n){n=n||window;var r=n.document;if(!e.isSelectionValid(n)){t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus.");return}var o=e.getSelection(n),a=o.getAllRanges(),f=[],l,c,h;a.sort(u);for(var p=0,d=a.length;p<d;++p)h=a[p],h.collapsed?(c=s(h,!1),f.push({markerId:c.id,collapsed:!0})):(c=s(h,!1),l=s(h,!0),f[p]={startMarkerId:l.id,endMarkerId:c.id,collapsed:!1,backwards:a.length==1&&o.isBackwards()});for(p=d-1;p>=0;--p)h=a[p],h.collapsed?h.collapseBefore(i(f[p].markerId,r)):(h.setEndBefore(i(f[p].endMarkerId,r)),h.setStartAfter(i(f[p].startMarkerId,r)));return o.setRanges(a),{win:n,doc:r,rangeInfos:f,restored:!1}}function f(n,r){if(!n.restored){var s=n.rangeInfos,u=e.getSelection(n.win),a=[];for(var f=s.length,l=f-1,c,h;l>=0;--l){c=s[l],h=e.createRange(n.doc);if(c.collapsed){var p=i(c.markerId,n.doc);if(p){p.style.display="inline";var d=p.previousSibling;d&&d.nodeType==3?(p.parentNode.removeChild(p),h.collapseToPoint(d,d.length)):(h.collapseBefore(p),p.parentNode.removeChild(p))}else t.warn("Marker element has been removed. Cannot restore selection.")}else o(n.doc,h,c.startMarkerId,!0),o(n.doc,h,c.endMarkerId,!1);f==1&&h.normalizeBoundaries(),a[l]=h}f==1&&r&&e.features.selectionHasExtend&&s[0].backwards?(u.removeAllRanges(),u.addRange(a[0],!0)):u.setRanges(a),n.restored=!0}}function l(e,t){var n=i(t,e);n&&n.parentNode.removeChild(n)}function c(e){var t=e.rangeInfos;for(var n=0,r=t.length,i;n<r;++n)i=t[n],i.collapsed?l(e.doc,i.markerId):(l(e.doc,i.startMarkerId),l(e.doc,i.endMarkerId))}e.requireModules(["DomUtil","DomRange","WrappedRange"]);var n=e.dom,r="﻿";e.saveSelection=a,e.restoreSelection=f,e.removeMarkerElement=l,e.removeMarkers=c}),function(e){function t(e){for(var t in l)e=e.replace(l[t],"");return e}function n(){return"!*$^#(@*#&"}function r(e){return e.replace(">","&gt;").replace("<","&lt;").replace("\\","\\\\")}function i(e){var t=/\/\*.*?\*\//g;return e.replace(/\s*[a-z-]+\s*=\s*'[^']*'/gi,function(e){return e.replace(t,"")}).replace(/\s*[a-z-]+\s*=\s*"[^"]*"/gi,function(e){return e.replace(t,"")}).replace(/\s*[a-z-]+\s*=\s*[^\s]+/gi,function(e){return e.replace(t,"")})}var s={"&nbsp;":" ","&iexcl;":"¡","&cent;":"¢","&pound;":"£","&curren;":"€","&yen;":"¥","&brvbar;":"Š","&sect;":"§","&uml;":"š","&copy;":"©","&ordf;":"ª","&laquo;":"«","&not;":"¬","&shy;":"­","&reg;":"®","&macr;":"¯","&deg;":"°","&plusmn;":"±","&sup2;":"²","&sup3;":"³","&acute;":"Ž","&micro;":"µ","&para;":"¶","&middot;":"·","&cedil;":"ž","&sup1;":"¹","&ordm;":"º","&raquo;":"»","&frac14;":"Œ","&frac12;":"œ","&frac34;":"Ÿ","&iquest;":"¿","&Agrave;":"À","&Aacute;":"Á","&Acirc;":"Â","&Atilde;":"Ã","&Auml;":"Ä","&Aring;":"Å","&AElig;":"Æ","&Ccedil;":"Ç","&Egrave;":"È","&Eacute;":"É","&Ecirc;":"Ê","&Euml;":"Ë","&Igrave;":"Ì","&Iacute;":"Í","&Icirc;":"Î","&Iuml;":"Ï","&ETH;":"Ð","&Ntilde;":"Ñ","&Ograve;":"Ò","&Oacute;":"Ó","&Ocirc;":"Ô","&Otilde;":"Õ","&Ouml;":"Ö","&times;":"×","&Oslash;":"Ø","&Ugrave;":"Ù","&Uacute;":"Ú","&Ucirc;":"Û","&Uuml;":"Ü","&Yacute;":"Ý","&THORN;":"Þ","&szlig;":"ß","&agrave;":"à","&aacute;":"á","&acirc;":"â","&atilde;":"ã","&auml;":"ä","&aring;":"å","&aelig;":"æ","&ccedil;":"ç","&egrave;":"è","&eacute;":"é","&ecirc;":"ê","&euml;":"ë","&igrave;":"ì","&iacute;":"í","&icirc;":"î","&iuml;":"ï","&eth;":"ð","&ntilde;":"ñ","&ograve;":"ò","&oacute;":"ó","&ocirc;":"ô","&otilde;":"õ","&ouml;":"ö","&divide;":"÷","&oslash;":"ø","&ugrave;":"ù","&uacute;":"ú","&ucirc;":"û","&uuml;":"ü","&yacute;":"ý","&thorn;":"þ","&yuml;":"ÿ","&quot;":'"',"&lt;":"<","&gt;":">","&apos;":"'","&minus;":"−","&circ;":"ˆ","&tilde;":"˜","&Scaron;":"Š","&lsaquo;":"‹","&OElig;":"Œ","&lsquo;":"‘","&rsquo;":"’","&ldquo;":"“","&rdquo;":"”","&bull;":"•","&ndash;":"–","&mdash;":"—","&trade;":"™","&scaron;":"š","&rsaquo;":"›","&oelig;":"œ","&Yuml;":"Ÿ","&fnof;":"ƒ","&Alpha;":"Α","&Beta;":"Β","&Gamma;":"Γ","&Delta;":"Δ","&Epsilon;":"Ε","&Zeta;":"Ζ","&Eta;":"Η","&Theta;":"Θ","&Iota;":"Ι","&Kappa;":"Κ","&Lambda;":"Λ","&Mu;":"Μ","&Nu;":"Ν","&Xi;":"Ξ","&Omicron;":"Ο","&Pi;":"Π","&Rho;":"Ρ","&Sigma;":"Σ","&Tau;":"Τ","&Upsilon;":"Υ","&Phi;":"Φ","&Chi;":"Χ","&Psi;":"Ψ","&Omega;":"Ω","&alpha;":"α","&beta;":"β","&gamma;":"γ","&delta;":"δ","&epsilon;":"ε","&zeta;":"ζ","&eta;":"η","&theta;":"θ","&iota;":"ι","&kappa;":"κ","&lambda;":"λ","&mu;":"μ","&nu;":"ν","&xi;":"ξ","&omicron;":"ο","&pi;":"π","&rho;":"ρ","&sigmaf;":"ς","&sigma;":"σ","&tau;":"τ","&upsilon;":"υ","&phi;":"φ","&chi;":"χ","&psi;":"ψ","&omega;":"ω","&thetasym;":"ϑ","&upsih;":"ϒ","&piv;":"ϖ","&ensp;":" ","&emsp;":" ","&thinsp;":" ","&zwnj;":"‌","&zwj;":"‍","&lrm;":"‎","&rlm;":"‏","&sbquo;":"‚","&bdquo;":"„","&dagger;":"†","&Dagger;":"‡","&hellip;":"…","&permil;":"‰","&prime;":"′","&Prime;":"″","&oline;":"‾","&frasl;":"⁄","&euro;":"€","&image;":"ℑ","&weierp;":"℘","&real;":"ℜ","&alefsym;":"ℵ","&larr;":"←","&uarr;":"↑","&rarr;":"→","&darr;":"↓","&harr;":"↔","&crarr;":"↵","&lArr;":"⇐","&uArr;":"⇑","&rArr;":"⇒","&dArr;":"⇓","&hArr;":"⇔","&forall;":"∀","&part;":"∂","&exist;":"∃","&empty;":"∅","&nabla;":"∇","&isin;":"∈","&notin;":"∉","&ni;":"∋","&prod;":"∏","&sum;":"∑","&lowast;":"∗","&radic;":"√","&prop;":"∝","&infin;":"∞","&ang;":"∠","&and;":"∧","&or;":"∨","&cap;":"∩","&cup;":"∪","&int;":"∫","&there4;":"∴","&sim;":"∼","&cong;":"≅","&asymp;":"≈","&ne;":"≠","&equiv;":"≡","&le;":"≤","&ge;":"≥","&sub;":"⊂","&sup;":"⊃","&nsub;":"⊄","&sube;":"⊆","&supe;":"⊇","&oplus;":"⊕","&otimes;":"⊗","&perp;":"⊥","&sdot;":"⋅","&lceil;":"⌈","&rceil;":"⌉","&lfloor;":"⌊","&rfloor;":"⌋","&lang;":"〈","&rang;":"〉","&loz;":"◊","&spades;":"♠","&clubs;":"♣","&hearts;":"♥","&diams;":"♦"},o=function(e){if(!~e.indexOf("&"))return e;for(var t in s)e=e.replace(new RegExp(t,"g"),s[t]);return e=e.replace(/&#x(0*[0-9a-f]{2,5});?/gi,function(e,t){return String.fromCharCode(parseInt(+t,16))}),e=e.replace(/&#([0-9]{2,4});?/gi,function(e,t){return String.fromCharCode(+t)}),e=e.replace(/&amp;/g,"&"),e},u=function(e){e=e.replace(/&/g,"&amp;"),e=e.replace(/'/g,"&#39;");for(var t in s)e=e.replace(new RegExp(s[t],"g"),t);return e};e.entities={encode:u,decode:o};var a={"document.cookie":"","document.write":"",".parentNode":"",".innerHTML":"","window.location":"","-moz-binding":"","<!--":"&lt;!--","-->":"--&gt;","<![CDATA[":"&lt;![CDATA["},f={"javascript\\s*:":"","expression\\s*(\\(|&\\#40;)":"","vbscript\\s*:":"","Redirect\\s+302":""},l=[/%0[0-8bcef]/g,/%1[0-9a-f]/g,/[\x00-\x08]/g,/\x0b/g,/\x0c/g,/[\x0e-\x1f]/g],c=["javascript","expression","vbscript","script","applet","alert","document","write","cookie","window"];e.xssClean=function(s,o){if(typeof s=="object"){for(var u in s)s[u]=e.xssClean(s[u]);return s}s=t(s),s=s.replace(/\&([a-z\_0-9]+)\=([a-z\_0-9]+)/i,n()+"$1=$2"),s=s.replace(/(&\#?[0-9a-z]{2,})([\x00-\x20])*;?/i,"$1;$2"),s=s.replace(/(&\#x?)([0-9A-F]+);?/i,"$1;$2"),s=s.replace(n(),"&");try{s=decodeURIComponent(s)}catch(l){}s=s.replace(/[a-z]+=([\'\"]).*?\1/gi,function(e,t){return e.replace(t,r(t))}),s=t(s),s=s.replace("  "," ");var h=s;for(var u in a)s=s.replace(u,a[u]);for(var u in f)s=s.replace(new RegExp(u,"i"),f[u]);for(var u in c){var p=c[u].split("").join("\\s*")+"\\s*";s=s.replace(new RegExp("("+p+")(\\W)","ig"),function(e,t,n){return t.replace(/\s+/g,"")+n})}do{var d=s;s.match(/<a/i)&&(s=s.replace(/<a\s+([^>]*?)(>|$)/gi,function(e,t,n){return t=i(t.replace("<","").replace(">","")),e.replace(t,t.replace(/href=.*?(alert\(|alert&\#40;|javascript\:|charset\=|window\.|document\.|\.cookie|<script|<xss|base64\s*,)/gi,""))})),s.match(/<img/i)&&(s=s.replace(/<img\s+([^>]*?)(\s?\/?>|$)/gi,function(e,t,n){return t=i(t.replace("<","").replace(">","")),e.replace(t,t.replace(/src=.*?(alert\(|alert&\#40;|javascript\:|charset\=|window\.|document\.|\.cookie|<script|<xss|base64\s*,)/gi,""))}));if(s.match(/script/i)||s.match(/xss/i))s=s.replace(/<(\/*)(script|xss)(.*?)\>/gi,"")}while(d!=s);event_handlers=["[^a-z_-]on\\w*"],o||event_handlers.push("xmlns"),s=s.replace(new RegExp("<([^><]+?)("+event_handlers.join("|")+")(\\s*=\\s*[^><]*)([><]*)","i"),"<$1$4"),naughty="alert|applet|audio|basefont|base|behavior|bgsound|blink|body|embed|expression|form|frameset|frame|head|html|ilayer|iframe|input|isindex|layer|link|meta|object|plaintext|style|script|textarea|title|video|xml|xss",s=s.replace(new RegExp("<(/*\\s*)("+naughty+")([^><]*)([><]*)","gi"),function(e,t,n,r,i){return"&lt;"+t+n+r+i.replace(">","&gt;").replace("<","&lt;")}),s=s.replace(/(alert|cmd|passthru|eval|exec|expression|system|fopen|fsockopen|file|file_get_contents|readfile|unlink)(\s*)\((.*?)\)/gi,"$1$2&#40;$3&#41;");for(var u in a)s=s.replace(u,a[u]);for(var u in f)s=s.replace(new RegExp(u,"i"),f[u]);if(o&&s!==h)throw new Error("Image may contain XSS");return s};var h=e.Validator=function(){};h.prototype.check=function(e,t){return this.str=e===null||isNaN(e)&&e.length===undefined?"":e+"",this.msg=t,this._errors=this._errors||[],this},h.prototype.validate=h.prototype.check,h.prototype.assert=h.prototype.check,h.prototype.error=function(e){throw new Error(e)},h.prototype.isEmail=function(){return this.str.match(/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/)?this:this.error(this.msg||"Invalid email")},h.prototype.isCreditCard=function(){this.str=this.str.replace(/[^0-9]+/g,"");if(!this.str.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/))return this.error(this.msg||"Invalid credit card");var e=0,t,n,r=!1;for(var i=this.length-1;i>=0;i--)t=this.substring(i,i+1),n=parseInt(t,10),r?(n*=2,n>=10?e+=n%10+1:e+=n):e+=n,r?r=!1:r=!0;return e%10!==0?this.error(this.msg||"Invalid credit card"):this},h.prototype.isUrl=function(){return!this.str.match(/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/i)||this.str.length>2083?this.error(this.msg||"Invalid URL"):this},h.prototype.isIP=function(){return this.str.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)?this:this.error(this.msg||"Invalid IP")},h.prototype.isAlpha=function(){return this.str.match(/^[a-zA-Z]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isAlphanumeric=function(){return this.str.match(/^[a-zA-Z0-9]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isNumeric=function(){return this.str.match(/^-?[0-9]+$/)?this:this.error(this.msg||"Invalid number")},h.prototype.isLowercase=function(){return this.str.match(/^[a-z0-9]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isUppercase=function(){return this.str.match(/^[A-Z0-9]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isInt=function(){return this.str.match(/^(?:-?(?:0|[1-9][0-9]*))$/)?this:this.error(this.msg||"Invalid integer")},h.prototype.isDecimal=function(){return this.str.match(/^(?:-?(?:0|[1-9][0-9]*))?(?:\.[0-9]*)?$/)?this:this.error(this.msg||"Invalid decimal")},h.prototype.isFloat=function(){return this.isDecimal()},h.prototype.notNull=function(){return this.str===""?this.error(this.msg||"Invalid characters"):this},h.prototype.isNull=function(){return this.str!==""?this.error(this.msg||"Invalid characters"):this},h.prototype.notEmpty=function(){return this.str.match(/^[\s\t\r\n]*$/)?this.error(this.msg||"String is whitespace"):this},h.prototype.equals=function(e){return this.str!=e?this.error(this.msg||"Not equal"):this},h.prototype.contains=function(e){return this.str.indexOf(e)===-1?this.error(this.msg||"Invalid characters"):this},h.prototype.notContains=function(e){return this.str.indexOf(e)>=0?this.error(this.msg||"Invalid characters"):this},h.prototype.regex=h.prototype.is=function(e,t){return Object.prototype.toString.call(e).slice(8,-1)!=="RegExp"&&(e=new RegExp(e,t)),this.str.match(e)?this:this.error(this.msg||"Invalid characters")},h.prototype.notRegex=h.prototype.not=function(e,t){return Object.prototype.toString.call(e).slice(8,-1)!=="RegExp"&&(e=new RegExp(e,t)),this.str.match(e)&&this.error(this.msg||"Invalid characters"),this},h.prototype.len=function(e,t){return this.str.length<e?this.error(this.msg||"String is too small"):typeof t!==undefined&&this.str.length>t?this.error(this.msg||"String is too large"):this},h.prototype.isUUID=function(e){var t;return e==3||e=="v3"?t=/[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i:e==4||e=="v4"?t=/[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i:t=/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,this.str.match(t)?this:this.error(this.msg||"Not a UUID")},h.prototype.isDate=function(){var e=Date.parse(this.str);return isNaN(e)?this.error(this.msg||"Not a date"):this},h.prototype.isIn=function(e){return e&&typeof e.indexOf=="function"?~e.indexOf(this.str)?this:this.error(this.msg||"Unexpected value"):this.error(this.msg||"Invalid in() argument")},h.prototype.notIn=function(e){return e&&typeof e.indexOf=="function"?e.indexOf(this.str)!==-1?this.error(this.msg||"Unexpected value"):this:this.error(this.msg||"Invalid notIn() argument")},h.prototype.min=function(e){var t=parseFloat(this.str);return!isNaN(t)&&t<e?this.error(this.msg||"Invalid number"):this},h.prototype.max=function(e){var t=parseFloat(this.str);return!isNaN(t)&&t>e?this.error(this.msg||"Invalid number"):this},h.prototype.isArray=function(){return Array.isArray(this.str)?this:this.error(this.msg||"Not an array")};var p=e.Filter=function(){},d="\\r\\n\\t\\s";p.prototype.modify=function(e){this.str=e},p.prototype.convert=p.prototype.sanitize=function(e){return this.str=e,this},p.prototype.xss=function(t){return this.modify(e.xssClean(this.str,t)),this.str},p.prototype.entityDecode=function(){return this.modify(o(this.str)),this.str},p.prototype.entityEncode=function(){return this.modify(u(this.str)),this.str},p.prototype.ltrim=function(e){return e=e||d,this.modify(this.str.replace(new RegExp("^["+e+"]+","g"),"")),this.str},p.prototype.rtrim=function(e){return e=e||d,this.modify(this.str.replace(new RegExp("["+e+"]+$","g"),"")),this.str},p.prototype.trim=function(e){return e=e||d,this.modify(this.str.replace(new RegExp("^["+e+"]+|["+e+"]+$","g"),"")),this.str},p.prototype.ifNull=function(e){return(!this.str||this.str==="")&&this.modify(e),this.str},p.prototype.toFloat=function(){return this.modify(parseFloat(this.str)),this.str},p.prototype.toInt=function(e){return e=e||10,this.modify(parseInt(this.str),e),this.str},p.prototype.toBoolean=function(){return!this.str||this.str=="0"||this.str=="false"||this.str==""?this.modify(!1):this.modify(!0),this.str},p.prototype.toBooleanStrict=function(){return this.str=="1"||this.str=="true"?this.modify(!0):this.modify(!1),this.str},e.sanitize=e.convert=function(t){var n=new e.Filter;return n.sanitize(t)},e.check=e.validate=e.assert=function(t,n){var r=new e.Validator;return r.check(t,n)}}(typeof exports=="undefined"?window:exports),function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o,t)}},u=function(e,t){var r={id:e,exports:{}};t(r.exports,o(e),r);var i=n[e]=r.exports;return i},a=function(e,s){var o=i(e,".");s==null&&(s="/");if(r(n,o))return n[o];if(r(t,o))return u(o,t[o]);var a=i(o,"./index");if(r(n,a))return n[a];if(r(t,a))return u(a,t[a]);throw new Error('Cannot find module "'+e+'" from '+'"'+s+'"')},f=function(e,n){if(typeof e=="object")for(var i in e)r(e,i)&&(t[i]=e[i]);else t[e]=n},l=function(){var e=[];for(var n in t)r(t,n)&&e.push(n);return e};e.require=a,e.require.define=f,e.require.register=f,e.require.list=l,e.require.brunch=!0}(),require.register("CNeditor/selection",function(e,t,n){var r;r={},r.cleanSelection=function(e,t,n){var i,s;return e===null?(e=t,t=t.lineNext,r.putStartOnStart(n,e.line$[0].firstElementChild),t.line$.prepend("<span></span>"),r.putEndOnStart(n,t.line$[0].firstElementChild)):(s=e.line$[0].lastElementChild.previousElementSibling,i=t.line$[0].lastElementChild.previousElementSibling,n.setStartAfter(s,0),n.setEndAfter(i,0))},r.selectAll=function(e){var t,n;return t=document.createRange(),t.setStartBefore(e.linesDiv.firstChild),t.setEndAfter(e.linesDiv.lastChild),r.normalize(t),n=e.getEditorSelection(),n.removeAllRanges(),n.addRange(t)},r.cloneEndFragment=function(e,t){var n;return n=rangy.createRangyRange(),n.setStart(e.endContainer,e.endOffset),n.setEndAfter(t.line$[0].lastChild),n.cloneContents()},r.normalize=function(e,t){var n,i,s;return n=e.collapsed,s=r.normalizeBP(e.startContainer,e.startOffset,t),e.setStart(s.cont,s.offset),n?(e.collapse(!0),i=s):(i=r.normalizeBP(e.endContainer,e.endOffset,t),e.setEnd(i.cont,i.offset)),[s,i]},r.normalizeBP=function(e,t,n){var i,s,o,u;return e.nodeName==="#text"?o={cont:e,offset:t}:(u=e.nodeName)==="SPAN"||u==="A"?t>0?(i=e.childNodes[t-1],s=i.length):e.childNodes.length>0?(i=e.firstChild,s=0):(i=document.createTextNode(""),e.appendChild(i),s=0):e.nodeName==="DIV"&&e.id!=="editor-lines"?t===0?r.isSegment(e.firstChild)?o=r.normalizeBP(e.firstChild,0):o=r.normalizeBP(e.firstChild.nextSibling,0):t===1&&!r.isSegment(e.firstChild)?o=r.normalizeBP(e.firstChild.nextSibling,0):t<e.children.length-1?n?(i=e.children[t],i.nodeName==="BR"&&(i=e.children[t-1]),s=0,o=r.normalizeBP(i,s)):(i=e.children[t-1],s=i.childNodes.length,o=r.normalizeBP(i,s)):(i=e.children[e.children.length-2],s=i.childNodes.length,o=r.normalizeBP(i,s)):e.nodeName==="DIV"&&e.id==="editor-lines"?t===0?(i=e.firstChild,s=0,o=r.normalizeBP(i,s)):t===e.childNodes.length?(i=e.lastChild,s=i.childNodes.length,o=r.normalizeBP(i,s)):(i=e.children[t-1],s=i.childNodes.length,o=r.normalizeBP(i,s)):e.nodeName==="BR"&&(i=e.previousSibling,s=i.childNodes.length,o=r.normalizeBP(i,s)),o||(o={cont:i,offset:s}),o},r.normalizeBPs=function(e,t){var n,i,s,o;for(s=0,o=e.length;s<o;s++)n=e[s],i=r.normalizeBP(n.cont,n.offset,t),n.cont=i.cont,n.offset=i.offset;return e},r.getLineDivIsStartIsEnd=function(e,t){var n,i,s,o,u,a,f,l;if(e.nodeName==="DIV"&&e.id!=null&&e.id.substr(0,5)==="CNID_")return e.textContent===""?{div:e,isStart:!0,isEnd:!0}:(s=t===0,o=e.childNodes.length,i=t===o||t===o-1,{div:e,isStart:s,isEnd:i});e.length!=null?(s=t===0,i=t===e.length):(s=t===0,i=t===e.childNodes.length),a=e.parentNode;while((a.nodeName!=="DIV"||a.id==null||a.id.substr(0,5)!=="CNID_")&&a.parentNode!==null)n=r.getNodeIndex(e),s=s&&n===0,i=i&&n===a.childNodes.length-1,e=a,a=a.parentNode;return a.textContent===""?{div:a,isStart:!0,isEnd:!0}:(l=r.getSegmentIndex(e),f=l[0],u=l[1],o=a.childNodes.length,s=s&&f===0,i=i&&(u===o-1||u===o-2),{div:a,isStart:s,isEnd:i})},r.putStartOnStart=function(e,t){var n,r;if((t!=null?t.firstChild:void 0)!=null)return r=t.firstChild.textContent.length,r===0&&(t.firstChild.data=" "),e.setStart(t.firstChild,0);if(t!=null)return n=document.createTextNode(" "),t.appendChild(n),e.setStart(n,0)},r.putEndOnStart=function(e,t){var n,r;if((t!=null?t.firstChild:void 0)!=null)return r=t.firstChild.textContent.length,r===0&&(t.firstChild.data=" "),e.setEnd(t.firstChild,0);if(t!=null)return n=document.createTextNode(" "),t.appendChild(n),e.setEnd(n,0)},r.getLineDiv=function(e,t){var n;return e.nodeName==="DIV"?e.id==="editor-lines"?n=e.children[t]:n=r._getLineDiv(e):n=r._getLineDiv(e),n},r._getLineDiv=function(e){var t;t=e;while(t.nodeName!=="DIV"||t.id==null||t.id.substr(0,5)!=="CNID_"&&t.id!=="editor-lines"||t.parentNode===null)t=t.parentNode;return t},r.getSegment=function(e,t){var n;return e.nodeName==="DIV"?e.id==="editor-lines"?n=e.children[Math.min(t,e.children.length-1)]:e.id!=null&&e.id.substr(0,5)==="CNID_"?n=e:n=r.getNestedSegment(e):n=r.getNestedSegment(e),n},r.getNestedSegment=function(e){var t;t=e.parentNode;while(t.nodeName!=="DIV"||t.id==null||t.id.substr(0,5)!=="CNID_"&&t.id!=="editor-lines"||t.parentNode===null)e=t,t=e.parentNode;return e},r.isSegment=function(e){return e.nodeName!=="BR"&&!e.classList.contains("CNE_task_btn")},r.getNextSegment=function(e){e=e.nextSibling;while(e&&!r.isSegment(e))e=e.nextSibling;return e},r.getPrevSegment=function(e){e=e.previousSibling;while(e&&!r.isSegment(e))e=e.previousSibling;return e},r.setBpPreviousSegEnd=function(e){var t,n,i;return i=r.getNestedSegment(e),n=r.getNodeIndex(i),t=r.normalizeBP(i.parentNode,n)},r.setBpNextSegEnd=function(e){var t,n,i;return i=r.getNestedSegment(e),n=r.getNodeIndex(i)+1,t=r.normalizeBP(i.parentNode,n,!0)},r.getSegmentIndex=function(e){var t,n,r,i,s,o;n=0,o=e.parentNode.childNodes;for(t=i=0,s=o.length;i<s;t=++i){r=o[t],r.classList.contains("CNE_task_btn")&&(n+=-1);if(r===e){n+=t;break}}return[n,t]},r.getNodeIndex=function(e){var t,n,r,i,s,o;o=e.parentNode.childNodes;for(t=i=0,s=o.length;i<s;t=++i){r=o[t];if(r===e){n=t;break}}return n},n.exports=r}),require.register("CNeditor/md2cozy",function(e,t,n){var r;r={},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),r.cozy2md=function(e){var t,n,i,s,o,u,a,f,l,c,h,p;r.currentDepth=0,i=[],o=null,h=e.children();for(a=0,l=h.length;a<l;a++){t=h[a];if(t.id==="CNE_urlPopover")continue;t=$(t),n=r.getLineMetadata(t.attr("class")),s=r.buildMarkdownPrefix(n,o),o=n,p=t.children();for(f=0,c=p.length;f<c;f++)u=p[f],u.nodeType===1?s+=r.convertInlineEltToMarkdown($(u)):s+=$(u).text();i.push(s)}return i.join("")},r.getLineMetadata=function(e){var t,n,r;return e!=null?(t=e.split("-"),r=t[0],n=parseInt(t[1],10),{type:r,depth:n}):{type:null,depth:null}},r.buildMarkdownPrefix=function(e,t){var n,i,s,o,u,a,f,l,c,h,p;n="";switch(e.type){case"Th":i="";for(s=a=1,c=e.depth;1<=c?a<=c:a>=c;s=1<=c?++a:--a)i+="#";return r.currentDepth=e.depth,u=""+i+" ",t!=null&&(u="\n\n"+u),u;case"Lh":return"\n\n";case"Tu":o=e.depth-r.currentDepth-1;if(o>0)for(s=f=0,h=o-1;0<=h?f<=h:f>=h;s=0<=h?++f:--f)n+="    ";return u=""+n+"* ",(t!=null?t.type:void 0)==="Tu"||(t!=null?t.type:void 0)==="Lu"?u="\n"+u:t!=null&&(u="\n\n"+u),u;case"Lu":o=e.depth-r.currentDepth-1;if(o>0)for(s=l=0,p=o-1;0<=p?l<=p:l>=p;s=0<=p?++l:--l)n+="    ";return"\n\n"+n+" ";default:return""}},r.convertInlineEltToMarkdown=function(e){var t,n,r,i,s;switch(e[0].nodeName){case"A":return s=e.attr("title")!=null?e.attr("title"):"",r=e.attr("href")!=null?e.attr("href"):"","["+e.html()+"]("+r+' "'+s+'")';case"IMG":return s=e.attr("title")!=null?e.attr("title"):"",t=e.attr("alt")!=null?e.attr("alt"):"",i=e.attr("src")!=null?e.attr("src"):"","!["+t+"]("+i+' "'+s+'")';case"SPAN":return n=e[0].classList,n.contains("CNE_strong")?"**"+e.text()+"**":n.contains("CNE_underline")?e.text():e.text();default:return""}},r.md2cozy=function(e){var t,n,i;return t=new Showdown.converter,i=$(t.makeHtml(e)),n="",r.currentId=0,r.editorDepth=0,i.each(function(){return n+=r.parseLine($(this))}),n.length===0&&(n=r.buildEditorLine("Tu",1,null)),n},r.parseLine=function(e){var t;return t=e[0].tagName,t!=null&&t[0]==="H"?(r.editorDepth=parseInt(t[1],10),r.buildEditorLine("Th",r.editorDepth,e)):t!=null&&t==="P"?r.buildEditorLine("Lh",r.editorDepth,e):r.parseList(e)},r.buildEditorLine=function(e,t,n){var i;return r.currentId++,i="",n!=null&&n.contents().each(function(){var e;e=this.nodeName;if(e==="#text")return i+="<span>"+$(this).text()+"</span>";if(this.tagName!=null)return $(this).wrap("<div></div>"),i+=""+$(this).parent().html(),$(this).unwrap()}),i===""&&(i="<span></span>"),"<div id=CNID_"+r.currentId+" class="+e+"-"+t+">"+i+"<br></div>"},r.parseList=function(e){var t,n,i,s,o,u,a,f,l;o=e[0].tagName,n="";if(o!=null&&o==="UL")r.editorDepth++,e.children().each(function(){return n+=r.parseList($(this))}),r.editorDepth--;else if(o!=null&&o==="LI"&&e.contents().get(0)!=null){l=e[0].childNodes;for(i=a=0,f=l.length;a<f;i=++a)t=l[i],t=$(t),u="Lu",i===0&&(u="Tu"),s=t[0].nodeName,s==="#text"&&t.text().trim()!==""?(t=t.clone().wrap("<p></p>").parent(),n+=r.buildEditorLine(u,r.editorDepth,t)):s==="P"?n+=r.buildEditorLine(u,r.editorDepth,t):n+=r.parseList(t)}else o!=null&&o==="P"&&(n+=r.buildEditorLine("Lu",r.editorDepth,e));return n},e.md2cozy=r}),require.register("CNeditor/realtimer",function(e,t,n){var r,i,s,o,u={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var n in t)u.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=t("./externalmodels"),i=function(e){function t(){return o=t.__super__.constructor.apply(this,arguments),o}return a(t,e),t.prototype.models={task:r.Task,alarm:r.Alarm,contact:r.Contact},t.prototype.events=["alarm.update","alarm.delete","contact.create","contact.update","contact.delete","task.update","task.delete"],t.prototype.onRemoteCreate=function(e){var t,n,r,i,s;i=this.collections,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],e instanceof t.model?s.push(t.add(e)):s.push(void 0);return s},t.prototype.onRemoteDelete=function(e){return e.trigger("destroy",e,e.collection,{})},t}(CozySocketListener),s=new i,s.watch(r.contactCollection),s.watch(r.alarmCollection),n.exports=s}),jade=function(e){function t(e){return e!=null}return Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),e.merge=function(n,r){var i=n["class"],s=r["class"];if(i||s)i=i||[],s=s||[],Array.isArray(i)||(i=[i]),Array.isArray(s)||(s=[s]),i=i.filter(t),s=s.filter(t),n["class"]=i.concat(s).join(" ");for(var o in r)o!="class"&&(n[o]=r[o]);return n},e.attrs=function(n,r){var i=[],s=n.terse;delete n.terse;var o=Object.keys(n),u=o.length;if(u){i.push("");for(var a=0;a<u;++a){var f=o[a],l=n[f];"boolean"==typeof l||null==l?l&&(s?i.push(f):i.push(f+'="'+f+'"')):0==f.indexOf("data")&&"string"!=typeof l?i.push(f+"='"+JSON.stringify(l)+"'"):"class"==f&&Array.isArray(l)?i.push(f+'="'+e.escape(l.join(" "))+'"'):r&&r[f]?i.push(f+'="'+e.escape(l)+'"'):i.push(f+'="'+l+'"')}}return i.join(" ")},e.escape=function(t){return String(t).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.rethrow=function(t,n,r){if(!n)throw t;var i=3,s=require("fs").readFileSync(n,"utf8"),o=s.split("\n"),u=Math.max(r-i,0),a=Math.min(o.length,r+i),i=o.slice(u,a).map(function(e,t){var n=t+u+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+r+"\n"+i+"\n\n"+t.message,t},e}({}),function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=1-(n/f.duration||0),i=0,s=f.tweens.length;for(;i<s;i++)f.tweens[i].run(r);return u.notifyWith(e,[f,r,n]),r<1&&s?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c=this,h=e.style,p={},d=[],m=e.nodeType&&Gt(e);n.queue||(f=v._queueHooks(e,"fx"),f.unqueued==null&&(f.unqueued=0,l=f.empty.fire,f.empty.fire=function(){f.unqueued||l()}),f.unqueued++,c.always(function(){c.always(function(){f.unqueued--,v.queue(e,"fx").length||f.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?h.display="inline-block":h.zoom=1)),n.overflow&&(h.overflow="hidden",v.support.shrinkWrapBlocks||c.done(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r];if(s===(m?"hide":"show"))continue;d.push(r)}}o=d.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),m?v(e).show():c.done(function(){v(e).hide()}),c.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in p)v.style(e,t,p[t])});for(r=0;r<o;r++)i=d[r],a=c.createTween(i,m?u[i]:0),p[i]=u[i]||v.style(e,i),i in u||(u[i]=a.start,m&&(a.end=a.start,a.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("﻿ ")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"&&(!e.unique||!c.has(n))?a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5";if(!n||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(v.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!v.nodeName(i.parentNode,"optgroup"))){t=v(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?v(u[s]).val():o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r,g,!0)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){if(s&&i)return;var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[],s),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){c=lt(g,p),r(c,[],u,a),f=c.length;while(f--)if(l=c[f])g[p[f]]=!(m[p[f]]=l)}if(s){f=e&&g.length;while(f--)if(l=g[f])s[h[f]]=!(o[h[f]]=l)}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n,r){var i=0,s=t.length;for(;i<s;i++)nt(e,t[i],n,r);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e];return t||(t=k(e,new RegExp("(^|"+O+")"+e+"("+O+"|$)"))),function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(e,t,n){return[0]}),last:st(function(e,t,n){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:st(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=1;l=h,e.sort(f);if(l)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active",":focus"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&(!i||!i.test(e))){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&(!i||!i.test(n)))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase())||!1,c.crossDomain=a&&a.join(":")+(a[3]?"":a[1]==="http:"?80:443)!==ln.join(":")+(ln[3]?"":ln[1]==="http:"?80:443)),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(e){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,t=v.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||v.fx.stop()},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})}(window),window.rangy=function(){function u(n,r){var i=typeof n[r];return i==t||i==e&&!!n[r]||i=="unknown"}function a(t,n){return typeof t[n]==e&&!!t[n]}function f(e,t){return typeof e[t]!=n}function l(e){return function(t,n){var r=n.length;while(r--)if(!e(t,n[r]))return!1;return!0}}function d(e){return e&&c(e,o)&&p(e,s)}function m(e){window.alert("Rangy not supported in your browser. Reason: "+e),v.initialized=!0,v.supported=!1}function g(e){var t="Rangy warning: "+e;v.config.alertOnWarn?window.alert(t):typeof window.console!=n&&typeof window.console.log!=n&&window.console.log(t)}function w(){if(v.initialized)return;var e,t=!1,n=!1;u(document,"createRange")&&(e=document.createRange(),c(e,i)&&p(e,r)&&(t=!0),e.detach());var s=a(document,"body")?document.body:document.getElementsByTagName("body")[0];s&&u(s,"createTextRange")&&(e=s.createTextRange(),d(e)&&(n=!0)),!t&&!n&&m("Neither Range nor TextRange are implemented"),v.initialized=!0,v.features={implementsDomRange:t,implementsTextRange:n};var o=b.concat(y);for(var f=0,l=o.length;f<l;++f)try{o[f](v)}catch(h){a(window,"console")&&u(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",h)}}function S(e){e=e||window,w();for(var t=0,n=E.length;t<n;++t)E[t](e)}function x(e){this.name=e,this.initialized=!1,this.supported=!1}var e="object",t="function",n="undefined",r=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],i=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],s=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],o=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],c=l(u),h=l(a),p=l(f),v={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:u,isHostObject:a,isHostProperty:f,areHostMethods:c,areHostObjects:h,areHostProperties:p,isTextRange:d},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};v.fail=m,v.warn=g,{}.hasOwnProperty?v.util.extend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}:m("hasOwnProperty not supported");var y=[],b=[];v.init=w,v.addInitListener=function(e){v.initialized?e(v):y.push(e)};var E=[];v.addCreateMissingNativeApiListener=function(e){E.push(e)},v.createMissingNativeApi=S,x.prototype.fail=function(e){throw this.initialized=!0,this.supported=!1,new Error("Module '"+this.name+"' failed to load: "+e)},x.prototype.warn=function(e){v.warn("Module "+this.name+": "+e)},x.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},v.createModule=function(e,t){var n=new x(e);v.modules[e]=n,b.push(function(e){t(e,n),n.initialized=!0,n.supported=!0})},v.requireModules=function(e){for(var t=0,n=e.length,r,i;t<n;++t){i=e[t],r=v.modules[i];if(!r||!(r instanceof x))throw new Error("Module '"+i+"' not found");if(!r.supported)throw new Error("Module '"+i+"' not supported")}};var T=!1,N=function(e){T||(T=!0,v.initialized||w())};if(typeof window==n){m("No window found");return}if(typeof document==n){m("No document found");return}return u(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",N,!1),u(window,"addEventListener")?window.addEventListener("load",N,!1):u(window,"attachEvent")?window.attachEvent("onload",N):m("Window does not have required addEventListener or attachEvent method"),v}(),rangy.createModule("DomUtil",function(e,t){function u(e){var t;return typeof e.namespaceURI==n||(t=e.namespaceURI)===null||t=="http://www.w3.org/1999/xhtml"}function a(e){var t=e.parentNode;return t.nodeType==1?t:null}function f(e){var t=0;while(e=e.previousSibling)t++;return t}function l(e){var t;return d(e)?e.length:(t=e.childNodes)?t.length:0}function c(e,t){var n=[],r;for(r=e;r;r=r.parentNode)n.push(r);for(r=t;r;r=r.parentNode)if(o(n,r))return r;return null}function h(e,t,n){var r=n?t:t.parentNode;while(r){if(r===e)return!0;r=r.parentNode}return!1}function p(e,t,n){var r,i=n?e:e.parentNode;while(i){r=i.parentNode;if(r===t)return i;i=r}return null}function d(e){var t=e.nodeType;return t==3||t==4||t==8}function v(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function m(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),v(n,e),n}function g(e){if(e.nodeType==9)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return g(e.parentNode);throw new Error("getDocument: no document found for node")}function y(e){var t=g(e);if(typeof t.defaultView!=n)return t.defaultView;if(typeof t.parentWindow!=n)return t.parentWindow;throw new Error("Cannot get a window object for node")}function b(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw new Error("getIframeWindow: No Document object found for iframe element")}function w(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw new Error("getIframeWindow: No Window object found for iframe element")}function E(e){return r.isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}function S(e){var t;while(t=e.parentNode)e=t;return e}function x(e,t,n,r){var i,s,o,u,a;if(e==n)return t===r?0:t<r?-1:1;if(i=p(n,e,!0))return t<=f(i)?-1:1;if(i=p(e,n,!0))return f(i)<r?-1:1;s=c(e,n),o=e===s?s:p(e,s,!0),u=n===s?s:p(n,s,!0);if(o===u)throw new Error("comparePoints got to case 4 and childA and childB are the same!");a=s.firstChild;while(a){if(a===o)return-1;if(a===u)return 1;a=a.nextSibling}throw new Error("Should not be here!")}function T(e){var t=g(e).createDocumentFragment(),n;while(n=e.firstChild)t.appendChild(n);return t}function N(e){if(!e)return"[No node]";if(d(e))return'"'+e.data+'"';if(e.nodeType==1){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">["+e.childNodes.length+"]"}return e.nodeName}function C(e){this.root=e,this._next=e}function k(e){return new C(e)}function L(e,t){this.node=e,this.offset=t}function A(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var n="undefined",r=e.util;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),r.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var i=document.createElement("div");r.areHostMethods(i,["insertBefore","appendChild","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),r.isHostProperty(i,"innerHTML")||t.fail("Element is missing innerHTML property");var s=document.createTextNode("test");r.areHostMethods(s,["splitText","deleteData","insertData","appendData","cloneNode"]||!r.areHostObjects(i,["previousSibling","nextSibling","childNodes","parentNode"])||!r.areHostProperties(s,["data"]))||t.fail("Incomplete Text Node implementation");var o=function(e,t){var n=e.length;while(n--)if(e[n]===t)return!0;return!1};C.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next,t,n;if(this._current){t=e.firstChild;if(t)this._next=t;else{n=null;while(e!==this.root&&!(n=e.nextSibling))e=e.parentNode;this._next=n}}return this._current},detach:function(){this._current=this._next=this.root=null}},L.prototype={equals:function(e){return this.node===e.node&this.offset==e.offset},inspect:function(){return"[DomPosition("+N(this.node)+":"+this.offset+")]"}},A.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},A.prototype.toString=function(){return this.message},e.dom={arrayContains:o,isHtmlNamespace:u,parentElement:a,getNodeIndex:f,getNodeLength:l,getCommonAncestor:c,isAncestorOf:h,getClosestAncestorIn:p,isCharacterDataNode:d,insertAfter:v,splitDataNode:m,getDocument:g,getWindow:y,getIframeWindow:w,getIframeDocument:b,getBody:E,getRootContainer:S,comparePoints:x,inspectNode:N,fragmentFromNodeChildren:T,createIterator:k,DomPosition:L},e.DOMException=A}),rangy.createModule("DomRange",function(e,t){function s(e,t){return e.nodeType!=3&&(n.isAncestorOf(e,t.startContainer,!0)||n.isAncestorOf(e,t.endContainer,!0))}function o(e){return n.getDocument(e.startContainer)}function u(e,t,n){var r=e._listeners[t];if(r)for(var i=0,s=r.length;i<s;++i)r[i].call(e,{target:e,args:n})}function a(e){return new r(e.parentNode,n.getNodeIndex(e))}function f(e){return new r(e.parentNode,n.getNodeIndex(e)+1)}function l(e,t,r){var i=e.nodeType==11?e.firstChild:e;return n.isCharacterDataNode(t)?r==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,r==0?t:n.splitDataNode(t,r)):r>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[r]),i}function c(e){var t;for(var n,r=o(e.range).createDocumentFragment(),s;n=e.next();){t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(s=e.getSubtreeIterator(),n.appendChild(c(s)),s.detach(!0));if(n.nodeType==10)throw new i("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function h(e,t,r){var i,s;r=r||{stop:!1};for(var o,u;o=e.next();)if(e.isPartiallySelectedSubtree()){if(t(o)===!1){r.stop=!0;return}u=e.getSubtreeIterator(),h(u,t,r),u.detach(!0);if(r.stop)return}else{i=n.createIterator(o);while(s=i.next())if(t(s)===!1){r.stop=!0;return}}}function p(e){var t;while(e.next())e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),p(t),t.detach(!0)):e.remove()}function d(e){for(var t,n=o(e.range).createDocumentFragment(),r;t=e.next();){e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),r=e.getSubtreeIterator(),t.appendChild(d(r)),r.detach(!0)):e.remove();if(t.nodeType==10)throw new i("HIERARCHY_REQUEST_ERR");n.appendChild(t)}return n}function v(e,t,n){var r=!!t&&!!t.length,i,s=!!n;r&&(i=new RegExp("^("+t.join("|")+")$"));var o=[];return h(new g(e,!1),function(e){(!r||i.test(e.nodeType))&&(!s||n(e))&&o.push(e)}),o}function m(e){var t=typeof e.getName=="undefined"?"Range":e.getName();return"["+t+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(e,t){this.range=e,this.clonePartiallySelectedTextNodes=t;if(!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var r=e.commonAncestorContainer;this.sc===this.ec&&n.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===r&&!n.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:n.getClosestAncestorIn(this.sc,r,!0),this._last=this.ec===r&&!n.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:n.getClosestAncestorIn(this.ec,r,!0))}}function y(e){this.code=this[e],this.codeName=e,this.message="RangeException: "+this.codeName}function b(e,t,n){this.nodes=v(e,t,n),this._next=this.nodes[0],this._position=0}function N(e){return function(t,r){var i,s=r?t:t.parentNode;while(s){i=s.nodeType;if(n.arrayContains(e,i))return s;s=s.parentNode}return null}}function O(e,t){if(A(e,t))throw new y("INVALID_NODE_TYPE_ERR")}function M(e){if(!e.startContainer)throw new i("INVALID_STATE_ERR")}function _(e,t){if(!n.arrayContains(t,e.nodeType))throw new y("INVALID_NODE_TYPE_ERR")}function D(e,t){if(t<0||t>(n.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new i("INDEX_SIZE_ERR")}function P(e,t){if(k(e,!0)!==k(t,!0))throw new i("WRONG_DOCUMENT_ERR")}function H(e){if(L(e,!0))throw new i("NO_MODIFICATION_ALLOWED_ERR")}function B(e,t){if(!e)throw new i(t)}function j(e){return!n.arrayContains(E,e.nodeType)&&!k(e,!0)}function F(e,t){return t<=(n.isCharacterDataNode(e)?e.length:e.childNodes.length)}function I(e){return!!e.startContainer&&!!e.endContainer&&!j(e.startContainer)&&!j(e.endContainer)&&F(e.startContainer,e.startOffset)&&F(e.endContainer,e.endOffset)}function q(e){M(e);if(!I(e))throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function et(){}function tt(e){e.START_TO_START=V,e.START_TO_END=$,e.END_TO_END=J,e.END_TO_START=K,e.NODE_BEFORE=Q,e.NODE_AFTER=G,e.NODE_BEFORE_AND_AFTER=Y,e.NODE_INSIDE=Z}function nt(e){tt(e),tt(e.prototype)}function rt(e,t){return function(){q(this);var r=this.startContainer,i=this.startOffset,s=this.commonAncestorContainer,o=new g(this,!0),u,a;r!==s&&(u=n.getClosestAncestorIn(r,s,!0),a=f(u),r=a.node,i=a.offset),h(o,H),o.reset();var l=e(o);return o.detach(),t(this,r,i,r,i),l}}function it(t,r,i){function o(e,t){return function(n){M(this),_(n,w),_(C(n),E);var r=(e?a:f)(n);(t?u:l)(this,r.node,r.offset)}}function u(e,t,i){var s=e.endContainer,o=e.endOffset;if(t!==e.startContainer||i!==e.startOffset){if(C(t)!=C(s)||n.comparePoints(t,i,s,o)==1)s=t,o=i;r(e,t,i,s,o)}}function l(e,t,i){var s=e.startContainer,o=e.startOffset;if(t!==e.endContainer||i!==e.endOffset){if(C(t)!=C(s)||n.comparePoints(t,i,s,o)==-1)s=t,o=i;r(e,s,o,t,i)}}function c(e,t,n){(t!==e.startContainer||n!==e.startOffset||t!==e.endContainer||n!==e.endOffset)&&r(e,t,n,t,n)}t.prototype=new et,e.util.extend(t.prototype,{setStart:function(e,t){M(this),O(e,!0),D(e,t),u(this,e,t)},setEnd:function(e,t){M(this),O(e,!0),D(e,t),l(this,e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){q(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){M(this),O(e,!0),r(this,e,0,e,n.getNodeLength(e))},selectNode:function(e){M(this),O(e,!1),_(e,w);var t=a(e),n=f(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:rt(d,r),deleteContents:rt(p,r),canSurroundContents:function(){q(this),H(this.startContainer),H(this.endContainer);var e=new g(this,!0),t=e._first&&s(e._first,this)||e._last&&s(e._last,this);return e.detach(),!t},detach:function(){i(this)},splitBoundaries:function(){q(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,s=this.endOffset,o=e===i;n.isCharacterDataNode(i)&&s>0&&s<i.length&&n.splitDataNode(i,s),n.isCharacterDataNode(e)&&t>0&&t<e.length&&(e=n.splitDataNode(e,t),o?(s-=t,i=e):i==e.parentNode&&s>=n.getNodeIndex(e)&&s++,t=0),r(this,e,t,i,s)},normalizeBoundaries:function(){q(this);var e=this.startContainer,t=this.startOffset,i=this.endContainer,s=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,s=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},u=function(r){var o=r.previousSibling;if(o&&o.nodeType==r.nodeType){e=r;var u=r.length;t=o.length,r.insertData(0,o.data),o.parentNode.removeChild(o);if(e==i)s+=t,i=e;else if(i==r.parentNode){var a=n.getNodeIndex(r);s==a?(i=r,s=u):s>a&&s--}}},a=!0;if(n.isCharacterDataNode(i))i.length==s&&o(i);else{if(s>0){var f=i.childNodes[s-1];f&&n.isCharacterDataNode(f)&&o(f)}a=!this.collapsed}if(a){if(n.isCharacterDataNode(e))t==0&&u(e);else if(t<e.childNodes.length){var l=e.childNodes[t];l&&n.isCharacterDataNode(l)&&u(l)}}else e=i,t=s;r(this,e,t,i,s)},collapseToPoint:function(e,t){M(this),O(e,!0),D(e,t),c(this,e,t)}}),nt(t)}function st(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function ot(e,t,n,r,i){var s=e.startContainer!==t||e.startOffset!==n,o=e.endContainer!==r||e.endOffset!==i;e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,st(e),u(e,"boundarychange",{startMoved:s,endMoved:o})}function ut(e){M(e),e.startContainer=e.startOffset=e.endContainer=e.endOffset=null,e.collapsed=e.commonAncestorContainer=null,u(e,"detach",null),e._listeners=null}function at(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},st(this)}e.requireModules(["DomUtil"]);var n=e.dom,r=n.DomPosition,i=e.DOMException;g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,n.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e=this._current,t,r;!n.isCharacterDataNode(e)||e!==this.sc&&e!==this.ec?e.parentNode&&e.parentNode.removeChild(e):(t=e===this.sc?this.so:0,r=e===this.ec?this.eo:e.length,t!=r&&e.deleteData(t,r-t))},isPartiallySelectedSubtree:function(){var e=this._current;return s(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse();else{e=new at(o(this.range));var t=this._current,r=t,i=0,s=t,u=n.getNodeLength(t);n.isAncestorOf(t,this.sc,!0)&&(r=this.sc,i=this.so),n.isAncestorOf(t,this.ec,!0)&&(s=this.ec,u=this.eo),ot(e,r,i,s,u)}return new g(e,this.clonePartiallySelectedTextNodes)},detach:function(e){e&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},y.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},y.prototype.toString=function(){return this.message},b.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var w=[1,3,4,5,7,8,10],E=[2,9,11],S=[5,6,10,12],x=[1,3,4,5,7,8,10,11],T=[1,3,4,5,7,8],C=n.getRootContainer,k=N([9,11]),L=N(S),A=N([6,10,12]),R=document.createElement("style"),U=!1;try{R.innerHTML="<b>x</b>",U=R.firstChild.nodeType==3}catch(z){}e.features.htmlParsingConforms=U;var W=U?function(e){var t=this.startContainer,r=n.getDocument(t);if(!t)throw new i("INVALID_STATE_ERR");var s=null;return t.nodeType==1?s=t:n.isCharacterDataNode(t)&&(s=n.parentElement(t)),s===null||s.nodeName=="HTML"&&n.isHtmlNamespace(n.getDocument(s).documentElement)&&n.isHtmlNamespace(s)?s=r.createElement("body"):s=s.cloneNode(!1),s.innerHTML=e,n.fragmentFromNodeChildren(s)}:function(e){M(this);var t=o(this),r=t.createElement("body");return r.innerHTML=e,n.fragmentFromNodeChildren(r)},X=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],V=0,$=1,J=2,K=3,Q=0,G=1,Y=2,Z=3;et.prototype={attachListener:function(e,t){this._listeners[e].push(t)},compareBoundaryPoints:function(e,t){q(this),P(this.startContainer,t.startContainer);var r,i,s,o,u=e==K||e==V?"start":"end",a=e==$||e==V?"start":"end";return r=this[u+"Container"],i=this[u+"Offset"],s=t[a+"Container"],o=t[a+"Offset"],n.comparePoints(r,i,s,o)},insertNode:function(e){q(this),_(e,x),H(this.startContainer);if(n.isAncestorOf(e,this.startContainer,!0))throw new i("HIERARCHY_REQUEST_ERR");var t=l(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){q(this);var e,t;if(this.collapsed)return o(this).createDocumentFragment();if(this.startContainer===this.endContainer&&n.isCharacterDataNode(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=o(this).createDocumentFragment(),t.appendChild(e),t;var r=new g(this,!0);return e=c(r),r.detach(),e},canSurroundContents:function(){q(this),H(this.startContainer),H(this.endContainer);var e=new g(this,!0),t=e._first&&s(e._first,this)||e._last&&s(e._last,this);return e.detach(),!t},surroundContents:function(e){_(e,T);if(!this.canSurroundContents())throw new y("BAD_BOUNDARYPOINTS_ERR");var t=this.extractContents();if(e.hasChildNodes())while(e.lastChild)e.removeChild(e.lastChild);l(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){q(this);var e=new at(o(this)),t=X.length,n;while(t--)n=X[t],e[n]=this[n];return e},toString:function(){q(this);var e=this.startContainer;if(e===this.endContainer&&n.isCharacterDataNode(e))return e.nodeType==3||e.nodeType==4?e.data.slice(this.startOffset,this.endOffset):"";var t=[],r=new g(this,!0);return h(r,function(e){(e.nodeType==3||e.nodeType==4)&&t.push(e.data)}),r.detach(),t.join("")},compareNode:function(e){q(this);var t=e.parentNode,r=n.getNodeIndex(e);if(!t)throw new i("NOT_FOUND_ERR");var s=this.comparePoint(t,r),o=this.comparePoint(t,r+1);return s<0?o>0?Y:Q:o>0?G:Z},comparePoint:function(e,t){return q(this),B(e,"HIERARCHY_REQUEST_ERR"),P(e,this.startContainer),n.comparePoints(e,t,this.startContainer,this.startOffset)<0?-1:n.comparePoints(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:W,toHtml:function(){q(this);var e=o(this).createElement("div");return e.appendChild(this.cloneContents()),e.innerHTML},intersectsNode:function(e,t){q(this),B(e,"NOT_FOUND_ERR");if(n.getDocument(e)!==o(this))return!1;var r=e.parentNode,i=n.getNodeIndex(e);B(r,"NOT_FOUND_ERR");var s=n.comparePoints(r,i,this.endContainer,this.endOffset),u=n.comparePoints(r,i+1,this.startContainer,this.startOffset);return t?s<=0&&u>=0:s<0&&u>0},isPointInRange:function(e,t){return q(this),B(e,"HIERARCHY_REQUEST_ERR"),P(e,this.startContainer),n.comparePoints(e,t,this.startContainer,this.startOffset)>=0&&n.comparePoints(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e,t){q(this);if(o(e)!=o(this))throw new i("WRONG_DOCUMENT_ERR");var r=n.comparePoints(this.startContainer,this.startOffset,e.endContainer,e.endOffset),s=n.comparePoints(this.endContainer,this.endOffset,e.startContainer,e.startOffset);return t?r<=0&&s>=0:r<0&&s>0},intersection:function(e){if(this.intersectsRange(e)){var t=n.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),r=n.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return t==-1&&i.setStart(e.startContainer,e.startOffset),r==1&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsRange(e,!0)){var t=this.cloneRange();return n.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1&&t.setStart(e.startContainer,e.startOffset),n.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1&&t.setEnd(e.endContainer,e.endOffset),t}throw new y("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==Z},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,n.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();t.setEnd(r,r.length);var i=this.containsRange(t);return t.detach(),i}return this.containsNodeContents(e)},createNodeIterator:function(e,t){return q(this),new b(this,e,t)},getNodes:function(e,t){return q(this),v(this,e,t)},getDocument:function(){return o(this)},collapseBefore:function(e){M(this),this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){M(this),this.setStartAfter(e),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(e){return at.rangesEqual(this,e)},isValid:function(){return I(this)},inspect:function(){return m(this)}},it(at,ot,ut),e.rangePrototype=et.prototype,at.rangeProperties=X,at.RangeIterator=g,at.copyComparisonConstants=nt,at.createPrototypeRange=it,at.inspect=m,at.getRangeDocument=o,at.rangesEqual=function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},e.DomRange=at,e.RangeException=y}),rangy.createModule("WrappedRange",function(e,t){function o(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();n=e.duplicate(),n.collapse(!1);var s=n.parentElement(),o=i==s?i:r.getCommonAncestor(i,s);return o==t?o:r.getCommonAncestor(t,o)}function u(e){return e.compareEndPoints("StartToEnd",e)==0}function a(e,t,n,s){var o=e.duplicate();o.collapse(n);var u=o.parentElement();r.isAncestorOf(t,u,!0)||(u=t);if(!u.canHaveHTML)return new i(u.parentNode,r.getNodeIndex(u));var a=r.getDocument(u).createElement("span"),f,l=n?"StartToStart":"StartToEnd",c,h,p,d;do u.insertBefore(a,a.previousSibling),o.moveToElementText(a);while((f=o.compareEndPoints(l,e))>0&&a.previousSibling);d=a.nextSibling;if(f==-1&&d&&r.isCharacterDataNode(d)){o.setEndPoint(n?"EndToStart":"EndToEnd",e);var v;if(/[\r\n]/.test(d.data)){var m=o.duplicate(),g=m.text.replace(/\r\n/g,"\r").length;v=m.moveStart("character",g);while((f=m.compareEndPoints("StartToEnd",m))==-1)v++,m.moveStart("character",1)}else v=o.text.length;p=new i(d,v)}else c=(s||!n)&&a.previousSibling,h=(s||n)&&a.nextSibling,h&&r.isCharacterDataNode(h)?p=new i(h,0):c&&r.isCharacterDataNode(c)?p=new i(c,c.length):p=new i(u,r.getNodeIndex(a));return a.parentNode.removeChild(a),p}function f(e,t){var n,i,s=e.offset,o=r.getDocument(e.node),u,a,f=o.body.createTextRange(),l=r.isCharacterDataNode(e.node);return l?(n=e.node,i=n.parentNode):(a=e.node.childNodes,n=s<a.length?a[s]:null,i=e.node),u=o.createElement("span"),u.innerHTML="&#feff;",n?i.insertBefore(u,n):i.appendChild(u),f.moveToElementText(u),f.collapse(!t),i.removeChild(u),l&&f[t?"moveStart":"moveEnd"]("character",s),f}e.requireModules(["DomUtil","DomRange"]);var n,r=e.dom,i=r.DomPosition,s=e.DomRange;if(e.features.implementsDomRange&&(!e.features.implementsTextRange||!e.config.preferTextRange))(function(){function u(e){var t=i.length,n;while(t--)n=i[t],e[n]=e.nativeRange[n]}function a(e,t,n,r,i){var s=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==r||e.endOffset!=i;if(s||o)e.setEnd(r,i),e.setStart(t,n)}function f(e){e.nativeRange.detach(),e.detached=!0;var t=i.length,n;while(t--)n=i[t],e[n]=null}var t,i=s.rangeProperties,o,l;n=function(e){if(!e)throw new Error("Range must be specified");this.nativeRange=e,u(this)},s.createPrototypeRange(n,a,f),t=n.prototype,t.selectNode=function(e){this.nativeRange.selectNode(e),u(this)},t.deleteContents=function(){this.nativeRange.deleteContents(),u(this)},t.extractContents=function(){var e=this.nativeRange.extractContents();return u(this),e},t.cloneContents=function(){return this.nativeRange.cloneContents()},t.surroundContents=function(e){this.nativeRange.surroundContents(e),u(this)},t.collapse=function(e){this.nativeRange.collapse(e),u(this)},t.cloneRange=function(){return new n(this.nativeRange.cloneRange())},t.refresh=function(){u(this)},t.toString=function(){return this.nativeRange.toString()};var c=document.createTextNode("test");r.getBody(document).appendChild(c);var h=document.createRange();h.setStart(c,0),h.setEnd(c,0);try{h.setStart(c,1),o=!0,t.setStart=function(e,t){this.nativeRange.setStart(e,t),u(this)},t.setEnd=function(e,t){this.nativeRange.setEnd(e,t),u(this)},l=function(e){return function(t){this.nativeRange[e](t),u(this)}}}catch(p){o=!1,t.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}u(this)},t.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}u(this)},l=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}u(this)}}}t.setStartBefore=l("setStartBefore","setEndBefore"),t.setStartAfter=l("setStartAfter","setEndAfter"),t.setEndBefore=l("setEndBefore","setStartBefore"),t.setEndAfter=l("setEndAfter","setStartAfter"),h.selectNodeContents(c),h.startContainer==c&&h.endContainer==c&&h.startOffset==0&&h.endOffset==c.length?t.selectNodeContents=function(e){this.nativeRange.selectNodeContents(e),u(this)}:t.selectNodeContents=function(e){this.setStart(e,0),this.setEnd(e,s.getEndOffset(e))},h.selectNodeContents(c),h.setEnd(c,3);var d=document.createRange();d.selectNodeContents(c),d.setEnd(c,4),d.setStart(c,2),h.compareBoundaryPoints(h.START_TO_END,d)==-1&h.compareBoundaryPoints(h.END_TO_START,d)==1?t.compareBoundaryPoints=function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:t.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},e.util.isHostMethod(h,"createContextualFragment")&&(t.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),r.getBody(document).removeChild(c),h.detach(),d.detach()})(),e.createNativeRange=function(e){return e=e||document,e.createRange()};else if(e.features.implementsTextRange){n=function(e){this.textRange=e,this.refresh()},n.prototype=new s(document),n.prototype.refresh=function(){var e,t,n=o(this.textRange);u(this.textRange)?t=e=a(this.textRange,n,!0,!0):(e=a(this.textRange,n,!0,!1),t=a(this.textRange,n,!1,!1)),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},s.copyComparisonConstants(n);var l=function(){return this}();typeof l.Range=="undefined"&&(l.Range=n),e.createNativeRange=function(e){return e=e||document,e.body.createTextRange()}}e.features.implementsTextRange&&(n.rangeToTextRange=function(e){if(e.collapsed){var t=f(new i(e.startContainer,e.startOffset),!0);return t}var n=f(new i(e.startContainer,e.startOffset),!0),s=f(new i(e.endContainer,e.endOffset),!1),o=r.getDocument(e.startContainer).body.createTextRange();return o.setEndPoint("StartToStart",n),o.setEndPoint("EndToEnd",s),o}),n.prototype.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createRange=function(t){return t=t||document,new n(e.createNativeRange(t))},e.createRangyRange=function(e){return e=e||document,new s(e)},e.createIframeRange=function(t){return e.createRange(r.getIframeDocument(t))},e.createIframeRangyRange=function(t){return e.createRangyRange(r.getIframeDocument(t))},e.addCreateMissingNativeApiListener(function(t){var n=t.document;typeof n.createRange=="undefined"&&(n.createRange=function(){return e.createRange(this)}),n=t=null})}),rangy.createModule("WrappedSelection",function(e,t){function p(e){return(e||window).getSelection()}function d(e){return(e||window).document.selection}function L(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function A(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function O(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function M(t){var n;return t instanceof o?(n=t._selectionNativeRange,n||(n=e.createNativeRange(i.getDocument(t.startContainer)),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset),t._selectionNativeRange=n,t.attachListener("detach",function(){this._selectionNativeRange=null}))):t instanceof u?n=t.nativeRange:e.features.implementsDomRange&&t instanceof i.getWindow(t.startContainer).Range&&(n=t),n}function _(e){if(!e.length||e[0].nodeType!=1)return!1;for(var t=1,n=e.length;t<n;++t)if(!i.isAncestorOf(e[0],e[t]))return!1;return!0}function D(e){var t=e.getNodes();if(!_(t))throw new Error("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return t[0]}function P(e){return!!e&&typeof e.text!="undefined"}function H(e,t){var n=new u(t);e._ranges=[n],L(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function B(t){t._ranges.length=0;if(t.docSelection.type=="None")O(t);else{var n=t.docSelection.createRange();if(P(n))H(t,n);else{t.rangeCount=n.length;var r,s=i.getDocument(n.item(0));for(var o=0;o<t.rangeCount;++o)r=e.createRange(s),r.selectNode(n.item(o)),t._ranges.push(r);t.isCollapsed=t.rangeCount==1&&t._ranges[0].collapsed,L(t,t._ranges[t.rangeCount-1],!1)}}}function j(e,t){var n=e.docSelection.createRange(),r=D(t),s=i.getDocument(n.item(0)),o=i.getBody(s).createControlRange();for(var u=0,a=n.length;u<a;++u)o.add(n.item(u));try{o.add(r)}catch(f){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),B(e)}function I(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function R(e,t){var n=i.getDocument(t[0].startContainer),r=i.getBody(n).createControlRange();for(var s=0,o;s<rangeCount;++s){o=D(t[s]);try{r.add(o)}catch(u){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),B(e)}function V(e,t){if(e.anchorNode&&i.getDocument(e.anchorNode)!==i.getDocument(t))throw new a("WRONG_DOCUMENT_ERR")}function $(e){var t=[],n=new f(e.anchorNode,e.anchorOffset),r=new f(e.focusNode,e.focusOffset),i=typeof e.getName=="function"?e.getName():"Selection";if(typeof e.rangeCount!="undefined")for(var s=0,u=e.rangeCount;s<u;++s)t[s]=o.inspect(e.getRangeAt(s));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.requireModules(["DomUtil","DomRange","WrappedRange"]),e.config.checkSelectionRanges=!0;var n="boolean",r="_rangySelection",i=e.dom,s=e.util,o=e.DomRange,u=e.WrappedRange,a=e.DOMException,f=i.DomPosition,l,c,h="Control",v=e.util.isHostMethod(window,"getSelection"),m=e.util.isHostObject(document,"selection"),g=m&&(!v||e.config.preferTextRange);g?(l=d,e.isSelectionValid=function(e){var t=(e||window).document,n=t.selection;return n.type!="None"||i.getDocument(n.createRange().parentElement())==t}):v?(l=p,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=l;var y=l(),b=e.createNativeRange(document),w=i.getBody(document),E=s.areHostObjects(y,["anchorNode","focusNode"]&&s.areHostProperties(y,["anchorOffset","focusOffset"]));e.features.selectionHasAnchorAndFocus=E;var S=s.isHostMethod(y,"extend");e.features.selectionHasExtend=S;var x=typeof y.rangeCount=="number";e.features.selectionHasRangeCount=x;var T=!1,N=!0;s.areHostMethods(y,["addRange","getRangeAt","removeAllRanges"])&&typeof y.rangeCount=="number"&&e.features.implementsDomRange&&function(){var e=document.createElement("iframe");e.frameBorder=0,e.style.position="absolute",e.style.left="-10000px",w.appendChild(e);var t=i.getIframeDocument(e);t.open(),t.write("<html><head></head><body>12</body></html>"),t.close();var n=i.getIframeWindow(e).getSelection(),r=t.documentElement,s=r.lastChild,o=s.firstChild,u=t.createRange();u.setStart(o,1),u.collapse(!0),n.addRange(u),N=n.rangeCount==1,n.removeAllRanges();var a=u.cloneRange();u.setStart(o,0),a.setEnd(o,2),n.addRange(u),n.addRange(a),T=n.rangeCount==2,u.detach(),a.detach(),w.removeChild(e)}(),e.features.selectionSupportsMultipleRanges=T,e.features.collapsedNonEditableSelectionsSupported=N;var C=!1,k;w&&s.isHostMethod(w,"createControlRange")&&(k=w.createControlRange(),s.areHostProperties(k,["item","add"])&&(C=!0)),e.features.implementsControlRange=C,E?c=function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:c=function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var F;s.isHostMethod(y,"getRangeAt")?F=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:E&&(F=function(t){var n=i.getDocument(t.anchorNode),r=e.createRange(n);return r.setStart(t.anchorNode,t.anchorOffset),r.setEnd(t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&(r.setStart(t.focusNode,t.focusOffset),r.setEnd(t.anchorNode,t.anchorOffset)),r}),e.getSelection=function(e){e=e||window;var t=e[r],n=l(e),i=m?d(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh(e)):(t=new I(n,i,e),e[r]=t),t},e.getIframeSelection=function(t){return e.getSelection(i.getIframeWindow(t))};var q=I.prototype;if(!g&&E&&s.areHostMethods(y,["removeAllRanges","addRange"])){q.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),O(this)};var U=function(t,n){var r=o.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.nativeSelection.addRange(M(i)),t.nativeSelection.extend(n.startContainer,n.startOffset),t.refresh()};x?q.addRange=function(t,n){if(C&&m&&this.docSelection.type==h)j(this,t);else if(n&&S)U(this,t);else{var r;T?r=this.rangeCount:(this.removeAllRanges(),r=0),this.nativeSelection.addRange(M(t)),this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==r+1){if(e.config.checkSelectionRanges){var i=F(this.nativeSelection,this.rangeCount-1);i&&!o.rangesEqual(i,t)&&(t=new u(i))}this._ranges[this.rangeCount-1]=t,L(this,t,X(this.nativeSelection)),this.isCollapsed=c(this)}else this.refresh()}}:q.addRange=function(e,t){t&&S?U(this,e):(this.nativeSelection.addRange(M(e)),this.refresh())},q.setRanges=function(e){if(C&&e.length>1)R(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(s.isHostMethod(y,"empty")&&s.isHostMethod(b,"select")&&C&&g))return t.fail("No means of selecting a Range or TextRange was found"),!1;q.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var e;if(this.anchorNode)e=i.getDocument(this.anchorNode);else if(this.docSelection.type==h){var t=this.docSelection.createRange();t.length&&(e=i.getDocument(t.item(0)).body.createTextRange())}if(e){var n=e.body.createTextRange();n.select(),this.docSelection.empty()}}}catch(r){}O(this)},q.addRange=function(e){this.docSelection.type==h?j(this,e):(u.rangeToTextRange(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,L(this,e,!1))},q.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?R(this,e):t&&this.addRange(e[0])}}q.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new a("INDEX_SIZE_ERR");return this._ranges[e]};var z;if(g)z=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=i.getBody(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==h?B(t):P(n)?H(t,n):O(t)};else if(s.isHostMethod(y,"getRangeAt")&&typeof y.rangeCount=="number")z=function(t){if(C&&m&&t.docSelection.type==h)B(t);else{t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount;if(t.rangeCount){for(var n=0,r=t.rangeCount;n<r;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));L(t,t._ranges[t.rangeCount-1],X(t.nativeSelection)),t.isCollapsed=c(t)}else O(t)}};else{if(!E||typeof y.isCollapsed!=n||typeof b.collapsed!=n||!e.features.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;z=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=F(n,0),e._ranges=[t],e.rangeCount=1,A(e),e.isCollapsed=c(e)):O(e)}}q.refresh=function(e){var t=e?this._ranges.slice(0):null;z(this);if(e){var n=t.length;if(n!=this._ranges.length)return!1;while(n--)if(!o.rangesEqual(t[n],this._ranges[n]))return!1;return!0}};var W=function(e,t){var n=e.getAllRanges(),r=!1;e.removeAllRanges();for(var i=0,s=n.length;i<s;++i)r||t!==n[i]?e.addRange(n[i]):r=!0;e.rangeCount||O(e)};C?q.removeRange=function(e){if(this.docSelection.type==h){var t=this.docSelection.createRange(),n=D(e),r=i.getDocument(t.item(0)),s=i.getBody(r).createControlRange(),o,u=!1;for(var a=0,f=t.length;a<f;++a)o=t.item(a),o!==n||u?s.add(t.item(a)):u=!0;s.select(),B(this)}else W(this,e)}:q.removeRange=function(e){W(this,e)};var X;!g&&E&&e.features.implementsDomRange?(X=function(e){var t=!1;return e.anchorNode&&(t=i.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)==1),t},q.isBackwards=function(){return X(this)}):X=q.isBackwards=function(){return!1},q.toString=function(){var e=[];for(var t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},q.collapse=function(t,n){V(this,t);var r=e.createRange(i.getDocument(t));r.collapseToPoint(t,n),this.removeAllRanges(),this.addRange(r),this.isCollapsed=!0},q.collapseToStart=function(){if(!this.rangeCount)throw new a("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},q.collapseToEnd=function(){if(!this.rangeCount)throw new a("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},q.selectAllChildren=function(t){V(this,t);var n=e.createRange(i.getDocument(t));n.selectNodeContents(t),this.removeAllRanges(),this.addRange(n)},q.deleteFromDocument=function(){if(C&&m&&this.docSelection.type==h){var e=this.docSelection.createRange(),t;while(e.length)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();this.removeAllRanges();for(var r=0,i=n.length;r<i;++r)n[r].deleteContents();this.addRange(n[i-1])}},q.getAllRanges=function(){return this._ranges.slice(0)},q.setSingleRange=function(e){this.setRanges([e])},q.containsNode=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(this._ranges[n].containsNode(e,t))return!0;return!1},q.toHtml=function(){var e="";if(this.rangeCount){var t=o.getRangeDocument(this._ranges[0]).createElement("div");for(var n=0,r=this._ranges.length;n<r;++n)t.appendChild(this._ranges[n].cloneContents());e=t.innerHTML}return e},q.getName=function(){return"WrappedSelection"},q.inspect=function(){return $(this)},q.detach=function(){this.win[r]=null,this.win=this.anchorNode=this.focusNode=null},I.inspect=$,e.Selection=I,e.selectionPrototype=q,e.addCreateMissingNativeApiListener(function(t){typeof t.getSelection=="undefined"&&(t.getSelection=function(){return e.getSelection(this)}),t=null})}),rangy.createModule("Serializer",function(e,t){function n(e,t){t=t||[];var r=e.nodeType,i=e.childNodes,s=i.length,o=[r,e.nodeName,s].join(":"),u="",a="";switch(r){case 3:u=e.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");break;case 8:u="<!--"+e.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"-->";break;default:u="<"+o+">",a="</>"}u&&t.push(u);for(r=0;r<s;++r)n(i[r],t);return a&&t.push(a),t}function r(e){return e=n(e).join(""),c(e).toString(16)}function i(e,t,n){var r=[],i=e;for(n=n||h.getDocument(e).documentElement;i&&i!=n;)r.push(h.getNodeIndex(i,!0)),i=i.parentNode;return r.join("/")+":"+t}function s(e,n,r){n?r||h.getDocument(n):(r=r||document,n=r.documentElement),e=e.split(":"),n=n,r=e[0]?e[0].split("/"):[];for(var i=r.length,s;i--;){s=parseInt(r[i],10);if(!(s<n.childNodes.length))throw t.createError("deserializePosition failed: node "+h.inspectNode(n)+" has no child with index "+s+", "+i);n=n.childNodes[parseInt(r[i],10)]}return new h.DomPosition(n,parseInt(e[1],10))}function o(t,n,s){s=s||e.DomRange.getRangeDocument(t).documentElement;if(!h.isAncestorOf(s,t.commonAncestorContainer,!0))throw Error("serializeRange: range is not wholly contained within specified root node");return t=i(t.startContainer,t.startOffset,s)+","+i(t.endContainer,t.endOffset,s),n||(t+="{"+r(s)+"}"),t}function u(t,n,i){n?i=i||h.getDocument(n):(i=i||document,n=i.documentElement),t=/^([^,]+),([^,\{]+)({([^}]+)})?$/.exec(t);var o=t[4],u=r(n);if(o&&o!==r(n))throw Error("deserializeRange: checksums of serialized range root node ("+o+") and target root node ("+u+") do not match");return o=s(t[1],n,i),n=s(t[2],n,i),i=e.createRange(i),i.setStart(o.node,o.offset),i.setEnd(n.node,n.offset),i}function a(e,t,n){return t?n||h.getDocument(t):(n=n||document,t=n.documentElement),e=/^([^,]+),([^,]+)({([^}]+)})?$/.exec(e)[3],!e||e===r(t)}function f(t,n,r){t=t||e.getSelection(),t=t.getAllRanges();for(var i=[],s=0,u=t.length;s<u;++s)i[s]=o(t[s],n,r);return i.join("|")}function l(t,n,r){n?r=r||h.getWindow(n):(r=r||window,n=r.document.documentElement),t=t.split("|");for(var i=e.getSelection(r),s=[],o=0,a=t.length;o<a;++o)s[o]=u(t[o],n,r.document);return i.setRanges(s),i}e.requireModules(["WrappedSelection","WrappedRange"]),(typeof encodeURIComponent=="undefined"||typeof decodeURIComponent=="undefined")&&t.fail("Global object is missing encodeURIComponent and/or decodeURIComponent method");var c=function(){var e=null;return function(t){for(var n=[],r=0,i=t.length,s;r<i;++r)s=t.charCodeAt(r),s<128?n.push(s):s<2048?n.push(s>>6|192,s&63|128):n.push(s>>12|224,s>>6&63|128,s&63|128);t=-1;if(!e){r=[],i=0;for(var o;i<256;++i){o=i;for(s=8;s--;)(o&1)==1?o=o>>>1^3988292384:o>>>=1;r[i]=o>>>0}e=r}r=e,i=0;for(s=n.length;i<s;++i)o=(t^n[i])&255,t=t>>>8^r[o];return(t^-1)>>>0}}(),h=e.dom;e.serializePosition=i,e.deserializePosition=s,e.serializeRange=o,e.deserializeRange=u,e.canDeserializeRange=a,e.serializeSelection=f,e.deserializeSelection=l,e.canDeserializeSelection=function(e,t,n){var r;t?r=n?n.document:h.getDocument(t):(n=n||window,t=n.document.documentElement),e=e.split("|"),n=0;for(var i=e.length;n<i;++n)if(!a(e[n],t,r))return!1;return!0},e.restoreSelectionFromCookie=function(e){e=e||window;var t;e:{t=e.document.cookie.split(/[;,]/);for(var n=0,r=t.length,i;n<r;++n){i=t[n].split("=");if(i[0].replace(/^\s+/,"")=="rangySerializedSelection")if(i=i[1]){t=decodeURIComponent(i.replace(/\s+$/,""));break e}}t=null}t&&l(t,e.doc)},e.saveSelectionCookie=function(t,n){t=t||window,n=typeof n=="object"?n:{};var r=n.expires?";expires="+n.expires.toUTCString():"",i=n.path?";path="+n.path:"",s=n.domain?";domain="+n.domain:"",o=n.secure?";secure":"",u=f(e.getSelection(t));t.document.cookie=encodeURIComponent("rangySerializedSelection")+"="+encodeURIComponent(u)+r+i+s+o},e.getElementChecksum=r});var Showdown={};Showdown.converter=function(){var e,t,n,r=0;this.makeHtml=function(r){return e=new Array,t=new Array,n=new Array,r=r.replace(/~/g,"~T"),r=r.replace(/\$/g,"~D"),r=r.replace(/\r\n/g,"\n"),r=r.replace(/\r/g,"\n"),r="\n\n"+r+"\n\n",r=M(r),r=r.replace(/^[ \t]+$/mg,""),r=y(r),r=s(r),r=i(r),r=u(r),r=A(r),r=r.replace(/~D/g,"$$"),r=r.replace(/~T/g,"~"),r};var i=function(n){var n=n.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(n,r,i,s,o){return r=r.toLowerCase(),e[r]=N(i),s?s+o:(o&&(t[r]=o.replace(/"/g,"&quot;")),"")});return n},s=function(e){e=e.replace(/\n/g,"\n\n");var t="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del|style|section|header|footer|nav|article|aside",n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside";return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,o),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,o),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o),e=e.replace(/\n\n/g,"\n"),e},o=function(e,t){var r=t;return r=r.replace(/\n\n/g,"\n"),r=r.replace(/^\n/,""),r=r.replace(/\n+$/g,""),r="\n\n~K"+(n.push(r)-1)+"K\n\n",r},u=function(e){e=d(e);var t=b("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=m(e),e=g(e),e=x(e),e=s(e),e=T(e),e},a=function(e){return e=w(e),e=f(e),e=C(e),e=h(e),e=l(e),e=k(e),e=N(e),e=S(e),e=e.replace(/  +\n/g," <br />\n"),e},f=function(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=_(t,"\\`*_"),t}),e},l=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,c),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,c),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,c),e},c=function(n,r,i,s,o,u,a,f){f==undefined&&(f="");var l=r,c=i,h=s.toLowerCase(),p=o,d=f;if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(e[h]!=undefined)p=e[h],t[h]!=undefined&&(d=t[h]);else{if(!(l.search(/\(\s*\)$/m)>-1))return l;p=""}}p=_(p,"*_");var v='<a href="'+p+'"';return d!=""&&(d=d.replace(/"/g,"&quot;"),d=_(d,"*_"),v+=' title="'+d+'"'),v+=">"+c+"</a>",v},h=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p),e},p=function(n,r,i,s,o,u,a,f){var l=r,c=i,h=s.toLowerCase(),p=o,d=f;d||(d="");if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(e[h]==undefined)return l;p=e[h],t[h]!=undefined&&(d=t[h])}c=c.replace(/"/g,"&quot;"),p=_(p,"*_");var v='<img src="'+p+'" alt="'+c+'"';return d=d.replace(/"/g,"&quot;"),d=_(d,"*_"),v+=' title="'+d+'"',v+=" />",v},d=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return b('<h1 id="'+t(n)+'">'+a(n)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return b('<h2 id="'+t(n)+'">'+a(n)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var i=n.length;return b("<h"+i+' id="'+t(r)+'">'+a(r)+"</h"+i+">")}),e},v,m=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return r?e=e.replace(t,function(e,t,n){var r=t,i=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var s=v(r);return s=s.replace(/\s+$/,""),s="<"+i+">"+s+"</"+i+">\n",s}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var i=t,s=n,o=r.search(/[*+-]/g)>-1?"ul":"ol",s=s.replace(/\n{2,}/g,"\n\n\n"),u=v(s);return u=i+"<"+o+">\n"+u+"</"+o+">\n",u})),e=e.replace(/~0/,""),e};v=function(e){return r++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,r,i){var s=i,o=t,f=n;return o||s.search(/\n{2,}/)>-1?s=u(O(s)):(s=m(O(s)),s=s.replace(/\n$/,""),s=a(s)),"<li>"+s+"</li>\n"}),e=e.replace(/~0/g,""),r--,e};var g=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,i=n;return r=E(O(r)),r=M(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",b(r)+i}),e=e.replace(/~0/,""),e},y=function(e){return e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,t,n){var r=t,i=n;return i=E(i),i=M(i),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code"+(r?' class="'+r+'"':"")+">"+i+"\n</code></pre>",b(i)}),e=e.replace(/~0/,""),e},b=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.push(e)-1)+"K\n\n"},w=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,i){var s=r;return s=s.replace(/^([ \t]*)/g,""),s=s.replace(/[ \t]*$/g,""),s=E(s),t+"<code>"+s+"</code>"}),e},E=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=_(e,"*_{}[]\\",!1),e},S=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e},x=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=u(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /mg,"~0"),n=n.replace(/~0/g,""),n}),b("<blockquote>\n"+n+"\n</blockquote>")}),e},T=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");var t=e.split(/\n{2,}/g),r=new Array,i=t.length;for(var s=0;s<i;s++){var o=t[s];o.search(/~K(\d+)K/g)>=0?r.push(o):o.search(/\S/)>=0&&(o=a(o),o=o.replace(/^([ \t]*)/g,"<p>"),o+="</p>",r.push(o))}i=r.length;for(var s=0;s<i;s++)while(r[s].search(/~K(\d+)K/)>=0){var u=n[RegExp.$1];u=u.replace(/\$/g,"$$$$"),r[s]=r[s].replace(/~K\d+K/,u)}return r.join("\n\n")},N=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;"),e},C=function(e){return e=e.replace(/\\(\\)/g,D),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,D),e},k=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,t){return L(A(t))}),e},L=function(e){function t(e){var t="0123456789ABCDEF",n=e.charCodeAt(0);return t.charAt(n>>4)+t.charAt(n&15)}var n=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+t(e)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if(e=="@")e=n[Math.floor(Math.random()*2)](e);else if(e!=":"){var t=Math.random();e=t>.9?n[2](e):t>.45?n[1](e):n[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">'),e},A=function(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)}),e},O=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,""),e},M=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,t,n){var r=t,i=4-r.length%4;for(var s=0;s<i;s++)r+=" ";return r}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,""),e},_=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,D),e},D=function(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}},typeof module!="undefined"&&(module.exports=Showdown),function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(){this.processStack=n(this.processStack,this),this.callbackFactory=n(this.callbackFactory,this),this.resume=n(this.resume,this),this.pause=n(this.pause,this);var e;try{this.connect()}catch(t){e=t,console.log("Error while connecting to socket.io"),console.log(e.stack)}this.collections=[],this.singlemodels=new Backbone.Collection,this.stack=[],this.ignore=[],this.paused=0}return e.prototype.models={},e.prototype.events=[],e.prototype.shouldFetchCreated=function(e){return!0},e.prototype.onRemoteCreate=function(e){},e.prototype.onRemoteUpdate=function(e,t){},e.prototype.onRemoteDelete=function(e,t){},e.prototype.connect=function(){var e,t,n,r,i,s,o,u;r=window.location.origin,t=""+window.location.pathname.substring(1)+"socket.io",n=io.connect(r,{resource:t}),o=this.events,u=[];for(i=0,s=o.length;i<s;i++)e=o[i],u.push(n.on(e,this.callbackFactory(e)));return u},e.prototype.watch=function(e){return this.collections.length===0&&(this.collection=e),this.collections.push(e),e.socketListener=this,this.watchOne(e)},e.prototype.stopWatching=function(e){var t,n,r,i,s;s=this.collections;for(n=r=0,i=s.length;r<i;n=++r){t=s[n];if(t===e)return this.collections.splice(n,1)}},e.prototype.watchOne=function(e){return this.singlemodels.add(e),e.on("request",this.pause),e.on("sync",this.resume),e.on("destroy",this.resume),e.on("error",this.resume)},e.prototype.pause=function(e,t,n){var r,i;if(n.ignoreMySocketNotification){i=e.isNew()?"create":"update",r=this.getDoctypeOf(e);if(r==null)return;return this.ignore.push({doctype:r,operation:i,model:e}),this.paused=this.paused+1}},e.prototype.resume=function(e,t,n){if(n.ignoreMySocketNotification){this.paused=this.paused-1;if(this.paused<=0)return this.processStack(),this.paused=0}},e.prototype.getDoctypeOf=function(e){var t,n,r;r=this.models;for(n in r){t=r[n];if(e instanceof t)return n}},e.prototype.cleanStack=function(){var e,t,n,r,i,s;t=0,s=[];while(t<this.ignore.length){n=!1,i=0,e=this.ignore[t];while(i<this.stack.length){r=this.stack[i];if(r.operation===e.operation&&r.id===e.model.id){this.stack.splice(i,1),n=!0;break}i++}n?s.push(this.ignore.splice(t,1)):s.push(t++)}return s},e.prototype.callbackFactory=function(e){var t=this;return function(n){var r,i,s,o;o=e.split("."),r=o[0],s=o[1],i={id:n,doctype:r,operation:s},t.stack.push(i);if(t.paused===0)return t.processStack()}},e.prototype.processStack=function(){var e;this.cleanStack(),e=[];while(this.stack.length>0)e.push(this.process(this.stack.shift()));return e},e.prototype.process=function(e){var t,n,r,i,s=this;t=e.doctype,i=e.operation,n=e.id;switch(i){case"create":if(!this.shouldFetchCreated(n))return;return r=new this.models[t]({id:n}),r.fetch({success:function(e){return s.onRemoteCreate(e)}});case"update":return(r=this.singlemodels.get(n))&&r.fetch({success:function(e){if(e.changedAttributes())return s.onRemoteUpdate(e,null)}}),this.collections.forEach(function(e){if(!(r=e.get(n)))return;return r.fetch({success:function(t){if(t.changedAttributes())return s.onRemoteUpdate(t,e)}})});case"delete":return(r=this.singlemodels.get(n))&&s.onRemoteDelete(r,this.singlemodels),this.collections.forEach(function(e){if(!(r=e.get(n)))return;return s.onRemoteDelete(r,e)})}},e}(),t=(typeof module!="undefined"&&module!==null?module.exports:void 0)||window,t.CozySocketListener=e}.call(this),function(){function w(e){var n,r;return/String|Number|Boolean/.test(e)&&(n=e.toLowerCase()),r=e==="Array"&&t.isArray||function(t){return n&&typeof t===n?!0:E(t)==="[object "+e+"]"},l[e]=r,r}function E(e){return a.call(e)}function S(){x(e),j(h,function(e,t){x(f[t])})}function x(e){if(e.SugarMethods)return;L(e,"SugarMethods",{}),T(e,!1,!1,{extend:function(t,n,r){T(e,r!==!1,n,t)},sugarRestore:function(){return C(e,arguments,function(e,t,n){L(e,t,n.method)})},sugarRevert:function(){return C(e,arguments,function(e,t,n){n.existed?L(e,t,n.original):delete e[t]})}})}function T(e,t,n,r){var i=t?e.prototype:e;x(e),j(r,function(r,s){var o=i[r],u=B(i,r);typeof n=="function"&&(s=k(i[r],s,n)),(n!==!1||!i[r])&&L(i,r,s),e.SugarMethods[r]={instance:t,method:s,original:o,existed:u}})}function N(e,t,n,r,i){var s={};r=y(r)?r.split(","):r,r.forEach(function(e,t){i(s,e,t)}),T(e,t,n,s)}function C(e,t,n){var r=t.length===0,i=A(t),s=!1;return j(e.SugarMethods,function(t,o){if(r||i.indexOf(t)>-1)s=!0,n(o.instance?e.prototype:e,t,o)}),s}function k(e,t,n){return function(){var r;return e&&(n===!0||!n.apply(this,arguments))?r=e:r=t,r.apply(this,arguments)}}function L(t,n,r){c?e.defineProperty(t,n,{value:r,configurable:!0,enumerable:!1,writable:!0}):t[n]=r}function A(e,t){var n=[],r,i;for(r=0,i=e.length;r<i;r++)n.push(e[r]),t&&t.call(e,e[r],r);return n}function O(e,n,r){A(t.prototype.concat.apply([],t.prototype.slice.call(e,r||0)),n)}function M(e){if(!e||!e.call)throw new TypeError("Callback is not callable")}function _(e){return e!==u}function D(e){return e===u}function P(e){return e&&typeof e=="object"}function H(e){return!!e&&E(e)==="[object Object]"&&"hasOwnProperty"in e}function B(t,n){return e.hasOwnProperty.call(t,n)}function j(e,t){var n;for(n in e){if(!B(e,n))continue;if(t.call(e,n,e[n],e)===!1)break}}function F(e,t){return j(t,function(n){e[n]=t[n]}),e}function I(e){F(this,e)}function q(e,t,n,r){var i=[],s=parseInt(e),o=r<0;while(!o&&s<=t||o&&s>=t)i.push(s),n&&n.call(this,s),s+=r||1;return i}function R(e,t,n){var r=o[n||"round"],i=o.pow(10,o.abs(t||0));return t<0&&(i=1/i),r(e*i)/i}function U(e,t){return R(e,t,"ceil")}function z(e,t){return R(e,t,"floor")}function W(e,t,n,r){var i=o.abs(e).toString(r||10);i=$(t-i.replace(/\.\d+/,"").length,"0")+i;if(n||e<0)i=(e<0?"-":"+")+i;return i}function X(e){if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function V(){return"	\n\f\r   ᠎             \u2028\u2029　﻿"}function $(e,n){return t(o.max(0,_(e)?e:1)+1).join(n||"")}function J(e,t){var n=e.toString().match(/[^/]*$/)[0];return t&&(n=(n+t).split("").sort().join("").replace(/([gimy])\1+/g,"$1")),n}function K(e){return y(e)||(e=i(e)),e.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1")}function Q(t,n){var r=typeof t,s,o,u,f,l,c,h,p;if(r==="string")return t;u=a.call(t),s=H(t),o=u==="[object Array]";if(t!=null&&s||o){n||(n=[]);if(n.length>1){h=n.length;while(h--)if(n[h]===t)return"CYC"}n.push(t),f=i(t.constructor),l=o?t:e.keys(t).sort();for(h=0,p=l.length;h<p;h++)c=o?h:l[h],f+=c+Q(t[c],n);n.pop()}else 1/t===-Infinity?f="-0":f=i(t&&t.valueOf?t.valueOf():t);return r+u+f}function G(e,t){return Y(e)&&Y(t)?Q(e)===Q(t):e===t}function Y(e){var t=E(e);return/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/.test(t)||H(e)}function Z(e,t,n){var r=[],i=e.length,s=t[t.length-1]!==!1,o;return A(t,function(t){if(d(t))return!1;s&&(t%=i,t<0&&(t=i+t)),o=n?e.charAt(t)||"":e[t],r.push(o)}),r.length<2?r[0]:r}function et(t,n){N(n,!0,!1,t,function(t,n){t[n+(n==="equal"?"s":"")]=function(){return e[n].apply(null,[this].concat(A(arguments)))}})}function tt(e,t,n,r){var i=e.length,s=r==-1,o=s?i-1:0,u=rt(n,o);u<0&&(u=i+u);if(!s&&u<0||s&&u>=i)u=o;while(s&&u>=0||!s&&u<i){if(e[u]===t)return u;u+=r}return-1}function nt(e,t,n,r){var i=e.length,s=0,o=_(n),u,a;M(t);if(i==0&&!o)throw new TypeError("Reduce called on empty array with no initial value");o?u=n:(u=e[r?i-1:s],s++);while(s<i)a=r?i-s-1:s,a in e&&(u=t(u,e[a],a,e)),s++;return u}function rt(e,t){return isNaN(e)?t:parseInt(e>>0)}function it(e){if(e.length===0)throw new TypeError("First argument must be defined")}function st(){var e=V().match(/^\s+$/);try{i.prototype.trim.call([1])}catch(t){e=!1}T(i,!0,!e,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(n("^["+V()+"]+"),"")},trimRight:function(){return this.replace(n("["+V()+"]+$"),"")}})}function ot(){var e=new r(r.UTC(1999,11,31)),t="1999-12-31T00:00:00.000Z",n=e.toISOString&&e.toISOString()===t;N(r,!0,!n,"toISOString,toJSON",function(e,t){e[t]=function(){return W(this.getUTCFullYear(),4)+"-"+W(this.getUTCMonth()+1,2)+"-"+W(this.getUTCDate(),2)+"T"+W(this.getUTCHours(),2)+":"+W(this.getUTCMinutes(),2)+":"+W(this.getUTCSeconds(),2)+"."+W(this.getUTCMilliseconds(),3)+"Z"}})}function Tt(e){F(this,e),this.compiledFormats=wt.concat()}function Nt(e,t){var n;y(e)||(e=""),n=xt[e]||xt[e.slice(0,2)];if(t===!1&&!n)throw new Error("Invalid locale.");return n||at}function Ct(e,t){function i(e){var t=n[e];y(t)?n[e]=t.split(","):t||(n[e]=[])}function s(e,t){return e=e.split("+").map(function(e){return e.replace(/(.+):(.+)$/,function(e,t,n){return n.split("|").map(function(e){return t+e}).join("|")})}).join("|"),e.split("|").forEach(t)}function o(e,t,r){var i=[];n[e].forEach(function(e,n){t&&(e+="+"+e.slice(0,3)),s(e,function(e,t){i[t*r+n]=e.toLowerCase()})}),n[e]=i}function u(e,t,r){var i="\\d{"+e+","+t+"}";return r&&(i+="|(?:"+At(n.numbers)+")+"),i}function a(){var e=["\\d+"].concat(n.articles);return n.numbers&&(e=e.concat(n.numbers)),At(e)}function f(e,t){n[e]=n[e]||t}function l(){var e=[];n.modifiersByName={},n.modifiers.push({name:"day",src:"yesterday",value:-1}),n.modifiers.push({name:"day",src:"today",value:0}),n.modifiers.push({name:"day",src:"tomorrow",value:1}),n.modifiers.forEach(function(t){var r=t.name;s(t.src,function(i){var s=n[r];n.modifiersByName[i]=t,e.push({name:r,src:i,value:t.value}),n[r]=s?s+"|"+i:i})}),n.day+="|"+At(n.weekdays),n.modifiers=e}var n,r;return n=new Tt(t),i("modifiers"),"months,weekdays,units,numbers,articles,tokens,timeMarker,ampm,timeSuffixes,dateParse,timeParse".split(",").forEach(i),r=!n.monthSuffix,o("months",r,12),o("weekdays",r,7),o("units",!1,8),o("numbers",!1,10),f("code",e),f("date",u(1,2,n.digitDate)),f("year","'\\d{2}|"+u(4,4)),f("num",a()),l(),n.monthSuffix&&(n.month=u(1,2),n.months=q(1,12).map(function(e){return e+n.monthSuffix})),n.full_month=u(1,2)+"|"+At(n.months),n.timeSuffixes.length>0&&n.addFormat($t(pt,n),!1,ft),n.addFormat("{day}",!0),n.addFormat("{month}"+(n.monthSuffix||"")),n.addFormat("{year}"+(n.yearSuffix||"")),n.timeParse.forEach(function(e){n.addFormat(e,!0)}),n.dateParse.forEach(function(e){n.addFormat(e)}),xt[e]=n}function kt(e,t,r,i){e.compiledFormats.unshift({variant:i,locale:e,reg:n("^"+t+"$","i"),to:r})}function Lt(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function At(e){return e.filter(function(e){return!!e}).join("|")}function Ot(e,t){var n,r;return H(e[0])?e:g(e[0])&&!g(e[1])?[e[0]]:y(e[0])&&t?[Mt(e[0]),e[1]]:(n={},yt.forEach(function(t,r){n[t.unit]=e[r]}),[n])}function Mt(e,t){var n={};return match=e.match(/^(\d+)?\s?(\w+?)s?$/i),match&&(D(t)&&(t=parseInt(match[1])||1),n[match[2].toLowerCase()]=t),n}function _t(e,t){var n={},r,i;return t.forEach(function(t,s){r=e[s+1];if(D(r)||r==="")return;t==="year"&&(n.yearAsString=r.replace(/'/,"")),i=parseFloat(r.replace(/'/,"").replace(/,/,".")),n[t]=isNaN(i)?r.toLowerCase():i}),n}function Dt(e){return e=e.trim().replace(/^just (?=now)|\.+$/i,""),Pt(e)}function Pt(e){return e.replace(gt,function(e,t,n){var r=0,i=1,s,o;return t?e:(n.split("").reverse().forEach(function(e){var t=mt[e],n=t>9;n?(s&&(r+=i),i*=t/(o||1),o=t):(s===!1&&(i*=10),r+=i*t),s=n}),s&&(r+=i),r)})}function Ht(e,t,n,i){var s=new r,o=!1,u,a,f,l,c,h,p,d,m;s.utc(i);if(v(e))s.utc(e.isUTC()).setTime(e.getTime());else if(g(e))s.setTime(e);else if(H(e))s.set(e,!0),l=e;else if(y(e)){u=Nt(t),e=Dt(e),u&&j(u.getFormats(),function(n,r){var i=e.match(r.reg);if(i){f=r,a=f.locale,l=_t(i,f.to,a),l.utc&&s.utc(),a.cachedFormat=f;if(l.timestamp)return l=l.timestamp,!1;f.variant&&!y(l.month)&&(y(l.date)||u.hasVariant(t))&&(d=l.month,l.month=l.date,l.date=d),l.year&&l.yearAsString.length===2&&(l.year=Bt(l.year)),l.month&&(l.month=a.getMonth(l.month),l.shift&&!l.unit&&(l.unit=a.units[7])),l.weekday&&l.date?delete l.weekday:l.weekday&&(l.weekday=a.getWeekday(l.weekday),l.shift&&!l.unit&&(l.unit=a.units[5])),l.day&&(d=a.modifiersByName[l.day])?(l.day=d.value,s.reset(),o=!0):l.day&&(h=a.getWeekday(l.day))>-1&&(delete l.day,l.num&&l.month?(m=function(){var e=s.getWeekday();s.setWeekday(7*(l.num-1)+(e>h?h+7:h))},l.day=1):l.weekday=h),l.date&&!g(l.date)&&(l.date=a.getNumericDate(l.date)),a.matchPM(l.ampm)&&l.hour<12?l.hour+=12:a.matchAM(l.ampm)&&l.hour===12&&(l.hour=0);if("offset_hours"in l||"offset_minutes"in l)s.utc(),l.offset_minutes=l.offset_minutes||0,l.offset_minutes+=l.offset_hours*60,l.offset_sign==="-"&&(l.offset_minutes*=-1),l.minute-=l.offset_minutes;if(l.unit){o=!0,p=a.getNumber(l.num),c=a.getEnglishUnit(l.unit);if(l.shift||l.edge)p*=(d=a.modifiersByName[l.shift])?d.value:0,c==="month"&&_(l.date)&&(s.set({day:l.date},!0),delete l.date),c==="year"&&_(l.month)&&(s.set({month:l.month,day:l.date},!0),delete l.month,delete l.date);l.sign&&(d=a.modifiersByName[l.sign])&&(p*=d.value),_(l.weekday)&&(s.set({weekday:l.weekday},!0),delete l.weekday),l[c]=(l[c]||0)+p}return l.year_sign==="-"&&(l.year*=-1),bt.slice(1,4).forEach(function(e,t){var n=l[e.unit],r=n%1;r&&(l[bt[t].unit]=R(r*(e.unit==="second"?1e3:60)),l[e.unit]=z(n))}),!1}}),f?o?s.advance(l):(s._utc&&s.reset(),Wt(s,l,!0,!1,n)):(e!=="now"&&(s=new r(e)),i&&s.addMinutes(-s.getTimezoneOffset()));if(l&&l.edge){d=a.modifiersByName[l.edge],j(bt.slice(4),function(e,t){if(_(l[t.unit]))return c=t.unit,!1});if(c==="year")l.specificity="month";else if(c==="month"||c==="week")l.specificity="day";s[(d.value<0?"endOf":"beginningOf")+Lt(c)](),d.value===-2&&s.reset()}m&&m(),s.utc(!1)}return{date:s,set:l}}function Bt(e){return R(Xt(new r,"FullYear")/100)*100-R(e/100)*100+e}function jt(e){var t=Xt(e,"Hours");return t===0?12:t-z(t/13)*12}function Ft(e){e=e.clone();var t=Xt(e,"Day")||7;return e.addDays(4-t).reset(),1+z(e.daysSince(e.clone().beginningOfYear())/7)}function It(e){var t,n=o.abs(e),r=n,i=0;return bt.slice(1).forEach(function(e,s){t=z(R(n/e.multiplier()*10)/10),t>=1&&(r=t,i=s+1)}),[r,i,e]}function qt(e){var t=It(e.millisecondsFromNow());return t[1]===6&&(t[0]=o.abs(e.monthsFromNow())),t}function Rt(e,t,r,i){var s,o=Nt(i),u=n(/^[A-Z]/),a,f;return e.isValid()?(Date[t]?t=Date[t]:m(t)&&(s=qt(e),t=t.apply(e,s.concat(o))),!t&&r?(s=s||qt(e),s[1]===0&&(s[1]=1,s[0]=1),o.getRelativeFormat(s)):(t=t||"long",t=o[t]||t,Et.forEach(function(r){t=t.replace(n("\\{("+r.token+")(\\d)?\\}",r.word?"i":""),function(t,n,i){var s=r.format(e,o,i||1,n),a=n.length,f=n.match(/^(.)\1+$/);if(r.word){a===3&&(s=s.slice(0,3));if(f||n.match(u))s=Lt(s)}else f&&!r.text&&(s=(g(s)?W(s,a):s.toString()).slice(-a));return s})}),t)):"Invalid Date"}function Ut(e,t,n,r){var i,s,o,u,a,f,l,c,h=0,p=0,d=0;return i=Ht(t,null,null,r),n>0&&(p=d=n,l=!0),i.date.isValid()?(i.set&&i.set.specificity&&(St.forEach(function(t,n){t.unit===i.set.specificity&&(h=t.multiplier(i.date,e-i.date)-1)}),c=Lt(i.set.specificity),(i.set.edge||i.set.shift)&&i.date["beginningOf"+c](),i.set.specificity==="month"&&(u=i.date.clone()["endOf"+c]().getTime()),!l&&i.set.sign&&i.set.specificity!="millisecond"&&(p=50,d=-50)),s=e.getTime(),o=i.date.getTime(),u=u||o+h,u=zt(e,o,u),s>=o-p&&s<=u+d):!1}function zt(e,t,n){var r,i,s,o;return r=new Date(t),i=(new Date(n)).utc(e.isUTC()),Xt(i,"Hours")!==23&&(s=r.getTimezoneOffset(),o=i.getTimezoneOffset(),s!==o&&(n+=(o-s).minutes())),n}function Wt(e,t,n,i,s){function a(e){return _(t[e])?t[e]:t[e+"s"]}function f(e){return _(a(e))}function l(e,t){return f(e)||t&&f("weekday")}function c(){var t=new r;return s===-1&&e>t||s===1&&e<t}var o,u;if(g(t)&&i)t={milliseconds:t};else if(g(t))return e.setTime(t),e;_(t.date)&&(t.day=t.date),j(bt,function(r,i){var s=i.unit==="day";if(l(i.unit,s))return t.specificity=i.unit,u=+r,!1;n&&i.unit!=="week"&&(!s||!f("week"))&&Vt(e,i.method,s?1:0)}),St.forEach(function(n,r){var s=n.unit,o=n.method,u=St[r-1],l;l=a(s);if(D(l))return;i?(s==="week"&&(l=(t.day||0)+l*7,o="Date"),l=l*i+Xt(e,o)):s==="month"&&f("day")&&Vt(e,"Date",15),Vt(e,o,l),i&&s==="month"&&Jt(e,l)});if(!i&&!f("day")&&f("weekday")){var o=a("weekday"),h,p;e.setWeekday(o)}return c()&&j(bt.slice(u+1),function(t,n){var r=n.ambiguous||n.unit==="week"&&f("weekday");if(r&&!l(n.unit,n.unit==="day"))return e[n.addMethod](s),!1}),e}function Xt(e,t){return e["get"+(e._utc?"UTC":"")+t]()}function Vt(e,t,n){return e["set"+(e._utc&&t!="ISOWeek"?"UTC":"")+t](n)}function $t(e,t,n){var r={h:0,m:1,s:2},i;return t=t||ut,e.replace(/{([a-z])}/g,function(e,s){var o=[],u=s==="h",a=u&&!n;return s==="t"?t.ampm.join("|"):(u&&o.push(":"),(i=t.timeSuffixes[r[s]])&&o.push(i+"\\s*"),o.length===0?"":"(?:"+o.join("|")+")"+(a?"":"?"))})}function Jt(e,t){t<0&&(t=t%12+12),t%12!=Xt(e,"Month")&&Vt(e,"Date",0)}function Kt(e,t,n){var r,i;return g(e[1])?r=Ot(e)[0]:(r=e[0],i=e[1]),Ht(r,i,t,n).date}function Qt(){bt=St.concat().reverse(),yt=St.concat(),yt.splice(2,1)}function Gt(){N(r,!0,!1,St,function(e,t,n){function l(e){var n=e/u,r=n%1,i=t.error||.999;return r&&o.abs(r%1)>i&&(n=R(n)),parseInt(n)}var i=t.unit,s=Lt(i),u=t.multiplier(),a,f;t.addMethod="add"+s+"s",a=function(e,t){return l(this.getTime()-r.create(e,t).getTime())},f=function(e,t){return l(r.create(e,t).getTime()-this.getTime())},e[i+"sAgo"]=f,e[i+"sUntil"]=f,e[i+"sSince"]=a,e[i+"sFromNow"]=a,e[t.addMethod]=function(e,t){var n={};return n[i]=e,this.advance(n,t)},sn(t,u),n<3&&["Last","This","Next"].forEach(function(t){e["is"+t+s]=function(){return this.is(t+" "+i)}}),n<4&&(e["beginningOf"+s]=function(){var e={};switch(i){case"year":e.year=Xt(this,"FullYear");break;case"month":e.month=Xt(this,"Month");break;case"day":e.day=Xt(this,"Date");break;case"week":e.weekday=0}return this.set(e,!0)},e["endOf"+s]=function(){var e={hours:23,minutes:59,seconds:59,milliseconds:999};switch(i){case"year":e.month=11,e.day=31;break;case"month":e.day=this.daysInMonth();break;case"week":e.weekday=6}return this.set(e,!0)})})}function Yt(){ut.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",!0,["year_sign","year","month","date"],!1,!0),ut.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",!0,["date","month","year"],!0),ut.addFormat("{full_month}[-.](\\d{4,4})",!1,["month","year"]),ut.addFormat("\\/Date\\((\\d+(?:\\+\\d{4,4})?)\\)\\/",!1,["timestamp"]),ut.addFormat($t(pt,ut),!1,ft),wt=ut.compiledFormats.slice(0,7).reverse(),ut.compiledFormats=ut.compiledFormats.slice(7).concat(wt)}function Zt(){N(r,!0,!1,"short,long,full",function(e,t){e[t]=function(e){return Rt(this,t,!1,e)}})}function en(){dt.split("").forEach(function(e,t){var n;t>9&&(t=o.pow(10,t-9)),mt[e]=t}),vt.split("").forEach(function(e,t){mt[e]=t}),gt=n("([期週周])?(["+dt+vt+"]+)(?!昨)","g")}function tn(){var e="today,yesterday,tomorrow,weekday,weekend,future,past".split(","),t=ut.weekdays.slice(0,7),n=ut.months.slice(0,12);N(r,!0,!1,e.concat(t).concat(n),function(e,t){e["is"+Lt(t)]=function(e){return this.is(t,0,e)}})}function nn(){r.extend({utc:{create:function(){return Kt(arguments,0,!0)},past:function(){return Kt(arguments,-1,!0)},future:function(){return Kt(arguments,1,!0)}}},!1,!1)}function rn(){r.extend({RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"},!1,!1)}function sn(e,t){function i(){return R(this*t)}function o(){return Kt(arguments)[e.addMethod](this)}function u(){return Kt(arguments)[e.addMethod](-this)}var n=e.unit,r={};r[n]=i,r[n+"s"]=i,r[n+"Before"]=u,r[n+"sBefore"]=u,r[n+"Ago"]=u,r[n+"sAgo"]=u,r[n+"After"]=o,r[n+"sAfter"]=o,r[n+"FromNow"]=o,r[n+"sFromNow"]=o,s.extend(r)}var e=Object,t=Array,n=RegExp,r=Date,i=String,s=Number,o=Math,u,a=e.prototype.toString,f=typeof global!="undefined"?global:this,l={},c=e.defineProperty&&e.defineProperties,h="Array,Boolean,Date,Function,Number,String,RegExp".split(","),p=w(h[0]),d=w(h[1]),v=w(h[2]),m=w(h[3]),g=w(h[4]),y=w(h[5]),b=w(h[6]);I.prototype.constructor=e,S(),T(e,!1,!1,{keys:function(e){var t=[];if(!P(e)&&!b(e)&&!m(e))throw new TypeError("Object required");return j(e,function(e,n){t.push(e)}),t}}),T(t,!1,!1,{isArray:function(e){return p(e)}}),T(t,!0,!1,{every:function(e,t){var n=this.length,r=0;it(arguments);while(r<n){if(r in this&&!e.call(t,this[r],r,this))return!1;r++}return!0},some:function(e,t){var n=this.length,r=0;it(arguments);while(r<n){if(r in this&&e.call(t,this[r],r,this))return!0;r++}return!1},map:function(e,t){var n=this.length,r=0,i=new Array(n);it(arguments);while(r<n)r in this&&(i[r]=e.call(t,this[r],r,this)),r++;return i},filter:function(e,t){var n=this.length,r=0,i=[];it(arguments);while(r<n)r in this&&e.call(t,this[r],r,this)&&i.push(this[r]),r++;return i},indexOf:function(e,t){return y(this)?this.indexOf(e,t):tt(this,e,t,1)},lastIndexOf:function(e,t){return y(this)?this.lastIndexOf(e,t):tt(this,e,t,-1)},forEach:function(e,t){var n=this.length,r=0;M(e);while(r<n)r in this&&e.call(t,this[r],r,this),r++},reduce:function(e,t){return nt(this,e,t)},reduceRight:function(e,t){return nt(this,e,t,!0)}}),T(Function,!0,!1,{bind:function(e){var t=this,n=A(arguments).slice(1),r,i;if(!m(this))throw new TypeError("Function.prototype.bind called on a non-function");return i=function(){return t.apply(t.prototype&&this instanceof t?this:e,n.concat(A(arguments)))},i.prototype=this.prototype,i}}),T(r,!1,!1,{now:function(){return(new r).getTime()}}),st(),ot();var ut,at,ft=["ampm","hour","minute","second","ampm","utc","offset_sign","offset_hours","offset_minutes","ampm"],lt="(?:[,.]\\d+)?",ct="\\d{1,2}"+lt,ht="[0-5]\\d"+lt,pt="({t})?\\s*("+ct+")(?:{h}("+ht+")?{m}(?::?("+ht+"){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))",dt="〇一二三四五六七八九十百千万",vt="０１２３４５６７８９",mt={},gt,yt,bt,wt=[],Et=[{token:"f{1,4}|ms|milliseconds",format:function(e){return Xt(e,"Milliseconds")}},{token:"ss?|seconds",format:function(e,t){return Xt(e,"Seconds")}},{token:"mm?|minutes",format:function(e,t){return Xt(e,"Minutes")}},{token:"hh?|hours|12hr",format:function(e){return jt(e)}},{token:"HH?|24hr",format:function(e){return Xt(e,"Hours")}},{token:"dd?|date|day",format:function(e){return Xt(e,"Date")}},{token:"dow|weekday",word:!0,format:function(e,t,n,r){var i=Xt(e,"Day");return t.weekdays[i+(n-1)*7]}},{token:"MM?",format:function(e){return Xt(e,"Month")+1}},{token:"mon|month",word:!0,format:function(e,t,n,r){var i=Xt(e,"Month");return t.months[i+(n-1)*12]}},{token:"y{2,4}|year",format:function(e){return Xt(e,"FullYear")}},{token:"[Tt]{1,2}",format:function(e,t,n,r){if(t["ampm"].length==0)return"";var i=Xt(e,"Hours"),s=t.ampm[z(i/12)];return r.length===1&&(s=s.slice(0,1)),r.slice(0,1)==="T"&&(s=s.toUpperCase()),s}},{token:"z{1,4}|tz|timezone",text:!0,format:function(e,t,n,r){var i=e.getUTCOffset();if(r=="z"||r=="zz")i=i.replace(/(\d{2})(\d{2})/,function(e,t,n){return W(t,r.length)});return i}},{token:"iso(tz|timezone)",format:function(e){return e.getUTCOffset(!0)}},{token:"ord",format:function(e){var t=Xt(e,"Date");return t+X(t)}}],St=[{unit:"year",method:"FullYear",ambiguous:!0,multiplier:function(e){var t=e?e.isLeapYear()?1:0:.25;return(365+t)*24*60*60*1e3}},{unit:"month",method:"Month",ambiguous:!0,multiplier:function(e,t){var n=30.4375,r;return e&&(r=e.daysInMonth(),t<=r.days()&&(n=r)),n*24*60*60*1e3},error:.919},{unit:"week",method:"ISOWeek",multiplier:function(){return 6048e5}},{unit:"day",method:"Date",ambiguous:!0,multiplier:function(){return 864e5}},{unit:"hour",method:"Hours",multiplier:function(){return 36e5}},{unit:"minute",method:"Minutes",multiplier:function(){return 6e4}},{unit:"second",method:"Seconds",multiplier:function(){return 1e3}},{unit:"millisecond",method:"Milliseconds",multiplier:function(){return 1}}],xt={};Tt.prototype={getMonth:function(e){return g(e)?e-1:this.months.indexOf(e)%12},getWeekday:function(e){return this.weekdays.indexOf(e)%7},getNumber:function(e){var t;return g(e)?e:e&&(t=this.numbers.indexOf(e))!==-1?(t+1)%10:1},getNumericDate:function(e){var t=this;return e.replace(n(this.num,"g"),function(e){var n=t.getNumber(e);return n||""})},getEnglishUnit:function(e){return ut.units[this.units.indexOf(e)%8]},getRelativeFormat:function(e){return this.convertAdjustedToFormat(e,e[2]>0?"future":"past")},getDuration:function(e){return this.convertAdjustedToFormat(It(e),"duration")},hasVariant:function(e){return e=e||this.code,e==="en"||e==="en-US"?!0:this.variant},matchAM:function(e){return e===this.ampm[0]},matchPM:function(e){return e&&e===this.ampm[1]},convertAdjustedToFormat:function(e,t){var n,r,i,s=e[0],o=e[1],u=e[2],a=this[t]||this.relative;return m(a)?a.call(this,s,o,u,t):(i=this.plural&&s>1?1:0,r=this.units[i*8+o]||this.units[o],this.capitalizeUnit&&(r=Lt(r)),n=this.modifiers.filter(function(e){return e.name=="sign"&&e.value==(u>0?1:-1)})[0],a.replace(/\{(.*?)\}/g,function(e,t){switch(t){case"num":return s;case"unit":return r;case"sign":return n.src}}))},getFormats:function(){return this.cachedFormat?[this.cachedFormat].concat(this.compiledFormats):this.compiledFormats},addFormat:function(e,t,n,r,i){var s=n||[],o=this,u,a,f;e=e.replace(/\s+/g,"[-,. ]*"),e=e.replace(/\{([^,]+?)\}/g,function(e,t){var r,i,u,a=t.match(/\?$/),f=t.match(/^(\d+)\??$/),l=t.match(/(\d)(?:-(\d))?/),c=t.replace(/[^a-z]+$/,"");return f?r=o.tokens[f[1]]:o[c]?r=o[c]:o[c+"s"]&&(r=o[c+"s"],l&&(i=[],r.forEach(function(e,t){var n=t%(o.units?8:r.length);n>=l[1]&&n<=(l[2]||l[1])&&i.push(e)}),r=i),r=At(r)),f?u="(?:"+r+")":(n||s.push(c),u="("+r+")"),a&&(u+="?"),u}),t?(u=$t(pt,o,i),a=["t","[\\s\\u3000]"].concat(o.timeMarker),f=e.match(/\\d\{\d,\d\}\)+\??$/),kt(o,"(?:"+u+")[,\\s\\u3000]+?"+e,ft.concat(s),r),kt(o,e+"(?:[,\\s]*(?:"+a.join("|")+(f?"+":"*")+")"+u+")?",s.concat(ft),r)):kt(o,e,s,r)}},r.extend({create:function(){return Kt(arguments)},past:function(){return Kt(arguments,-1)},future:function(){return Kt(arguments,1)},addLocale:function(e,t){return Ct(e,t)},setLocale:function(e,t){var n=Nt(e,!1);return at=n,e&&e!=n["code"]&&(n.code=e),n},getLocale:function(e){return e?Nt(e,!1):at},addFormat:function(e,t,n){kt(Nt(n),e,t)}},!1,!1),r.extend({set:function(){var e=Ot(arguments);return Wt(this,e[0],e[1])},setWeekday:function(e){if(D(e))return;return Vt(this,"Date",Xt(this,"Date")+e-Xt(this,"Day"))},setISOWeek:function(e){var t=Xt(this,"Day")||7;if(D(e))return;return this.set({month:0,date:4}),this.set({weekday:1}),e>1&&this.addWeeks(e-1),t!==1&&this.advance({days:t-1}),this.getTime()},getISOWeek:function(){return Ft(this)},getUTCOffset:function(e){var t=this._utc?0:this.getTimezoneOffset(),n=e===!0?":":"";return!t&&e?"Z":W(z(-t/60),2,!0)+n+W(o.abs(t%60),2)},utc:function(e){return L(this,"_utc",e===!0||arguments.length===0),this},isUTC:function(){return!!this._utc||this.getTimezoneOffset()===0},advance:function(){var e=Ot(arguments,!0);return Wt(this,e[0],e[1],1)},rewind:function(){var e=Ot(arguments,!0);return Wt(this,e[0],e[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(e,t,n){return this.getTime()>r.create(e).getTime()-(t||0)},isBefore:function(e,t){return this.getTime()<r.create(e).getTime()+(t||0)},isBetween:function(e,t,n){var i=this.getTime(),s=r.create(e).getTime(),u=r.create(t).getTime(),a=o.min(s,u),f=o.max(s,u);return n=n||0,a-n<i&&f+n>i},isLeapYear:function(){var e=Xt(this,"FullYear");return e%4===0&&e%100!==0||e%400===0},daysInMonth:function(){return 32-Xt(new r(Xt(this,"FullYear"),Xt(this,"Month"),32),"Date")},format:function(e,t){return Rt(this,e,!1,t)},relative:function(e,t){return y(e)&&(t=e,e=null),Rt(this,e,!0,t)},is:function(e,t,n){var i,s;if(!this.isValid())return;if(y(e)){e=e.trim().toLowerCase(),s=this.clone().utc(n);switch(!0){case e==="future":return this.getTime()>(new r).getTime();case e==="past":return this.getTime()<(new r).getTime();case e==="weekday":return Xt(s,"Day")>0&&Xt(s,"Day")<6;case e==="weekend":return Xt(s,"Day")===0||Xt(s,"Day")===6;case(i=ut.weekdays.indexOf(e)%7)>-1:return Xt(s,"Day")===i;case(i=ut.months.indexOf(e)%12)>-1:return Xt(s,"Month")===i}}return Ut(this,e,t,n)},reset:function(e){var t={},n;return e=e||"hours",e==="date"&&(e="days"),n=St.some(function(t){return e===t.unit||e===t.unit+"s"}),t[e]=e.match(/^days?/)?1:0,n?this.set(t,!0):this},clone:function(){var e=new r(this.getTime());return e.utc(!!this._utc),e}}),r.extend({iso:function(){return this.toISOString()},getWeekday:r.prototype.getDay,getUTCWeekday:r.prototype.getUTCDay}),s.extend({duration:function(e){return Nt(e).getDuration(this)}}),ut=at=r.addLocale("en",{plural:!0,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of","short":"{Month} {d}, {yyyy}","long":"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:["{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1?} {year?}","{date} {month} {year}","{date} {month}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2?} {shift} week","{num} {unit=4-5} {sign} {day}","{0?} {date}{1} of {month}","{0?}{month?} {date?}{1?} of {shift} {unit=6-7}"]}),Qt(),Gt(),Yt(),Zt(),en(),tn(),nn(),rn(),Date.addLocale("da",{plural:!0,months:"januar,februar,marts,april,maj,juni,juli,august,september,oktober,november,december",weekdays:"søndag|sondag,mandag,tirsdag,onsdag,torsdag,fredag,lørdag|lordag",units:"millisekund:|er,sekund:|er,minut:|ter,tim:e|er,dag:|e,ug:e|er|en,måned:|er|en+maaned:|er|en,år:||et+aar:||et",numbers:"en|et,to,tre,fire,fem,seks,syv,otte,ni,ti",tokens:"den,for",articles:"den","short":"d. {d}. {month} {yyyy}","long":"den {d}. {month} {yyyy} {H}:{mm}",full:"{Weekday} den {d}. {month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",ampm:"am,pm",modifiers:[{name:"day",src:"forgårs|i forgårs|forgaars|i forgaars",value:-2},{name:"day",src:"i går|igår|i gaar|igaar",value:-1},{name:"day",src:"i dag|idag",value:0},{name:"day",src:"i morgen|imorgen",value:1},{name:"day",src:"over morgon|overmorgen|i over morgen|i overmorgen|iovermorgen",value:2},{name:"sign",src:"siden",value:-1},{name:"sign",src:"om",value:1},{name:"shift",src:"i sidste|sidste",value:-1},{name:"shift",src:"denne",value:0},{name:"shift",src:"næste|naeste",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{1?} {num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{0?} {weekday?} {date?} {month} {year}","{date} {month}","{shift} {weekday}"]}),Date.addLocale("de",{plural:!0,capitalizeUnit:!0,months:"Januar,Februar,März|Marz,April,Mai,Juni,Juli,August,September,Oktober,November,Dezember",weekdays:"Sonntag,Montag,Dienstag,Mittwoch,Donnerstag,Freitag,Samstag",units:"Millisekunde:|n,Sekunde:|n,Minute:|n,Stunde:|n,Tag:|en,Woche:|n,Monat:|en,Jahr:|en",numbers:"ein:|e|er|en|em,zwei,drei,vier,fuenf,sechs,sieben,acht,neun,zehn",tokens:"der","short":"{d}. {Month} {yyyy}","long":"{d}. {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d}. {Month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"um",ampm:"am,pm",modifiers:[{name:"day",src:"vorgestern",value:-2},{name:"day",src:"gestern",value:-1},{name:"day",src:"heute",value:0},{name:"day",src:"morgen",value:1},{name:"day",src:"übermorgen|ubermorgen|uebermorgen",value:2},{name:"sign",src:"vor:|her",value:-1},{name:"sign",src:"in",value:1},{name:"shift",src:"letzte:|r|n|s",value:-1},{name:"shift",src:"nächste:|r|n|s+nachste:|r|n|s+naechste:|r|n|s+kommende:n|r",value:1}],dateParse:["{sign} {num} {unit}","{num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]}),Date.addLocale("es",{plural:!0,months:"enero,febrero,marzo,abril,mayo,junio,julio,agosto,septiembre,octubre,noviembre,diciembre",weekdays:"domingo,lunes,martes,miércoles|miercoles,jueves,viernes,sábado|sabado",units:"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,día|días|dia|dias,semana:|s,mes:|es,año|años|ano|anos",numbers:"uno,dos,tres,cuatro,cinco,seis,siete,ocho,nueve,diez",tokens:"el,de","short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"a las",ampm:"am,pm",modifiers:[{name:"day",src:"anteayer",value:-2},{name:"day",src:"ayer",value:-1},{name:"day",src:"hoy",value:0},{name:"day",src:"mañana|manana",value:1},{name:"sign",src:"hace",value:-1},{name:"sign",src:"de ahora",value:1},{name:"shift",src:"pasad:o|a",value:-1},{name:"shift",src:"próximo|próxima|proximo|proxima",value:1}],dateParse:["{sign} {num} {unit}","{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{shift} {weekday}","{weekday} {shift}","{date?} {1?} {month} {1?} {year?}"]}),Date.addLocale("fi",{plural:!0,timeMarker:"kello",ampm:",",months:"tammikuu,helmikuu,maaliskuu,huhtikuu,toukokuu,kesäkuu,heinäkuu,elokuu,syyskuu,lokakuu,marraskuu,joulukuu",weekdays:"sunnuntai,maanantai,tiistai,keskiviikko,torstai,perjantai,lauantai",units:"millisekun:ti|tia|teja|tina|nin,sekun:ti|tia|teja|tina|nin,minuut:ti|tia|teja|tina|in,tun:ti|tia|teja|tina|nin,päiv:ä|ää|iä|änä|än,viik:ko|koa|koja|on|kona,kuukau:si|sia|tta|den|tena,vuo:si|sia|tta|den|tena",numbers:"yksi|ensimmäinen,kaksi|toinen,kolm:e|as,neljä:s,vii:si|des,kuu:si|des,seitsemä:n|s,kahdeksa:n|s,yhdeksä:n|s,kymmene:n|s",articles:"",optionals:"","short":"{d}. {month}ta {yyyy}","long":"{d}. {month}ta {yyyy} kello {H}.{mm}",full:"{Weekday}na {d}. {month}ta {yyyy} kello {H}.{mm}",relative:function(e,t,n,r){function s(n){return(e===1?"":e+" ")+i[8*n+t]}var i=this.units;switch(r){case"duration":return s(0);case"past":return s(e>1?1:0)+" sitten";case"future":return s(4)+" päästä"}},modifiers:[{name:"day",src:"toissa päivänä|toissa päiväistä",value:-2},{name:"day",src:"eilen|eilistä",value:-1},{name:"day",src:"tänään",value:0},{name:"day",src:"huomenna|huomista",value:1},{name:"day",src:"ylihuomenna|ylihuomista",value:2},{name:"sign",src:"sitten|aiemmin",value:-1},{name:"sign",src:"päästä|kuluttua|myöhemmin",value:1},{name:"edge",src:"viimeinen|viimeisenä",value:-2},{name:"edge",src:"lopussa",value:-1},{name:"edge",src:"ensimmäinen|ensimmäisenä",value:1},{name:"shift",src:"edellinen|edellisenä|edeltävä|edeltävänä|viime|toissa",value:-1},{name:"shift",src:"tänä|tämän",value:0},{name:"shift",src:"seuraava|seuraavana|tuleva|tulevana|ensi",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{num} {unit=4-5} {sign} {day}","{month} {year}","{shift} {unit=5-7}"],timeParse:["{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1} {year?}","{date} {month} {year}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2} {shift} week","{0} {date}{1} of {month}","{0}{month?} {date?}{1} of {shift} {unit=6-7}"]}),Date.addLocale("fr",{plural:!0,months:"janvier,février|fevrier,mars,avril,mai,juin,juillet,août,septembre,octobre,novembre,décembre|decembre",weekdays:"dimanche,lundi,mardi,mercredi,jeudi,vendredi,samedi",units:"milliseconde:|s,seconde:|s,minute:|s,heure:|s,jour:|s,semaine:|s,mois,an:|s|née|nee",numbers:"un:|e,deux,trois,quatre,cinq,six,sept,huit,neuf,dix",tokens:["l'|la|le"],"short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"à",ampm:"am,pm",modifiers:[{name:"day",src:"hier",value:-1},{name:"day",src:"aujourd'hui",value:0},{name:"day",src:"demain",value:1},{name:"sign",src:"il y a",value:-1},{name:"sign",src:"dans|d'ici",value:1},{name:"shift",src:"derni:èr|er|ère|ere",value:-1},{name:"shift",src:"prochain:|e",value:1}],dateParse:["{sign} {num} {unit}","{sign} {num} {unit}","{0?} {unit=5-7} {shift}"],timeParse:["{weekday?} {0?} {date?} {month} {year?}","{0?} {weekday} {shift}"]}),Date.addLocale("it",{plural:!0,months:"Gennaio,Febbraio,Marzo,Aprile,Maggio,Giugno,Luglio,Agosto,Settembre,Ottobre,Novembre,Dicembre",weekdays:"Domenica,Luned:ì|i,Marted:ì|i,Mercoled:ì|i,Gioved:ì|i,Venerd:ì|i,Sabato",units:"millisecond:o|i,second:o|i,minut:o|i,or:a|e,giorn:o|i,settiman:a|e,mes:e|i,ann:o|i",numbers:"un:|a|o|',due,tre,quattro,cinque,sei,sette,otto,nove,dieci",tokens:"l'|la|il","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"alle",ampm:"am,pm",modifiers:[{name:"day",src:"ieri",value:-1},{name:"day",src:"oggi",value:0},{name:"day",src:"domani",value:1},{name:"day",src:"dopodomani",value:2},{name:"sign",src:"fa",value:-1},{name:"sign",src:"da adesso",value:1},{name:"shift",src:"scors:o|a",value:-1},{name:"shift",src:"prossim:o|a",value:1}],dateParse:["{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]}),Date.addLocale("ja",{monthSuffix:"月",weekdays:"日曜日,月曜日,火曜日,水曜日,木曜日,金曜日,土曜日",units:"ミリ秒,秒,分,時間,日,週間|週,ヶ月|ヵ月|月,年","short":"{yyyy}年{M}月{d}日","long":"{yyyy}年{M}月{d}日 {H}時{mm}分",full:"{yyyy}年{M}月{d}日 {Weekday} {H}時{mm}分{ss}秒",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"時,分,秒",ampm:"午前,午後",modifiers:[{name:"day",src:"一昨日",value:-2},{name:"day",src:"昨日",value:-1},{name:"day",src:"今日",value:0},{name:"day",src:"明日",value:1},{name:"day",src:"明後日",value:2},{name:"sign",src:"前",value:-1},{name:"sign",src:"後",value:1},{name:"shift",src:"去|先",value:-1},{name:"shift",src:"来",value:1}],dateParse:["{num}{unit}{sign}"],timeParse:["{shift}{unit=5-7}{weekday?}","{year}年{month?}月?{date?}日?","{month}月{date?}日?","{date}日"]}),Date.addLocale("ko",{digitDate:!0,monthSuffix:"월",weekdays:"일요일,월요일,화요일,수요일,목요일,금요일,토요일",units:"밀리초,초,분,시간,일,주,개월|달,년",numbers:"일|한,이,삼,사,오,육,칠,팔,구,십","short":"{yyyy}년{M}월{d}일","long":"{yyyy}년{M}월{d}일 {H}시{mm}분",full:"{yyyy}년{M}월{d}일 {Weekday} {H}시{mm}분{ss}초",past:"{num}{unit} {sign}",future:"{num}{unit} {sign}",duration:"{num}{unit}",timeSuffixes:"시,분,초",ampm:"오전,오후",modifiers:[{name:"day",src:"그저께",value:-2},{name:"day",src:"어제",value:-1},{name:"day",src:"오늘",value:0},{name:"day",src:"내일",value:1},{name:"day",src:"모레",value:2},{name:"sign",src:"전",value:-1},{name:"sign",src:"후",value:1},{name:"shift",src:"지난|작",value:-1},{name:"shift",src:"이번",value:0},{name:"shift",src:"다음|내",value:1}],dateParse:["{num}{unit} {sign}","{shift?} {unit=5-7}"],timeParse:["{shift} {unit=5?} {weekday}","{year}년{month?}월?{date?}일?","{month}월{date?}일?","{date}일"]}),Date.addLocale("nl",{plural:!0,months:"januari,februari,maart,april,mei,juni,juli,augustus,september,oktober,november,december",weekdays:"zondag|zo,maandag|ma,dinsdag|di,woensdag|woe|wo,donderdag|do,vrijdag|vrij|vr,zaterdag|za",units:"milliseconde:|n,seconde:|n,minu:ut|ten,uur,dag:|en,we:ek|ken,maand:|en,jaar",numbers:"een,twee,drie,vier,vijf,zes,zeven,acht,negen",tokens:"","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"'s|om",modifiers:[{name:"day",src:"gisteren",value:-1},{name:"day",src:"vandaag",value:0},{name:"day",src:"morgen",value:1},{name:"day",src:"overmorgen",value:2},{name:"sign",src:"geleden",value:-1},{name:"sign",src:"vanaf nu",value:1},{name:"shift",src:"laatste|vorige|afgelopen",value:-1},{name:"shift",src:"volgend:|e",value:1}],dateParse:["{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]}),Date.addLocale("pl",{plural:!0,months:"Styczeń|Stycznia,Luty|Lutego,Marzec|Marca,Kwiecień|Kwietnia,Maj|Maja,Czerwiec|Czerwca,Lipiec|Lipca,Sierpień|Sierpnia,Wrzesień|Września,Październik|Października,Listopad|Listopada,Grudzień|Grudnia",weekdays:"Niedziela|Niedzielę,Poniedziałek,Wtorek,Środ:a|ę,Czwartek,Piątek,Sobota|Sobotę",units:"milisekund:a|y|,sekund:a|y|,minut:a|y|,godzin:a|y|,dzień|dni,tydzień|tygodnie|tygodni,miesiące|miesiące|miesięcy,rok|lata|lat",numbers:"jeden|jedną,dwa|dwie,trzy,cztery,pięć,sześć,siedem,osiem,dziewięć,dziesięć",optionals:"w|we,roku","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday}, {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"o",ampm:"am,pm",modifiers:[{name:"day",src:"przedwczoraj",value:-2},{name:"day",src:"wczoraj",value:-1},{name:"day",src:"dzisiaj|dziś",value:0},{name:"day",src:"jutro",value:1},{name:"day",src:"pojutrze",value:2},{name:"sign",src:"temu|przed",value:-1},{name:"sign",src:"za",value:1},{name:"shift",src:"zeszły|zeszła|ostatni|ostatnia",value:-1},{name:"shift",src:"następny|następna|następnego|przyszły|przyszła|przyszłego",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{shift} {unit=5-7}","{0} {shift?} {weekday}"],timeParse:["{date} {month} {year?} {1}","{0} {shift?} {weekday}"]}),Date.addLocale("pt",{plural:!0,months:"janeiro,fevereiro,março,abril,maio,junho,julho,agosto,setembro,outubro,novembro,dezembro",weekdays:"domingo,segunda-feira,terça-feira,quarta-feira,quinta-feira,sexta-feira,sábado|sabado",units:"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,dia:|s,semana:|s,mês|mêses|mes|meses,ano:|s",numbers:"um,dois,três|tres,quatro,cinco,seis,sete,oito,nove,dez,uma,duas",tokens:"a,de","short":"{d} de {month} de {yyyy}","long":"{d} de {month} de {yyyy} {H}:{mm}",full:"{Weekday}, {d} de {month} de {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"às",ampm:"am,pm",modifiers:[{name:"day",src:"anteontem",value:-2},{name:"day",src:"ontem",value:-1},{name:"day",src:"hoje",value:0},{name:"day",src:"amanh:ã|a",value:1},{name:"sign",src:"atrás|atras|há|ha",value:-1},{name:"sign",src:"daqui a",value:1},{name:"shift",src:"passad:o|a",value:-1},{name:"shift",src:"próximo|próxima|proximo|proxima",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{date?} {1?} {month} {1?} {year?}","{0?} {shift} {weekday}"]}),Date.addLocale("ru",{months:"Январ:я|ь,Феврал:я|ь,Март:а|,Апрел:я|ь,Ма:я|й,Июн:я|ь,Июл:я|ь,Август:а|,Сентябр:я|ь,Октябр:я|ь,Ноябр:я|ь,Декабр:я|ь",weekdays:"Воскресенье,Понедельник,Вторник,Среда,Четверг,Пятница,Суббота",units:"миллисекунд:а|у|ы|,секунд:а|у|ы|,минут:а|у|ы|,час:||а|ов,день|день|дня|дней,недел:я|ю|и|ь|е,месяц:||а|ев|е,год|год|года|лет|году",numbers:"од:ин|ну,дв:а|е,три,четыре,пять,шесть,семь,восемь,девять,десять",tokens:"в|на,года","short":"{d} {month} {yyyy} года","long":"{d} {month} {yyyy} года {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} года {H}:{mm}:{ss}",relative:function(e,t,n,r){var i,s=e.toString().slice(-1);switch(!0){case e>=11&&e<=15:mult=3;break;case s==1:mult=1;break;case s>=2&&s<=4:mult=2;break;default:mult=3}i=e+" "+this.units[mult*8+t];switch(r){case"duration":return i;case"past":return i+" назад";case"future":return"через "+i}},timeMarker:"в",ampm:" утра, вечера",modifiers:[{name:"day",src:"позавчера",value:-2},{name:"day",src:"вчера",value:-1},{name:"day",src:"сегодня",value:0},{name:"day",src:"завтра",value:1},{name:"day",src:"послезавтра",value:2},{name:"sign",src:"назад",value:-1},{name:"sign",src:"через",value:1},{name:"shift",src:"прошл:ый|ой|ом",value:-1},{name:"shift",src:"следующ:ий|ей|ем",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{0?} {shift} {unit=5-7}"],timeParse:["{date} {month} {year?} {1?}","{0?} {shift} {weekday}"]}),Date.addLocale("sv",{plural:!0,months:"januari,februari,mars,april,maj,juni,juli,augusti,september,oktober,november,december",weekdays:"söndag|sondag,måndag:|en+mandag:|en,tisdag,onsdag,torsdag,fredag,lördag|lordag",units:"millisekund:|er,sekund:|er,minut:|er,timm:e|ar,dag:|ar,veck:a|or|an,månad:|er|en+manad:|er|en,år:||et+ar:||et",numbers:"en|ett,två|tva,tre,fyra,fem,sex,sju,åtta|atta,nio,tio",tokens:"den,för|for",articles:"den","short":"den {d} {month} {yyyy}","long":"den {d} {month} {yyyy} {H}:{mm}",full:"{Weekday} den {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",ampm:"am,pm",modifiers:[{name:"day",src:"förrgår|i förrgår|iförrgår|forrgar|i forrgar|iforrgar",value:-2},{name:"day",src:"går|i går|igår|gar|i gar|igar",value:-1},{name:"day",src:"dag|i dag|idag",value:0},{name:"day",src:"morgon|i morgon|imorgon",value:1},{name:"day",src:"över morgon|övermorgon|i över morgon|i övermorgon|iövermorgon|over morgon|overmorgon|i over morgon|i overmorgon|iovermorgon",value:2},{name:"sign",src:"sedan|sen",value:-1},{name:"sign",src:"om",value:1},{name:"shift",src:"i förra|förra|i forra|forra",value:-1},{name:"shift",src:"denna",value:0},{name:"shift",src:"nästa|nasta",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{1?} {num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{0?} {weekday?} {date?} {month} {year}","{date} {month}","{shift} {weekday}"]}),Date.addLocale("zh-CN",{variant:!0,monthSuffix:"月",weekdays:"星期日|周日,星期一|周一,星期二|周二,星期三|周三,星期四|周四,星期五|周五,星期六|周六",units:"毫秒,秒钟,分钟,小时,天,个星期|周,个月,年",tokens:"日|号","short":"{yyyy}年{M}月{d}日","long":"{yyyy}年{M}月{d}日 {tt}{h}:{mm}",full:"{yyyy}年{M}月{d}日 {weekday} {tt}{h}:{mm}:{ss}",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"点|时,分钟?,秒",ampm:"上午,下午",modifiers:[{name:"day",src:"前天",value:-2},{name:"day",src:"昨天",value:-1},{name:"day",src:"今天",value:0},{name:"day",src:"明天",value:1},{name:"day",src:"后天",value:2},{name:"sign",src:"前",value:-1},{name:"sign",src:"后",value:1},{name:"shift",src:"上|去",value:-1},{name:"shift",src:"这",value:0},{name:"shift",src:"下|明",value:1}],dateParse:["{num}{unit}{sign}","{shift}{unit=5-7}"],timeParse:["{shift}{weekday}","{year}年{month?}月?{date?}{0?}","{month}月{date?}{0?}","{date}[日号]"]}),Date.addLocale("zh-TW",{monthSuffix:"月",weekdays:"星期日|週日,星期一|週一,星期二|週二,星期三|週三,星期四|週四,星期五|週五,星期六|週六",units:"毫秒,秒鐘,分鐘,小時,天,個星期|週,個月,年",tokens:"日|號","short":"{yyyy}年{M}月{d}日","long":"{yyyy}年{M}月{d}日 {tt}{h}:{mm}",full:"{yyyy}年{M}月{d}日 {Weekday} {tt}{h}:{mm}:{ss}",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"點|時,分鐘?,秒",ampm:"上午,下午",modifiers:[{name:"day",src:"前天",value:-2},{name:"day",src:"昨天",value:-1},{name:"day",src:"今天",value:0},{name:"day",src:"明天",value:1},{name:"day",src:"後天",value:2},{name:"sign",src:"前",value:-1},{name:"sign",src:"後",value:1},{name:"shift",src:"上|去",value:-1},{name:"shift",src:"這",value:0},{name:"shift",src:"下|明",value:1}],dateParse:["{num}{unit}{sign}","{shift}{unit=5-7}"],timeParse:["{shift}{weekday}","{year}年{month?}月?{date?}{0?}","{month}月{date?}{0?}","{date}[日號]"]});var on=function(e,t){this.start=r.create(e),this.end=r.create(t)};on.prototype.toString=function(){return this.isValid()?this.start.full()+".."+this.end.full():"Invalid DateRange"},T(on,!0,!1,{isValid:function(){return this.start<this.end},duration:function(){return this.isValid()?this.end.getTime()-this.start.getTime():NaN},contains:function(e){var t=this,n=e.start&&e.end?[e.start,e.end]:[e];return n.every(function(e){return e>=t.start&&e<=t.end})},every:function(e,t){var n=this.start.clone(),r=[],i=0,s,o;y(e)?(n.advance(Mt(e,0),!0),s=Mt(e),o=e.toLowerCase()==="day"):s={milliseconds:e};while(n<=this.end)r.push(n),t&&t(n,i),o&&Xt(n,"Hours")===23?(n=n.clone(),Vt(n,"Hours",48)):n=n.clone().advance(s,!0),i++;return r},union:function(e){return new on(this.start<e.start?this.start:e.start,this.end>e.end?this.end:e.end)},intersect:function(e){return new on(this.start>e.start?this.start:e.start,this.end<e.end?this.end:e.end)},clone:function(e){return new on(this.start,this.end)}}),N(on,!0,!1,"Millisecond,Second,Minute,Hour,Day,Week,Month,Year",function(e,t){e["each"+t]=function(e){return this.every(t,e)}}),T(r,!1,!1,{range:function(e,t){return new on(e,t)}})}(),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),typeof exports!="undefined"&&(exports.css_beautify=css_beautify),typeof exports!="undefined"&&(exports.js_beautify=js_beautify),!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){r.trigger("closed").remove()}var r,i=e(this),s=i.attr("data-target");s||(s=i.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),r=e(s),t&&t.preventDefault(),r.length||(r=i.hasClass("alert")?i:i.parent()),r.trigger(t=e.Event("close")),t.isDefaultPrevented()||(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.on(e.support.transition.end,n):n())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s="object"==typeof n&&n;i||r.data("button",i=new t(this,s)),"toggle"==n?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(!(t>r.length-1||0>t))return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var r,i=this.$element.find(".item.active"),s=n||i[t](),o=this.interval,u="next"==t?"left":"right",a="next"==t?"first":"last",f=this;if(this.sliding=!0,o&&this.pause(),s=s.length?s:this.$element.find(".item")[a](),r=e.Event("slide",{relatedTarget:s[0]}),!s.hasClass("active")){if(e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(r),r.isDefaultPrevented())return;s.addClass(t),s[0].offsetWidth,i.addClass(u),s.addClass(u),this.$element.one(e.support.transition.end,function(){s.removeClass([t,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger("slid")},0)})}else{if(this.$element.trigger(r),r.isDefaultPrevented())return;i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,"object"==typeof n&&n),o="string"==typeof n?n:s.slide;i||r.data("carousel",i=new t(this,s)),"number"==typeof n?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide]",function(t){var n,r=e(this),i=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},i.data(),r.data());i.carousel(s),t.preventDefault()})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(!this.transitioning){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in"),r&&r.length){if(i=r.data("collapse"),i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;this.transitioning||(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){"show"==n.type&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s="object"==typeof n&&n;i||r.data("collapse",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,r=e(this),i=r.attr("data-target")||t.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":r.data();r[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})}(window.jQuery),!function(e){"use strict";function t(){e(r).each(function(){n(e(this)).removeClass("open")})}function n(t){var n,r=t.attr("data-target");return r||(r=t.attr("href"),r=r&&/#/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,"")),n=e(r),n.length||(n=t.parent()),n}var r="[data-toggle=dropdown]",i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var r,i,s=e(this);if(!s.is(".disabled, :disabled"))return r=n(s),i=r.hasClass("open"),t(),i||r.toggleClass("open"),s.focus(),!1},keydown:function(t){var r,i,s,o,u;if(/(38|40|27)/.test(t.keyCode)&&(r=e(this),t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled"))){if(s=n(r),o=s.hasClass("open"),!o||o&&27==t.keyCode)return r.click();i=e("[role=menu] li:not(.divider):visible a",s),i.length&&(u=i.index(i.filter(":focus")),38==t.keyCode&&u>0&&u--,40==t.keyCode&&i.length-1>u&&u++,~u||(u=0),i.eq(u).focus())}}};var s=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),"string"==typeof t&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.dropdown.data-api touchstart.dropdown.data-api",t).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",r,i.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",r+", [role=menu]",i.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&n;this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),r?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),"object"==typeof n&&n);i||r.data("modal",i=new t(this,s)),"string"==typeof n?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(i="hover"==this.options.trigger?"mouseenter":"focus",s="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight,t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.offset(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip();return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);n[n.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s="object"==typeof n&&n;i||r.data("tooltip",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||("function"==typeof n.content?n.content.call(t[0]):n.content)},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s="object"==typeof n&&n;i||r.data("popover",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){"use strict";function t(t,n){var r,i=e.proxy(this.process,this),s=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=s.on("scroll.scroll-spy.data-api",i),this.selector=(this.options.target||(r=e(t).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,n=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),i=/^#\w/.test(r)&&e(r);return i&&i.length&&[[i.position().top+n.$scrollElement.scrollTop(),r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,r=n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(t>=r)return o!=(e=s.last()[0])&&this.activate(e);for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(!i[e+1]||i[e+1]>=t)&&this.activate(s[e])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s="object"==typeof n&&n;i||r.data("scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,r,i=this.element,s=i.closest("ul:not(.dropdown-menu)"),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),i.parent("li").hasClass("active")||(t=s.find(".active:last a")[0],r=e.Event("show",{relatedTarget:t}),i.trigger(r),r.isDefaultPrevented()||(n=e(o),this.activate(i.parent("li"),s),this.activate(n,n.parent(),function(){i.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i):i(),s.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),"string"==typeof n&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],r=[],i=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?r.push(t):i.push(t):n.push(t);return n.concat(r,i)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(){var e=this;setTimeout(function(){e.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s="object"==typeof n&&n;i||r.data("typeahead",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);n.data("typeahead")||(t.preventDefault(),n.typeahead(n.data()))})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,n=e(document).height(),r=this.$window.scrollTop(),i=this.$element.offset(),s=this.options.offset,o=s.bottom,u=s.top,a="affix affix-top affix-bottom";"object"!=typeof s&&(o=u=s),"function"==typeof u&&(u=s.top()),"function"==typeof o&&(o=s.bottom()),t=null!=this.unpin&&r+this.unpin<=i.top?!1:null!=o&&i.top+this.$element.height()>=n-o?"bottom":null!=u&&u>=r?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?i.top-r:null,this.$element.removeClass(a).addClass("affix"+(t?"-"+t:"")))}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s="object"==typeof n&&n;i||r.data("affix",i=new t(this,s)),"string"==typeof n&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),i&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var f=this.relative_container.offset();u=[this.containment[0]+f.left,this.containment[1]+f.top,this.containment[2]+f.left,this.containment[3]+f.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var l=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?l-this.offset.click.top<u[1]||l-this.offset.click.top>u[3]?l-this.offset.click.top<u[1]?l+n.grid[1]:l-n.grid[1]:l:l;var c=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?c-this.offset.click.left<u[0]||c-this.offset.click.left>u[2]?c-this.offset.click.left<u[0]?c+n.grid[0]:c-n.grid[0]:c:c}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.23"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,f=t.top,l=t.left;return e.ui.isOver(i+n,s+r,f,l,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,f=n.offset.top,l=f+r.helperProportions.height;for(var c=r.snapElements.length-1;c>=0;c--){var h=r.snapElements[c].left,p=h+r.snapElements[c].width,d=r.snapElements[c].top,v=d+r.snapElements[c].height;if(!(h-s<o&&o<p+s&&d-s<f&&f<v+s||h-s<o&&o<p+s&&d-s<l&&l<v+s||h-s<u&&u<p+s&&d-s<f&&f<v+s||h-s<u&&u<p+s&&d-s<l&&l<v+s)){r.snapElements[c].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=!1;continue}if(i.snapMode!="inner"){var m=Math.abs(d-l)<=s,g=Math.abs(v-f)<=s,y=Math.abs(h-u)<=s,b=Math.abs(p-o)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p}).left-r.margins.left)}var w=m||g||y||b;if(i.snapMode!="outer"){var m=Math.abs(d-f)<=s,g=Math.abs(v-l)<=s,y=Math.abs(h-o)<=s,b=Math.abs(p-u)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[c].snapping&&(m||g||y||b||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=m||g||y||b||w}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(b){var Ca=Math.min,D=Math.max,qa=Math.floor,S=function(e){return"string"===b.type(e)},ja=function(a,c){if(b.isArray(c))for(var d=0,f=c.length;d<f;d++){var h=c[d];try{S(h)&&(h=eval(h)),b.isFunction(h)&&h(a)}catch(j){}}};b.layout={version:"1.3.rc30.62",revision:.033006,browser:{mozilla:!!b.browser.mozilla,webkit:!!b.browser.webkit||!!b.browser.safari,msie:!!b.browser.msie,isIE6:b.browser.msie&&6==b.browser.version,boxModel:!1!==b.support.boxModel||!b.browser.msie,version:b.browser.version},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"Top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"Bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"Right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"Left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(e){e=b(e);if(e=e.data("layout")||e.data("parentLayout")){e=e.container;if(e.data("layoutPane"))return e;e=e.closest("."+b.layout.defaults.panes.paneClass);if(e.data("layoutPane"))return e}return null},getParentPaneInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("layoutPane"):null},getParentLayoutInstance:function(e){return(e=b.layout.getParentPaneElem(e))?e.data("parentLayout"):null},getEventObject:function(e){return"object"==typeof e&&e.stopPropagation?e:null},parsePaneName:function(e){var t=b.layout.getEventObject(e);return t?(t.stopPropagation(),b(this).data("layoutEdge")):e},plugins:{draggable:!!b.fn.draggable,effects:{core:!!b.effects,slide:b.effects&&b.effects.slide}},onCreate:[],onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||b.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||b.layout.getScrollbarSize("height")},getScrollbarSize:function(e){var t=b('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),window.scrollbarWidth=n.width,window.scrollbarHeight=n.height,e.match(/^(width|height)$/)?n[e]:n},showInvisibly:function(e,t){if(e&&e.length&&(t||"none"===e.css("display"))){var n=e[0].style,n={display:n.display||"",visibility:n.visibility||""};return e.css({display:"block",visibility:"hidden"}),n}return{}},getElementDimensions:function(e){var t={},n=t.css={},r={},i,s,o=b.layout.cssNum,u=e.offset();return t.offsetLeft=u.left,t.offsetTop=u.top,b.each(["Left","Right","Top","Bottom"],function(o,u){i=n["border"+u]=b.layout.borderWidth(e,u),s=n["padding"+u]=b.layout.cssNum(e,"padding"+u),r[u]=i+s,t["inset"+u]=s}),t.offsetWidth=e.innerWidth(),t.offsetHeight=e.innerHeight(),t.outerWidth=e.outerWidth(),t.outerHeight=e.outerHeight(),t.innerWidth=D(0,t.outerWidth-r.Left-r.Right),t.innerHeight=D(0,t.outerHeight-r.Top-r.Bottom),n.width=e.width(),n.height=e.height(),n.top=o(e,"top",!0),n.bottom=o(e,"bottom",!0),n.left=o(e,"left",!0),n.right=o(e,"right",!0),t},getElementCSS:function(e,t){var n={},r=e[0].style,i=t.split(","),s=["Top","Bottom","Left","Right"],o=["Color","Style","Width"],u,a,f,l,c,h;for(l=0;l<i.length;l++)if(u=i[l],u.match(/(border|padding|margin)$/))for(c=0;4>c;c++)if(a=s[c],"border"===u)for(h=0;3>h;h++)f=o[h],n[u+a+f]=r[u+a+f];else n[u+a]=r[u+a];else n[u]=r[u];return n},cssWidth:function(e,t){if(0>=t)return 0;if(!b.layout.browser.boxModel)return t;var n=b.layout.borderWidth,r=b.layout.cssNum,n=t-n(e,"Left")-n(e,"Right")-r(e,"paddingLeft")-r(e,"paddingRight");return D(0,n)},cssHeight:function(e,t){if(0>=t)return 0;if(!b.layout.browser.boxModel)return t;var n=b.layout.borderWidth,r=b.layout.cssNum,n=t-n(e,"Top")-n(e,"Bottom")-r(e,"paddingTop")-r(e,"paddingBottom");return D(0,n)},cssNum:function(e,t,n){e.jquery||(e=b(e));var r=b.layout.showInvisibly(e),t=b.css(e[0],t,!0),n=n&&"auto"==t?t:parseInt(t,10)||0;return e.css(r),n},borderWidth:function(e,t){e.jquery&&(e=e[0]);var n="border"+t.substr(0,1).toUpperCase()+t.substr(1);return"none"===b.css(e,n+"Style",!0)?0:parseInt(b.css(e,n+"Width",!0),10)||0},isMouseOverElem:function(e,t){var n=b(t||this),r=n.offset(),i=r.top,r=r.left,s=r+n.outerWidth(),n=i+n.outerHeight(),o=e.pageX,u=e.pageY;return b.layout.browser.msie&&0>o&&0>u||o>=r&&o<=s&&u>=i&&u<=n},msg:function(e,t,n,r){b.isPlainObject(e)&&window.debugData?("string"==typeof t?(r=n,n=t):"object"==typeof n&&(r=n,n=null),n=n||"log( <object> )",r=b.extend({sort:!1,returnHTML:!1,display:!1},r),!0===t||r.display?debugData(e,n,r):window.console&&console.log(debugData(e,n,r))):t?alert(e):window.console?console.log(e):(t=b("#layoutLogger"),t.length||(t=b('<div id="layoutLogger" style="position: '+(b.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),t.css("left",b(window).width()-t.outerWidth()-5),b.ui.draggable&&t.draggable({handle:":first-child"})),t.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}},b.layout.defaults={name:"",containerSelector:"",containerClass:"ui-layout-container",scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1e3,resizer_drag:1e4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button \n\nInvalid ",containerMissing:"UI Layout Initialization Error\n\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\n\nThe center-pane element does not exist.\n\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\n\nThe layout-container \"CONTAINER\" has no height.\n\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\n\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:b.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,childOptions:null,initChildLayout:!0,destroyChildLayout:!0,resizeChildLayout:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}},b.layout.optionsMap={layout:"stateManagement effects zIndexes errors name zIndex scrollToBookmarkOnLoad showErrorMessages resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onunload".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing childOptions initChildLayout resizeChildLayout destroyChildLayout onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]},b.layout.transformData=function(e){var t={panes:{},center:{}},n,r,i,s,o,u,a;if("object"!=typeof e)return t;for(r in e){n=t,o=e[r],i=r.split("__"),a=i.length-1;for(u=0;u<=a;u++)s=i[u],u===a?n[s]=o:n[s]||(n[s]={}),n=n[s]}return t},b.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",resizeNestedLayout:"resizeChildLayout",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(e){function t(t,n){for(var r=t.split("."),i=r.length-1,s={branch:e,key:r[i]},o=0,u;o<i;o++)u=r[o],s.branch=void 0==s.branch[u]?n?s.branch[u]={}:{}:s.branch[u];return s}var n=b.layout.backwardCompatibility.map,r,i,s,o;for(o in n)r=t(o),s=r.branch[r.key],void 0!==s&&(i=t(n[o],!0),i.branch[i.key]=s,delete r.branch[r.key])},renameAllOptions:function(e){var t=b.layout.backwardCompatibility.renameOptions;return t(e),e.defaults&&("object"!=typeof e.panes&&(e.panes={}),b.extend(!0,e.panes,e.defaults),delete e.defaults),e.panes&&t(e.panes),b.each(b.layout.config.allPanes,function(n,r){e[r]&&t(e[r])}),e}},b.fn.layout=function(a){function c(e){if(!e)return!0;var n=e.keyCode;if(33>n)return!0;var r={38:"north",40:"south",37:"west",39:"east"},i=e.shiftKey,s=e.ctrlKey,u,a,f,l;return s&&37<=n&&40>=n&&p[r[n]].enableCursorHotkey?l=r[n]:(s||i)&&b.each(j.borderPanes,function(e,t){u=p[t],a=u.customHotkey,f=u.customHotkeyModifier;if(i&&"SHIFT"==f||s&&"CTRL"==f||s&&i)if(a&&n===(isNaN(a)||9>=a?a.toUpperCase().charCodeAt(0):a))return l=t,!1}),!l||!t[l]||!p[l].closable||o[l].isHidden?!0:(ka(l),e.stopPropagation(),e.returnValue=!1)}function d(e){if(E()){this&&this.tagName&&(e=this);var n;S(e)?n=t[e]:b(e).data("layoutRole")?n=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole"))return n=b(this),!1});if(n&&n.length){var r=n.data("layoutEdge"),e=o[r];e.cssSaved&&f(r);if(e.isSliding||e.isResizing||e.isClosed)e.cssSaved=!1;else{var i={zIndex:p.zIndexes.resizer_normal+1},s={},u=n.css("overflow"),a=n.css("overflowX"),l=n.css("overflowY");"visible"!=u&&(s.overflow=u,i.overflow="visible"),a&&!a.match(/(visible|auto)/)&&(s.overflowX=a,i.overflowX="visible"),l&&!l.match(/(visible|auto)/)&&(s.overflowY=a,i.overflowY="visible"),e.cssSaved=s,n.css(i),b.each(j.allPanes,function(e,t){t!=r&&f(t)})}}}}function f(e){if(E()){this&&this.tagName&&(e=this);var n;S(e)?n=t[e]:b(e).data("layoutRole")?n=b(e):b(e).parents().each(function(){if(b(this).data("layoutRole"))return n=b(this),!1});if(n&&n.length){var e=n.data("layoutEdge"),e=o[e],r=e.cssSaved||{};!e.isSliding&&!e.isResizing&&n.css("zIndex",p.zIndexes.pane_normal),n.css(r),e.cssSaved=!1}}}var h=b.layout.browser,j=b.layout.config,m=b.layout.cssWidth,r=b.layout.cssHeight,y=b.layout.getElementDimensions,T=b.layout.getElementCSS,I=b.layout.getEventObject,x=b.layout.parsePaneName,p=b.extend(!0,{},b.layout.defaults);p.effects=b.extend(!0,{},b.layout.effects);var o={id:"layout"+b.now(),initialized:!1,container:{},north:{},south:{},east:{},west:{},center:{}},M={north:null,south:null,east:null,west:null,center:null},F={data:{},set:function(e,t,n){F.clear(e),F.data[e]=setTimeout(t,n)},clear:function(e){var t=F.data;t[e]&&(clearTimeout(t[e]),delete t[e])}},U=function(e,t,n){var r=p;return(r.showErrorMessages&&!n||n&&r.showDebugMessages)&&b.layout.msg(r.name+" / "+e,!1!==t),!1},A=function(g,w,a){var z=w&&S(w),e=z?o[w]:o,i=z?p[w]:p,c=p.name,d=g+(g.match(/_/)?"":"_end"),k=d.match(/_end$/)?d.substr(0,d.length-4):"",l=i[d]||i[k],j="NC",f=[];!z&&"boolean"!==b.type(a)&&(a=w);if(l)try{S(l)&&(l.match(/,/)?(f=l.split(","),l=eval(f[0])):l=eval(l)),b.isFunction(l)&&(j=f.length?l(f[1]):z?l(w,t[w],e,i,c):l(s,e,i,c))}catch(h){U(p.errors.callbackError.replace(/EVENT/,b.trim(w+" "+d)),!1)}return!a&&!1!==j&&(z?(a=t[w],i=p[w],e=o[w],a.triggerHandler("layoutpane"+d,[w,a,e,i,c]),k&&a.triggerHandler("layoutpane"+k,[w,a,e,i,c])):(u.triggerHandler("layout"+d,[s,e,i,c]),k&&u.triggerHandler("layout"+k,[s,e,i,c]))),("onresize_end"===g||"onsizecontent_end"===g)&&Da(w),j},Ua=function(e){if(!h.mozilla){var n=t[e];"IFRAME"===o[e].tagName?n.css(j.hidden).css(j.visible):n.find("IFRAME").css(j.hidden).css(j.visible)}},ra=function(e){var n=t[e],e=j[e].dir,n={minWidth:1001-m(n,1e3),minHeight:1001-r(n,1e3)};return"horz"===e&&(n.minSize=n.minHeight),"vert"===e&&(n.minSize=n.minWidth),n},V=function(e,n,r){r||(r=j[e].dir),S(n)&&n.match(/%/)&&(n="100%"===n?-1:parseInt(n,10)/100);if(0===n)return 0;if(1<=n)return parseInt(n,10);var i=p,s=0;"horz"==r?s=q.innerHeight-(t.north?i.north.spacing_open:0)-(t.south?i.south.spacing_open:0):"vert"==r&&(s=q.innerWidth-(t.west?i.west.spacing_open:0)-(t.east?i.east.spacing_open:0));if(-1===n)return s;if(0<n)return qa(s*n);if("center"==e)return 0;var r="horz"===r?"height":"width",i=t[e],e="height"===r?L[e]:!1,s=b.layout.showInvisibly(i),o=i.css(r),u=e?e.css(r):0;return i.css(r,"auto"),e&&e.css(r,"auto"),n="height"===r?i.outerHeight():i.outerWidth(),i.css(r,o).css(s),e&&e.css(r,u),n},aa=function(e,n){var r=t[e],i=p[e],s=o[e],u=n?i.spacing_open:0,i=n?i.spacing_closed:0;return!r||s.isHidden?0:s.isClosed||s.isSliding&&n?i:"horz"===j[e].dir?r.outerHeight()+u:r.outerWidth()+u},P=function(e,n){if(E()){var r=p[e],i=o[e],s=j[e],u=s.dir;s.side.toLowerCase(),s.sizeType.toLowerCase();var s=void 0!=n?n:i.isSliding,a=r.spacing_open,f=j.oppositeEdge[e],l=o[f],c=t[f],h=!c||!1===l.isVisible||l.isSliding?0:"horz"==u?c.outerHeight():c.outerWidth(),f=(!c||l.isHidden?0:p[f][!1!==l.isClosed?"spacing_closed":"spacing_open"])||0,l="horz"==u?q.innerHeight:q.innerWidth,c=ra("center"),c="horz"==u?D(p.center.minHeight,c.minHeight):D(p.center.minWidth,c.minWidth),s=l-a-(s?0:V("center",c,u)+h+f),u=i.minSize=D(V(e,r.minSize),ra(e).minSize),s=i.maxSize=Ca(r.maxSize?V(e,r.maxSize):1e5,s),i=i.resizerPosition={},a=q.insetTop,h=q.insetLeft,f=q.innerWidth,l=q.innerHeight,r=r.spacing_open;switch(e){case"north":i.min=a+u,i.max=a+s;break;case"west":i.min=h+u,i.max=h+s;break;case"south":i.min=a+l-s-r,i.max=a+l-u-r;break;case"east":i.min=h+f-s-r,i.max=h+f-u-r}}},Ea=function(e,t){var n=b(e),r=n.data("layoutRole"),i=n.data("layoutEdge"),s=p[i][r+"Class"],i="-"+i,o=n.hasClass(s+"-closed")?"-closed":"-open",u="-closed"===o?"-open":"-closed",o=s+"-hover "+(s+i+"-hover ")+(s+o+"-hover ")+(s+i+o+"-hover ");return t&&(o+=s+u+"-hover "+(s+i+u+"-hover ")),"resizer"==r&&n.hasClass(s+"-sliding")&&(o+=s+"-sliding-hover "+(s+i+"-sliding-hover ")),b.trim(o)},Fa=function(e,t){var n=b(t||this);e&&"toggler"===n.data("layoutRole")&&e.stopPropagation(),n.addClass(Ea(n))},Q=function(e,t){var n=b(t||this);n.removeClass(Ea(n,!0))},Va=function(){b.fn.disableSelection&&b("body").disableSelection()},Wa=function(e,t){var n=t||this,r=b(n).data("layoutEdge"),i=r+"ResizerLeave";F.clear(r+"_openSlider"),F.clear(i),t?!o[r].isResizing&&b.fn.enableSelection&&b("body").enableSelection():F.set(i,function(){Wa(e,n)},200)},E=function(){return o.initialized||o.creatingLayout?!0:sa()},sa=function(e){var n=p;return u.is(":visible")?Xa("center").length?(o.creatingLayout=!0,b.extend(q,y(u)),x(void 0),b.each(j.allPanes,function(e,t){Ya(t,!0)}),Ga(),b.each(j.borderPanes,function(e,n){t[n]&&o[n].isVisible&&(P(n),W(n))}),X("center"),b.each(j.allPanes,function(e,n){var r=p[n];t[n]&&(o[n].isVisible&&(da(n),r.triggerEventsOnLoad?A("onresize_end",n):Da(n)),r.initChildLayout&&r.childOptions&&Ha(n))}),n.scrollToBookmarkOnLoad&&(e=self.location,e.hash&&e.replace(e.hash)),s.hasParentLayout?n.resizeWithWindow=!1:n.resizeWithWindow&&b(window).bind("resize."+H,ob),delete o.creatingLayout,o.initialized=!0,ja(s,b.layout.onReady),A("onload_end"),!0):U(n.errors.centerPaneMissing):(!e&&h.webkit&&"BODY"===u[0].tagName&&setTimeout(function(){sa(!0)},50),!1)},Ha=function(e,n){var r=x.call(this,e),i=t[r];if(i){var o=L[r],u=n||p[r].childOptions,i=u.containerSelector?i.find(u.containerSelector):o||i,a=(o=i.length)?M[r]=i.data("layout")||null:null;!a&&o&&u&&(a=M[r]=i.eq(0).layout(u)||null),a&&(a.hasParentLayout=!0)}s[r].child=M[r]},ob=function(){var e=Number(p.resizeWithWindowDelay);10>e&&(e=100),F.clear("winResize"),F.set("winResize",function(){F.clear("winResize"),F.clear("winResizeRepeater");var e=y(u);(e.innerWidth!==q.innerWidth||e.innerHeight!==q.innerHeight)&&ea()},e),F.data.winResizeRepeater||Za()},Za=function(){var e=Number(p.resizeWithWindowMaxDelay);0<e&&F.set("winResizeRepeater",function(){Za(),ea()},e)},$a=function(){A("onunload_start"),ja(s,b.layout.onUnload),A("onunload_end")},ab=function(e){e=e?e.split(","):j.borderPanes,b.each(e,function(e,t){var n=p[t];if(n.enableCursorHotkey||n.customHotkey)return b(document).bind("keydown."+H,c),!1})},Xa=function(e){e=p[e].paneSelector;if("#"===e.substr(0,1))return u.find(e).eq(0);var t=u.children(e).eq(0);return t.length?t:u.children("form:first").children(e).eq(0)},Ya=function(e,n){if(n||E()){var i=p[e],u=o[e],a=j[e],l=a.dir,c="center"===e,h={},v=t[e],g,y;v?Ia(e,!1,!0,!1):L[e]=!1,v=t[e]=Xa(e);if(v.length){v.data("layoutCSS")||v.data("layoutCSS",T(v,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border")),s[e]={name:e,pane:t[e],content:L[e],options:p[e],state:o[e],child:M[e]},v.data({parentLayout:s,layoutPane:s[e],layoutEdge:e,layoutRole:"pane"}).css(a.cssReq).css("zIndex",p.zIndexes.pane_normal).css(i.applyDemoStyles?a.cssDemo:{}).addClass(i.paneClass+" "+i.paneClass+"-"+e).bind("mouseenter."+H,Fa).bind("mouseleave."+H,Q),a={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildLayout:"",resizeChildLayout:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(y in a)v.bind("layoutpane"+y.toLowerCase()+"."+H,s[a[y]||y]);Ja(e,!1),c||(g=u.size=V(e,i.size),c=V(e,i.minSize)||1,y=V(e,i.maxSize)||1e5,0<g&&(g=D(Ca(g,y),c)),u.isClosed=!1,u.isSliding=!1,u.isResizing=!1,u.isHidden=!1,u.pins||(u.pins=[])),u.tagName=v[0].tagName,u.edge=e,u.noRoom=!1,u.isVisible=!0;switch(e){case"north":h.top=q.insetTop,h.left=q.insetLeft,h.right=q.insetRight;break;case"south":h.bottom=q.insetBottom,h.left=q.insetLeft,h.right=q.insetRight;break;case"west":h.left=q.insetLeft;break;case"east":h.right=q.insetRight}"horz"===l?h.height=r(v,g):"vert"===l&&(h.width=m(v,g)),v.css(h),"horz"!=l&&X(e,!0),i.initClosed&&i.closable&&!i.initHidden?Y(e,!0,!0):i.initHidden||i.initClosed?Ka(e):u.noRoom||v.css("display","block"),v.css("visibility","visible"),i.showOverflowOnHover&&v.hover(d,f),o.initialized&&(Ga(e),ab(e),ea(),u.isVisible&&(i.triggerEventsOnLoad?A("onresize_end",e):Da(e)),i.initChildLayout&&i.childOptions&&Ha(e))}else t[e]=!1}},Ga=function(e){e=e?e.split(","):j.borderPanes,b.each(e,function(e,n){var r=t[n];B[n]=!1,J[n]=!1;if(r){var i=p[n],r=o[n],a=j[n],f="#"===i.paneSelector.substr(0,1)?i.paneSelector.substr(1):"",l=i.resizerClass,c=i.togglerClass;a.side.toLowerCase();var a="-"+n,h=s[n],d=h.resizer=B[n]=b("<div></div>"),h=h.toggler=i.closable?J[n]=b("<div></div>"):!1;!r.isVisible&&i.slidable&&d.attr("title",i.tips.Slide).css("cursor",i.sliderCursor),d.attr("id",f?f+"-resizer":"").data({parentLayout:s,layoutPane:s[n],layoutEdge:n,layoutRole:"resizer"}).css(j.resizers.cssReq).css("zIndex",p.zIndexes.resizer_normal).css(i.applyDemoStyles?j.resizers.cssDemo:{}).addClass(l+" "+l+a).hover(Fa,Q).hover(Va,Wa).appendTo(u),h&&(h.attr("id",f?f+"-toggler":"").data({parentLayout:s,layoutPane:s[n],layoutEdge:n,layoutRole:"toggler"}).css(j.togglers.cssReq).css(i.applyDemoStyles?j.togglers.cssDemo:{}).addClass(c+" "+c+a).hover(Fa,Q).bind("mouseenter",Va).appendTo(d),i.togglerContent_open&&b("<span>"+i.togglerContent_open+"</span>").data({layoutEdge:n,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",n).addClass("content content-open").css("display","none").appendTo(h),i.togglerContent_closed&&b("<span>"+i.togglerContent_closed+"</span>").data({layoutEdge:n,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(h),bb(n));var i=n,v=b.layout.plugins.draggable,i=i?i.split(","):j.borderPanes;b.each(i,function(e,n){var r=p[n];if(!v||!t[n]||!r.resizable)return r.resizable=!1,!0;var i=o[n],s=p.zIndexes,a=j[n],f=a.dir=="horz"?"top":"left",l=n+",center,"+j.oppositeEdge[n]+(a.dir=="horz"?",west,east":""),c=B[n],h=r.resizerClass,d=0,g,y,w=h+"-drag",E=h+"-"+n+"-drag",S=h+"-dragging",x=h+"-"+n+"-dragging",T=h+"-dragging-limit",N=h+"-"+n+"-dragging-limit",C=!1;i.isClosed||c.attr("title",r.tips.Resize).css("cursor",r.resizerCursor),c.draggable({containment:u[0],axis:a.dir=="horz"?"y":"x",delay:0,distance:1,grid:r.resizingGrid,helper:"clone",opacity:r.resizerDragOpacity,addClasses:!1,zIndex:s.resizer_drag,start:function(e,t){r=p[n],i=o[n],y=r.livePaneResizing;if(!1===A("ondrag_start",n))return!1;i.isResizing=!0,F.clear(n+"_closeSlider"),P(n),g=i.resizerPosition,d=t.position[f],c.addClass(w+" "+E),C=!1,b("body").disableSelection(),ma(l)},drag:function(e,o){C||(o.helper.addClass(S+" "+x).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),C=!0,i.isSliding&&t[n].css("zIndex",s.pane_sliding));var u=0;o.position[f]<g.min?(o.position[f]=g.min,u=-1):o.position[f]>g.max&&(o.position[f]=g.max,u=1),u?(o.helper.addClass(T+" "+N),window.defaultStatus=u>0&&n.match(/(north|west)/)||u<0&&n.match(/(south|east)/)?r.tips.maxSizeWarning:r.tips.minSizeWarning):(o.helper.removeClass(T+" "+N),window.defaultStatus=""),y&&Math.abs(o.position[f]-d)>=r.liveResizingTolerance&&(d=o.position[f],m(e,o,n))},stop:function(e,t){b("body").enableSelection(),window.defaultStatus="",c.removeClass(w+" "+E),i.isResizing=!1,m(e,t,n,!0,l)}})});var m=function(e,t,n,r,i){var s=t.position,u=j[n],e=p[n],t=o[n],a;switch(n){case"north":a=s.top;break;case"west":a=s.left;break;case"south":a=q.offsetHeight-s.top-e.spacing_open;break;case"east":a=q.offsetWidth-s.left-e.spacing_open}a-=q["inset"+u.side],r?(!1!==A("ondrag_end",n)&&ta(n,a,!1,!0),ua(),t.isSliding&&i&&ma(i,!0)):Math.abs(a-t.size)<e.liveResizingTolerance||(ta(n,a,!1,!0),ba.each(cb))};r.isVisible?La(n):(Ma(n),ca(n,!0))}}),fa()},Ja=function(e,n){if(E()){var r=p[e],i=r.contentSelector,u=s[e],a=t[e],f;i&&(f=u.content=L[e]=r.findNestedContent?a.find(i).eq(0):a.children(i).eq(0)),f&&f.length?(f.data("layoutRole","content"),f.data("layoutCSS")||f.data("layoutCSS",T(f,"height")),f.css(j.content.cssReq),r.applyDemoStyles&&(f.css(j.content.cssDemo),a.css(j.content.cssDemoPane)),o[e].content={},!1!==n&&da(e)):u.content=L[e]=!1}},cb=function(){var e=b(this),t=e.data("layoutMask"),t=o[t];"IFRAME"==t.tagName&&t.isVisible&&e.css({top:t.offsetTop,left:t.offsetLeft,width:t.outerWidth,height:t.outerHeight})},ma=function(e,n){var r=e?e.split(","):b.layout.config.allPanes,i=p.zIndexes,s,a;b.each(r,function(e,r){a=o[r],s=p[r];if(a.isVisible&&(!n&&s.maskContents||s.maskObjects)){for(var l=b([]),h,d=0,v=ba.length;d<v;d++)h=ba.eq(d),h.data("layoutMask")===r&&(l=l.add(h));if(!l.length){l=t[r],h=o[r];var d=p[r],v=p.zIndexes,m=b([]),g,y,w,E,S;if(d.maskContents||d.maskObjects)for(S=0;S<(d.maskObjects?2:1);S++)g=d.maskObjects&&0==S,y=document.createElement(g?"iframe":"div"),w=b(y).data("layoutMask",r),y.className="ui-layout-mask ui-layout-mask-"+r,E=y.style,E.display="block",E.position="absolute",g&&(y.frameborder=0,y.src="about:blank",E.opacity=0,E.filter="Alpha(Opacity='0')",E.border=0),"IFRAME"==h.tagName?(E.zIndex=v.pane_normal+1,u.append(y)):(w.addClass("ui-layout-mask-inside-pane"),E.zIndex=d.maskZindex||v.content_mask,E.top=0,E.left=0,E.width="100%",E.height="100%",l.append(y)),m=m.add(y),ba=ba.add(y);l=m}l.each(function(){cb.call(this),this.style.zIndex=a.isSliding?i.pane_sliding+1:i.pane_normal+1,this.style.display="block"})}})},ua=function(){var e;b.each(b.layout.config.borderPanes,function(t,n){if(o[n].isResizing)return e=!0,!1}),e||ba.hide()},Ia=function(e,n,r,i){if(E()){var e=x.call(this,e),o=t[e],u=L[e],a=B[e],f=J[e];o&&b.isEmptyObject(o.data())&&(o=!1),u&&b.isEmptyObject(u.data())&&(u=!1),a&&b.isEmptyObject(a.data())&&(a=!1),f&&b.isEmptyObject(f.data())&&(f=!1),o&&o.stop(!0,!0);var l=p[e],c=M[e]||(o?o.data("layout"):0)||(u?u.data("layout"):0)||null;(void 0!==i?i:l.destroyChildLayout)&&c&&!c.destroyed&&(c.destroy(!0),c.destroyed&&(c=null)),o&&n&&!c?o.remove():o&&o[0]&&(n=l.paneClass,i=n+"-"+e,n=[n,n+"-open",n+"-closed",n+"-sliding",i,i+"-open",i+"-closed",i+"-sliding"],b.merge(n,Ea(o,!0)),o.removeClass(n.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+H),u&&u.data("layout")?(u.width(u.width()),c.resizeAll()):u&&u.css(u.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),o.data("layout")||o.css(o.data("layoutCSS")).removeData("layoutCSS")),f&&f.remove(),a&&a.remove(),s[e]=t[e]=L[e]=B[e]=J[e]=M[e]=!1,r||ea()}},va=function(e){var n=t[e],r=n[0].style;p[e].useOffscreenClose?(n.data(j.offscreenReset)||n.data(j.offscreenReset,{left:r.left,right:r.right}),n.css(j.offscreenCSS)):n.hide().removeData(j.offscreenReset)},db=function(e){var n=t[e],e=p[e],r=j.offscreenCSS,i=n.data(j.offscreenReset),s=n[0].style;n.show().removeData(j.offscreenReset),e.useOffscreenClose&&i&&(s.left==r.left&&(s.left=i.left),s.right==r.right)&&(s.right=i.right)},Ka=function(e,n){if(E()){var r=x.call(this,e),i=p[r],s=o[r],u=B[r];t[r]&&!s.isHidden&&(!o.initialized||!1!==A("onhide_start",r))&&(s.isSliding=!1,u&&u.hide(),!o.initialized||s.isClosed?(s.isClosed=!0,s.isHidden=!0,s.isVisible=!1,o.initialized||va(r),X("horz"===j[r].dir?"":"center"),(o.initialized||i.triggerEventsOnLoad)&&A("onhide_end",r)):(s.isHiding=!0,Y(r,!1,n)))}},wa=function(e,n,r,i){if(E()){var e=x.call(this,e),s=o[e];t[e]&&s.isHidden&&!1!==A("onshow_start",e)&&(s.isSliding=!1,s.isShowing=!0,!1===n?Y(e,!0):ga(e,!1,r,i))}},ka=function(e,t){if(E()){var n=I(e),r=x.call(this,e),i=o[r];n&&n.stopImmediatePropagation(),i.isHidden?wa(r):i.isClosed?ga(r,!!t):Y(r)}},Y=function(e,n,r,i){function s(){c.isMoving=!1,ca(a,!0);var e=j.oppositeEdge[a];o[e].noRoom&&(P(e),W(e)),ua(),!i&&(o.initialized||l.triggerEventsOnLoad)&&(v||A("onclose_end",a),v&&A("onshow_end",a),m&&A("onhide_end",a))}var a=x.call(this,e);if(!o.initialized&&t[a])e=o[a],va(a),e.isClosed=!0,e.isVisible=!1;else if(E()){var f=t[a],l=p[a],c=o[a],h=j[a],d,v,m;u.queue(function(e){if(!f||!l.closable&&!c.isShowing&&!c.isHiding||!n&&c.isClosed&&!c.isShowing)return e();var t=!c.isShowing&&!1===A("onclose_start",a);v=c.isShowing,m=c.isHiding,delete c.isShowing,delete c.isHiding;if(t)return e();d=!r&&!c.isClosed&&"none"!=l.fxName_close,c.isMoving=!0,c.isClosed=!0,c.isVisible=!1,m?c.isHidden=!0:v&&(c.isHidden=!1),c.isSliding?na(a,!1):X("horz"===j[a].dir?"":"center",!1),Ma(a),d?(ma("center"+("horz"==h.dir?",west,east":""),!0),xa(a,!0),f.hide(l.fxName_close,l.fxSettings_close,l.fxSpeed_close,function(){xa(a,!1),c.isClosed&&s(),e()})):(va(a),s(),e())})}},Ma=function(e){var t=B[e],n=J[e],r=p[e],i=j[e].side.toLowerCase(),s=r.resizerClass,u=r.togglerClass,a="-"+e;t.css(i,q["inset"+j[e].side]).removeClass(s+"-open "+s+a+"-open").removeClass(s+"-sliding "+s+a+"-sliding").addClass(s+"-closed "+s+a+"-closed").unbind("dblclick."+H),r.resizable&&b.layout.plugins.draggable&&t.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",""),n&&(n.removeClass(u+"-open "+u+a+"-open").addClass(u+"-closed "+u+a+"-closed").attr("title",r.tips.Open),n.children(".content-open").hide(),n.children(".content-closed").css("display","block")),Na(e,!1),o.initialized&&fa()},ga=function(e,n,r,i){function s(){c.isMoving=!1,Ua(a),c.isSliding||(ua(),X("vert"==j[a].dir?"center":"",!1)),La(a)}if(E()){var a=x.call(this,e),f=t[a],l=p[a],c=o[a],h=j[a],d,v;u.queue(function(e){if(!f||!l.resizable&&!l.closable&&!c.isShowing||c.isVisible&&!c.isSliding)return e();if(c.isHidden&&!c.isShowing)e(),wa(a,!0);else{l.autoResize&&c.size!=l.size?Z(a,l.size,!0,!0,!0):P(a,n);var t=A("onopen_start",a);if("abort"===t)return e();"NC"!==t&&P(a,n);if(c.minSize>c.maxSize)return Na(a,!1),!i&&l.tips.noRoomToOpen&&alert(l.tips.noRoomToOpen),e();n?na(a,!0):c.isSliding?na(a,!1):l.slidable&&ca(a,!1),c.noRoom=!1,W(a),v=c.isShowing,delete c.isShowing,d=!r&&c.isClosed&&"none"!=l.fxName_open,c.isMoving=!0,c.isVisible=!0,c.isClosed=!1,v&&(c.isHidden=!1),d?(t="center"+("horz"==h.dir?",west,east":""),c.isSliding&&(t+=","+j.oppositeEdge[a]),ma(t,!0),xa(a,!0),f.show(l.fxName_open,l.fxSettings_open,l.fxSpeed_open,function(){xa(a,!1),c.isVisible&&s(),e()})):(db(a),s(),e())}})}},La=function(e,n){var r=t[e],i=B[e],s=J[e],u=p[e],a=o[e],f=j[e].side.toLowerCase(),l=u.resizerClass,c=u.togglerClass,h="-"+e;i.css(f,q["inset"+j[e].side]+aa(e)).removeClass(l+"-closed "+l+h+"-closed").addClass(l+"-open "+l+h+"-open"),a.isSliding?i.addClass(l+"-sliding "+l+h+"-sliding"):i.removeClass(l+"-sliding "+l+h+"-sliding"),u.resizerDblClickToggle&&i.bind("dblclick",ka),Q(0,i),u.resizable&&b.layout.plugins.draggable?i.draggable("enable").css("cursor",u.resizerCursor).attr("title",u.tips.Resize):a.isSliding||i.css("cursor","default"),s&&(s.removeClass(c+"-closed "+c+h+"-closed").addClass(c+"-open "+c+h+"-open").attr("title",u.tips.Close),Q(0,s),s.children(".content-closed").hide(),s.children(".content-open").css("display","block")),Na(e,!a.isSliding),b.extend(a,y(r)),o.initialized&&(fa(),da(e,!0)),!n&&(o.initialized||u.triggerEventsOnLoad)&&r.is(":visible")&&(A("onopen_end",e),a.isShowing&&A("onshow_end",e),o.initialized&&A("onresize_end",e))},eb=function(e){function t(){i.isClosed?i.isMoving||ga(r,!0):na(r,!0)}if(E()){var n=I(e),r=x.call(this,e),i=o[r],e=p[r].slideDelay_open;n&&n.stopImmediatePropagation(),i.isClosed&&n&&"mouseenter"===n.type&&0<e?F.set(r+"_openSlider",t,e):t()}},Oa=function(e){function n(){s.isClosed?na(i,!1):s.isMoving||Y(i)}if(E()){var r=I(e),i=x.call(this,e),e=p[i],s=o[i],u=s.isMoving?1e3:300;!s.isClosed&&!s.isResizing&&("click"===e.slideTrigger_close?n():e.preventQuickSlideClose&&s.isMoving||e.preventPrematureSlideClose&&r&&b.layout.isMouseOverElem(r,t[i])||(r?F.set(i+"_closeSlider",n,D(e.slideDelay_close,u)):n()))}},xa=function(e,n){var r=t[e],i=o[e],s=p[e],u=p.zIndexes;n?(r.css({zIndex:u.pane_animate}),"south"==e?r.css({top:q.insetTop+q.innerHeight-r.outerHeight()}):"east"==e&&r.css({left:q.insetLeft+q.innerWidth-r.outerWidth()})):(r.css({zIndex:i.isSliding?u.pane_sliding:u.pane_normal}),"south"==e?r.css({top:"auto"}):"east"==e&&!r.css("left").match(/\-99999/)&&r.css({left:"auto"}),h.msie&&s.fxOpacityFix&&"slide"!=s.fxName_open&&r.css("filter")&&1==r.css("opacity")&&r[0].style.removeAttribute("filter"))},ca=function(e,t){var n=p[e],r=B[e],i=n.slideTrigger_open.toLowerCase();r&&(!t||n.slidable)&&(i.match(/mouseover/)?i=n.slideTrigger_open="mouseenter":i.match(/(click|dblclick|mouseenter)/)||(i=n.slideTrigger_open="click"),r[t?"bind":"unbind"](i+"."+H,eb).css("cursor",t?n.sliderCursor:"default").attr("title",t?n.tips.Slide:""))},na=function(e,n){function r(t){F.clear(e+"_closeSlider"),t.stopPropagation()}var i=p[e],s=o[e],u=p.zIndexes,a=i.slideTrigger_close.toLowerCase(),f=n?"bind":"unbind",l=t[e],c=B[e];s.isSliding=n,F.clear(e+"_closeSlider"),n&&ca(e,!1),l.css("zIndex",n?u.pane_sliding:u.pane_normal),c.css("zIndex",n?u.pane_sliding+2:u.resizer_normal),a.match(/(click|mouseleave)/)||(a=i.slideTrigger_close="mouseleave"),c[f](a,Oa),"mouseleave"===a&&(l[f]("mouseleave."+H,Oa),c[f]("mouseenter."+H,r),l[f]("mouseenter."+H,r)),n?"click"===a&&!i.resizable&&(c.css("cursor",n?i.sliderCursor:"default"),c.attr("title",n?i.tips.Close:"")):F.clear(e+"_closeSlider")},W=function(e,n,r,i){var n=p[e],s=o[e],u=j[e],a=t[e],f=B[e],l="vert"===u.dir,c=!1;if("center"===e||l&&s.noVerticalRoom)(c=0<=s.maxHeight)&&s.noRoom?(db(e),f&&f.show(),s.isVisible=!0,s.noRoom=!1,l&&(s.noVerticalRoom=!1),Ua(e)):!c&&!s.noRoom&&(va(e),f&&f.hide(),s.isVisible=!1,s.noRoom=!0);if("center"!==e)if(s.minSize<=s.maxSize){if(s.size>s.maxSize?Z(e,s.maxSize,r,i,!0):s.size<s.minSize?Z(e,s.minSize,r,i,!0):f&&s.isVisible&&a.is(":visible")&&(r=u.side.toLowerCase(),i=s.size+q["inset"+u.side],b.layout.cssNum(f,r)!=i&&f.css(r,i)),s.noRoom)s.wasOpen&&n.closable?n.autoReopen?ga(e,!1,!0,!0):s.noRoom=!1:wa(e,s.wasOpen,!0,!0)}else s.noRoom||(s.noRoom=!0,s.wasOpen=!s.isClosed&&!s.isSliding,s.isClosed||(n.closable?Y(e,!0,!0):Ka(e,!0)))},ta=function(e,t,n,r){if(E()){var e=x.call(this,e),i=p[e],s=o[e],s=i.livePaneResizing&&!s.isResizing;i.autoResize=!1,Z(e,t,n,s,r)}},Z=function(e,n,i,s,a){function f(){for(var e="width"===w?d.outerWidth():d.outerHeight(),e=[{pane:l,count:1,target:n,actual:e,correct:n===e,attempt:n,cssSize:k}],u=e[0],a={},f="Inaccurate size after resizing the "+l+"-pane.";!u.correct;){a={pane:l,count:u.count+1,target:n},a.attempt=u.actual>n?D(0,u.attempt-(u.actual-n)):D(0,u.attempt+(n-u.actual)),a.cssSize=("horz"==j[l].dir?r:m)(t[l],a.attempt),d.css(w,a.cssSize),a.actual="width"==w?d.outerWidth():d.outerHeight(),a.correct=n===a.actual,1===e.length&&(U(f,!1,!0),U(u,!1,!0)),U(a,!1,!0);if(3<e.length)break;e.push(a),u=e[e.length-1]}h.size=n,b.extend(h,y(d)),h.isVisible&&d.is(":visible")&&(v&&v.css(g,n+q[S]),da(l)),!i&&!T&&o.initialized&&h.isVisible&&A("onresize_end",l),i||(h.isSliding||X("horz"==j[l].dir?"":"center",T,s),fa()),u=j.oppositeEdge[l],n<C&&o[u].noRoom&&(P(u),W(u,!1,i)),1<e.length&&U(f+"\nSee the Error Console for details.",!0,!0)}if(E()){var l=x.call(this,e),c=p[l],h=o[l],d=t[l],v=B[l],g=j[l].side.toLowerCase(),w=j[l].sizeType.toLowerCase(),S="inset"+j[l].side,T=h.isResizing&&!c.triggerEventsDuringLiveResize,N=!0!==a&&c.animatePaneSizing,C,k;u.queue(function(e){P(l),C=h.size,n=V(l,n),n=D(n,V(l,c.minSize)),n=Ca(n,h.maxSize);if(n<h.minSize)e(),W(l,!1,i);else{if(!s&&n===C)return e();!i&&o.initialized&&h.isVisible&&A("onresize_start",l),k=("horz"==j[l].dir?r:m)(t[l],n);if(N&&d.is(":visible")){var u=b.layout.effects.size[l]||b.layout.effects.size.all,u=c.fxSettings_size.easing||u.easing,a=p.zIndexes,v={};v[w]=k+"px",h.isMoving=!0,d.css({zIndex:a.pane_animate}).show().animate(v,c.fxSpeed_size,u,function(){d.css({zIndex:h.isSliding?a.pane_sliding:a.pane_normal}),h.isMoving=!1,f(),e()})}else d.css(w,k),d.is(":visible")?f():(h.size=n,b.extend(h,y(d))),e()}})}},X=function(e,n,i){e=(e?e:"east,west,center").split(","),b.each(e,function(e,s){if(t[s]){var u=p[s],a=o[s],f=t[s],l=!0,v={},l={top:aa("north",!0),bottom:aa("south",!0),left:aa("west",!0),right:aa("east",!0),width:0,height:0};l.width=q.innerWidth-l.left-l.right,l.height=q.innerHeight-l.bottom-l.top,l.top+=q.insetTop,l.bottom+=q.insetBottom,l.left+=q.insetLeft,l.right+=q.insetRight,b.extend(a,y(f));if("center"===s){if(!i&&a.isVisible&&l.width===a.outerWidth&&l.height===a.outerHeight)return!0;b.extend(a,ra(s),{maxWidth:l.width,maxHeight:l.height}),v=l,v.width=m(f,v.width),v.height=r(f,v.height),l=0<=v.width&&0<=v.height;if(!o.initialized&&u.minWidth>a.outerWidth){var u=u.minWidth-a.outerWidth,g=p.east.minSize||0,w=p.west.minSize||0,E=o.east.size,S=o.west.size,x=E,T=S;0<u&&o.east.isVisible&&E>g&&(x=D(E-g,E-u),u-=E-x),0<u&&o.west.isVisible&&S>w&&(T=D(S-w,S-u),u-=S-T);if(0===u){E&&E!=g&&Z("east",x,!0,i,!0),S&&S!=w&&Z("west",T,!0,i,!0),X("center",n,i);return}}}else{a.isVisible&&!a.noVerticalRoom&&b.extend(a,y(f),ra(s));if(!i&&!a.noVerticalRoom&&l.height===a.outerHeight)return!0;v.top=l.top,v.bottom=l.bottom,v.height=r(f,l.height),a.maxHeight=v.height,l=0<=a.maxHeight,l||(a.noVerticalRoom=!0)}l?(!n&&o.initialized&&A("onresize_start",s),f.css(v),"center"!==s&&fa(s),a.noRoom&&!a.isClosed&&!a.isHidden&&W(s),a.isVisible&&(b.extend(a,y(f)),o.initialized&&da(s))):!a.noRoom&&a.isVisible&&W(s);if(!a.isVisible)return!0;"center"===s&&(a=h.isIE6||!h.boxModel,t.north&&(a||"IFRAME"==o.north.tagName)&&t.north.css("width",m(t.north,q.innerWidth)),t.south&&(a||"IFRAME"==o.south.tagName)&&t.south.css("width",m(t.south,q.innerWidth))),!n&&o.initialized&&A("onresize_end",s)}})},ea=function(e){x(e);if(o.initialized){if(u.is(":visible")&&(b.extend(o.container,y(u)),q.outerHeight)){if(!1===A("onresizeall_start"))return!1;var n,r,i;b.each(["south","north","east","west"],function(e,n){t[n]&&(i=o[n],r=p[n],r.autoResize&&i.size!=r.size?Z(n,r.size,!0,!0,!0):(P(n),W(n,!1,!0,!0)))}),X("",!0,!0),fa(),r=p,b.each(j.allPanes,function(e,r){(n=t[r])&&o[r].isVisible&&A("onresize_end",r)}),A("onresizeall_end")}}else sa()},Da=function(e){e=x.call(this,e);if(p[e].resizeChildLayout){var n=t[e],r=L[e],i=s[e],o=M[e];i.child&&!o&&(o=i.child.container,o=M[e]=(o?o.data("layout"):0)||null),o&&o.destroyed&&(o=M[e]=null),o||(o=M[e]=n.data("layout")||(r?r.data("layout"):0)||null),i.child=M[e],o&&o.resizeAll()}},da=function(e,n){if(E()){var i=x.call(this,e),i=i?i.split(","):j.allPanes;b.each(i,function(e,i){function s(e){return D(d.css.paddingBottom,parseInt(e.css("marginBottom"),10)||0)}function u(){var e=p[i].contentIgnoreSelector,e=f.nextAll().not(e||":lt(0)"),t=e.filter(":visible"),n=t.filter(":last");v={top:f[0].offsetTop,height:f.outerHeight(),numFooters:e.length,hiddenFooters:e.length-t.length,spaceBelow:0},v.spaceAbove=v.top,v.bottom=v.top+v.height,v.spaceBelow=n.length?n[0].offsetTop+n.outerHeight()-v.bottom+s(n):s(f)}var a=t[i],f=L[i],l=p[i],d=o[i],v=d.content;if(!a||!f||!a.is(":visible"))return!0;if(!f.length&&(Ja(i,!1),!f))return;if(!1!==A("onsizecontent_start",i)){if(!d.isMoving&&!d.isResizing||l.liveContentResizing||n||void 0==v.top)u(),0<v.hiddenFooters&&"hidden"===a.css("overflow")&&(a.css("overflow","visible"),u(),a.css("overflow","hidden"));a=d.innerHeight-(v.spaceAbove-d.css.paddingTop)-(v.spaceBelow-d.css.paddingBottom);if(!f.is(":visible")||v.height!=a){var m=f,l=m;S(m)?l=t[m]:m.jquery||(l=b(m)),m=r(l,a),l.css({height:m,visibility:"visible"}),0<m&&0<l.innerWidth()?l.data("autoHidden")&&(l.show().data("autoHidden",!1),h.mozilla||l.css(j.hidden).css(j.visible)):!l.data("autoHidden")&&l.hide().data("autoHidden",!0),v.height=a}o.initialized&&A("onsizecontent_end",i)}})}},fa=function(e){e=(e=x.call(this,e))?e.split(","):j.borderPanes,b.each(e,function(e,n){var i=p[n],s=o[n],u=t[n],a=B[n],f=J[n],l;if(u&&a){var c=j[n].dir,h=s.isClosed?"_closed":"_open",d=i["spacing"+h],v=i["togglerAlign"+h],h=i["togglerLength"+h],g;if(0===d)a.hide();else{!s.noRoom&&!s.isHidden&&a.show(),"horz"===c?(g=q.innerWidth,s.resizerLength=g,u=b.layout.cssNum(u,"left"),a.css({width:m(a,g),height:r(a,d),left:-9999<u?u:q.insetLeft})):(g=u.outerHeight(),s.resizerLength=g,a.css({height:r(a,g),width:m(a,d),top:q.insetTop+aa("north",!0)})),Q(i,a);if(f){if(0===h||s.isSliding&&i.hideTogglerOnSlide){f.hide();return}f.show();if(!(0<h)||"100%"===h||h>g)h=g,v=0;else if(S(v))switch(v){case"top":case"left":v=0;break;case"bottom":case"right":v=g-h;break;default:v=qa((g-h)/2)}else u=parseInt(v,10),v=0<=v?u:g-h+u;if("horz"===c){var y=m(f,h);f.css({width:y,height:r(f,d),left:v,top:0}),f.children(".content").each(function(){l=b(this),l.css("marginLeft",qa((y-l.outerWidth())/2))})}else{var w=r(f,h);f.css({height:w,width:m(f,d),top:v,left:0}),f.children(".content").each(function(){l=b(this),l.css("marginTop",qa((w-l.outerHeight())/2))})}Q(0,f)}!o.initialized&&(i.initHidden||s.noRoom)&&(a.hide(),f&&f.hide())}}})},bb=function(e){if(E()){var t=x.call(this,e),e=J[t],n=p[t];e&&(n.closable=!0,e.bind("click."+H,function(e){e.stopPropagation(),ka(t)}).css("visibility","visible").css("cursor","pointer").attr("title",o[t].isClosed?n.tips.Open:n.tips.Close).show())}},Na=function(e,t){b.layout.plugins.buttons&&b.each(o[e].pins,function(n,r){b.layout.buttons.setPinState(s,b(r),e,t)})},u=b(this).eq(0);if(!u.length)return U(p.errors.containerMissing);if(u.data("layoutContainer")&&u.data("layout"))return u.data("layout");var t={},L={},B={},J={},ba=b([]),q=o.container,H=o.id,s={options:p,state:o,container:u,panes:t,contents:L,resizers:B,togglers:J,hide:Ka,show:wa,toggle:ka,open:ga,close:Y,slideOpen:eb,slideClose:Oa,slideToggle:function(e){e=x.call(this,e),ka(e,!0)},setSizeLimits:P,_sizePane:Z,sizePane:ta,sizeContent:da,swapPanes:function(e,n){function r(e){var n=t[e],r=L[e];return n?{pane:e,P:n?n[0]:!1,C:r?r[0]:!1,state:b.extend(!0,{},o[e]),options:b.extend(!0,{},p[e])}:!1}function i(e,n){if(e){var r=e.P,i=e.C,u=e.pane,a=j[n],f=a.side.toLowerCase(),c="inset"+a.side,h=b.extend(!0,{},o[n]),d=p[n],v={resizerCursor:d.resizerCursor};b.each(["fxName","fxSpeed","fxSettings"],function(e,t){v[t+"_open"]=d[t+"_open"],v[t+"_close"]=d[t+"_close"],v[t+"_size"]=d[t+"_size"]}),t[n]=b(r).data({layoutPane:s[n],layoutEdge:n}).css(j.hidden).css(a.cssReq),L[n]=i?b(i):!1,p[n]=b.extend(!0,{},e.options,v),o[n]=b.extend(!0,{},e.state),r.className=r.className.replace(RegExp(d.paneClass+"-"+u,"g"),d.paneClass+"-"+n),Ga(n),a.dir!=j[u].dir?(r=l[n]||0,P(n),r=D(r,o[n].minSize),ta(n,r,!0,!0)):B[n].css(f,q[c]+(o[n].isVisible?aa(n):0)),e.state.isVisible&&!h.isVisible?La(n,!0):(Ma(n),ca(n,!0)),e=null}}if(E()){var u=x.call(this,e);o[u].edge=n,o[n].edge=u;if(!1===A("onswap_start",u)||!1===A("onswap_start",n))o[u].edge=u,o[n].edge=n;else{var a=r(u),f=r(n),l={};l[u]=a?a.state.size:0,l[n]=f?f.state.size:0,t[u]=!1,t[n]=!1,o[u]={},o[n]={},J[u]&&J[u].remove(),J[n]&&J[n].remove(),B[u]&&B[u].remove(),B[n]&&B[n].remove(),B[u]=B[n]=J[u]=J[n]=!1,i(a,n),i(f,u),a=f=l=null,t[u]&&t[u].css(j.visible),t[n]&&t[n].css(j.visible),ea(),A("onswap_end",u),A("onswap_end",n)}}},showMasks:ma,hideMasks:ua,initContent:Ja,addPane:Ya,removePane:Ia,createChildLayout:Ha,enableClosable:bb,disableClosable:function(e,t){if(E()){var n=x.call(this,e),r=J[n];r&&(p[n].closable=!1,o[n].isClosed&&ga(n,!1,!0),r.unbind("."+H).css("visibility",t?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(e){if(E()){var e=x.call(this,e),t=B[e];t&&t.data("draggable")&&(p[e].slidable=!0,o[e].isClosed&&ca(e,!0))}},disableSlidable:function(e){if(E()){var e=x.call(this,e),t=B[e];t&&(p[e].slidable=!1,o[e].isSliding?Y(e,!1,!0):(ca(e,!1),t.css("cursor","default").attr("title",""),Q(null,t[0])))}},enableResizable:function(e){if(E()){var e=x.call(this,e),t=B[e],n=p[e];t&&t.data("draggable")&&(n.resizable=!0,t.draggable("enable"),o[e].isClosed||t.css("cursor",n.resizerCursor).attr("title",n.tips.Resize))}},disableResizable:function(e){if(E()){var e=x.call(this,e),t=B[e];t&&t.data("draggable")&&(p[e].resizable=!1,t.draggable("disable").css("cursor","default").attr("title",""),Q(null,t[0]))}},allowOverflow:d,resetOverflow:f,destroy:function(e,t){b(window).unbind("."+H),b(document).unbind("."+H),"object"==typeof e?x(e):t=e,u.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(p.containerClass).unbind("."+H),ba.remove(),b.each(j.allPanes,function(e,n){Ia(n,!1,!0,t)}),u.data("layoutCSS")&&!u.data("layoutRole")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),"BODY"===q.tagName&&(u=b("html")).data("layoutCSS")&&u.css(u.data("layoutCSS")).removeData("layoutCSS"),ja(s,b.layout.onDestroy),$a();for(n in s)n.match(/^(container|options)$/)||delete s[n];return s.destroyed=!0,s},initPanes:E,resizeAll:ea,runCallbacks:A,hasParentLayout:!1,children:M,north:!1,south:!1,west:!1,east:!1,center:!1},Pa,N,Qa,G,ya,$,ha,O,a=b.layout.transformData(a),a=b.layout.backwardCompatibility.renameAllOptions(a);if(!b.isEmptyObject(a.panes)){N=b.layout.optionsMap.noDefault,$=0;for(ha=N.length;$<ha;$++)G=N[$],delete a.panes[G];N=b.layout.optionsMap.layout,$=0;for(ha=N.length;$<ha;$++)G=N[$],delete a.panes[G]}N=b.layout.optionsMap.layout;var pb=b.layout.config.optionRootKeys;for(G in a)ya=a[G],0>b.inArray(G,pb)&&0>b.inArray(G,N)&&(a.panes[G]||(a.panes[G]=b.isPlainObject(ya)?b.extend(!0,{},ya):ya),delete a[G]);b.extend(!0,p,a),b.each(j.allPanes,function(e,t){j[t]=b.extend(!0,{},j.panes,j[t]),Qa=p.panes,O=p[t];if("center"===t){N=b.layout.optionsMap.center,e=0;for(ha=N.length;e<ha;e++)if(G=N[e],!a.center[G]&&(a.panes[G]||!O[G]))O[G]=Qa[G]}else{O=p[t]=b.extend(!0,{},Qa,O);var n=p[t],r=p.panes;n.fxSettings||(n.fxSettings={}),r.fxSettings||(r.fxSettings={}),b.each(["_open","_close","_size"],function(e,i){var s="fxName"+i,o="fxSpeed"+i,u="fxSettings"+i,a=n[s]=n[s]||r[s]||n.fxName||r.fxName||"none";if(a==="none"||!b.effects||!b.effects[a]||!p.effects[a])a=n[s]="none";a=p.effects[a]||{},s=a.all||null,a=a[t]||null,n[o]=n[o]||r[o]||n.fxSpeed||r.fxSpeed||null,n[u]=b.extend(!0,{},s,a,r.fxSettings,n.fxSettings,r[u],n[u])}),delete n.fxName,delete n.fxSpeed,delete n.fxSettings,O.resizerClass||(O.resizerClass="ui-layout-resizer"),O.togglerClass||(O.togglerClass="ui-layout-toggler")}O.paneClass||(O.paneClass="ui-layout-pane")});var za=a.zIndex,oa=p.zIndexes;0<za&&(oa.pane_normal=za,oa.content_mask=D(za+1,oa.content_mask),oa.resizer_normal=D(za+2,oa.resizer_normal)),delete p.panes;var qb=p;o.creatingLayout=!0,ja(s,b.layout.onCreate);if(!1===A("onload_start"))Pa="cancel";else{var Ra=u[0],fb=q.tagName=Ra.tagName,gb=q.id=Ra.id,hb=q.className=Ra.className,pa=p,Aa=pa.name,ib="BODY"===fb,ia={},Sa=u.data("parentLayout"),Ta=u.data("layoutEdge"),jb=Sa&&Ta;q.selector=u.selector.split(".slice")[0],q.ref=(pa.name?pa.name+" layout / ":"")+fb+(gb?"#"+gb:hb?".["+hb+"]":""),u.data({layout:s,layoutContainer:H}).addClass(pa.containerClass);var kb={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(Aa in kb)u.bind("layout"+Aa.toLowerCase()+"."+H,s[kb[Aa]||Aa]);jb&&(s.hasParentLayout=!0,Sa[Ta].child=Sa.children[Ta]=u.data("layout"));if(!u.data("layoutCSS")){if(ib){var ia=b.extend(T(u,"overflow,position,margin,padding,border"),{height:u.css("height"),overflow:u.css("overflow"),overflowX:u.css("overflowX"),overflowY:u.css("overflowY")}),Ba=b("html");Ba.data("layoutCSS",{height:"auto",overflow:Ba.css("overflow"),overflowX:Ba.css("overflowX"),overflowY:Ba.css("overflowY")})}else ia=T(u,"overflow,position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY");u.data("layoutCSS",ia)}try{if(ib)b("html").css({height:"100%",overflow:"hidden",overflowX:"hidden",overflowY:"hidden"}),b("body").css({position:"relative",height:"100%",overflow:"hidden",overflowX:"hidden",overflowY:"hidden",margin:0,padding:0,border:"none"}),b.extend(q,y(u));else{var ia={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},lb=u.css("position");u.css("height"),!jb&&(!lb||!lb.match(/fixed|absolute|relative/))&&(ia.position="relative"),u.css(ia),u.is(":visible")&&(b.extend(q,y(u)),1>q.innerHeight&&U(pa.errors.noContainerHeight.replace(/CONTAINER/,q.ref)))}}catch(rb){}ab(),b(window).bind("unload."+H,$a),ja(s,b.layout.onLoad),qb.initPanes&&sa(),delete o.creatingLayout,Pa=o.initialized}return"cancel"===Pa?null:s},b(function(){var e=b.layout.browser;e.msie&&(e.boxModel=b.support.boxModel)}),b.ui||(b.ui={}),b.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){for(var t=document.cookie,t=t?t.split(";"):[],n,r=0,i=t.length;r<i;r++){n=b.trim(t[r]).split("=");if(n[0]==e)return decodeURIComponent(n[1])}return null},write:function(e,t,n){var r="",i="",s=!1,n=n||{},o=n.expires;if(o&&o.toUTCString)i=o;else if(o===null||typeof o=="number")i=new Date,o>0?i.setDate(i.getDate()+o):(i.setFullYear(1970),s=!0);i&&(r+=";expires="+i.toUTCString()),n.path&&(r+=";path="+n.path),n.domain&&(r+=";domain="+n.domain),n.secure&&(r+=";secure"),document.cookie=e+"="+(s?"":encodeURIComponent(t))+r},clear:function(e){b.ui.cookie.write(e,"",{expires:-1})}},b.cookie||(b.cookie=function(e,t,n){var r=b.ui.cookie;if(t===null)r.clear(e);else{if(t===void 0)return r.read(e);r.write(e,t,n)}}),b.layout.plugins.stateManagement=!0,b.layout.config.optionRootKeys.push("stateManagement"),b.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},b.layout.optionsMap.layout.push("stateManagement"),b.layout.state={saveCookie:function(e,t,n){var r=e.options,i=r.stateManagement,n=b.extend(!0,{},i.cookie,n||null),e=e.state.stateData=e.readState(t||i.stateKeys);return b.ui.cookie.write(n.name||r.name||"Layout",b.layout.state.encodeJSON(e),n),b.extend(!0,{},e)},deleteCookie:function(e){e=e.options,b.ui.cookie.clear(e.stateManagement.cookie.name||e.name||"Layout")},readCookie:function(e){return e=e.options,(e=b.ui.cookie.read(e.stateManagement.cookie.name||e.name||"Layout"))?b.layout.state.decodeJSON(e):{}},loadCookie:function(e){var t=b.layout.state.readCookie(e);return t&&(e.state.stateData=b.extend(!0,{},t),e.loadState(t)),t},loadState:function(e,t,n){t=b.layout.transformData(t);if(!b.isEmptyObject(t)){b.extend(!0,e.options,t);if(e.state.initialized){var r,i,s,o,u,a=n===!1;b.each(b.layout.config.borderPanes,function(n,l){state=e.state[l],i=t[l],typeof i=="object"&&(s=i.size,u=i.initClosed,o=i.initHidden,(r=state.isVisible)||e.sizePane(l,s,!1,!1),o===!0?e.hide(l,a):u===!1?e.open(l,!1,a):u===!0?e.close(l,!1,a):o===!1&&e.show(l,!1,a),r&&e.sizePane(l,s,!1,a))})}}},readState:function(e,t){var n={},r={isClosed:"initClosed",isHidden:"initHidden"},i=e.state,s=b.layout.config.allPanes,o,u,a;t||(t=e.options.stateManagement.stateKeys),b.isArray(t)&&(t=t.join(","));for(var t=t.replace(/__/g,".").split(","),f=0,l=t.length;f<l;f++)o=t[f].split("."),u=o[0],o=o[1],b.inArray(u,s)<0||(a=i[u][o],a!=void 0&&(o=="isClosed"&&i[u].isSliding&&(a=!0),(n[u]||(n[u]={}))[r[o]?r[o]:o]=a));return n},encodeJSON:function(e){function t(e){var n=[],r=0,i,s,o;for(i in e)s=e[i],o=typeof s,o=="string"?s='"'+s+'"':o=="object"&&(s=t(s)),n[r++]='"'+i+'":'+s;return"{"+n.join(",")+"}"}return t(e)},decodeJSON:function(e){try{return b.parseJSON?b.parseJSON(e):window.eval("("+e+")")||{}}catch(t){return{}}},_create:function(e){var t=b.layout.state;b.extend(e,{readCookie:function(){return t.readCookie(e)},deleteCookie:function(){t.deleteCookie(e)},saveCookie:function(n,r){return t.saveCookie(e,n,r)},loadCookie:function(){return t.loadCookie(e)},loadState:function(n,r){t.loadState(e,n,r)},readState:function(n){return t.readState(e,n)},encodeJSON:t.encodeJSON,decodeJSON:t.decodeJSON}),e.state.stateData={};var n=e.options.stateManagement;n.enabled&&(n.autoLoad?e.loadCookie():e.state.stateData=e.readCookie())},_unload:function(e){var t=e.options.stateManagement;t.enabled&&(t.autoSave?e.saveCookie():e.state.stateData=e.readState())}},b.layout.onCreate.push(b.layout.state._create),b.layout.onUnload.push(b.layout.state._unload),b.layout.plugins.buttons=!0,b.layout.defaults.autoBindCustomButtons=!1,b.layout.optionsMap.layout.push("autoBindCustomButtons"),b.layout.buttons={init:function(e){var t=e.options.name||"",n;b.each(["toggle","open","close","pin","toggle-slide","open-slide"],function(r,i){b.each(b.layout.config.borderPanes,function(r,s){b(".ui-layout-button-"+i+"-"+s).each(function(){n=b(this).data("layoutName")||b(this).attr("layoutName"),(n==void 0||n===t)&&e.bindButton(this,i,s)})})})},get:function(e,t,n,r){var i=b(t),e=e.options,s=e.errors.addButtonError;return i.length?b.inArray(n,b.layout.config.borderPanes)<0?(b.layout.msg(s+" "+e.errors.pane+": "+n,!0),i=b("")):(t=e[n].buttonClass+"-"+r,i.addClass(t+" "+t+"-"+n).data("layoutName",e.name)):b.layout.msg(s+" "+e.errors.selector+": "+t,!0),i},bind:function(e,t,n,r){var i=b.layout.buttons;switch(n.toLowerCase()){case"toggle":i.addToggle(e,t,r);break;case"open":i.addOpen(e,t,r);break;case"close":i.addClose(e,t,r);break;case"pin":i.addPin(e,t,r);break;case"toggle-slide":i.addToggle(e,t,r,!0);break;case"open-slide":i.addOpen(e,t,r,!0)}return e},addToggle:function(e,t,n,r){return b.layout.buttons.get(e,t,n,"toggle").click(function(t){e.toggle(n,!!r),t.stopPropagation()}),e},addOpen:function(e,t,n,r){return b.layout.buttons.get(e,t,n,"open").attr("title",e.options[n].tips.Open).click(function(t){e.open(n,!!r),t.stopPropagation()}),e},addClose:function(e,t,n){return b.layout.buttons.get(e,t,n,"close").attr("title",e.options[n].tips.Close).click(function(t){e.close(n),t.stopPropagation()}),e},addPin:function(e,t,n){var r=b.layout.buttons,i=r.get(e,t,n,"pin");if(i.length){var s=e.state[n];i.click(function(t){r.setPinState(e,b(this),n,s.isSliding||s.isClosed),s.isSliding||s.isClosed?e.open(n):e.close(n),t.stopPropagation()}),r.setPinState(e,i,n,!s.isClosed&&!s.isSliding),s.pins.push(t)}return e},setPinState:function(e,t,n,r){var i=t.attr("pin");if(!i||r!==(i=="down")){var e=e.options[n],i=e.buttonClass+"-pin",s=i+"-"+n,n=i+"-up "+s+"-up",i=i+"-down "+s+"-down";t.attr("pin",r?"down":"up").attr("title",r?e.tips.Unpin:e.tips.Pin).removeClass(r?n:i).addClass(r?i:n)}},syncPinBtns:function(e,t,n){b.each(e.state[t].pins,function(r,i){b.layout.buttons.setPinState(e,b(i),t,n)})},_load:function(e){var t=b.layout.buttons;b.extend(e,{bindButton:function(n,r,i){return t.bind(e,n,r,i)},addToggleBtn:function(n,r,i){return t.addToggle(e,n,r,i)},addOpenBtn:function(n,r,i){return t.addOpen(e,n,r,i)},addCloseBtn:function(n,r){return t.addClose(e,n,r)},addPinBtn:function(n,r){return t.addPin(e,n,r)}});for(var n=0;n<4;n++)e.state[b.layout.config.borderPanes[n]].pins=[];e.options.autoBindCustomButtons&&t.init(e)},_unload:function(){}},b.layout.onLoad.push(b.layout.buttons._load),b.layout.plugins.browserZoom=!0,b.layout.defaults.browserZoomCheckInterval=1e3,b.layout.optionsMap.layout.push("browserZoomCheckInterval"),b.layout.browserZoom={_init:function(e){b.layout.browserZoom.ratio()!==!1&&b.layout.browserZoom._setTimer(e)},_setTimer:function(e){if(!e.destroyed){var t=e.options,n=e.state,r=e.hasParentLayout?5e3:Math.max(t.browserZoomCheckInterval,100);setTimeout(function(){if(!e.destroyed&&t.resizeWithWindow){var r=b.layout.browserZoom.ratio();r!==n.browserZoom&&(n.browserZoom=r,e.resizeAll()),b.layout.browserZoom._setTimer(e)}},r)}},ratio:function(){function e(e,t){return(parseInt(e,10)/parseInt(t,10)*100).toFixed()}var t=window,n=screen,r=document,i=r.documentElement||r.body,s=b.layout.browser,o=s.version,u,a,f;return s.msie&&o>8||!s.msie?!1:n.deviceXDPI?e(n.deviceXDPI,n.systemXDPI):s.webkit&&(u=r.body.getBoundingClientRect)?e(u.left-u.right,r.body.offsetWidth):s.webkit&&(a=t.outerWidth)?e(a,t.innerWidth):(a=n.width)&&(f=i.clientWidth)?e(a,f):!1}},b.layout.onReady.push(b.layout.browserZoom._init)}(jQuery),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.4";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?null:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s},x.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));var n=u.call(arguments,2);return function(){return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length===0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var O=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=O(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&O(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return O(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=x.invert(M.escape);var _={escape:new RegExp("["+x.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(M.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(_[e],function(t){return M[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),j.call(this,n.apply(x,e))}})};var D=0;x.uniqueId=function(e){var t=++D+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||P).source,(n.interpolate||P).source,(n.evaluate||P).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(B,function(e){return"\\"+H[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var j=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],j.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return j.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(e){function t(e){for(var t in l)e=e.replace(l[t],"");return e}function n(){return"!*$^#(@*#&"}function r(e){return e.replace(">","&gt;").replace("<","&lt;").replace("\\","\\\\")}function i(e){var t=/\/\*.*?\*\//g;return e.replace(/\s*[a-z-]+\s*=\s*'[^']*'/gi,function(e){return e.replace(t,"")}).replace(/\s*[a-z-]+\s*=\s*"[^"]*"/gi,function(e){return e.replace(t,"")}).replace(/\s*[a-z-]+\s*=\s*[^\s]+/gi,function(e){return e.replace(t,"")})}var s={"&nbsp;":" ","&iexcl;":"¡","&cent;":"¢","&pound;":"£","&curren;":"€","&yen;":"¥","&brvbar;":"Š","&sect;":"§","&uml;":"š","&copy;":"©","&ordf;":"ª","&laquo;":"«","&not;":"¬","&shy;":"­","&reg;":"®","&macr;":"¯","&deg;":"°","&plusmn;":"±","&sup2;":"²","&sup3;":"³","&acute;":"Ž","&micro;":"µ","&para;":"¶","&middot;":"·","&cedil;":"ž","&sup1;":"¹","&ordm;":"º","&raquo;":"»","&frac14;":"Œ","&frac12;":"œ","&frac34;":"Ÿ","&iquest;":"¿","&Agrave;":"À","&Aacute;":"Á","&Acirc;":"Â","&Atilde;":"Ã","&Auml;":"Ä","&Aring;":"Å","&AElig;":"Æ","&Ccedil;":"Ç","&Egrave;":"È","&Eacute;":"É","&Ecirc;":"Ê","&Euml;":"Ë","&Igrave;":"Ì","&Iacute;":"Í","&Icirc;":"Î","&Iuml;":"Ï","&ETH;":"Ð","&Ntilde;":"Ñ","&Ograve;":"Ò","&Oacute;":"Ó","&Ocirc;":"Ô","&Otilde;":"Õ","&Ouml;":"Ö","&times;":"×","&Oslash;":"Ø","&Ugrave;":"Ù","&Uacute;":"Ú","&Ucirc;":"Û","&Uuml;":"Ü","&Yacute;":"Ý","&THORN;":"Þ","&szlig;":"ß","&agrave;":"à","&aacute;":"á","&acirc;":"â","&atilde;":"ã","&auml;":"ä","&aring;":"å","&aelig;":"æ","&ccedil;":"ç","&egrave;":"è","&eacute;":"é","&ecirc;":"ê","&euml;":"ë","&igrave;":"ì","&iacute;":"í","&icirc;":"î","&iuml;":"ï","&eth;":"ð","&ntilde;":"ñ","&ograve;":"ò","&oacute;":"ó","&ocirc;":"ô","&otilde;":"õ","&ouml;":"ö","&divide;":"÷","&oslash;":"ø","&ugrave;":"ù","&uacute;":"ú","&ucirc;":"û","&uuml;":"ü","&yacute;":"ý","&thorn;":"þ","&yuml;":"ÿ","&quot;":'"',"&lt;":"<","&gt;":">","&apos;":"'","&minus;":"−","&circ;":"ˆ","&tilde;":"˜","&Scaron;":"Š","&lsaquo;":"‹","&OElig;":"Œ","&lsquo;":"‘","&rsquo;":"’","&ldquo;":"“","&rdquo;":"”","&bull;":"•","&ndash;":"–","&mdash;":"—","&trade;":"™","&scaron;":"š","&rsaquo;":"›","&oelig;":"œ","&Yuml;":"Ÿ","&fnof;":"ƒ","&Alpha;":"Α","&Beta;":"Β","&Gamma;":"Γ","&Delta;":"Δ","&Epsilon;":"Ε","&Zeta;":"Ζ","&Eta;":"Η","&Theta;":"Θ","&Iota;":"Ι","&Kappa;":"Κ","&Lambda;":"Λ","&Mu;":"Μ","&Nu;":"Ν","&Xi;":"Ξ","&Omicron;":"Ο","&Pi;":"Π","&Rho;":"Ρ","&Sigma;":"Σ","&Tau;":"Τ","&Upsilon;":"Υ","&Phi;":"Φ","&Chi;":"Χ","&Psi;":"Ψ","&Omega;":"Ω","&alpha;":"α","&beta;":"β","&gamma;":"γ","&delta;":"δ","&epsilon;":"ε","&zeta;":"ζ","&eta;":"η","&theta;":"θ","&iota;":"ι","&kappa;":"κ","&lambda;":"λ","&mu;":"μ","&nu;":"ν","&xi;":"ξ","&omicron;":"ο","&pi;":"π","&rho;":"ρ","&sigmaf;":"ς","&sigma;":"σ","&tau;":"τ","&upsilon;":"υ","&phi;":"φ","&chi;":"χ","&psi;":"ψ","&omega;":"ω","&thetasym;":"ϑ","&upsih;":"ϒ","&piv;":"ϖ","&ensp;":" ","&emsp;":" ","&thinsp;":" ","&zwnj;":"‌","&zwj;":"‍","&lrm;":"‎","&rlm;":"‏","&sbquo;":"‚","&bdquo;":"„","&dagger;":"†","&Dagger;":"‡","&hellip;":"…","&permil;":"‰","&prime;":"′","&Prime;":"″","&oline;":"‾","&frasl;":"⁄","&euro;":"€","&image;":"ℑ","&weierp;":"℘","&real;":"ℜ","&alefsym;":"ℵ","&larr;":"←","&uarr;":"↑","&rarr;":"→","&darr;":"↓","&harr;":"↔","&crarr;":"↵","&lArr;":"⇐","&uArr;":"⇑","&rArr;":"⇒","&dArr;":"⇓","&hArr;":"⇔","&forall;":"∀","&part;":"∂","&exist;":"∃","&empty;":"∅","&nabla;":"∇","&isin;":"∈","&notin;":"∉","&ni;":"∋","&prod;":"∏","&sum;":"∑","&lowast;":"∗","&radic;":"√","&prop;":"∝","&infin;":"∞","&ang;":"∠","&and;":"∧","&or;":"∨","&cap;":"∩","&cup;":"∪","&int;":"∫","&there4;":"∴","&sim;":"∼","&cong;":"≅","&asymp;":"≈","&ne;":"≠","&equiv;":"≡","&le;":"≤","&ge;":"≥","&sub;":"⊂","&sup;":"⊃","&nsub;":"⊄","&sube;":"⊆","&supe;":"⊇","&oplus;":"⊕","&otimes;":"⊗","&perp;":"⊥","&sdot;":"⋅","&lceil;":"⌈","&rceil;":"⌉","&lfloor;":"⌊","&rfloor;":"⌋","&lang;":"〈","&rang;":"〉","&loz;":"◊","&spades;":"♠","&clubs;":"♣","&hearts;":"♥","&diams;":"♦"},o=function(e){if(!~e.indexOf("&"))return e;for(var t in s)e=e.replace(new RegExp(t,"g"),s[t]);return e=e.replace(/&#x(0*[0-9a-f]{2,5});?/gi,function(e,t){return String.fromCharCode(parseInt(+t,16))}),e=e.replace(/&#([0-9]{2,4});?/gi,function(e,t){return String.fromCharCode(+t)}),e=e.replace(/&amp;/g,"&"),e},u=function(e){e=e.replace(/&/g,"&amp;"),e=e.replace(/'/g,"&#39;");for(var t in s)e=e.replace(new RegExp(s[t],"g"),t);return e};e.entities={encode:u,decode:o};var a={"document.cookie":"","document.write":"",".parentNode":"",".innerHTML":"","window.location":"","-moz-binding":"","<!--":"&lt;!--","-->":"--&gt;","<![CDATA[":"&lt;![CDATA["},f={"javascript\\s*:":"","expression\\s*(\\(|&\\#40;)":"","vbscript\\s*:":"","Redirect\\s+302":""},l=[/%0[0-8bcef]/g,/%1[0-9a-f]/g,/[\x00-\x08]/g,/\x0b/g,/\x0c/g,/[\x0e-\x1f]/g],c=["javascript","expression","vbscript","script","applet","alert","document","write","cookie","window"];e.xssClean=function(s,o){if(typeof s=="object"){for(var u in s)s[u]=e.xssClean(s[u]);return s}s=t(s),s=s.replace(/\&([a-z\_0-9]+)\=([a-z\_0-9]+)/i,n()+"$1=$2"),s=s.replace(/(&\#?[0-9a-z]{2,})([\x00-\x20])*;?/i,"$1;$2"),s=s.replace(/(&\#x?)([0-9A-F]+);?/i,"$1;$2"),s=s.replace(n(),"&");try{s=decodeURIComponent(s)}catch(l){}s=s.replace(/[a-z]+=([\'\"]).*?\1/gi,function(e,t){return e.replace(t,r(t))}),s=t(s),s=s.replace("  "," ");var h=s;for(var u in a)s=s.replace(u,a[u]);for(var u in f)s=s.replace(new RegExp(u,"i"),f[u]);for(var u in c){var p=c[u].split("").join("\\s*")+"\\s*";s=s.replace(new RegExp("("+p+")(\\W)","ig"),function(e,t,n){return t.replace(/\s+/g,"")+n})}do{var d=s;s.match(/<a/i)&&(s=s.replace(/<a\s+([^>]*?)(>|$)/gi,function(e,t,n){return t=i(t.replace("<","").replace(">","")),e.replace(t,t.replace(/href=.*?(alert\(|alert&\#40;|javascript\:|charset\=|window\.|document\.|\.cookie|<script|<xss|base64\s*,)/gi,""))})),s.match(/<img/i)&&(s=s.replace(/<img\s+([^>]*?)(\s?\/?>|$)/gi,function(e,t,n){return t=i(t.replace("<","").replace(">","")),e.replace(t,t.replace(/src=.*?(alert\(|alert&\#40;|javascript\:|charset\=|window\.|document\.|\.cookie|<script|<xss|base64\s*,)/gi,""))}));if(s.match(/script/i)||s.match(/xss/i))s=s.replace(/<(\/*)(script|xss)(.*?)\>/gi,"")}while(d!=s);event_handlers=["[^a-z_-]on\\w*"],o||event_handlers.push("xmlns"),s=s.replace(new RegExp("<([^><]+?)("+event_handlers.join("|")+")(\\s*=\\s*[^><]*)([><]*)","i"),"<$1$4"),naughty="alert|applet|audio|basefont|base|behavior|bgsound|blink|body|embed|expression|form|frameset|frame|head|html|ilayer|iframe|input|isindex|layer|link|meta|object|plaintext|style|script|textarea|title|video|xml|xss",s=s.replace(new RegExp("<(/*\\s*)("+naughty+")([^><]*)([><]*)","gi"),function(e,t,n,r,i){return"&lt;"+t+n+r+i.replace(">","&gt;").replace("<","&lt;")}),s=s.replace(/(alert|cmd|passthru|eval|exec|expression|system|fopen|fsockopen|file|file_get_contents|readfile|unlink)(\s*)\((.*?)\)/gi,"$1$2&#40;$3&#41;");for(var u in a)s=s.replace(u,a[u]);for(var u in f)s=s.replace(new RegExp(u,"i"),f[u]);if(o&&s!==h)throw new Error("Image may contain XSS");return s};var h=e.Validator=function(){};h.prototype.check=function(e,t){return this.str=e===null||isNaN(e)&&e.length===undefined?"":e+"",this.msg=t,this._errors=this._errors||[],this},h.prototype.validate=h.prototype.check,h.prototype.assert=h.prototype.check,h.prototype.error=function(e){throw new Error(e)},h.prototype.isEmail=function(){return this.str.match(/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/)?this:this.error(this.msg||"Invalid email")},h.prototype.isCreditCard=function(){this.str=this.str.replace(/[^0-9]+/g,"");if(!this.str.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/))return this.error(this.msg||"Invalid credit card");var e=0,t,n,r=!1;for(var i=this.length-1;i>=0;i--)t=this.substring(i,i+1),n=parseInt(t,10),r?(n*=2,n>=10?e+=n%10+1:e+=n):e+=n,r?r=!1:r=!0;return e%10!==0?this.error(this.msg||"Invalid credit card"):this},h.prototype.isUrl=function(){return!this.str.match(/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/i)||this.str.length>2083?this.error(this.msg||"Invalid URL"):this},h.prototype.isIP=function(){return this.str.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)?this:this.error(this.msg||"Invalid IP")},h.prototype.isAlpha=function(){return this.str.match(/^[a-zA-Z]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isAlphanumeric=function(){return this.str.match(/^[a-zA-Z0-9]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isNumeric=function(){return this.str.match(/^-?[0-9]+$/)?this:this.error(this.msg||"Invalid number")},h.prototype.isLowercase=function(){return this.str.match(/^[a-z0-9]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isUppercase=function(){return this.str.match(/^[A-Z0-9]+$/)?this:this.error(this.msg||"Invalid characters")},h.prototype.isInt=function(){return this.str.match(/^(?:-?(?:0|[1-9][0-9]*))$/)?this:this.error(this.msg||"Invalid integer")},h.prototype.isDecimal=function(){return this.str.match(/^(?:-?(?:0|[1-9][0-9]*))?(?:\.[0-9]*)?$/)?this:this.error(this.msg||"Invalid decimal")},h.prototype.isFloat=function(){return this.isDecimal()},h.prototype.notNull=function(){return this.str===""?this.error(this.msg||"Invalid characters"):this},h.prototype.isNull=function(){return this.str!==""?this.error(this.msg||"Invalid characters"):this},h.prototype.notEmpty=function(){return this.str.match(/^[\s\t\r\n]*$/)?this.error(this.msg||"String is whitespace"):this},h.prototype.equals=function(e){return this.str!=e?this.error(this.msg||"Not equal"):this},h.prototype.contains=function(e){return this.str.indexOf(e)===-1?this.error(this.msg||"Invalid characters"):this},h.prototype.notContains=function(e){return this.str.indexOf(e)>=0?this.error(this.msg||"Invalid characters"):this},h.prototype.regex=h.prototype.is=function(e,t){return Object.prototype.toString.call(e).slice(8,-1)!=="RegExp"&&(e=new RegExp(e,t)),this.str.match(e)?this:this.error(this.msg||"Invalid characters")},h.prototype.notRegex=h.prototype.not=function(e,t){return Object.prototype.toString.call(e).slice(8,-1)!=="RegExp"&&(e=new RegExp(e,t)),this.str.match(e)&&this.error(this.msg||"Invalid characters"),this},h.prototype.len=function(e,t){return this.str.length<e?this.error(this.msg||"String is too small"):typeof t!==undefined&&this.str.length>t?this.error(this.msg||"String is too large"):this},h.prototype.isUUID=function(e){var t;return e==3||e=="v3"?t=/[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i:e==4||e=="v4"?t=/[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i:t=/[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,this.str.match(t)?this:this.error(this.msg||"Not a UUID")},h.prototype.isDate=function(){var e=Date.parse(this.str);return isNaN(e)?this.error(this.msg||"Not a date"):this},h.prototype.isIn=function(e){return e&&typeof e.indexOf=="function"?~e.indexOf(this.str)?this:this.error(this.msg||"Unexpected value"):this.error(this.msg||"Invalid in() argument")},h.prototype.notIn=function(e){return e&&typeof e.indexOf=="function"?e.indexOf(this.str)!==-1?this.error(this.msg||"Unexpected value"):this:this.error(this.msg||"Invalid notIn() argument")},h.prototype.min=function(e){var t=parseFloat(this.str);return!isNaN(t)&&t<e?this.error(this.msg||"Invalid number"):this},h.prototype.max=function(e){var t=parseFloat(this.str);return!isNaN(t)&&t>e?this.error(this.msg||"Invalid number"):this},h.prototype.isArray=function(){return Array.isArray(this.str)?this:this.error(this.msg||"Not an array")};var p=e.Filter=function(){},d="\\r\\n\\t\\s";p.prototype.modify=function(e){this.str=e},p.prototype.convert=p.prototype.sanitize=function(e){return this.str=e,this},p.prototype.xss=function(t){return this.modify(e.xssClean(this.str,t)),this.str},p.prototype.entityDecode=function(){return this.modify(o(this.str)),this.str},p.prototype.entityEncode=function(){return this.modify(u(this.str)),this.str},p.prototype.ltrim=function(e){return e=e||d,this.modify(this.str.replace(new RegExp("^["+e+"]+","g"),"")),this.str},p.prototype.rtrim=function(e){return e=e||d,this.modify(this.str.replace(new RegExp("["+e+"]+$","g"),"")),this.str},p.prototype.trim=function(e){return e=e||d,this.modify(this.str.replace(new RegExp("^["+e+"]+|["+e+"]+$","g"),"")),this.str},p.prototype.ifNull=function(e){return(!this.str||this.str==="")&&this.modify(e),this.str},p.prototype.toFloat=function(){return this.modify(parseFloat(this.str)),this.str},p.prototype.toInt=function(e){return e=e||10,this.modify(parseInt(this.str),e),this.str},p.prototype.toBoolean=function(){return!this.str||this.str=="0"||this.str=="false"||this.str==""?this.modify(!1):this.modify(!0),this.str},p.prototype.toBooleanStrict=function(){return this.str=="1"||this.str=="true"?this.modify(!0):this.modify(!1),this.str},e.sanitize=e.convert=function(t){var n=new e.Filter;return n.sanitize(t)},e.check=e.validate=e.assert=function(t,n){var r=new e.Validator;return r.check(t,n)}}(typeof exports=="undefined"?window:exports),require.register("CNeditor/autocomplete",function(e,t,n){var r;t("./bootstrap-datepicker"),t("./bootstrap-timepicker"),n.exports=r=function(){function e(e,t,n){var r,i,s=this;return this.container=e,this.editor=t,this.hotString=n,this.tTags=[],this.tTagsDiv=document.createElement("DIV"),this.tTagsDiv.className="SUGG_ttags",this.contacts=[],this.contactsDiv=document.createElement("DIV"),this.reminderDiv=document.createElement("DIV"),this.htagDiv=document.createElement("DIV"),this.reminderDiv.innerHTML='<div class="reminder-title">Add a reminder</div>\n<div class="date" data-date="12-02-2012" data-date-format="dd-mm-yyyy">\n    <div class="reminder-input">\n        <input class="datepicker-input" size="16" type="text" value="12-02-2012"/>\n        <input id="timepicker" data-template="modal" data-minute-step="1" data-modal-backdrop="true" type="text"/>\n    </div>\n</div>',this.datePick=$(this.reminderDiv.lastChild).datepicker(),this.datePick.show(),this.datePick.on("changeDate",function(e){var t;return(t=s._currentDate)==null&&(s._currentDate=new Date),s._currentDate.setDate(e.date.getDate()),s._currentDate.setMonth(e.date.getMonth()),s._currentDate.setFullYear(e.date.getFullYear())}),this.timePick=$(this.reminderDiv.childNodes[2].firstElementChild.lastElementChild),this.timePick.timepicker({minuteStep:1,template:"modal",showSeconds:!0,showMeridian:!1}),this.timePick.timepicker().on("changeTime.timepicker",function(e){var t;return(t=this._currentDate)==null&&(this._currentDate=new Date),this._currentDate.setHours(e.time.hours),this._currentDate.setMinutes(e.time.minutes),this._currentDate.setSeconds(e.time.seconds)}),i=this.reminderDiv.querySelector(".reminder-title"),i.addEventListener("click",function(){return s.hotString.validate()}),this.regexStore={},this.isVisible=!1,r=document.createElement("div"),r.id="CNE_autocomplete",r.className="CNE_autocomplete",r.setAttribute("contentEditable","false"),r.addEventListener("keypress",function(e){return e.keyCode===13?(s._validateUrlPopover(),e.stopPropagation()):e.keyCode===27&&s._cancelUrlPopover(!1),!1}),r.appendChild(this.tTagsDiv),this.el=r,this._currentMode="contact",r.appendChild(this.contactsDiv),this.setItems("tTags",[{text:"contact",type:"ttag",value:"contact",mention:" (@)"},{text:"todo",type:"ttag",value:"todo"},{text:"reminder",type:"ttag",value:"reminder",mention:" (@@)"}]),this.setItems("contact",[]),this}return e.prototype.setItems=function(e,t){var n,r,i,s,o;switch(e){case"tTags":this.tTags=t,i=this.tTagsDiv;break;case"contact":this.contacts=t,i=this.contactsDiv;break;case"htag":this.htags=t,i=this.htagDiv}while(i.firstChild)i.removeChild(i.firstChild);for(s=0,o=t.length;s<o;s++)n=t[s],r=this._createLine(n),r&&i.appendChild(r);return!0},e.prototype._createLine=function(e){var t,n,r,i,s,o,u,a;if(!e.text)return null;n=document.createElement("LI"),s=e.type;switch(s){case"ttag":n.className="SUGG_line_ttag";break;case"contact":n.className="SUGG_line_contact";break;case"htag":n.className="SUGG_line_htag"}i=((a=e.text)!=null?a.split(""):void 0)||[];for(o=0,u=i.length;o<u;o++)t=i[o],r=document.createElement("SPAN"),r.textContent=t,n.appendChild(r);return e.mention&&(r=document.createElement("SPAN"),r.textContent=e.mention,r.className="SUGG_mention",n.appendChild(r)),n.item=e,e.line=n,n},e.prototype.show=function(e,t){var n;return n=e.parentElement,this.isVisible=!0,this.update(t),this._position(e),this.container.appendChild(this.el)},e.prototype.setAllowedModes=function(e){var t,n,r,i,s,o,u;this._modes=e,u=this.tTags;for(r=0,s=u.length;r<s;r++){n=u[r],n.isInMode=!1;for(i=0,o=e.length;i<o;i++){t=e[i];if(n.value===t){n.isInMode=!0;break}}}return!0},e.prototype.setMode=function(e){var t;this._unSelectLine();switch(e){case"ttag":this._currentMode="ttag",this.tTagsDiv.parentNode||this.el.appendChild(this.tTagsDiv),this.htagDiv.parentNode&&this.el.removeChild(this.htagDiv),this.contactsDiv.parentNode&&this.el.removeChild(this.contactsDiv);if(this.reminderDiv.parentNode)return this.el.removeChild(this.reminderDiv);break;case"contact":this._currentMode="contact",this.tTagsDiv.parentNode||this.el.appendChild(this.tTagsDiv),this.htagDiv.parentNode&&this.el.removeChild(this.htagDiv),this.contactsDiv.parentNode||this.el.appendChild(this.contactsDiv);if(this.reminderDiv.parentNode)return this.el.removeChild(this.reminderDiv);break;case"htag":this._currentMode="htag",this.tTagsDiv.parentNode&&this.el.removeChild(this.tTagsDiv),this.htagDiv.parentNode||this.el.appendChild(this.htagDiv),this.contactsDiv.parentNode&&this.el.removeChild(this.contactsDiv);if(this.reminderDiv.parentNode)return this.el.removeChild(this.reminderDiv);break;case"reminder":t=new Date,this._currentDate=t,this._initialDate=new Date,this.datePick.datepicker("setValue",t),this.timePick.timepicker("setTime",t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()),this._currentMode="reminder",this.tTagsDiv.parentNode&&this.el.removeChild(this.tTagsDiv),this.htagDiv.parentNode&&this.el.removeChild(this.htagDiv),this.contactsDiv.parentNode&&this.el.removeChild(this.contactsDiv);if(!this.reminderDiv.parentNode)return this.el.appendChild(this.reminderDiv)}},e.prototype.update=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d;if(!this.isVisible)return;r=0;switch(this._currentMode){case"ttag":p=this.tTags;for(u=0,l=p.length;u<l;u++)o=p[u],o.isInMode&&this._shouldDisp(o,e)?(r+=1,o.line.style.display="block"):o.line.style.display="none";n=[];break;case"contact":d=this.tTags;for(a=0,c=d.length;a<c;a++)o=d[a],o.isInMode&&this._shouldDisp(o,e)?(r+=1,o.line.style.display="block"):o.line.style.display="none";n=this.contacts;break;case"htag":n=this.htags;break;case"reminder":i=Date.future(e),i.isValid()&&(this._currentDate=i,this.datePick.datepicker("setValue",this._currentDate),s=this._currentDate.toTimeString().substring(0,8),this.timePick.timepicker("setTime",s));return}for(f=0,h=n.length;f<h;f++)t=n[f],this._shouldDisp(t,e)?(r+=1,t.line&&(t.line.style.display="block")):t.line&&(t.line.style.display="none");return this._sortItems(),this.nbrOfSuggestions=r,!0},e.prototype._position=function(e){return this.el.style.left=e.offsetLeft+"px",this.el.style.top=e.offsetTop+17+"px",e.parentElement.normalize(),!0},e.prototype._sortItems=function(){},e.prototype._addLine=function(e){var t;return t=document.createElement("LI"),this._updateLine(t,e),this.el.appendChild(t),t},e.prototype._updateLine=function(e,t,n){var r,i,s,o,u,a;console.info("_updateLine"),o=t.type;switch(o){case"tag":e.className="SUGG_line_tag";break;case"contact":e.className="SUGG_line_contact"}e.childNodes.length!==0&&(e.innerHTML=""),s=t.text.split("");for(u=0,a=s.length;u<a;u++)r=s[u],i=document.createElement("SPAN"),i.textContent=r,e.appendChild(i);return t.mention&&(i=document.createElement("SPAN"),i.textContent=t.mention,i.className="mention",e.appendChild(i)),e.item=t},e.prototype._selectLine=function(){if(this._selectedLine)return this._selectedLine.classList.add("SUGG_selected")},e.prototype._unSelectLine=function(){var e;return e=this._selectedLine,e&&(e.classList.remove("SUGG_selected"),this._selectedLine=null),e},e.prototype._removeLine=function(e){return this.el.removeChild(e)},e.prototype.hide=function(){var e;return this.isVisible?(this.container.removeChild(this.el),this.isVisible=!1,e=this.getSelectedItem(),e):!1},e.prototype.getSelectedItem=function(){var e,t;switch(this._currentMode){case"ttag":case"contact":this._selectedLine?(t=this._selectedLine.item,this._unSelectLine()):(t=null,this._selectedLine=null);break;case"htag":this._selectedLine&&this._selectedLine.item.type==="htag"?(t=this._selectedLine.item,this._unSelectLine()):(t=null,this._selectedLine=null);break;case"reminder":e=this._currentDate,t={text:e,type:"reminder",value:this._currentDate}}return t},e.prototype._shouldDisp=function(e,t){var n,r,i,s,o,u,a,f;this.regexStore[t]?s=this.regexStore[t]:(o=t.replace(/\W/g,"").split("").join("[\\w ]*"),s=new RegExp(o,"i"),this.regexStore[t]=s);if(!e.text)return!1;if(e.text.match(s)){f=t.toLowerCase().split(""),n=f.shift(),a=e.line.childNodes,r=0,i=a.length,e.line.lastChild.className==="SUGG_mention"&&(i-=1);while(r<i)u=a[r],u.textContent.toLowerCase()===n?(u.className="b",n=f.shift(),n?r+=1:r+=1):(u.className="",r+=1);return!0}return!1},e.prototype.up=function(){var e,t;if(this.nbrOfSuggestions===0)return;if(!this._selectedLine)this._selectedLine=this.el.lastChild.lastChild;else{e=this._unSelectLine(),t=e.previousSibling;if(t)this._selectedLine=t;else{if(this._currentMode==="reminder")return this._selectedLine=e,this._selectLine(),!0;e.item.type==="ttag"?this._selectedLine=this.el.lastChild.lastChild:this._selectedLine=this.el.firstChild.lastChild}}return this._selectedLine.style.display==="none"?this.up():this._selectLine(),!0},e.prototype.down=function(){var e,t;if(this.nbrOfSuggestions===0)return;if(!this._selectedLine)this._selectedLine=this.el.firstChild.firstChild;else{e=this._unSelectLine(),t=e.nextSibling;if(t){if(this._currentMode==="reminder")return this._selectedLine=e,this._selectLine(),!0;this._selectedLine=t}else e.item.type==="ttag"?this._selectedLine=this.el.lastChild.firstChild:this._selectedLine=this.el.firstChild.firstChild}return this._selectedLine.style.display==="none"?this.down():this._selectLine()},e.prototype.val=function(){return this._selectedLine.item},e.prototype.isInTTags=function(e){var t,n,r,i;i=this.tTags;for(n=0,r=i.length;n<r;n++){t=i[n];if(e===t.text)return t}return!1},e}()}),require.register("CNeditor/bootstrap-datepicker",function(e,t,n){!function(e){var t=function(t,r){this.element=e(t),this.format=n.parseFormat(r.format||this.element.data("date-format")||"mm/dd/yyyy"),this.picker=e(n.template).appendTo(t.parentElement).on({click:e.proxy(this.click,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this)}):this.component?this.component.on("click",e.proxy(this.show,this)):this.element.on("click",e.proxy(this.show,this)),this.minViewMode=r.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode=="string")switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}this.viewMode=r.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode=="string")switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=r.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=this.weekStart===0?6:this.weekStart-1,this.onRender=r.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};t.prototype={constructor:t,show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),!this.isInput;var n=this;e(document).on("mousedown",function(t){e(t.target).closest(".datepicker").length==0&&n.hide()}),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.element.trigger({type:"hide",date:this.date})},set:function(){var e=n.formatDate(this.date,this.format);this.isInput?this.element.prop("value",e):(this.component&&this.element.find(".datepicker-input").prop("value",e),this.element.data("date",e))},setValue:function(e){typeof e=="string"?this.date=n.parseDate(e,this.format):this.date=new Date(e),this.set(),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},place:function(){},update:function(e){this.date=n.parseDate(typeof e=="string"?e:this.isInput?this.element.prop("value"):this.element.data("date"),this.format),this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0),this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7)t+='<th class="dow">'+n.dates.daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+n.dates.monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").append(e)},fill:function(){var e=new Date(this.viewDate),t=e.getFullYear(),r=e.getMonth(),i=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(n.dates.months[r]+" "+t);var s=new Date(t,r-1,28,0,0,0,0),o=n.getDaysInMonth(s.getFullYear(),s.getMonth());s.setDate(o),s.setDate(o-(s.getDay()-this.weekStart+7)%7);var u=new Date(s);u.setDate(u.getDate()+42),u=u.valueOf();var a=[],f,l,c;while(s.valueOf()<u){s.getDay()===this.weekStart&&a.push("<tr>"),f=this.onRender(s),l=s.getFullYear(),c=s.getMonth();if(c<r&&l===t||l<t)f+=" old";else if(c>r&&l===t||l>t)f+=" new";s.valueOf()===i&&(f+=" active"),a.push('<td class="day '+f+'">'+s.getDate()+"</td>"),s.getDay()===this.weekEnd&&a.push("</tr>"),s.setDate(s.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(a.join(""));var h=this.date.getFullYear(),p=this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");h===t&&p.eq(this.date.getMonth()).addClass("active"),a="",t=parseInt(t/10,10)*10;var d=this.picker.find(".datepicker-years").find("th:eq(1)").text(t+"-"+(t+9)).end().find("td");t-=1;for(var v=-1;v<11;v++)a+='<span class="year'+(v===-1||v===10?" old":"")+(h===t?" active":"")+'">'+t+"</span>",t+=1;d.html(a)},click:function(t){t.stopPropagation(),t.preventDefault();var r=e(t.target).closest("span, td, th");if(r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+n.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+n.modes[this.viewMode].navFnc].call(this.viewDate)+n.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1)),this.fill(),this.set()}break;case"span":if(r.is(".month")){var i=r.parent().find("span").index(r);this.viewDate.setMonth(i)}else{var s=parseInt(r.text(),10)||0;this.viewDate.setFullYear(s)}this.viewMode!==0&&(this.date=new Date(this.viewDate),this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})),this.showMode(-1),this.fill(),this.set();break;case"td":if(r.is(".day")&&!r.is(".disabled")){var o=parseInt(r.text(),10)||1,i=this.viewDate.getMonth();r.is(".old")?i-=1:r.is(".new")&&(i+=1);var s=this.viewDate.getFullYear();this.date=new Date(s,i,o,0,0,0,0),this.viewDate=new Date(s,i,Math.min(28,o),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:n.modes[this.viewMode].clsName})}}},mousedown:function(e){e.stopPropagation(),e.preventDefault()},showMode:function(e){e&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+n.modes[this.viewMode].clsName).show()}},e.fn.datepicker=function(n,r){return this.each(function(){var i=e(this),s=i.data("datepicker"),o=typeof n=="object"&&n;s||i.data("datepicker",s=new t(this,e.extend({},e.fn.datepicker.defaults,o))),typeof n=="string"&&s[n](r)})},e.fn.datepicker.defaults={onRender:function(e){return""}},e.fn.datepicker.Constructor=t;var n={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,n.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},parseFormat:function(e){var t=e.match(/[.\/\-\s].*?/),n=e.split(/\W+/);if(!t||!n||n.length===0)throw new Error("Invalid date format.");return{separator:t,parts:n}},parseDate:function(e,t){var n=e.split(t.separator),e=new Date,r;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);if(n.length===t.parts.length){var i=e.getFullYear(),s=e.getDate(),o=e.getMonth();for(var u=0,a=t.parts.length;u<a;u++){r=parseInt(n[u],10)||1;switch(t.parts[u]){case"dd":case"d":s=r,e.setDate(r);break;case"mm":case"m":o=r-1,e.setMonth(r-1);break;case"yy":i=2e3+r,e.setFullYear(2e3+r);break;case"yyyy":i=r,e.setFullYear(r)}}e=new Date(i,o,s,0,0,0)}return e},formatDate:function(e,t){var n={d:e.getDate(),m:e.getMonth()+1,yy:e.getFullYear().toString().substring(2),yyyy:e.getFullYear()};n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m;var e=[];for(var r=0,i=t.parts.length;r<i;r++)e.push(n[t.parts[r]]);return e.join(t.separator)},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};n.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+n.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+n.headTemplate+n.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+n.headTemplate+n.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery)}),require.register("CNeditor/bootstrap-timepicker",function(e,t,n){(function(e,t,n,r){"use strict";var i=function(t,n){this.widget="",this.$element=e(t),this.defaultTime=n.defaultTime,this.disableFocus=n.disableFocus,this.isOpen=n.isOpen,this.minuteStep=n.minuteStep,this.modalBackdrop=n.modalBackdrop,this.secondStep=n.secondStep,this.showInputs=n.showInputs,this.showMeridian=n.showMeridian,this.showSeconds=n.showSeconds,this.template=n.template,this.appendWidgetTo=n.appendWidgetTo,this._init()};i.prototype={constructor:i,_init:function(){var t=this;this.$element.parent().hasClass("input-append")||this.$element.parent().hasClass("input-prepend")?(this.$element.parent(".input-append, .input-prepend").find(".add-on").on({"click.timepicker":e.proxy(this.showWidget,this)}),this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)})):this.template?this.$element.on({"focus.timepicker":e.proxy(this.showWidget,this),"click.timepicker":e.proxy(this.showWidget,this),"blur.timepicker":e.proxy(this.blurElement,this)}):this.$element.on({"focus.timepicker":e.proxy(this.highlightUnit,this),"click.timepicker":e.proxy(this.highlightUnit,this),"keydown.timepicker":e.proxy(this.elementKeydown,this),"blur.timepicker":e.proxy(this.blurElement,this)}),this.template!==!1?this.$widget=e(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click",e.proxy(this.widgetClick,this)):this.$widget=!1,this.showInputs&&this.$widget!==!1&&this.$widget.find("input").each(function(){e(this).on({"click.timepicker":function(){e(this).select()},"keydown.timepicker":e.proxy(t.widgetKeydown,t)})}),this.setDefaultTime(this.defaultTime)},blurElement:function(){this.highlightedUnit=r,this.updateFromElementVal()},decrementHour:function(){if(this.showMeridian)if(this.hour===1)this.hour=12;else{if(this.hour===12)return this.hour--,this.toggleMeridian();if(this.hour===0)return this.hour=11,this.toggleMeridian();this.hour--}else this.hour===0?this.hour=23:this.hour--;this.update()},decrementMinute:function(e){var t;e?t=this.minute-e:t=this.minute-this.minuteStep,t<0?(this.decrementHour(),this.minute=t+60):this.minute=t,this.update()},decrementSecond:function(){var e=this.second-this.secondStep;e<0?(this.decrementMinute(!0),this.second=e+60):this.second=e,this.update()},elementKeydown:function(e){switch(e.keyCode){case 9:this.updateFromElementVal();switch(this.highlightedUnit){case"hour":e.preventDefault(),this.highlightNextUnit();break;case"minute":if(this.showMeridian||this.showSeconds)e.preventDefault(),this.highlightNextUnit();break;case"second":this.showMeridian&&(e.preventDefault(),this.highlightNextUnit())}break;case 27:this.updateFromElementVal();break;case 37:e.preventDefault(),this.highlightPrevUnit(),this.updateFromElementVal();break;case 38:e.preventDefault();switch(this.highlightedUnit){case"hour":this.incrementHour(),this.highlightHour();break;case"minute":this.incrementMinute(),this.highlightMinute();break;case"second":this.incrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}break;case 39:e.preventDefault(),this.updateFromElementVal(),this.highlightNextUnit();break;case 40:e.preventDefault();switch(this.highlightedUnit){case"hour":this.decrementHour(),this.highlightHour();break;case"minute":this.decrementMinute(),this.highlightMinute();break;case"second":this.decrementSecond(),this.highlightSecond();break;case"meridian":this.toggleMeridian(),this.highlightMeridian()}}},formatTime:function(e,t,n,r){return e=e<10?"0"+e:e,t=t<10?"0"+t:t,n=n<10?"0"+n:n,e+":"+t+(this.showSeconds?":"+n:"")+(this.showMeridian?" "+r:"")},getCursorPosition:function(){var e=this.$element.get(0);if("selectionStart"in e)return e.selectionStart;if(n.selection){e.focus();var t=n.selection.createRange(),r=n.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-r}},getTemplate:function(){var e,t,n,r,i,s;this.showInputs?(t='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',n='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',r='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',i='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>'):(t='<span class="bootstrap-timepicker-hour"></span>',n='<span class="bootstrap-timepicker-minute"></span>',r='<span class="bootstrap-timepicker-second"></span>',i='<span class="bootstrap-timepicker-meridian"></span>'),s='<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator">&nbsp;</td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr>"+"<tr>"+"<td>"+t+"</td> "+'<td class="separator">:</td>'+"<td>"+n+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+r+"</td>":"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td>'+i+"</td>":"")+"</tr>"+"<tr>"+'<td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator">&nbsp;</td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator">&nbsp;</td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr>"+"</table>";switch(this.template){case"modal":e='<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="'+(this.modalBackdrop?"true":"false")+'">'+'<div class="modal-header">'+'<a href="#" class="close" data-dismiss="modal">×</a>'+"<h3>Pick a Time</h3>"+"</div>"+'<div class="modal-content">'+s+"</div>"+'<div class="modal-footer">'+'<a href="#" class="btn btn-primary" data-dismiss="modal">OK</a>'+"</div>"+"</div>";break;case"dropdown":e='<div class="bootstrap-timepicker-widget dropdown-menu">'+s+"</div>"}return e},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},hideWidget:function(){if(this.isOpen===!1)return;this.showInputs&&this.updateFromWidgetInputs(),this.$element.trigger({type:"hide.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.template==="modal"?this.$widget.modal("hide"):this.$widget.removeClass("open"),e(n).off("mousedown.timepicker"),this.isOpen=!1},highlightUnit:function(){this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"second":this.showMeridian?this.highlightMeridian():this.highlightHour();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){var e=this.$element.get(0);this.highlightedUnit="hour",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(0,2)},0)},highlightMinute:function(){var e=this.$element.get(0);this.highlightedUnit="minute",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(3,5)},0)},highlightSecond:function(){var e=this.$element.get(0);this.highlightedUnit="second",e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(6,8)},0)},highlightMeridian:function(){var e=this.$element.get(0);this.highlightedUnit="meridian",e.setSelectionRange&&(this.showSeconds?setTimeout(function(){e.setSelectionRange(9,11)},0):setTimeout(function(){e.setSelectionRange(6,8)},0))},incrementHour:function(){if(this.showMeridian){if(this.hour===11)return this.hour++,this.toggleMeridian();this.hour===12&&(this.hour=0)}if(this.hour===23)return this.hour=0;this.hour++,this.update()},incrementMinute:function(e){var t;e?t=this.minute+e:t=this.minute+this.minuteStep-this.minute%this.minuteStep,t>59?(this.incrementHour(),this.minute=t-60):this.minute=t,this.update()},incrementSecond:function(){var e=this.second+this.secondStep-this.second%this.secondStep;e>59?(this.incrementMinute(!0),this.second=e-60):this.second=e,this.update()},remove:function(){e("document").off(".timepicker"),this.$widget&&this.$widget.remove(),delete this.$element.data().timepicker},setDefaultTime:function(e){if(!this.$element.val())if(e==="current"){var t=new Date,n=t.getHours(),r=Math.floor(t.getMinutes()/this.minuteStep)*this.minuteStep,i=Math.floor(t.getSeconds()/this.secondStep)*this.secondStep,s="AM";this.showMeridian&&(n===0?n=12:n>=12?(n>12&&(n-=12),s="PM"):s="AM"),this.hour=n,this.minute=r,this.second=i,this.meridian=s,this.update()}else e===!1?(this.hour=0,this.minute=0,this.second=0,this.meridian="AM"):this.setTime(e);else this.updateFromElementVal()},setTime:function(e){var t,n;this.showMeridian?(t=e.split(" "),n=t[0].split(":"),this.meridian=t[1]):n=e.split(":"),this.hour=parseInt(n[0],10),this.minute=parseInt(n[1],10),this.second=parseInt(n[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0);if(this.showMeridian){this.hour>12?this.hour=12:this.hour<1&&(this.hour=12);if(this.meridian==="am"||this.meridian==="a")this.meridian="AM";else if(this.meridian==="pm"||this.meridian==="p")this.meridian="PM";this.meridian!=="AM"&&this.meridian!=="PM"&&(this.meridian="AM")}else this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0);this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.update()},showWidget:function(){if(this.isOpen)return;var t=this;e(n).on("mousedown.timepicker",function(n){e(n.target).closest(".bootstrap-timepicker-widget").length===0&&t.hideWidget()}),this.$element.trigger({type:"show.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.disableFocus&&this.$element.blur(),this.updateFromElementVal(),this.template==="modal"?this.$widget.modal("show").on("hidden",e.proxy(this.hideWidget,this)):this.isOpen===!1&&this.$widget.addClass("open"),this.isOpen=!0},toggleMeridian:function(){this.meridian=this.meridian==="AM"?"PM":"AM",this.update()},update:function(){this.$element.trigger({type:"changeTime.timepicker",time:{value:this.getTime(),hours:this.hour,minutes:this.minute,seconds:this.second,meridian:this.meridian}}),this.updateElement(),this.updateWidget()},updateElement:function(){this.$element.val(this.getTime()).change()},updateFromElementVal:function(){var e=this.$element.val();e&&this.setTime(e)},updateWidget:function(){if(this.$widget===!1)return;var e=this.hour<10?"0"+this.hour:this.hour,t=this.minute<10?"0"+this.minute:this.minute,n=this.second<10?"0"+this.second:this.second;this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(e),this.$widget.find("input.bootstrap-timepicker-minute").val(t),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(n),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(e),this.$widget.find("span.bootstrap-timepicker-minute").text(t),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(n),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))},updateFromWidgetInputs:function(){if(this.$widget===!1)return;var t=e("input.bootstrap-timepicker-hour",this.$widget).val()+":"+e("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+e("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+e("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setTime(t)},widgetClick:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("a").data("action");n&&this[n]()},widgetKeydown:function(t){var n=e(t.target).closest("input"),r=n.attr("name");switch(t.keyCode){case 9:if(this.showMeridian){if(r==="meridian")return this.hideWidget()}else if(this.showSeconds){if(r==="second")return this.hideWidget()}else if(r==="minute")return this.hideWidget();this.updateFromWidgetInputs();break;case 27:this.hideWidget();break;case 38:t.preventDefault();switch(r){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}break;case 40:t.preventDefault();switch(r){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}}}},e.fn.timepicker=function(t){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var r=e(this),s=r.data("timepicker"),o=typeof t=="object"&&t;s||r.data("timepicker",s=new i(this,e.extend({},e.fn.timepicker.defaults,o,e(this).data()))),typeof t=="string"&&s[t].apply(s,n)})},e.fn.timepicker.defaults={defaultTime:"current",disableFocus:!1,isOpen:!1,minuteStep:15,modalBackdrop:!1,secondStep:15,showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",appendWidgetTo:".bootstrap-timepicker"},e.fn.timepicker.Constructor=i})(jQuery,window,document)}),require.register("CNeditor/contactpopover",function(e,t,n){var r;n.exports=r=function(){function e(){this.el=document.createElement("DIV"),this.el.id="contactpopover",this.isOn=!1}return e.prototype.hide=function(){var e;return e=null,this.isOn&&(e=this.el.parentNode)&&e.removeChild(this.el),this.isOn=!1,e},e.prototype.show=function(e,t){var n,r,i,s,o;n=t.get("datapoints"),i='<dl class="dl-horizontal">';for(s=0,o=n.length;s<o;s++)r=n[s],i+=this.dp2html(r);return i+="</dl>",this.el.innerHTML=i,e.appendChild(this.el),this.isOn=!0},e.prototype.dp2html=function(e){var t,n,r;return n=e.value.replace("\n","<br />"),(r=e.name)==="other"||r==="about"?t=e.type:t=e.type+" "+e.name,"<dt>"+t+"</dt><dd>"+n+"</dd>"},e}()}),require.register("CNeditor/editor",function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,v,m,g,y=function(e,t){return function(){return e.apply(t,arguments)}},b=[].slice;p=t("./logging"),v=t("./md2cozy").md2cozy,g=t("./selection"),a=t("./hot-string"),h=t("./urlpopover"),u=t("./history"),l=t("./tags"),f=t("./line"),m=t("./realtimer"),o=t("./externalmodels"),r=o.Alarm,s=o.Contact,c=o.Task,n.exports=i=function(){function e(e,t){this._processPaste=y(this._processPaste,this),this._waitForPasteData=y(this._waitForPasteData,this),this._keyupCb=y(this._keyupCb,this),this._keypressCb=y(this._keypressCb,this),this._keyDownCb=y(this._keyDownCb,this),this.registerKeyDownCbForTest=y(this.registerKeyDownCbForTest,this),this._keyDownCbTry=y(this._keyDownCbTry,this),this._toggleTaskCB=y(this._toggleTaskCB,this),this._pasteCB=y(this._pasteCB,this),this._clickCB=y(this._clickCB,this),this._mouseupCb=y(this._mouseupCb,this),this._mousedownCb=y(this._mousedownCb,this),this.loadEditor=y(this.loadEditor,this);var n=this;return this.editorTarget=e,this.editorTarget$=$(this.editorTarget),this._internalTaskCounter=0,this._taskList=[],this._tasksToBeSaved={},this._tasksModifSinceLastHistory={},o.initialize(function(e){e&&console.log(e),m.watch(o.contactCollection);if(n.editorTarget.nodeName==="IFRAME")return n.isInIframe=!0,n.editorTarget$.on("load",function(){return n.loadEditor(t)}),n.editorTarget.src="";if(n.editorTarget.nodeName==="DIV")return n.isInIframe=!1,n.loadEditor(t)}),this}return e.prototype.loadEditor=function(e){var t,n,r;return this.isInIframe?(r=this.editorTarget$.contents().find("html"),this.editorBody$=r.find("body"),n=r.find("head"),t='<link id="editorCSS" ',t+='href="stylesheets/CNeditor.css" rel="stylesheet">',n.html(t)):this.editorBody$=this.editorTarget$,this.editorBody=this.editorBody$[0],this.document=this.editorBody.ownerDocument,this.linesDiv=document.createElement("div"),this.linesDiv.setAttribute("id","editor-lines"),this.linesDiv.setAttribute("class","editor-frame"),this.linesDiv.contentEditable=!0,this.editorBody$.append(this.linesDiv),this.isInIframe&&(this.linesDiv.style.overflowY="auto",this.linesDiv.style.position="absolute",this.linesDiv.style.top=0,this.linesDiv.style.bottom=0,this.linesDiv.style.right=0,this.linesDiv.style.left=0),this._initClipBoard(),this.urlPopover=new h(this),this._hotString=new a(this),this._hotString.realtimeContacts(o.contactCollection),this.Tags=new l(this,o),this._lines={},this.newPosition=!0,this._highestId=0,this._deepest=1,this.isEnabled=!0,this._history=new u(this),this._lastKey=null,this.currentSel={sel:this.getEditorSelection()},this.isFirefox="MozBoxSizing"in document.documentElement.style,this.isSafari=Object.prototype.toString.call(window.HTMLElement),this.isSafari=this.isSafari.indexOf("Constructor")>0,this.isChrome=!this.isSafari&&"WebkitTransform"in document.documentElement.style,this.isChromeOrSafari=this.isChrome||this.isSafari,this.linesDiv.addEventListener("drop",function(e){return e.preventDefault()}),this._registerEventListeners(),e.call(this)},e.prototype._mousedownCb=function(e){var t,n;if(!this.isEnabled)return!0;this._hotString.isPreparing&&this._hotString.mouseDownCb(e),t=this.getEditorSelection().getRangeAt(0).startContainer,n=g.getSegment(e.target,0);if(!n.dataset.type)return this.Tags.setTagUnEditable()},e.prototype._mouseupCb=function(e){var t,n,r,i,s,o,u,a,f,l;if(!this.isEnabled)return!0;this.newPosition=!0,this.Tags.setTagEditable();if(this._hotString.isPreparing&&this._hotString.isInAuto(e.target))return this._hotString.mouseUpInAutoCb(e),!0;n=this.getEditorSelection().getRangeAt(0),r=g.getSegment(n.startContainer),t=g.getSegment(n.endContainer),((i=r.dataset)!=null?i.type:void 0)==="taskBtn"?this._setCaret(r.nextSibling,0):((s=t.dataset)!=null?s.type:void 0)==="taskBtn"&&this._setCaret(t.nextSibling,0),((o=r.dataset)!=null?o.type:void 0)&&((u=t.dataset)!=null?!u.type:!void 0)?(this.setSelection(n.startContainer,n.startOffset,r,r.childNodes.length),t=r):((a=r.dataset)!=null?!a.type:!void 0)&&((f=t.dataset)!=null?f.type:void 0)&&(this.setSelection(t,0,n.endContainer,n.endOffset),r=t),this._hotString.isPreparing&&r!==this._hotString._hsSegment&&this._hotString.reset("current");switch((l=r.dataset)!=null?l.type:void 0){case"reminder":case"htag":this._hotString.isPreparing||(n=this.getEditorSelection().getRangeAt(0),this._hotString.edit(r,n))}return!0},e.prototype._clickCB=function(e){var t,n;return this.isEnabled?(console.info("== editor._clickCB()"),this._lastKey=null,this.updateCurrentSel(),t=this._getLinkSegments(),t&&(e.ctrlKey?(n=t[0].href,window.open(n,"_blank")):this.urlPopover.show(t,!1),e.stopPropagation(),e.preventDefault()),this.Tags.clickCb(e),this.hotString.isPreparing&&this.hotString.reInit(),!0):!0},e.prototype._pasteCB=function(e){return this.isEnabled?this.paste(e):!0},e.prototype._registerEventListeners=function(){return this.linesDiv.addEventListener("keydown",this._keyDownCbTry,!0),this.linesDiv.addEventListener("keyup",this._keyupCb,!1),this.linesDiv.addEventListener("keypress",this._keypressCb),this.linesDiv.addEventListener("mouseup",this._mouseupCb,!0),this.linesDiv.addEventListener("mousedown",this._mousedownCb,!0),this.editorBody$.on("click",this._clickCB),this.editorBody$.on("paste",this._pasteCB)},e.prototype.disable=function(){return this.isEnabled=!1},e.prototype.enable=function(){return this.isEnabled=!0},e.prototype.setFocus=function(){return this.linesDiv.focus()},e.prototype.getEditorSelection=function(){return this.document.getSelection()},e.prototype.saveEditorSelection=function(){return this.serializeSel()},e.prototype._initTaskContent=function(e){var t,n,r;t=e.firstChild.nextSibling;while(t.nodeName!=="BR")t=t.nextSibling,e.removeChild(t.previousSibling);return n=this.document.createElement("SPAN"),n.className="CNE_task",r=this.document.createTextNode("A new task"),n.appendChild(r),e.insertBefore(n,t),this._setSelectionOnNode(r),this._history.addStep()},e.prototype._turnIntoTask=function(e){return e==null&&(e=this.updateCurrentSel().startLineDiv),this._turneLineIntoTask(e)},e.prototype._turneLineIntoTask=function(e){var t,n;return o.taskCanBeUsed?(t=this.document.createElement("SPAN"),t.className="CNE_task_btn",t.dataset.type="taskBtn",this.Tags.handle(t),this.isChromeOrSafari?n=this.document.createTextNode(" "):n=this.document.createTextNode(" "),t.appendChild(n),t.addEventListener("click",this._toggleTaskCB),e.insertBefore(t,e.firstChild),e.dataset.type="task",e.dataset.state="undone",this._createTaskForLine(e),e):!1},e.prototype._turneTaskIntoLine=function(e){var t;return t=e.firstChild,t.removeEventListener("click",this._toggleTaskCB),this.Tags.remove(t),e.removeChild(t),e.task=null,e.dataset.type="",e.dataset.state="",e.dataset.id=""},e.prototype._toggleTaskCB=function(e){var t,n;return this._history.addStep(),n=g.getLineDiv(e.target),t=n.firstChild,n.dataset.state==="done"?(n.dataset.state="undone",this._setCaret(t.nextSibling,0),this._stackTaskChange(n.task,"undone")):(n.dataset.state="done",this._setCaret(t.nextSibling,0),this._stackTaskChange(n.task,"done")),this.editorTarget$.trigger(jQuery.Event("onChange")),n},e.prototype._detectTaskChange=function(){var e,t,n;return t=this.currentSel.startLineDiv,t?e=this.currentSel.isStartInTask:(n=this.updateCurrentSel(),t=n.startLineDiv,e=n.isStartInTask),e&&this._stackTaskChange(t.task,"modified"),!0},e.prototype._createTaskForLine=function(e,t){var n;return n=new c({description:e.textContent.slice(1)}),e.task=n,n.lineDiv=e,this._taskList.push(n),t?n.internalId=e.dataset.id:(this._internalTaskCounter+=1,n.internalId="CNE_task_id_"+this._internalTaskCounter,this._stackTaskChange(n,"created"),e.dataset.id=n.internalId),n},e.prototype._setTaskToLine=function(e){var t,n,r,i,s,o,u=this;t=e.firstChild,t.addEventListener("click",this._toggleTaskCB),n=e.dataset.id,o=this._taskList;for(i=0,s=o.length;i<s;i++){r=o[i];if(r.internalId===n)return e.task=r,r.lineDiv=e,!0}return n.slice(0,12)==="CNE_task_id_"?(this._turneTaskIntoLine(e),this.editorTarget$.trigger(jQuery.Event("onChange"))):(r=new c({id:n}),this._internalTaskCounter+=1,r.internalId="CNE_task_id_"+this._internalTaskCounter,e.task=r,r.lineDiv=e,r.fetch({silent:!0}).done(function(){return r.isFromServer=!0,m.watchOne(r),u._updateTaskLine(r)}).fail(function(e){return e.status===404?u._turneTaskIntoLine(r.lineDiv):(r.set({done:r.lineDiv.dataset.state==="done",description:r.lineDiv.firstChild.nextSibling.textContent},{silent:!0}),r.isFromServer=!1)}),r.on("change",function(e){return e.isFromServer=!0,u._updateTaskLine(e)}),r.on("destroy",function(e){return u._turneTaskIntoLine(e.lineDiv)}),this._taskList.push(r)),!0},e.prototype._updateTaskLine=function(e,t){var n,r,i;return t?n=e.previousAttributes():n=e.attributes,console.info(n),e.lineDiv.firstChild.nextSibling.textContent=n.description,r=e.lineDiv.dataset.state==="done",n.done?i="done":i="undone",r!==i&&(e.lineDiv.dataset.state=i),!0},e.prototype._stackTaskChange=function(e,t){console.info("== editor._stackTaskChange() "+t,e.internalId),this._stackTaskForSave(e.internalId,e,t);switch(t){case"modified":case"done":case"undone":this._tasksModifSinceLastHistory[e.internalId]={t:e,a:"modified"};break;case"created":this._tasksModifSinceLastHistory[e.internalId]={t:e,a:"created"}}return p.printTasksModifStacks("_stackTaskChange",this._tasksToBeSaved),!0},e.prototype._stackTaskForSave=function(e,t,n){var r;r=this._tasksToBeSaved[e],this._tasksToBeSaved[e]||(r={t:t},this._tasksToBeSaved[e]=r);switch(n){case"modified":case"done":case"undone":r.modified=!0;break;case"created":r.deleted?(r.deleted=!1,r.created=!1,r.modified=!0):r.created=!0;break;case"deleted":r.created?(r.deleted=!1,r.created=!1):r.deleted=!0;break;case"removed":r.removed=!0}return!0},e.prototype.saveTasks=function(){var e,t,n,r,i,s,o,u,a,f,l=this;console.info("== saveTasks()"),a=this._tasksToBeSaved;for(t in a){i=a[t];if(i.deleted)i.t.destroy({silent:!0});else{if(i.created&&i.deleted)continue;if(i.removed)continue;if(i.modified&&!i.created)s=i.t,n=s.lineDiv,s.save({done:n.dataset.state==="done",description:n.textContent.slice(1)},{ignoreMySocketNotification:!0,silent:!0,error:function(e){return window.alert("Cozy Todo is not responding, save of tasks is not possible so we cancel modifications."),l._updateTaskLine(e,!0)}}),s.isFromServer=!1;else if(i.created&&!i.t.id)this._saveTaskCreation(i.t);else if(i.created&&i.t.id){e=this._taskList,f=this._taskList;for(e=o=0,u=f.length;o<u;e=++o){s=f[e];if(s.internalId===t){this._taskList.splice(e,1);break}}r=this.linesDiv.querySelectorAll("div[data-id='"+i.t.internalId+"']")[0],s=this._createTaskForLine(r,!0),i.t=s,this._replaceInTaskHistory(s),this._saveTaskCreation(s)}}}return this._tasksToBeSaved={}},e.prototype._saveTaskCreation=function(e){var t,n=this;return t=e.lineDiv,e.save({done:t.dataset.state==="done",description:t.textContent.slice(1)},{ignoreMySocketNotification:!0,silent:!0,success:function(e){return m.watchOne(e),n.editorTarget$.trigger(jQuery.Event("onChange")),e.lineDiv.dataset.id=e.id,e.on("change",function(){return e.isFromServer=!0,n._updateTaskLine(e)}),e.on("destroy",function(e){return n._turneTaskIntoLine(e.lineDiv)})},error:function(e){return window.alert("Cozy Todo is not responding, save of tasks is not possible so we cancel the task creation."),n._turneTaskIntoLine(e.lineDiv)}}),e.isFromServer=!1},e.prototype._isTaskUnchanged=function(e){var t,n;return n=!0,t=e.lineDiv,n=n&&e.get("done")===(t.dataset.state==="done"),n=n&&e.get("description")===t.textContent.slice(1),n},e.prototype._isStartingWord=function(){var e,t,n,r,i;r=this.updateCurrentSelIsStartIsEnd(),t=r.theoricalRange;if(r.rangeIsStartLine)return!0;if(t.startOffset===0){n=t.cloneRange(),n.collapse(),n.setStart(g._getLineDiv(n.startContainer),0),i=n.toString();if(i.length===0)return!0;e=text.slice(-1)}else e=t.startContainer.textContent.substr(t.startOffset-1,1);return e.charCodeAt(0)===32||e.charCodeAt(0)===160?!0:!1},e.prototype.getCurrentAllowedInsertions=function(){var e,t,n;return e=this.updateCurrentSel().startLineDiv,n=[],e.dataset.type==="task"?n:(t='[data-type="contact"], [data-type="reminder"]',o.taskCanBeUsed&&!e.querySelector(t)&&n.push("todo"),o.contactCanBeUsed&&n.push("contact"),o.alarmCanBeUsed&&n.push("reminder"),n)},e.prototype._updateDeepest=function(){var e,t,n,r;n=1,t=this._lines,r=[];for(e in t)this.editorBody$.children("#"+(""+t[e].lineID)).length>0&&t[e].lineType==="Th"&&t[e].lineDepthAbs>n?r.push(n=this._lines[e].lineDepthAbs):r.push(void 0);return r},e.prototype.setReminderCf=function(e,t){return r.setDefaultCf(e,t)},e.prototype.replaceContent=function(e,t){var n;return t&&(e=e.replace(/>[\n ]*</g,"><")),(n=this.urlPopover)!=null&&n.cancel(),this.linesDiv.innerHTML=e,this._taskList=[],this._readHtml(!0),this._setCaret(this.linesDiv.firstChild.firstChild,0,!0),this.newPosition=!0,this.hotString=""},e.prototype.deleteContent=function(){var e;return e='<div id="CNID_1" class="Tu-1"><span></span><br></div>',this.replaceContent(e)},e.prototype.getEditorContent=function(){var e,t,n,r,i,s,o,u,a,f;this.Tags.contactPopover.hide();if(this._hotString.isPreparing||this.urlPopover.isOn){e=this.linesDiv.cloneNode(!0),this._hotString.isPreparing&&(r=e.querySelector(".CNE_hot_string"),r.classList.remove("CNE_hot_string"),t=r.parentElement,r.textContent="",this._fusionSimilarSegments(t,[]),r=e.querySelector("#CNE_autocomplete"),r.parentElement.removeChild(r));if(this.urlPopover.isOn){r=e.querySelector("#CNE_urlPopover"),r.parentElement.removeChild(r),i=e.querySelectorAll(".CNE_url_in_edition");for(o=0,a=i.length;o<a;o++)n=i[o],n.classList.remove("CNE_url_in_edition");if(this.urlPopover.isLinkCreation){t=g._getLineDiv(i[0]);for(u=0,f=i.length;u<f;u++)n=i[u],this._applyAhrefToSegments(n,n,[],!1,"");this._fusionSimilarSegments(t,[])}}s=e.innerHTML}else s=this.linesDiv.innerHTML;return s},e.prototype.setEditorContent=function(e){return this.replaceContent(e)},e.prototype.setEditorContentFromMD=function(e){var t;return t=v.md2cozy(e),this.replaceContent(t)},e.prototype.getShortCut=function(e){var t,n,r,i,s;i=(e.altKey?"Alt":"")+(e.ctrlKey?"Ctrl":"")+(e.shiftKey?"Shift":""),r=e.keyCode;switch(r){case 13:n="return",t=!0;break;case 16:n="shift",t=!0;break;case 17:n="ctrl",t=!0;break;case 18:n="alt",t=!0;break;case 35:n="end",t=!0;break;case 36:n="home",t=!0;break;case 33:n="pgUp",t=!0;break;case 34:n="pgDwn",t=!0;break;case 37:n="left",t=!0;break;case 38:n="up",t=!0;break;case 39:n="right",t=!0;break;case 40:n="down",t=!0;break;case 9:n="tab",t=!0;break;case 8:n="backspace",t=!0;break;case 32:n="space",t=!0;break;case 27:n="esc",t=!0;break;case 46:n="suppr",t=!0;break;default:t=!1,r=e.which;switch(r){case 32:n="space";break;case 8:n="backspace";break;case 65:n="A";break;case 66:n="B";break;case 67:n="C";break;case 85:n="U";break;case 75:n="K";break;case 76:n="L";break;case 83:n="S";break;case 86:n="V";break;case 88:n="X";break;case 89:n="Y";break;case 90:n="Z";break;default:n="other"}}return s=i+"-"+n,(i===""||i==="Shift")&&(n==="A"||n==="B"||n==="C"||n==="X"||n==="U"||n==="K"||n==="L"||n==="S"||n==="V"||n==="Y"||n==="Z")&&(n="other"),this._shortcut={meta:i,key:n,isAction:t,shortcut:s,keyCode:r}},e.prototype._keyDownCbTry=function(e){var t;if(!this.isEnabled)return;try{return this._keyDownCb(e)}catch(n){return t=n,alert("A bug occured, we prefer to undo your last action to be safe.\n\nMessage :\n"+t),console.log(t.stack),e.preventDefault(),this.unDo()}},e.prototype.registerKeyDownCbForTest=function(){return this.linesDiv.removeEventListener("keydown",this._keyDownCbTry,!0),this.linesDiv.addEventListener("keydown",this._keyDownCb,!0)},e.prototype._keyDownCb=function(e){var t,n,r,i,s;if(!this.isEnabled)return!0;this.getShortCut(e),i=this._shortcut.shortcut,t=this._lastKey,this._lastKey=i,this.currentSel={sel:null,range:null,startLine:null,endLine:null,rangeIsStartLine:null,rangeIsEndLine:null,startBP:null,endBP:null};if(this._hotString.isPreparing&&this._hotString.keyDownCb(i))return e.preventDefault(),!1;e.keyCode===16&&(n=this.getEditorSelection().getRangeAt(0),g.getSegment(n.startContainer,0).dataset.type||this.Tags.setTagUnEditable());switch(this._shortcut.key){case"up":case"down":case"left":case"right":case"pgUp":case"pgDwn":case"end":case"home":if(!e.altKey&&(e.shiftKey||!e.shiftKey&&!e.ctrlrlKey))return this.newPosition=!0,!0;break;case"other":case"space":s=e.ctrlKey&&e.altKey;if(s)return!0;if(!e.ctrlKey&&!e.altKey)return this.newPosition?this._history.addStep():t==="-space"&&i!=="-space"&&this._history.addStep(),this.newPosition&&(r=this.updateCurrentSel(),r.theoricalRange.collapsed||this._backspace(),this.newPosition=!1),this.editorTarget$.trigger(jQuery.Event("onChange")),this._detectTaskChange(),!0}switch(i){case"-return":return this._chromeCorrection(),t!==i&&this._history.addStep(),this.updateCurrentSelIsStartIsEnd(),this.currentSel.isStartInTask&&t===i&&this._history.addStep(),this._return(),this.newPosition=!1,e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"-backspace":return t!==i&&this._history.addStep(),this.updateCurrentSelIsStartIsEnd(),this._backspace(),this.newPosition=!0,e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"-tab":return this._history.addStep(),this.tab(),e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"Shift-tab":return this._history.addStep(),this.shiftTab(),e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"-suppr":return t!==i&&this._history.addStep(),this.updateCurrentSelIsStartIsEnd(),this._suppr(e),e.preventDefault(),this.newPosition=!0,this.editorTarget$.trigger(jQuery.Event("onChange"));case"CtrlShift-down":return t!==i&&this._history.addStep(),e.preventDefault();case"CtrlShift-up":return t!==i&&this._history.addStep(),e.preventDefault();case"Ctrl-A":return g.selectAll(this),e.preventDefault();case"Alt-L":return this._history.addStep(),this.markerList(),e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"Alt-A":return this._history.addStep(),this.toggleType(),e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"Ctrl-V":return this._history.addStep(),this.editorTarget$.trigger(jQuery.Event("onChange")),!0;case"Ctrl-B":return this._history.addStep(),this.strong(),e.preventDefault();case"Ctrl-K":return this.linkifySelection(),e.preventDefault();case"Ctrl-S":return this.editorTarget$.trigger(jQuery.Event("saveRequest")),e.preventDefault(),e.stopPropagation();case"Ctrl-Z":return this.unDo(),e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"Ctrl-Y":return this.reDo(),e.preventDefault(),this.editorTarget$.trigger(jQuery.Event("onChange"));case"Ctrl-C":case"Ctrl-X":break;default:return e.preventDefault()}},e.prototype._keypressCb=function(e){return this.isEnabled?this._hotString.keypressCb(e):!0},e.prototype._keyupCb=function(e){var t,n,r,i,s,o,u;if(!this.isEnabled)return!0;this.isChromeOrSafari&&this._chromeCorrection(),s=this.getEditorSelection().getRangeAt(0),o=g.getSegment(s.startContainer),n=g.getSegment(s.endContainer);if(o.dataset)switch(o.dataset.type){case"taskBtn":e.keyCode===37?(r=g.getLineDiv(o,0).previousSibling,r?(i=r.lastChild.previousSibling,this._setCaret(i,i.childNodes.length)):this._setCaret(o.nextSibling,0)):this._setCaret(o.nextSibling,0);break;case"contact":e.keyCode===37?this._setCaret(o.previousSibling.childNodes[0],o.previousSibling.childNodes[0].length-1):o.nextSibling.childNodes[0]?this._setCaret(o.nextSibling.childNodes[0],1):(t=this.insertSpaceAfterSeg(o),this._setCaret(t.cont,t.offset));break;case"reminder":case"htag":this._hotString.isPreparing||this._hotString.edit(o,s)}e.keyCode===16&&(this.Tags.setTagEditable(),o.dataset.type&&!n.dataset.type?(this.setSelection(s.startContainer,s.startOffset,o,o.childNodes.length),n=o):!o.dataset.type&&n.dataset.type&&(this.setSelection(n,0,s.endContainer,s.endOffset),o=n),this._hotString.isPreparing&&o!==this._hotString._hsSegment&&this._hotString.reset("current"));if(this._hotString.isPreparing)if(this._hotString._autoToBeShowed)this._hotString.showAutoAndHighLight();else if(!e.shiftKey||(u=e.keyCode)!==17&&u!==37&&u!==38&&u!==36&&u!==33&&u!==40&&u!==39&&u!==34&&u!==35)o===this._hotString._hsSegment?this._hotString.updateHs():(this._hotString.updateHs(),this._hotString.reset("current"));switch(this._shortcut.shortcut){case"Ctrl-S":case"Ctrl-other":return}return this.editorTarget$.trigger(jQuery.Event("onKeyUp")),!0},e.prototype._chromeCorrection=function(){var e,t;return e=this.updateCurrentSel(),t=e.startLine.line$[0],this._fixLine(t)},e.prototype._fixLine=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;u=e.childNodes,r=u.length,n=0;while(n<r){o=u[n];if(o.nodeName==="#text"){l=o.textContent,a=g.getPrevSegment(o);if(a){if((c=a.nodeName)!=="SPAN"&&c!=="A")throw new Error("A line should be constituted of                            only <span> and <a>");a.textContent+=l,this._setCaret(a,a.childNodes.length),e.removeChild(o),r-=1}else{s=g.getNextSegment(o);if(s)if((h=s.nodeName)==="SPAN"||h==="A"||h==="#text")s.textContent=l+s.textContent,this._setCaret(s.firstChild,l.length),e.removeChild(o),r-=1;else{if((p=s.nodeName)!=="#text")throw new Error("A line should be constituted of                                only <span> and <a>");s.textContent=l+s.textContent,this._setCaret(s,l.length),e.removeChild(o),r-=1}else i=document.createElement("span"),i.textContent=l,e.replaceChild(i,o),this._setCaret(i.firstChild,l.length),n+=1}}else o.nodeName==="BR"?(e.removeChild(o),r-=1):n+=1}return r===0&&(f=document.createElement("span"),f.textContent="",e.appendChild(f)),t=document.createElement("br"),e.appendChild(t),!0},e.prototype.updateCurrentSel=function(){var e,t,n,r,i,s,o,u,a,f,l;return o=this.getEditorSelection(),s=o.getRangeAt(0),this.newPosition||this.isChromeOrSafari?(l=g.normalize(s),i=l[0],r=l[1],f=document.createRange(),f.setStart(i.cont,i.offset),f.setEnd(r.cont,r.offset)):f=s,a=g.getLineDiv(s.startContainer),t=g.getLineDiv(s.endContainer),u=this._lines[a.id],e=this._lines[t.id],n=a.dataset.type==="task",this.currentSel={sel:o,range:s,startLineDiv:a,endLineDiv:t,isStartInTask:n,startLine:u,endLine:e,rangeIsStartLine:null,rangeIsEndLine:null,theoricalRange:f},this.currentSel},e.prototype.updateCurrentSelIsStartIsEnd=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x,T;return m=this.getEditorSelection(),p=m.getRangeAt(0),this.newPosition||this.isChromeOrSafari?(S=g.normalize(p),h=S[0],c=S[1],E=document.createRange(),E.setStart(h.cont,h.offset),E.setEnd(c.cont,c.offset)):E=p,y=p.startContainer,t=p.endContainer,o=p.startOffset,s=p.endOffset,x=g.getLineDivIsStartIsEnd(y,o),e=x.div,a=x.isStart,u=x.isEnd,b=e,w=this._lines[b.id],v=a,i=u,f=b.dataset.type==="task",T=g.getLineDivIsStartIsEnd(t,s),e=T.div,a=T.isStart,u=T.isEnd,n=e,r=this._lines[n.id],d=u,l=a,this.currentSel={sel:m,range:p,startLineDiv:b,endLineDiv:n,isStartInTask:f,startLine:w,endLine:r,rangeIsStartLine:v,rangeIsEndLine:d,firstLineIsEnd:i,lastLineIsStart:l,theoricalRange:E},this.currentSel},e.prototype.hasNoSelection=function(e){var t,n,r;r=this.getEditorSelection();if(!(r.rangeCount>0))return!0;n=r.getRangeAt(0);if(e&&n.collapsed)return!0;t=n.startContainer;while(t!==null){if(t===this.linesDiv)break;t=t.parentNode}if(t===null)return!0;t=n.endContainer;while(t===null){if(t===this.linesDiv)return!1;t=t.parentNode}if(t===null)return!0},e.prototype.strong=function(){var e;return!this.isEnabled||this.hasNoSelection(!0)||this._hotString.isPreparing?!0:(this._history.addStep(),e=this._applyMetaDataOnSelection("CNE_strong"),e?this.editorTarget$.trigger(jQuery.Event("onChange")):this._history.removeLastStep())},e.prototype.underline=function(){var e;return!this.isEnabled||this.hasNoSelection(!0)||this._hotString.isPreparing?!0:(this._history.addStep(),e=this._applyMetaDataOnSelection("CNE_underline"),e?this.editorTarget$.trigger(jQuery.Event("onChange")):this._history.removeLastStep())},e.prototype.linkifySelection=function(){var e,t,n,r;return!this.isEnabled||this.hasNoSelection()||this._hotString.isPreparing?!0:(e=this.updateCurrentSelIsStartIsEnd(),e.isStartInTask?!0:(t=e.theoricalRange,t.collapsed?(r=this._getLinkSegments(),r&&this.urlPopover.show(r,!1)):(r=this._getLinkSegments(),r?this.urlPopover.show(r,!1):(this._history.addStep(),this.urlPopover.isOn=!0,n=this._applyMetaDataOnSelection("A","http://"),n?(r=this._getLinkSegments(n),this.urlPopover.show(r,!0)):this.urlPopover.isOn=!0)),!0))},e.prototype._getLinkSegments=function(e){var t,n,r;e||(e=this.currentSel.theoricalRange),t=g.getSegment(e.startContainer,e.startOffset),n=[t];if(t.nodeName==="A"){r=t.nextSibling;while(r!==null&&r.nodeName==="A"&&r.href===t.href)n.push(r),r=r.nextSibling;n.reverse(),r=t.previousSibling;while(r!==null&&r.nodeName==="A"&&r.href===t.href)n.push(r),r=r.previousSibling;return n.reverse(),n}return!1},e.prototype.emulateAt=function(){var e,t;return e=this.updateCurrentSelIsStartIsEnd(),t=e.endLine.line$[0].lastChild.previousSibling,t.innerHTML+="@",this._keypressCb({which:64}),this._setCaret(t,t.childNodes.length),this._hotString.showAutoAndHighLight()},e.prototype._applyMetaDataOnSelection=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,y,w,E,S,x,T,N;f=arguments[0],c=2<=arguments.length?b.call(arguments,1):[],i=this.updateCurrentSelIsStartIsEnd(),p=i.theoricalRange;if(p.collapsed)return;u=i.startLine,s=i.endLine;if(p.startContainer.length!==0&&p.startContainer.length===p.startOffset){w=g.getNestedSegment(p.startContainer),l=g.getNextSegment(w);if(l)p.setStartBefore(l.firstChild),d=!0;else{u=u.lineNext;if(u===null)return;p.setStartBefore(u.line$[0].firstChild),d=!0}}if(p.endContainer.length!==0&&p.endOffset===0){w=g.getNestedSegment(p.endContainer),h=g.getPrevSegment(w);if(h)p.setEndAfter(h.lastChild),d=!0;else{s=s.linePrev;if(s===null)return;p.setEndAfter(s.line$[0].lastChild),d=!0;if(p.collapsed)return}}if(d){g.normalize(p);if(p.collapsed)return}if(f==="A"&&u!==s){p.setEndBefore(u.line$[0].lastChild),g.normalize(p),s=u;if(p.collapsed)return}if(u===s)a=[p];else{y=p.cloneRange(),y.setEndBefore(u.line$[0].lastChild),g.normalize(y),a=[y],u=u.lineNext;while(u!==s)v=this.document.createRange(),v.selectNodeContents(u.line$[0]),g.normalize(v),a.push(v),u=u.lineNext;m=p.cloneRange(),m.setStartBefore(s.line$[0].firstChild),g.normalize(m),a.push(m)}o=!0;for(S=0,T=a.length;S<T;S++)p=a[S],o=o&&this._checkIfMetaIsEverywhere(p,f,c);e=!o,r=[];for(x=0,N=a.length;x<N;x++)p=a[x],r.push(this._applyMetaOnLineRange(p,e,f,c));return v=this.document.createRange(),t=r[0][0],n=r[r.length-1][1],v.setStart(t.cont,t.offset),v.setEnd(n.cont,n.offset),E=this.currentSel.sel,E.removeAllRanges(),E.addRange(v),v},e.prototype._checkIfMetaIsEverywhere=function(e,t,n){return t==="A"?this._checkIfAhrefIsEverywhere(e,n[0]):this._checkIfCSSIsEverywhere(e,t)},e.prototype._checkIfCSSIsEverywhere=function(e,t){var n,r,i;r=e.startContainer.parentNode,n=e.endContainer.parentNode,i=r===n;for(;;){if(!r.classList.contains(t))return!1;if(i)return!0;r=r.nextSibling,i=r===n}},e.prototype._checkIfAhrefIsEverywhere=function(e,t){var n,r,i;r=e.startContainer.parentNode,n=e.endContainer.parentNode,i=r===n;for(;;){if(r.nodeName!=="A"||r.href!==t)return!1;if(i)return!0;r=r.nextSibling,i=r===n}},e.prototype._applyMetaOnLineRange=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v;h=g.getLineDiv(e.startContainer,e.startOffset),v=e.startContainer.parentNode,a=e.endContainer.parentNode,i={cont:e.startContainer,offset:e.startOffset},s={cont:e.endContainer,offset:e.endOffset},u=[i,s];if(i.offset!==0)if(i.offset===i.cont.length){v=v.nextSibling;if(v===null||v.nodeName==="BR")return}else{c=this._isAlreadyMeta(v,n,r);if(c&&!t||!c&&t)p=e.cloneRange(),a===v?(f=p.extractContents(),d=document.createElement(v.nodeName),v.className!==""&&(d.className=v.className),v.nodeName==="A"&&(d.href=v.href),d=f.appendChild(d),d.appendChild(f.firstChild),p.setEndAfter(v),l=p.extractContents(),l.textContent!==""&&p.insertNode(l),p.insertNode(f),v=d,a=v,i.cont=v.firstChild,i.offset=0,s.cont=a.lastChild,s.offset=a.lastChild.length):(p.setEndAfter(v),f=p.extractContents(),v=f.firstChild,i.cont=v.firstChild,i.offset=0,p.insertNode(f))}if(s.offset!==s.cont.length)if(s.offset===0){a=a.previousSibling;if(a===null)return}else{c=this._isAlreadyMeta(a,n,r);if(c&&!t||!c&&t)p=e.cloneRange(),p.setStartBefore(a),f=p.extractContents(),a===v&&(v=f.firstChild,i.cont=v.firstChild,i.offset=0),a=f.firstChild,s.cont=a.lastChild,s.offset=a.lastChild.length,p.insertNode(f)}return n==="A"?(o=[i,s],this._applyAhrefToSegments(v,a,o,t,r[0])):this._applyCssToSegments(v,a,t,n),this._fusionSimilarSegments(h,u),h.dataset.type==="task"&&(this.urlPopover.isOn||this._stackTaskChange(h.task,"modified")),[i,s]},e.prototype._isAlreadyMeta=function(e,t,n){return t==="A"?e.nodeName==="A"&&e.href===n[0]:e.classList.contains(t)},e.prototype._applyAhrefToSegments=function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p;u=e,f=u===t;for(;;){if(r)if(u.nodeName==="A")u.href=i;else{s=document.createElement("A"),s.href=i,s.textContent=u.textContent,s.className=u.className;for(l=0,h=n.length;l<h;l++)o=n[l],o.cont.parentNode===u&&(o.cont=s.firstChild);u.parentNode.replaceChild(s,u),u=s}else{a=document.createElement("SPAN"),a.textContent=u.textContent,a.className=u.className;for(c=0,p=n.length;c<p;c++)o=n[c],o.cont.parentNode===u&&(o.cont=a.firstChild);u.parentNode.replaceChild(a,u),u=a}if(f)break;u=u.nextSibling,f=u===t}return null},e.prototype._applyCssToSegments=function(e,t,n,r){var i,s;i=e,s=i===t;for(;;){n?i.classList.add(r):i.classList.remove(r);if(s)break;i=i.nextSibling,s=i===t}return null},e.prototype._fusionSimilarSegments=function(e,t){var n,r;r=e.firstChild,n=r.nextSibling;if(n.nodeName==="BR")return t;while(n.nodeName!=="BR")g.isSegment(r)?r.textContent===""?(r=this._removeSegment(r,t),g.normalizeBPs(t),n=r.nextSibling):this._haveSameMeta(r,n)?(this._fusionSegments(r,n,t),n=r.nextSibling):(r=n,n=n.nextSibling):(r=n,n=n.nextSibling);return r.textContent===""&&g.getSegmentIndex(r)[0]!==0&&(r=this._removeSegment(r,t),g.normalizeBPs(t)),t},e.prototype._removeSegment=function(e,t){var n,r,i,s,o,u,a;if(t.length>0)for(s=0,u=t.length;s<u;s++)n=t[s],n.seg=g.getNestedSegment(n.cont);for(o=0,a=t.length;o<a;o++)n=t[o],n.seg===e&&(i=g.getNodeIndex(e),n.cont=e.parentNode,n.offset=i);return r=e.previousSibling,r||(r=e.nextSibling),e.parentNode.removeChild(e),r},e.prototype._fusionSegments=function(e,t,n){var r,i,s,o,u,a,f,l,c,h;s=Array.prototype.slice.call(t.childNodes),h=t.childNodes;for(a=0,l=h.length;a<l;a++)i=h[a],e.appendChild(i);o=e.firstChild,u=o.nextSibling;while(u!==null)if(o.nodeName==="#text"&&"#text"===u.nodeName){for(f=0,c=n.length;f<c;f++)r=n[f],r.cont===u&&(r.cont=o,r.offset=o.length+r.offset);o.textContent+=u.textContent,e.removeChild(u),u=o.nextSibling}else o=e.firstChild,u=o.nextSibling;return t.parentNode.removeChild(t),!0},e.prototype._haveSameMeta=function(e,t){var n,r,i,s,o;if(e.nodeName!==t.nodeName)return!1;if(e.nodeName==="A"&&e.href!==t.href)return!1;r=e.classList,i=t.classList;if(r.length!==i.length)return!1;if(r.length===0)return!0;for(s=0,o=i.length;s<o;s++){n=i[s];if(!r.contains(n))return!1}return!0},e.prototype._suppr=function(){var e,t,n,r,i,s,o;return n=this.currentSel,r=n.startLine,n.range.collapsed?n.rangeIsEndLine?r.lineNext!==null&&(n.startLineDiv.nextSibling.dataset.type==="task"&&(t=window.confirm("Do you want to remove                            the task from todos ?"),t?(this._history.addStep(),this._stackTaskChange(n.startLineDiv.nextSibling.task,"deleted")):(this._history.addStep(),this._stackTaskChange(n.startLineDiv.nextSibling.task,"removed")),this._turneTaskIntoLine(n.startLineDiv.nextSibling)),n.range.setEndBefore(r.lineNext.line$[0].firstChild),g.normalize(n.range),n.theoricalRange=n.range.cloneRange(),n.endLine=r.lineNext,this._deleteMultiLinesSelections()):(s=n.range.startContainer,i=n.range.startOffset,i===s.length&&(e=g.setBpNextSegEnd(s),s=e.cont,i=e.offset),o=s.textContent,s.textContent=o.substr(0,i)+o.substr(i+1),e={cont:s,offset:i},s.textContent.length===0&&this._fusionSimilarSegments(r.line$[0],[e]),this._setCaret(e.cont,e.offset),n.isStartInTask&&this._stackTaskChange(n.startLineDiv.task,"modified")):n.endLine===r?(this.Tags.removeFromRange(n.theoricalRange),n.range.deleteContents(),e={cont:n.range.startContainer,offset:n.range.startOffset},this._fusionSimilarSegments(n.startLine.line$[0],[e]),this._setCaret(e.cont,e.offset),n.isStartInTask&&this._stackTaskChange(n.startLineDiv.task,"modified")):this._deleteMultiLinesSelections(),!1},e.prototype._backspace=function(){var e,t,n,r,i,s,o,u;r=this.currentSel,i=r.startLine;if(r.range.collapsed)if(r.rangeIsStartLine)i.linePrev!==null&&(r.isStartInTask&&(n=window.confirm("Do you want to remove the                                                 task from todos?"),n?(this._history.addStep(),this._stackTaskChange(r.startLineDiv.task,"deleted")):(this._history.addStep(),this._stackTaskChange(r.startLineDiv.task,"removed"),this._turneTaskIntoLine(r.startLineDiv),this._setCaret(r.startLineDiv,0))),t=r.range.cloneRange(),t.setStartBefore(i.linePrev.line$[0].lastChild),g.normalize(t),r.theoricalRange=t,r.startLine=i.linePrev,this._deleteMultiLinesSelections());else{o=r.range.startContainer,s=r.range.startOffset;if(s===0||s===1&&o.textContent.charCodeAt(0)===160)e=g.setBpPreviousSegEnd(o),o=e.cont,s=e.offset;if(o.parentNode.dataset.type==="contact"){o.parentNode.parentNode.removeChild(o.parentNode);return}u=o.textContent,o.textContent=u.substr(0,s-1)+u.substr(s),e={cont:o,offset:s-1},o.textContent.length===0&&this._fusionSimilarSegments(r.startLine.line$[0],[e]),this._setCaret(e.cont,e.offset),r.isStartInTask&&this._stackTaskChange(r.startLineDiv.task,"modified")}else r.endLine===i?(this.Tags.removeFromRange(r.theoricalRange),r.range.deleteContents(),e={cont:r.range.startContainer,offset:r.range.startOffset},this._fusionSimilarSegments(r.startLine.line$[0],[e]),this._setCaret(e.cont,e.offset),r.isStartInTask&&this._stackTaskChange(r.startLineDiv.task,"modified")):this._deleteMultiLinesSelections();return!0},e.prototype.titleList=function(e){var t,n,r,i,s,o,u;if(!this.isEnabled||this.hasNoSelection())return!0;this._history.addStep(),e!=null?(o=e.lineID,n=o):(i=this.getEditorSelection().getRangeAt(0),s=g.getLineDiv(i.startContainer,i.startOffset),t=g.getLineDiv(i.endContainer,i.endOffset),o=s.id,n=t.id),r=this._lines[o],u=[];for(;;){switch(r.lineType){case"Tu":case"To":this._toggleLineType(r);break;case"Lh":r.setType("Th");break;case"Lu":r.setType("Tu"),this._toggleLineType(r)}if(r.lineID===n)break;u.push(r=r.lineNext)}return u},e.prototype.markerList=function(e){var t,n,r,i,s,o,u;if(!this.isEnabled||this.hasNoSelection())return!0;this._history.addStep(),e!=null?(o=e.lineID,n=o):(i=this.getEditorSelection().getRangeAt(0),s=g.getLineDiv(i.startContainer,i.startOffset),t=g.getLineDiv(i.endContainer,i.endOffset),o=s.id,n=t.id),r=this._lines[o],u=[];for(;;){switch(r.lineType){case"Th":case"To":this._toggleLineType(r);break;case"Lh":case"Lo":r.setTypeDepth("Tu",r.lineDepthAbs+1);break;case"Lu":r.setType("Tu")}if(r.lineID===n)break;u.push(r=r.lineNext)}return u},e.prototype._findDepthRel=function(e){var t;if(e.lineDepthAbs===1)return e.lineType[1]==="h"?0:1;t=e.linePrev;while(t!==null&&t.lineDepthAbs>=e.lineDepthAbs)t=t.linePrev;return t!==null?t.lineDepthRel+1:0},e.prototype.toggleType=function(){var e,t,n,r,i,s,o,u,a;if(!this.isEnabled||this.hasNoSelection())return!0;this._history.addStep(),u=this.getEditorSelection(),o=u.getRangeAt(0),a=g.getLineDiv(o.startContainer,o.startOffset),r=g.getLineDiv(o.endContainer,o.endOffset),i=r.id,s=this._lines[a.id],t={},e=s.lineDepthAbs,t[e]=!1;for(;;){t[e]||(n=this._toggleLineType(s),t[s.lineDepthAbs]=n);if(s.lineID===r.id)return;s=s.lineNext,s.lineDepthAbs<e?(t[e]=!1,e=s.lineDepthAbs):e=s.lineDepthAbs}},e.prototype._toggleLineType=function(e){var t,n;switch(e.lineType){case"Tu":n="Th",t=e.lineNext;while(t!==null&&t.lineDepthAbs>=e.lineDepthAbs){if(t.lineDepthAbs===e.lineDepthAbs)if(t.lineType==="Tu")t.setType("Th");else{if(t.lineType!=="Lu")break;t.setType("Lh")}t=t.lineNext}t=e.linePrev;while(t!==null&&t.lineDepthAbs>=e.lineDepthAbs){if(t.lineDepthAbs===e.lineDepthAbs)if(t.lineType==="Tu")t.setType("Th");else{if(t.lineType!=="Lu")break;t.setType("Lh")}t=t.linePrev}break;case"Th":n="Tu",t=e.lineNext;while(t!==null&&t.lineDepthAbs>=e.lineDepthAbs){if(t.lineDepthAbs===e.lineDepthAbs)if(t.lineType==="Th")t.setType("Tu");else{if(t.lineType!=="Lh")break;t.setType("Lu")}t=t.lineNext}t=e.linePrev;while(t!==null&&t.lineDepthAbs>=e.lineDepthAbs){if(t.lineDepthAbs===e.lineDepthAbs)if(t.lineType==="Th")t.setType("Tu");else{if(t.lineType!=="Lh")break;t.setType("Lu")}t=t.linePrev}break;case"Lu":n="Tu";break;case"Lh":n="Th";break;default:return!1}return e.setType(n),!0},e.prototype.tab=function(e){var t,n,r,i,s,o,u;if(!this.isEnabled||this.hasNoSelection())return!0;this._history.addStep(),e!=null?(o=e.line$[0],t=o):(s=this.getEditorSelection(),i=s.getRangeAt(0),o=g.getLineDiv(i.startContainer,i.startOffset),t=g.getLineDiv(i.endContainer,i.endOffset)),n=t.id,r=this._lines[o.id],u=[];for(;;){this._tabLine(r);if(r.lineID===n)break;u.push(r=r.lineNext)}return u},e.prototype._tabLine=function(e){var t,n,r,i,s,o,u;switch(e.lineType){case"Tu":case"Th":case"To":o=this._findPrevSiblingT(e);if(o===null)return;o.lineType==="Th"?u="Lh":o.lineType==="Tu"?u="Lu":u="Lo";break;case"Lh":case"Lu":case"Lo":t=e.lineDepthAbs+1,n=this._findNextSibling(e,t),r=n===null?null:n.lineType,i=this._findPrevSiblingT(e,t),s=i===null?null:i.lineType,u=this._chooseTypeTarget(s,r),u==="Th"?(e.lineDepthAbs+=1,e.lineDepthRel=0):(e.lineDepthAbs+=1,e.lineDepthRel+=1)}return e.setType(u),this.adjustSiblingsToType(e)},e.prototype._chooseTypeTarget=function(e,t){var n;return e===t&&t===null?n="Tu":e===t?n=t:e===null?n=t:t===null?n=e:n="Tu",n},e.prototype.shiftTab=function(e){var t,n,r,i,s;if(!this.isEnabled||this.hasNoSelection())return!0;this._history.addStep(),e==null&&(i=this.getEditorSelection(),e=i.getRangeAt(0)),s=g.getLineDiv(e.startContainer,e.startOffset),t=g.getLineDiv(e.endContainer,e.endOffset),n=t.id,r=this._lines[s.id];for(;;){this._shiftTabLine(r);if(r.lineID===t.id)break;r=r.lineNext}return!0},e.prototype._shiftTabLine=function(e){var t,n,r,i,s,o,u,a;switch(e.lineType){case"Tu":case"Th":case"To":s=e.linePrev;while(s!==null&&s.lineDepthAbs>=e.lineDepthAbs)s=s.linePrev;if(s===null)return;e.lineNext!=null&&e.lineNext.lineType[0]==="L"&&e.lineNext.lineDepthAbs===e.lineDepthAbs&&(n=e.lineNext,n.setType("T"+n.lineType[1])),n=e.lineNext;if(n&&n.lineDepthAbs>e.lineDepthAbs){while(n&&n.lineDepthAbs>e.lineDepthAbs)n.setDepthAbs(n.lineDepthAbs-1),n=n.lineNext;n!=null&&n.lineType[0]==="L"&&n.setType("T"+n.lineType[1])}a=s.lineType,a="L"+a.charAt(1),e.lineDepthAbs-=1,e.lineDepthRel-=s.lineDepthRel;break;case"Lh":case"Lu":case"Lo":t=e.lineDepthAbs,r=this._findNextSibling(e,t),i=r===null?null:r.lineType,o=this._findPrevSiblingT(e,t),u=o===null?null:o.lineType,a=this._chooseTypeTarget(u,i)}return e.setType(a),this.adjustSiblingsToType(e)},e.prototype.adjustSiblingsToType=function(e){var t,n;t=e,n=[];for(;;){t.lineDepthAbs===e.lineDepthAbs&&t.lineType[1]!==e.lineType[1]&&t.setType(t.lineType[0]+e.lineType[1]),t=t.lineNext;if(t===null||t.lineDepthAbs<e.lineDepthAbs)break;n.push(void 0)}return n},e.prototype._return=function(){var e,t,n,r,i,s,o,u,a,f,l,c;t=this.currentSel,l=t.startLine,r=t.endLine,f=t.range,s=t.isStartInTask,t.range.collapsed||(r===l?(f.deleteContents(),e=g.normalizeBP(f.startContainer,f.startOffset),this._fusionSimilarSegments(l.line$[0],[e]),f.setStart(e.cont,e.offset),f.collapse(!0)):(this._deleteMultiLinesSelections(),t=this.updateCurrentSelIsStartIsEnd(),l=t.startLine)),t.rangeIsEndLine?(u=this._insertLineAfter({sourceLine:l,targetLineType:l.lineType,targetLineDepthAbs:l.lineDepthAbs,targetLineDepthRel:l.lineDepthRel}),this._setCaret(u.line$[0].firstChild.firstChild,0),s&&this._turneLineIntoTask(u.line$[0])):t.rangeIsStartLine?(u=this._insertLineBefore({sourceLine:l,targetLineType:l.lineType,targetLineDepthAbs:l.lineDepthAbs,targetLineDepthRel:l.lineDepthRel}),s?this._turneLineIntoTask(u.line$[0]):this._setCaret(l.line$[0].firstChild.firstChild,0)):(t.range.setEndBefore(l.line$[0].lastChild),t.isStartInTask&&this._stackTaskChange(l.line$[0].task,"modified"),i=t.range.extractContents(),u=this._insertLineAfter({sourceLine:l,targetLineType:l.lineType,targetLineDepthAbs:l.lineDepthAbs,targetLineDepthRel:l.lineDepthRel,fragment:i}),this._fusionSimilarSegments(u.line$[0],[]),this._setCaret(u.line$[0].firstChild.firstChild,0),s&&this._turneLineIntoTask(u.line$[0])),o=u.line$[0],a=o.parentNode,n=a.getBoundingClientRect().height;if(!(o.offsetTop+20-n<(c=a.scrollTop)&&c<o.offsetTop))return o.scrollIntoView(!1)},e.prototype.getFirstline=function(){return this._lines[this.linesDiv.childNodes[0].id]},e.prototype._getSelectedLineDiv=function(){var e;return e=this.getEditorSelection().getRangeAt(0).startContainer,g.getLineDiv(e)},e.prototype._findParent1stSibling=function(e){var t,n;t=e.lineDepthAbs,n=e.linePrev;if(n===null)return e;if(t<=2){while(n.linePrev!==null)n=n.linePrev;return n}while(n!==null&&n.lineDepthAbs>t-2)n=n.linePrev;return n.lineNext},e.prototype._findNextSibling=function(e,t){var n;t==null&&(t=e.lineDepthAbs),n=e.lineNext;for(;;){if(n===null||n.lineDepthAbs<t){n=null;break}if(n.lineDepthAbs===t&&n.lineType[0]==="T")break;n=n.lineNext}return n},e.prototype._findPrevSiblingT=function(e,t){var n;t||(t=e.lineDepthAbs),n=e.linePrev;for(;;){if(n===null||n.lineDepthAbs<t){n=null;break}if(n.lineDepthAbs===t&&n.lineType[0]==="T")break;n=n.linePrev}return n},e.prototype._findPrevSibling=function(e,t){var n;t||(t=e.lineDepthAbs),n=e.linePrev;for(;;){if(n===null||n.lineDepthAbs<t){n=null;break}if(n.lineDepthAbs===t)break;n=n.linePrev}return n},e.prototype._deleteMultiLinesSelections=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d;if(e===null||t===null)throw new Error("CEeditor._deleteMultiLinesSelections called with a null param");e!=null?(l=this.document.createRange(),g.cleanSelection(e,t,l),c=!1):(l=this.currentSel.theoricalRange,h=l.startContainer,d=l.startOffset,e=this.currentSel.startLine,t=this.currentSel.endLine,c=!0),this.Tags.removeFromRange(l),s=t.lineDepthAbs,o=g.cloneEndFragment(l,t),e.line$[0].dataset.type==="task"&&this._stackTaskChange(e.line$[0].task,"modified"),f=e.lineNext;while(f!==t)f.line$[0].dataset.type==="task"&&this._stackTaskChange(f.line$[0].task,"removed"),f=f.lineNext;return f.line$[0].dataset.type==="task"&&this._stackTaskChange(f.line$[0].task,"removed"),l.deleteContents(),this._addMissingFragment(e,o),this._removeEndLine(e,t),p=e.lineDepthAbs,u=e.lineNext,u&&(a=u.lineDepthAbs,r=u.lineDepthAbs-p,i=s-p,this._adaptDepth(e,i,r,p),this._adaptType(e)),c?(n={cont:h,offset:d},this._fusionSimilarSegments(e.line$[0],[n]),this._setCaret(n.cont,n.offset)):this._fusionSimilarSegments(e.line$[0],[])},e.prototype._adaptDepth=function(e,t,n,r){var i,s;if(e.lineNext===null)return;i=e.lineNext;if(n>1){s=i,s=this._unIndentBlock(s,t);while(s!==null&&s.lineDepthAbs>r)s=this._unIndentBlock(s,t)}return!0},e.prototype._adaptType=function(e){var t,n;t=e.lineNext;while(t!==null)n=this._findPrevSibling(t),n===null?t.lineType[0]!=="T"&&t.setType("T"+t.lineType[1]):n.lineType[1]!==t.lineType[1]&&t.setType(t.lineType[0]+n.lineType[1]),t=t.lineNext;return!0},e.prototype._unIndentBlock=function(e,t){var n,r,i;r=e,n=e.lineDepthAbs,i=Math.max(1,r.lineDepthAbs-t),t=r.lineDepthAbs-i;while(r!==null&&r.lineDepthAbs>=n)i=r.lineDepthAbs-t,r.setDepthAbs(i),r=r.lineNext;return r},e.prototype._addMissingFragment=function(e,t){var n,r,i,s,o,u,a;return o=t.childNodes[0],r=e.line$[0],r.lastChild===null&&(s=document.createElement("span"),r.insertBefore(s,r.firstChild)),r.lastChild.nodeName==="BR"&&r.removeChild(r.lastChild),n=r.lastChild,o.tagName===(a=n.tagName)&&a==="SPAN"&&o.className===n.className?(u=n.textContent.length,i=n.textContent+o.textContent,n.firstChild.textContent=i,t.removeChild(t.firstChild),r.appendChild(t)):(r.appendChild(t),null)},e.prototype._removeEndLine=function(e,t){return e.lineNext=t.lineNext,t.lineNext!==null&&(t.lineNext.linePrev=e),t.line$.remove(),delete this._lines[t.lineID]},e.prototype._adaptEndLineType=function(e,t,n){var r,i,s,o,u,a,f,l;i=t.lineType,u=e.lineType,r=n-e.lineDepthAbs;if(i==="Tu"&&u==="Th"){this._toggleLineType(t),s=t;if(r>0){a=[];while(s!==null&&s.lineDepthAbs>=n)o=s.lineDepthAbs-r,s.setDepthAbs(o),a.push(s=s.lineNext);return a}}else if(i==="Th"&&u==="Tu"){this._toggleLineType(t),s=t;if(r>0){f=[];while(s!==null&&s.lineDepthAbs>=n)o=s.lineDepthAbs-r,s.setDepthAbs(o),f.push(s=s.lineNext);return f}}else if(i==="Th"&&u==="Th"){s=t;if(r>0){l=[];while(s!==null&&s.lineDepthAbs>=n)o=s.lineDepthAbs-r,s.setDepthAbs(o),l.push(s=s.lineNext);return l}}},e.prototype._setCaret=function(e,t,n){var r,i,s;return r=g.normalizeBP(e,t,n),i=this.document.createRange(),i.setStart(r.cont,r.offset),i.collapse(!0),s=this.getEditorSelection(),s.removeAllRanges(),s.addRange(i),r},e.prototype._setCaretAfter=function(e){var t,n,r;n=e;while(n.nextSibling===null)n=n.parentElement;n=n.nextSibling;if(n.nodeName==="BR"){t=0,r=e.parentNode;while(r.childNodes[t]!==e)t+=1;return this._setCaret(r,t+1)}return this._setCaret(n,0)},e.prototype._setSelectionOnNode=function(e){var t,n;return t=this.document.createRange(),t.selectNodeContents(e),g.normalize(t),n=this.getEditorSelection(),n.removeAllRanges(),n.addRange(t),!0},e.prototype.setSelection=function(e,t,n,r){var i,s;return i=this.document.createRange(),i.setStart(e,t),i.setEnd(n,r),g.normalize(i),s=this.getEditorSelection(),s.removeAllRanges(),s.addRange(i),!0},e.prototype.setSelectionFromRg=function(e,t){var n;return g.normalize(e,t),n=this.getEditorSelection(),n.removeAllRanges(),n.addRange(e),!0},e.prototype.setSelectionBp=function(e,t){var n,r;return n=this.document.createRange(),n.setStart(e.cont,e.offset),n.setEnd(t.cont,t.offset),g.normalize(n),r=this.getEditorSelection(),r.removeAllRanges(),r.addRange(n),!0},e.prototype._insertLineAfter=function(e){var t;return t=new f(this,e.targetLineType,e.targetLineDepthAbs,e.targetLineDepthRel,e.sourceLine,null,e.fragment),t},e.prototype._insertLineBefore=function(e){var t;return t=new f(this,e.targetLineType,e.targetLineDepthAbs,e.targetLineDepthRel,null,e.sourceLine,e.fragment),t},e.prototype._readHtml=function(e){var t,n,r,i,s,o,u,a,l,c,h,p,d,v,m,g,y,b,w,E;m=$(this.linesDiv).children(),s=0,u=0,l=0,this._lines={},d=null,p=null,this.Tags.empty(e);for(b=0,w=m.length;b<w;b++){n=m[b],r=$(n),i=(E=r.attr("class"))!=null?E:"",i=i.split("-"),v=i[0],v!==""&&(o=s,s=+i[1],t=s-o,a=u,v==="Th"?u=0:u=a+t,l=parseInt(l,10)+1,c="CNID_"+l,r.prop("id",c),h=new f,h.line$=r,h.lineID=c,h.lineType=v,h.lineDepthAbs=s,h.lineDepthRel=u,h.lineNext=null,h.linePrev=d,d!==null&&(d.lineNext=h),d=h,this._lines[c]=h,n.textContent===""&&n.firstChild.childNodes.length===0&&(y=document.createTextNode(""),n.firstChild.appendChild(y))),n.dataset.type==="task"&&(this.isChromeOrSafari?n.firstChild.textContent=" ":n.firstChild.textContent=" ",this._setTaskToLine(n)),this._fixLine(n),g=n.firstChild;while(g&&g.nodeName!=="BR")g.dataset.type&&this.Tags.handle(g),g=g.nextSibling}return this.Tags.refreshAll(),this._highestId=l},e.prototype._moveLinesDown=function(){var e,t,n,r,i,s,o,u,a,l,c,h,p,d,v,m;h=this.getEditorSelection(),c=h.getRangeAt(0),p=g.getLineDiv(c.startContainer,c.startOffset),t=g.getLineDiv(c.endContainer,c.endOffset),d=p.id,n=t.id,u=this._lines[d],i=this._lines[n],o=u.linePrev,s=i.lineNext;if(s!==null){e=f.clone(s),this._deleteMultiLinesSelections(i,s),s=e,this._lines[s.lineID]=s,s.linePrev=o,u.linePrev=s,s.lineNext!==null&&(s.lineNext.linePrev=i),i.lineNext=s.lineNext,s.lineNext=u,o!==null&&(o.lineNext=s),u.line$.before(s.line$);if(o===null)return;if(s.lineDepthAbs<=o.lineDepthAbs){r=s;while(r.lineNext!==null&&r.lineNext.lineDepthAbs>s.lineDepthAbs)r=r.lineNext;r.lineNext!==null&&(r=r.lineNext),a=this.document.createRange(),a.setStart(u.line$[0],0),a.setEnd(r.line$[0],0),l=u.lineDepthAbs-s.lineDepthAbs,s.lineNext.lineType[0]==="T"&&(u.lineType[0]==="T"?l-=1:l+=1),v=[];while(l>=0)this.shiftTab(a),v.push(l-=1);return v}a=this.document.createRange(),a.setStart(s.line$[0],0),a.setEnd(s.line$[0],0),l=s.lineDepthAbs-o.lineDepthAbs,u.lineType[0]==="T"&&(o.lineType[0]==="T"?l-=1:l+=1),m=[];while(l>=0)this.shiftTab(a),m.push(l-=1);return m}},e.prototype._moveLinesUp=function(){var e,t,n,r,i,s,o,u,a,l,c,h,p,d,v,m,y;p=this.getEditorSelection(),h=p.getRangeAt(0),d=g.getLineDiv(h.startContainer,h.startOffset),t=g.getLineDiv(h.endContainer,h.endOffset),v=d.id,n=t.id,a=this._lines[v],s=this._lines[n],u=a.linePrev,o=s.lineNext;if(u!==null){r=u.linePrev===null,e=f.clone(u),this._deleteMultiLinesSelections(u.linePrev,u),r&&($(u.line$[0].firstElementChild).remove(),u.line$.append("<br>"),a.line$=u.line$,a.line$.attr("id",a.lineID),this._lines[a.lineID]=a),u=e,this._lines[u.lineID]=u,u.lineNext=o,s.lineNext=u,u.linePrev!==null&&(u.linePrev.lineNext=a),a.linePrev=u.linePrev,u.linePrev=s,o!==null&&(o.linePrev=u),s.line$.after(u.line$);if(u.lineDepthAbs<=s.lineDepthAbs&&o!==null){i=u;while(i.lineNext!==null&&i.lineNext.lineDepthAbs>u.lineDepthAbs)i=i.lineNext;i.lineNext!==null&&(i=i.lineNext),l=this.document.createRange(),l.setStart(o.line$[0],0),l.setEnd(i.line$[0],0),c=o.lineDepthAbs-u.lineDepthAbs,u.lineNext.lineType[0]==="T"&&(u.lineType[0]==="T"?c-=1:c+=1),m=[];while(c>=0)this.shiftTab(l),m.push(c-=1);return m}l=this.document.createRange(),l.setStart(u.line$[0],0),l.setEnd(u.line$[0],0),c=u.lineDepthAbs-s.lineDepthAbs,u.lineType[0]==="T"&&(s.lineType[0]==="T"?c-=1:c+=1),y=[];while(c>=0)this.shiftTab(l),y.push(c-=1);return y}},e.prototype.unDo=function(){var e,t,n,r,i,s,o,u,a,f,l,c;console.info("\n== UNDO :"),e=this._history;if(!e.undoPossible()||!this.isEnabled)return!1;this._hotString.isPreparing&&this._hotString.reset(),e.index===e.history.length-1&&(this._history.addStep(),e.index-=1),o=e.index,this.newPosition=e.historyPos[o],this.urlPopover.cancel(),this.linesDiv.innerHTML=e.history[o],s=e.historySelect[o],s&&this.deSerializeSelection(s),i=e.historyScroll[o],this.linesDiv.scrollTop=i.xcoord,this.linesDiv.scrollLeft=i.ycoord,this._readHtml(),l=e.modifiedTask[o+1];for(t in l){n=l[t],console.info(n.a);switch(n.a){case"modified":this._stackTaskForSave(t,n.t,"modified");break;case"deleted":this._stackTaskForSave(t,n.t,"created");break;default:console.info("marking as deleted in undo"),this._stackTaskForSave(t,n.t,"deleted")}}c=this._taskList;for(a=0,f=c.length;a<f;a++)u=c[a],u.isFromServer&&this._updateTaskLine(u);return p.printTasksModifStacks("unDo",this._tasksToBeSaved),e.index-=1,p.printHistory("unDo",this._history),r=!0},e.prototype.reDo=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;console.info("\n== REDO :"),e=this._history;if(!e.redoPossible()||!this.isEnabled)return!1;r=e.index+=1,t=r+1,this.newPosition=e.historyPos[t],this.urlPopover.cancel(),this.linesDiv.innerHTML=e.history[t],s=e.historySelect[t],s&&this.deSerializeSelection(s),u=e.historyScroll[t].xcoord,a=e.historyScroll[t].ycoord,this.linesDiv.scrollTop=u,this.linesDiv.scrollLeft=a,this._readHtml(),c=e.modifiedTask[r+1];for(n in c)i=c[n],this._stackTaskForSave(n,i.t,i.a);h=this._taskList;for(f=0,l=h.length;f<l;f++)o=h[f],o.isFromServer&&this._updateTaskLine(o);return this.newPosition=!0,p.printTasksModifStacks("redo",this._tasksToBeSaved)},e.prototype._replaceInTaskHistory=function(e){var t,n;t=this.HISTORY_SIZE;while(t--){n=this._history.modifiedTask[t];if(!n)return;n[e.internalId]&&(n[e.internalId].t=e)}},e.prototype.deSerializeRange=function(e,t){var n,r,i,s,o,u,a,f,l;t||(t=this.linesDiv),u=t.ownerDocument.createRange(),a=e.split(","),l=a[0].split("/"),r=a[1].split("/"),f=t,i=l.length;while(--i)o=f,f=f.childNodes[l[i]];s=parseInt(l[i],10),!f&&s===0&&(f=document.createTextNode(""),o.appendChild(f)),u.setStart(f,s),n=t,i=r.length;while(--i)o=n,n=n.childNodes[r[i]];return s=parseInt(r[i],10),!n&&s===0&&(n=document.createTextNode(""),o.appendChild(n)),u.setEnd(n,s),u},e.prototype.serializeRange=function(e,t){var n,r,i,s;t||(t=this.linesDiv),i=e.startOffset,r=e.startContainer;while(r!==null&&r!==t){n=0,s=r.previousSibling;while(s!==null)n++,s=s.previousSibling;i+="/"+n,r=r.parentNode}if(r===null)return!1;i+=","+e.endOffset,r=e.endContainer;while(r!==null&&r!==t){n=0,s=r.previousSibling;while(s!==null)n++,s=s.previousSibling;i+="/"+n,r=r.parentNode}return r===null?!1:i},e.prototype.serializeSel=function(){var e;return e=this.getEditorSelection(),e.rangeCount?this.serializeRange(e.getRangeAt(0)):!1},e.prototype.deSerializeSelection=function(e){var t;return t=this.getEditorSelection(),t.removeAllRanges(),t.addRange(this.deSerializeRange(e))},e.prototype._initSummary=function(){var e;return e=this.editorBody$.children("#navi"),e.length===0&&(e=$(document.createElement("div")),e.attr("id","navi"),e.prependTo(this.editorBody$)),e},e.prototype._buildSummary=function(){var e,t,n,r;n=this.initSummary(),this.editorBody$.children("#navi").children().remove(),t=this._lines,r=[];for(e in t)this.editorBody$.children("#"+(""+t[e].lineID)).length>0&&t[e].lineType==="Th"?r.push(t[e].line$.clone().appendTo(n)):r.push(void 0);return r},e.prototype.paste=function(e){var t,n,r;return t=this.clipboard,this.updateCurrentSelIsStartIsEnd(),n=this.document.createRange(),n.selectNodeContents(t),r=this.getEditorSelection(),r.removeAllRanges(),r.addRange(n),n.detach(),e&&e.clipboardData&&e.clipboardData.getData?(e.clipboardData.types==="text/html"?t.innerHTML=e.clipboardData.getData("text/html"):e.clipboardData.types==="text/plain"?t.innerHTML=e.clipboardData.getData("text/plain"):t.innerHTML="",this._waitForPasteData(t),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1):(this._waitForPasteData(t),!0)},e.prototype._initClipBoard=function(){var e,t;return e=document.createElement("div"),e.contentEditable=!0,e.id="editor-clipboard",this.clipboard$=$(e),t={left:-300},this.clipboard$.offset(t),this.clipboard$.prependTo(this.editorBody$),this.clipboard=this.clipboard$[0],e.style.setProperty("width","10px"),e.style.setProperty("height","10px"),e.style.setProperty("position","fixed"),e.style.setProperty("overflow","hidden"),e},e.prototype._waitForPasteData=function(){return this.clipboard.childNodes&&this.clipboard.childNodes.length>0?this._processPaste():setTimeout(this._waitForPasteData,100)},e.prototype._processPaste=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P;N=this.clipboard,i=this.currentSel,N.innerHTML=sanitize(N.innerHTML).xss(),p=document.createDocumentFragment(),f={lineNext:null,linePrev:null,line$:$("<div id='dummy' class='Tu-1'></div>")},p.appendChild(f.line$[0]),o=document.createDocumentFragment(),e=i.startLine.lineDepthAbs,i.startLine.lineType==="Th"&&(e+=1),a={frag:p,lastAddedLine:f,currentLineFrag:o,currentLineEl:o,absDepth:e,prevHxLevel:null,prevCNLineAbsDepth:null,isCurrentLineBeingPopulated:!1},d=this._domWalk(N,a),N.innerHTML="",p.removeChild(p.firstChild),L=i.startLine,l=i.endLine,i.range.collapsed||(l===L?(i.range.deleteContents(),g.normalize(i.range)):(this._deleteMultiLinesSelections(),g.normalize(i.range),this.newPosition=!0,i=this.updateCurrentSelIsStartIsEnd(),this.newPosition=!1,L=i.startLine)),M=i.theoricalRange.startContainer,O=i.theoricalRange.startOffset,t={cont:M,offset:O},p.childNodes.length>0?(w=Array.prototype.slice.call(p.firstChild.childNodes),w.pop()):w=[p];for(_=0,P=w.length;_<P;_++)k=w[_],this._insertSegment(k,t);t.cont.nodeName!=="#text"&&(t=g.normalizeBP(t.cont,t.offset,!0)),this._fusionSimilarSegments(L.line$[0],[t]),M=t.cont,O=t.offset;if(p.childNodes.length>1){T=document.createRange(),T.setStart(M,O),x=M;while(x.tagName!=="DIV")x=x.parentElement;T.setEnd(x,x.children.length-1),c=T.extractContents(),T.detach(),b=p.lastChild,n=b.lastChild,S=b.childNodes.length-1,t=g.normalizeBP(b,S),r=c.childNodes,v=r.length;for(S=D=1;D<=v;S=D+=1)b.insertBefore(r[0],n);this._fusionSimilarSegments(b,[t]),x=M;while(x.tagName!=="DIV")x=x.parentElement}return h=f.lineNext,C=h!=null?h.lineNext:void 0,p.firstChild!=null&&p.removeChild(p.firstChild),h!=null&&delete this._lines[h.lineID],C!=null&&(E=i.startLine.lineNext,i.startLine.lineNext=C,C.linePrev=i.startLine,E===null?this.linesDiv.appendChild(p):(a.lastAddedLine.lineNext=E,E.linePrev=a.lastAddedLine,this.linesDiv.insertBefore(p,E.line$[0]))),m=a.lastAddedLine,m.lineNext&&(y=m.lineDepthAbs,A=L.lineDepthAbs,u=A-y,s=m.lineNext.lineDepthAbs-y,this._adaptDepth(a.lastAddedLine,u,s,y),this._adaptType(i.startLine)),t=this._setCaret(t.cont,t.offset)},e.prototype._insertSegment=function(e,t){var n,r;return n=t.cont,r=g.getSegment(n),r.nodeName==="DIV"?(r.insertBefore(e,r.children[t.offset]),t.offset++):e.nodeName==="SPAN"?r.nodeName==="A"||this._haveSameMeta(r,e)?this._insertTextInSegment(e.textContent,t,r):this._splitAndInsertSegment(e,t,r):this._haveSameMeta(r,e)?this._insertTextInSegment(e.textContent,t,r):this._splitAndInsertSegment(e,t,r),!0},e.prototype._insertTextInSegment=function(e,t,n){var r,i,s;return e===""?!0:(n||(n=g.getSegment(t.cont)),s=n.textContent,i=t.offset,r=s.substr(0,i),r+=e,r+=s.substr(i),n.textContent=r,i+=e.length,t.cont=n.firstChild,t.offset=i,!0)},e.prototype._splitAndInsertSegment=function(e,t,n){var r,i,s,o;n||(n=g.getSegment(t.cont)),o=document.createRange(),o.setStart(t.cont,t.offset),o.setEndAfter(n),i=o.extractContents(),i.insertBefore(e,i.firstChild),n.parentNode.insertBefore(i,n.nextSibling),t.cont=n.parentNode,s=0,r=t.cont.childNodes;while(r[s]!==n)s++;return t.offset=s+2},e.prototype._insertSegmentAfterSeg=function(e){var t,n;return t=document.createElement("SPAN"),n=document.createTextNode(" "),t.appendChild(n),e.parentElement.insertBefore(t,e.nextSibling),t},e.prototype.insertSpaceAfterSeg=function(e){var t,n,r,i,s,o;return i=e.nextSibling,i.nodeName==="BR"?(s=this._insertSegmentAfterSeg(e),t={cont:s.firstChild,offset:1}):(r=g.getSegmentIndex(e)[1]+1,t=g.normalizeBP(e.parentElement,r,!0),o=t.cont,n=o.textContent[0],n!==" "&&n!==" "&&(o.textContent=" "+o.textContent),t.offset=1),t},e.prototype._domWalk=function(e,t){var n;this.__domWalk(e,t);if(t.currentLineFrag.childNodes.length>0)return n={sourceLine:t.lastAddedLine,fragment:t.currentLineFrag,targetLineType:"Tu",targetLineDepthAbs:t.absDepth,targetLineDepthRel:t.absDepth},t.lastAddedLine=this._insertLineAfter(n)},e.prototype.__domWalk=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b;r=t.absDepth,l=t.prevHxLevel,y=e.childNodes;for(d=0,m=y.length;d<m;d++){i=y[d];switch(i.nodeName){case"#text":(b=t.currentLineEl.nodeName)==="SPAN"||b==="A"?t.currentLineEl.textContent+=i.textContent:(p=document.createTextNode(i.textContent),c=document.createElement("span"),c.appendChild(p),t.currentLineEl.appendChild(c)),t.isCurrentLineBeingPopulated=!0;break;case"P":case"UL":case"OL":t.absDepth=r,this.__domWalk(i,t),t.isCurrentLineBeingPopulated&&this._appendCurrentLineFrag(t,r,r);break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":u=0,this.__domWalk(i,t),t.isCurrentLineBeingPopulated&&this._appendCurrentLineFrag(t,Math.min(0,u)+r,Math.min(0,u)+r);break;case"LI":case"TR":t.isCurrentLineBeingPopulated&&this._appendCurrentLineFrag(t,r,r),this.__domWalk(i,t),t.isCurrentLineBeingPopulated&&this._appendCurrentLineFrag(t,r,r);break;case"BR":this._appendCurrentLineFrag(t,r,r);break;case"A":n=document.createElement("a"),n.textContent=i.textContent,n.href=i.href,t.currentLineEl.appendChild(n);break;case"DIV":case"TABLE":case"TBODY":i.id.substr(0,5)==="CNID_"?this._clipBoard_Insert_InternalLine(i,t):this.__domWalk(i,t);break;default:a=t.currentLineEl.lastChild;if(a!==null&&a.nodeName==="SPAN")a.textContent+=i.textContent;else{h=document.createElement("span"),h.textContent=i.textContent,o=i.classList,f="";for(v=0,g=o.length;v<g;v++)s=o[v],s.slice(0,3)==="CNE"&&(f+=" "+s);h.className=f,t.currentLineEl.appendChild(h)}t.isCurrentLineBeingPopulated=!0}}return!0},e.prototype._appendCurrentLineFrag=function(e,t,n){var r,i;return e.currentLineFrag.childNodes.length===0&&(i=document.createElement("span"),i.appendChild(document.createTextNode("")),e.currentLineFrag.appendChild(i)),r={sourceLine:e.lastAddedLine,fragment:e.currentLineFrag,targetLineType:"Tu",targetLineDepthAbs:t,targetLineDepthRel:n},e.lastAddedLine=this._insertLineAfter(r),e.currentLineFrag=document.createDocumentFragment(),e.currentLineEl=e.currentLineFrag,e.isCurrentLineBeingPopulated=!1},e.prototype._clipBoard_Insert_InternalLine=function(e,t){var n,r,i,s,o,u,a,f,l;s=e.className.split("-"),o=+s[1],s=s[0],t.prevCNLineAbsDepth||(t.prevCNLineAbsDepth=o),n=o-t.prevCNLineAbsDepth,n>0?t.absDepth+=1:(t.absDepth+=n,t.absDepth=Math.max(1,t.absDepth)),t.prevCNLineAbsDepth=o,r=document.createDocumentFragment(),u=e.childNodes.length,i=0;while(i<u)f=e.childNodes[0],f.nodeName==="#text"?(l=document.createElement("SPAN"),l.appendChild(f),r.appendChild(l)):r.appendChild(f),i++;return a={sourceLine:t.lastAddedLine,fragment:r,targetLineType:s,targetLineDepthAbs:t.absDepth,targetLineDepthRel:t.absDepth},t.lastAddedLine=this._insertLineAfter(a)},e.prototype.doHotStringAction=function(e){var t,n,r,i,s,o;n=this._hotString;if(e!=null?!e.type:!void 0)return n.reset("end",!0),!0;switch(e.type){case"ttag":switch(e.value){case"todo":return this.doHotStringAction({type:"todo"});case"htag":return n._forceUserHotString("#",[]),n.updateHs(),t=g.normalizeBP(n._hsSegment,1),this._setCaret(t.cont,t.offset),!0;case"reminder":return n._forceUserHotString("@@",[]),n.updateHs(),t=g.normalizeBP(n._hsSegment,1),this._setCaret(t.cont,t.offset),!0}break;case"todo":s=this._turnIntoTask();if(s)return o=s.textContent.trim(),i=new RegExp("^ *@?t?o?d?o? *$","i"),o.match(i)?(this._initTaskContent(s),n.reset(!1)):(n._forceUserHotString("",[]),n.reset("end")),this.editorTarget$.trigger(jQuery.Event("onChange")),this.newPosition=!0,r=this._lines[s.id],r.lineNext||this._insertLineAfter({sourceLine:r,targetLineType:"Tu",targetLineDepthAbs:r.lineDepthAbs,targetLineDepthRel:r.lineDepthRel}),!0;break;case"contact":return n._forceUserHotString(e.text,[]),n._hsSegment.dataset.id=e.model.id,this.Tags.create("contact",n._hsSegment),t=this.insertSpaceAfterSeg(n._hsSegment),this._setCaret(t.cont,1),n._auto.hide(),n._reInit(),this.editorTarget$.trigger(jQuery.Event("onChange")),this.newPosition=!0,!0;case"htag":return n._forceUserHotString(e.text,[]),n._hsSegment.classList.add("CNE_htag"),n._hsSegment.dataset.type="htag",this.Tags.handle(n._hsSegment,!0),n._hsSegment.classList.remove("CNE_hot_string"),t=this.insertSpaceAfterSeg(n._hsSegment),this._setCaret(t.cont,1),n._auto.hide(),this.editorTarget$.trigger(jQuery.Event("onChange")),this.newPosition=!0,!0;case"reminder":return o=typeof e.value=="string"?e.value:e.value.format(),n._forceUserHotString(o,[]),n._hsSegment.dataset.value=o,this.Tags.create("reminder",n._hsSegment),t=this.insertSpaceAfterSeg(n._hsSegment),this._setCaret(t.cont,1),n._auto.hide(),n._reInit(),this.editorTarget$.trigger(jQuery.Event("onChange")),this.newPosition=!0,!0}return n.reset("end"),this.editorTarget$.trigger(jQuery.Event("onChange")),!1},e}(),i=e.CNeditor}),require.register("CNeditor/externalmodels",function(e,t,n){var r,i,s,o,u,a,f,l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var n in t)l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h=function(e,t){return function(){return e.apply(t,arguments)}};o=t("./request"),n.exports.taskCanBeUsed=!1,n.exports.contactCanBeUsed=!1,n.exports.alarmCanBeUsed=!1,n.exports.Alarm=r=function(e){function t(){return u=t.__super__.constructor.apply(this,arguments),u}return c(t,e),t.prototype.urlRoot="alarms",t.dateFormat="{Dow} {Mon} {dd} {yyyy} {HH}:{mm}:00",t.reminderCf={},t.setDefaultCf=function(e,r){var i=this;return e&&(t.reminderCf.description=e),r&&(t.reminderCf.related=r),n.exports.alarmCollection.each(function(e){return e.save(t.reminderCf)})},t.prototype.defaults=function(){return{description:t.reminderCf.description,related:t.reminderCf.related,action:"DISPLAY"}},t}(Backbone.Model),n.exports.alarmCollection=new Backbone.Collection([],{model:r}),n.exports.Contact=i=function(e){function t(){return this.getFN=h(this.getFN,this),a=t.__super__.constructor.apply(this,arguments),a}return c(t,e),t.prototype.urlRoot="contacts",t.prototype.getFN=function(){var e,t,n,r,i,s;return this.has("fn")?this.get("fn"):this.get("n")?(s=this.get("n").split(";"),e=s[0],t=s[1],n=s[2],r=s[3],i=s[4],""+t+" "+n+" "+e):""},t.load=function(e){return n.exports.contactCollection.fetch({success:function(){return e(null)},error:function(t){return e(t)}})},t}(Backbone.Model),n.exports.contactCollection=new Backbone.Collection([],{url:i.prototype.urlRoot,model:i}),n.exports.Task=s=function(e){function t(){return f=t.__super__.constructor.apply(this,arguments),f}return c(t,e),t.prototype.urlRoot="tasks",t.prototype.defaults=function(){return{done:!1}},t}(Backbone.Model),n.exports.initialize=function(e){return n.exports.contactCanBeUsed=!0,n.exports.alarmCanBeUsed=!0,n.exports.taskCanBeUsed=!0,i.load(e)}}),require.register("CNeditor/history",function(e,t,n){var r,i;i=t("./logging"),n.exports=r=function(){function t(t){this.editor=t,this.index=e-1,this.history=new Array(e),this.historySelect=new Array(e),this.historyScroll=new Array(e),this.historyPos=new Array(e),this.modifiedTask=new Array(e)}var e;return e=100,t.prototype.addStep=function(){var t;console.info("== _addHistory()");if(this.editor.urlPopover.isOn||this.editor._hotString.isPreparing)return;if(this.index<e-1){t=e-1-this.index;while(t--)this.historySelect.pop(),this.historyScroll.pop(),this.historyPos.pop(),this.history.pop(),this.modifiedTask.pop(),this.historySelect.unshift(void 0),this.historyScroll.unshift(void 0),this.historyPos.unshift(void 0),this.history.unshift(void 0),this.modifiedTask.unshift(void 0)}return this.historySelect.push(this.editor.saveEditorSelection()),this.historyScroll.push({xcoord:this.editor.linesDiv.scrollTop,ycoord:this.editor.linesDiv.scrollLeft}),this.historyPos.push(this.editor.newPosition),this.history.push(this.editor.linesDiv.innerHTML),this.modifiedTask.push(this.editor._tasksModifSinceLastHistory),this.editor._tasksModifSinceLastHistory={},this.index=e-1,this.historySelect.shift(),this.historyScroll.shift(),this.historyPos.shift(),this.history.shift(),this.modifiedTask.shift(),i.printHistory("_addHistory",this)},t.prototype.removeLastStep=function(){return this.historySelect.pop(),this.historyScroll.pop(),this.historyPos.pop(),this.history.pop(),this.modifiedTask.pop(),this.historySelect.unshift(void 0),this.historyScroll.unshift(void 0),this.historyPos.unshift(void 0),this.history.unshift(void 0),this.modifiedTask.unshift(void 0),this.index=e-1},t.prototype.undoPossible=function(){var e;return e=this.index>=0&&this.historyPos[this.index]!==void 0,console.log("undoPossible",e),e},t.prototype.redoPossible=function(){return this.index<this.history.length-2},t}()}),require.register("CNeditor/hot-string",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}},u=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=t("./autocomplete"),s=t("./selection"),n.exports=i=function(){function e(e){this.realtimeContacts=o(this.realtimeContacts,this),this.showAutoAndHighLight=o(this.showAutoAndHighLight,this),this.editor=e,this._isEdit=!1,this.container=e.linesDiv,this._auto=new r(e.linesDiv,e,this),this._hsTypes=["@","@@","#"],this._modes={"@":"contact","@@":"reminder"},this.isPreparing=!1,this._hsType="",this._hsRight="",this._hsLeft="",this._hsString="",this._currentMode="",this._getShortCut=e.getShortCut,this._autoToBeShowed=!1}return e.prototype.keyDownCb=function(e){var t;t=!1;switch(e){case"-return":this.validate(),t=!0;break;case"-up":this._auto.up(),t=!0;break;case"-down":this._auto.down(),t=!0;break;case"-pgUp":case"-pgDwn":case"-end":case"-home":this.reset(!1);break;case"-esc":this.reset("end")}return t},e.prototype.keypressCb=function(e){var t,n;return console.info("== hotstring.keypressCb()"),t=e.which,this.isPreparing||t===64&&this.editor._isStartingWord()&&(n=this.editor.getCurrentAllowedInsertions(),this._auto.setAllowedModes(n),u.call(n,"contact")>=0?(this._hsType="@",this.isPreparing=!0,this._auto.setMode("contact"),this._currentMode="contact",this._autoToBeShowed={mode:"insertion"}):n.length>0&&(this._hsType="@",this.isPreparing=!0,this._auto.setMode("ttag"),this._currentMode="ttag",this._autoToBeShowed={mode:"insertion"})),!0},e.prototype.updateHs=function(e){var t,n,r,i;e||(e=this._hsSegment),i=this._hsSegment.textContent;if(this._hsType+this._hsString===i)return!0;n=i.slice(0,2);if(n==="@@")this._hsString=i.slice(2);else{n=n[0];if(n!=="@"&&n!=="#")return this.reset("current",!0),!0;this._hsString=i.slice(1)}return n!==this._hsType?(this._hsType=n,r=this._modes[n],this._currentMode=r,this._auto.setMode(r),!0):(t=this._isAHotString(this._hsString),t?(this.editor.doHotStringAction(t),!1):this._auto.update(this._hsString))},e.prototype.edit=function(e,t){var n,r,i,s,o;console.info("hotstring.edit()"),this._isEdit=!0,this.isPreparing=!0,o=e.dataset.type;switch(o){case"reminder":this._hsType="@@",i="CNE_reminder";break;case"contact":this._hsType="@",i="CNE_contact";break;case"htag":this._hsType="#",i="CNE_htag"}return this._editedItem={text:e.textContent,type:e.dataset.type,id:e.dataset.id,value:e.dataset.value},s=t.startOffset+this._hsType.length,n=t.endOffset+this._hsType.length,this._hsTextNode=e.firstChild,this._hsString=e.textContent,this._hsTextNode.textContent=this._hsType+this._hsString,e.classList.remove("CNE_reminder"),e.classList.remove("CNE_contact"),e.classList.remove("CNE_htag"),e.dataset.type="",this.editor.setSelection(e.firstChild,s,e.firstChild,n),r=this.editor.getCurrentAllowedInsertions(),this._auto.setAllowedModes(r),this._currentMode=o,this._auto.setMode(o),this._autoToBeShowed={mode:"edit",segment:e},this.showAutoAndHighLight(),!0},e.prototype._isNormalChar=function(e){var t;return t=96<e&&e<123||63<e&&e<91||47<e&&e<58||e===43,t},e.prototype.showAutoAndHighLight=function(){var e;switch(this._autoToBeShowed.mode){case"edit":this._hsSegment=this._autoToBeShowed.segment,this._hsTextNode=this._hsSegment.firstChild,this._hsSegment.classList.add("CNE_hot_string"),this._hsSegment.dataset.type="hotString",this._autoToBeShowed=!1,this._auto.show(this._hsSegment,this._hsString);break;case"insertion":e=this.editor.getEditorSelection().getRangeAt(0),this.editor.setSelection(e.startContainer,e.startOffset-this._hsType.length,e.endContainer,e.endOffset),e=this.editor._applyMetaDataOnSelection("CNE_hot_string"),this._hsTextNode=e.startContainer,this._hsSegment=e.startContainer.parentElement,this._hsSegment.dataset.type="hotString",this.editor._setCaret(this._hsSegment,this._hsSegment.childNodes.length),this._autoToBeShowed=!1,this._auto.show(this._hsSegment,"")}return!0},e.prototype._unhighLight=function(e){var t;return t=this._hsSegment,t.parentElement&&(t.classList.remove("CNE_hot_string"),t.dataset.type="",this.editor._fusionSimilarSegments(t.parentElement,e),this._hsTextNode=null,this._hsSegment=null),!0},e.prototype._forceUserHotString=function(e,t){var n,r,i,s;r=this._hsTextNode,r.textContent=e;for(i=0,s=t.length;i<s;i++)n=t[i],n.cont===r&&(n.offset=e.length);return t},e.prototype.validate=function(){var e;return e=this._auto.getSelectedItem(),this.editor.doHotStringAction(e)},e.prototype.reset=function(e,t){var n,r,i,s,o,u;return this.isPreparing?this._isEdit&&!t?(e==="current"?(s=this.editor.getEditorSelection().getRangeAt(0),o=s.startContainer,u=s.startOffset,r=s.endContainer,i=s.endOffset,this.editor.doHotStringAction(this._editedItem),this.editor.setSelection(o,u,r,i)):this.editor.doHotStringAction(this._editedItem),!0):(e==="current"?(s=this.editor.getEditorSelection().getRangeAt(0),n={cont:s.startContainer,offset:s.startOffset},this._unhighLight([n])):e==="end"?(n={cont:this._hsTextNode,offset:this._hsTextNode.length},this._unhighLight([n])):this._unhighLight([]),this._reInit(),this._auto.hide(),e&&this.editor._setCaret(n.cont,n.offset),!0):!0},e.prototype._reInit=function(){return this._hsType="",this._hsString="",this._hsRight="",this._hsLeft="",this.isPreparing=!1,this._isEdit=!1},e.prototype._isAHotString=function(e){switch(e){case"reminder":return{text:"reminder",type:"ttag",value:"reminder"};case"todo":return{text:"todo",type:"ttag",value:"todo"};case"tag":return{text:"tag",type:"ttag",value:"htag"}}},e.prototype.mouseDownCb=function(e){if(this.isInAuto(e.target))return e.preventDefault()},e.prototype.mouseUpInAutoCb=function(e){var t;if(this._currentMode==="reminder")return!0;t=e.target;while(t&&t.tagName!=="LI")t=t.parentElement;return t?this.editor.doHotStringAction(t.item):this.reset("end")},e.prototype.isInAuto=function(e){return e===this.el||$(e).parents("#CNE_autocomplete").length!==0},e.prototype.realtimeContacts=function(e){var t,n=this;return e.length===0?(e.once("sync",function(){return n.realtimeContacts(e)}),!0):(t=function(){return n._auto.setItems("contact",e.map(function(e){return{text:e.getFN(),type:"contact",model:e}}))},t(),e.on({add:t,remove:t,"change:name":t}))},e.prototype.printHotString=function(){return console.info('_hsType = "'+this._hsType+'"','_hsLeft = "'+this._hsLeft+'"','_hsRight = "'+this._hsRight+'"')},e}()}),require.register("CNeditor/line",function(e,t,n){var r;r=function(){function e(){var e,t,n,r,i,s,o,u,a,f,l,c;if(arguments.length===0)return;n=arguments[0],c=arguments[1],e=arguments[2],t=arguments[3],l=arguments[4],a=arguments[5],r=arguments[6],n._highestId+=1,i="CNID_"+n._highestId,o=document.createElement("div"),o.setAttribute("class",c+"-"+e),r!=null?(o.appendChild(r),o.lastChild.nodeName!=="BR"&&o.appendChild(document.createElement("br"))):(f=document.createElement("span"),f.appendChild(document.createTextNode("")),o.appendChild(f),o.appendChild(document.createElement("br"))),this.line$=$(o),l!=null?(this.linePrev=l,s=l.line$[0].parentNode,l.lineNext!=null?(u=l.lineNext,s.insertBefore(o,u.line$[0]),this.lineNext=u,u.linePrev=this):(s.appendChild(o),this.lineNext=null),l.lineNext=this):a!=null&&(s=a.line$[0].parentNode,this.lineNext=a,s.insertBefore(o,a.line$[0]),a.linePrev!=null?(this.linePrev=a.linePrev,a.linePrev.lineNext=this):this.linePrev=null,a.linePrev=this),o.id=i,this.lineID=i,this.lineType=c,this.lineDepthAbs=e,this.lineDepthRel=t,n._lines[i]=this}return e.prototype.setType=function(e){return this.lineType=e,this.line$.prop("class",""+e+"-"+this.lineDepthAbs)},e.prototype.setDepthAbs=function(e){return this.lineDepthAbs=e,this.line$.prop("class",""+this.lineType+"-"+e)},e.prototype.setTypeDepth=function(e,t){return this.lineType=e,this.lineDepthAbs=t,this.line$.prop("class",""+e+"-"+t)},e}(),r.clone=function(e){var t;return t=new r,t.line$=e.line$.clone(),t.lineID=e.lineID,t.lineType=e.lineType,t.lineDepthAbs=e.lineDepthAbs,t.lineDepthRel=e.lineDepthRel,t.linePrev=e.linePrev,t.lineNext=e.lineNext,t},n.exports=r}),require.register("CNeditor/logging",function(e,t,n){console.info=function(){},n.exports={printHistory:function(e,t){var n,r,i,s,o,u,a;e||(e=""),console.info(e+" _history.index : "+t.index),a=t.history;for(i=o=0,u=a.length;o<u;i=++o)s=a[i],t.index===i?n=" <---":(n=" ",r=$(s).text(),r===""&&(r="_")),console.info(i,r,t.historySelect[i],n);return!0},printTasksModifStacks:function(e,t){var n,r,i;e||(e=""),i="  _tasksToBeSaved : ";for(n in t)r=t[n],i+=n+":",r.created&&(i+="created-"),r.modified&&(i+="modified-"),r.deleted&&(i+="deleted-"),r.removed&&(i+="removed-"),i=i.slice(0,-1),i+=", ";return i=i.slice(0,-2),console.info(i),!0}}}),require.register("CNeditor/request",function(e,t,n){e.request=function(e,t,n,r){return $.ajax({type:e,url:t,data:n!=null?JSON.stringify(n):null,contentType:n!=null?"application/json":null,success:function(e){if(r!=null)return r(null,e)},error:function(){if((n!=null?n.msg:void 0)!=null&&r!=null)return r(new Error(n.msg));if(r!=null)return r(new Error("Server error occured"))}})},e.get=function(t,n){return e.request("GET",t,null,n)},e.post=function(t,n,r){return e.request("POST",t,n,r)},e.put=function(t,n,r){return e.request("PUT",t,n,r)},e.del=function(t,n){return e.request("DELETE",t,null,n)}}),require.register("CNeditor/tags",function(e,t,n){var r,i,s,o=function(e,t){return function(){return e.apply(t,arguments)}};s=t("./selection"),r=t("./contactpopover"),n.exports=i=function(){function e(e,t){this.editor=e,this.models=t,this._updateReminderSegment=o(this._updateReminderSegment,this),this._removeReminderSegment=o(this._removeReminderSegment,this),this._updateContactSegment=o(this._updateContactSegment,this),this._removeContactSegment=o(this._removeContactSegment,this),this.handle=o(this.handle,this),this.empty=o(this.empty,this),this._tagList=[],this.oldList=null,this._areTagsEditable=!0,window.taglist=this._tagList,this.contactPopover=new r,this.models.contactCollection.on({"change:fn":this._updateContactSegment,destroy:this._removeContactSegment}),this.models.alarmCollection.on({"change:trigg":this._updateReminderSegment,destroy:this._removeReminderSegment})}return e.prototype.setTagEditable=function(){var e,t,n,r;if(!this._areTagsEditable){r=this._tagList;for(t=0,n=r.length;t<n;t++)e=r[t],e.contentEditable=!0;return this._areTagsEditable=!0}},e.prototype.setTagUnEditable=function(){var e,t,n,r;if(this._areTagsEditable){r=this._tagList;for(t=0,n=r.length;t<n;t++)e=r[t],e.contentEditable=!1;return this._areTagsEditable=!1}},e.prototype.create=function(e,t){var n,r,i=this;t.classList.remove("CNE_hot_string"),t.contentEditable=this._areTagsEditable;switch(e){case"contact":return t.classList.add("CNE_contact"),t.dataset.type="contact",this.handle(t);case"reminder":return t.classList.add("CNE_reminder"),t.dataset.type="reminder",r=Date.create(t.dataset.value),n=new this.models.Alarm({id:t.dataset.id||null,trigg:r.utc().format(this.models.Alarm.dateFormat)}),this.models.alarmCollection.add(n),this.handle(t),n.save().done(function(){return t.dataset.id=n.id}).fail(function(e){return console.log(e),console.log("failed to save CNE_reminder"),i.remove(t)})}},e.prototype.empty=function(e){return this.isFullReplaceContent=e,this.oldList=_.clone(this._tagList),this._tagList=[]},e.prototype.handle=function(e,t){return this._tagList.push(e)},e.prototype.refreshAll=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m=this;n=function(e){return function(t){return e.dataset.id===t.dataset.id}};if(!this.isFullReplaceContent){h=this.oldList||[];for(o=0,f=h.length;o<f;o++)i=h[o],this._tagList.some(n(i))||i.dataset.type==="reminder"&&this.remove(i)}if(this.oldList&&!this.isFullReplaceContent){p=this._tagList;for(u=0,l=p.length;u<l;u++)r=p[u],this.oldList.some(n(r))||r.dataset.type==="reminder"&&(delete r.dataset.id,t=Date.create(r.dataset.value),e=new this.models.Alarm({trigg:t.utc().format(this.models.Alarm.dateFormat)}),this.models.alarmCollection.add(e),e.save().done(function(){return r.dataset.id=e.id}).fail(function(e){return console.log(e),console.log("failed to save CNE_reminder"),m.remove(s)}))}d=this._tagList,v=[];for(a=0,c=d.length;a<c;a++)s=d[a],v.push(this.refresh(s));return v},e.prototype.refresh=function(e){var t,n,r=this;switch(e.dataset.type){case"reminder":return t=this.models.alarmCollection.get(e.dataset.id),t?(n=Date.utc.create(t.get("trigg")).utc(!1).format(),e.textContent=n):(t=new this.models.Alarm({id:e.dataset.id}),t.fetch({error:function(){return r.models.alarmCollection.remove(t),r.remove(e)}}),this.models.alarmCollection.add(t));case"contact":return t=this.models.contactCollection.get(e.dataset.id),e.textContent=t.get("fn")}},e.prototype.remove=function(e){var t;this._tagList=_.without(this._tagList,e);switch(e.dataset.type){case"reminder":e.textContent="@@"+e.textContent,t=this.models.alarmCollection.get(e.dataset.id),t&&t.destroy();break;case"contact":e.textContent="@"+e.textContent}return e.classList.remove("CNE_reminder"),e.classList.remove("CNE_contact"),delete e.dataset.id,delete e.dataset.type,delete e.dataset.value},e.prototype.removeFromRange=function(e){var t,n,r;r=s.getSegment(e.startContainer,0),t=s.getSegment(e.endContainer,0),console.info("_tagList at beginning",this._tagList);if(r===t)return null;n=r.nextSibling;while(n!==t){if(n.nodeName==="BR"){n=n.parentElement.nextSibling.firstChild;if(n===t)break}n.dataset.type&&this.remove(n),n=n.nextSibling}return!0},e.prototype.clickCb=function(e){var t,n;n=this.contactPopover.hide();if(e.target.dataset.type==="contact"&&e.target!==n)return t=this.models.contactCollection.get(e.target.dataset.id),this.contactPopover.show(e.target,t)},e.prototype._removeContactSegment=function(e){var t,n,r,i,s;i=this._tagList,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.dataset.type==="contact"&&t.dataset.id===e.id?s.push(this.remove(t)):s.push(void 0);return s},e.prototype._updateContactSegment=function(e){var t,n,r,i,s;i=this._tagList,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.dataset.type==="contact"&&t.dataset.id===e.id?s.push(t.textContent=e.get("fn")):s.push(void 0);return s},e.prototype._removeReminderSegment=function(e){var t,n,r,i,s;i=this._tagList,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.dataset.type==="reminder"&&t.dataset.id===e.id?s.push(this.remove(t)):s.push(void 0);return s},e.prototype._updateReminderSegment=function(e){var t,n,r,i,s,o;s=this._tagList,o=[];for(r=0,i=s.length;r<i;r++)t=s[r],t.dataset.type==="reminder"&&t.dataset.id===e.id?(n=Date.utc.create(e.get("trigg")).utc(!1).format(),o.push(t.textContent=n)):o.push(void 0);return o},e}()}),require.register("CNeditor/urlpopover",function(e,t,n){var r,i,s=function(e,t){return function(){return e.apply(t,arguments)}};i=t("./selection"),n.exports=r=function(){function e(e){var t,n,r,i,o,u,a,f=this;return this.editor=e,this.validate=s(this.validate,this),this.cancel=s(this.cancel,this),this.clickOut=s(this.clickOut,this),this.isOn=!1,this.el=document.createElement("div"),this.el.id="CNE_urlPopover",this.el.className="CNE_urlpop",this.el.contentEditable=!1,this.el.innerHTML='<span class="CNE_urlpop_head">Link</span>\n<span  class="CNE_urlpop_shortcuts">(Ctrl+K)</span>\n<div class="CNE_urlpop-content">\n    <a target="_blank">Open link <span class="CNE_urlpop_shortcuts">\n        (Ctrl+click)</span></a></br>\n    <span>url</span><input type="text"></br>\n    <span>Text</span><input type="text"></br>\n    <button class="btn">ok</button>\n    <button class="btn">Cancel</button>\n    <button class="btn">Delete</button>\n</div>',this.el.titleElt=this.el.firstChild,this.el.link=this.el.getElementsByTagName("A")[0],u=this.el.querySelectorAll("button"),r=u[0],t=u[1],n=u[2],r.addEventListener("click",this.validate),t.addEventListener("click",function(e){return e.stopPropagation(),f.cancel(!1)}),n.addEventListener("click",function(){return f.el.urlInput.value="",f.validate()}),a=this.el.querySelectorAll("input"),o=a[0],i=a[1],this.el.urlInput=o,this.el.textInput=i,this.el.addEventListener("keypress",function(e){return e.keyCode===13?(f.validate(),e.stopPropagation()):e.keyCode===27&&f.cancel(!1),!1}),this.editor.editorBody.addEventListener("mouseup",this.clickOut),!0}return e.prototype.show=function(e,t){var n,r,i,s,o,u,a;this.editor.disable(),this.isOn=!0,this.isLinkCreation=t,this.el.initialSelRg=this.editor.currentSel.theoricalRange.cloneRange(),this.segments=e,r=e[0],this.el.style.left=r.offsetLeft+"px",this.el.style.top=r.offsetTop+20+"px",n=r.href;if(n===""||n==="http:///")n="http://";this.el.urlInput.value=n,i="";for(s=0,u=e.length;s<u;s++)r=e[s],i+=r.textContent;this.el.textInput.value=i,this.el.initialTxt=i,t?(this.el.titleElt.textContent="Create Link",this.el.link.style.display="none"):(this.el.titleElt.textContent="Edit Link",this.el.link.style.display="inline-block",this.el.link.href=n),r.parentElement.parentElement.appendChild(this.el),this.el.urlInput.select(),this.el.urlInput.focus();for(o=0,a=e.length;o<a;o++)r=e[o],r.classList.add("CNE_url_in_edition");return!0},e.prototype.clickOut=function(e){var t;t=e.target;while(t!==this.el&&t!==this.editor.editorBody)t=t.parentNode;if(t!==this.el)return this.cancel(!0)},e.prototype.cancel=function(e){var t,n,r,s,o,u,a,f,l,c,h;if(!this.isOn)return;this.el.parentElement.removeChild(this.el),this.isOn=!1,h=this.segments;for(l=0,c=h.length;l<c;l++)a=h[l],a.classList.remove("CNE_url_in_edition");return this.isLinkCreation?(o=this.segments[0],u=this.segments[this.segments.length-1],t={cont:o,offset:0},n={cont:u,offset:u.childNodes.length},r=[t,n],i.normalizeBPs(r),s=i._getLineDiv(o),this.editor._applyAhrefToSegments(o,u,r,!1,""),this.editor._fusionSimilarSegments(s,r),e||this.editor.setSelectionBp(t,n)):e||(f=this.editor.getEditorSelection(),f.removeAllRanges(),f.addRange(this.el.initialSelRg)),this.editor.setFocus(),this.editor.enable(),!0},e.prototype.validate=function(e){var t,n,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E;e&&e.stopPropagation();if(this.el.urlInput.value===""&&this.isLinkCreation)return this.cancel(!1);this.el.parentElement.removeChild(this.el),this.isOn=!1,b=this.segments;for(d=0,g=b.length;d<g;d++)h=b[d],h.classList.remove("CNE_url_in_edition");this.isLinkCreation||(p=this.editor.getEditorSelection(),p.removeAllRanges(),p.addRange(this.el.initialSelRg),this.editor._history.addStep()),f=this.segments[0].parentElement;if(this.el.urlInput.value==="")return u=this.segments.length,n={cont:this.segments[0].firstChild,offset:0},r={cont:this.segments[u-1].firstChild,offset:this.segments[u-1].firstChild.length},s=[n,r],this.editor._applyAhrefToSegments(this.segments[0],this.segments[u-1],s,!1,""),this.editor._fusionSimilarSegments(f,s),c=document.createRange(),n=s[0],r=s[1],c.setStart(n.cont,n.offset),c.setEnd(r.cont,r.offset),p=this.editor.getEditorSelection(),p.removeAllRanges(),p.addRange(c),this.editor.setFocus(),this.editor.enable(),this.editor.editorTarget$.trigger(jQuery.Event("onChange")),!0;if(this.el.initialTxt===this.el.textInput.value){w=this.segments;for(v=0,y=w.length;v<y;v++)h=w[v],h.href=this.el.urlInput.value;a=h}else{h=this.segments[0],h.href=this.el.urlInput.value,h.textContent=this.el.textInput.value,l=h.parentNode;for(o=m=1,E=this.segments.length-1;m<=E;o=m+=1)h=this.segments[o],l.removeChild(h);a=this.segments[0]}o=i.getSegmentIndex(a),o=o[1],t=i.normalizeBP(f,o+1),this.editor._fusionSimilarSegments(f,[t]),t=this.insertSpaceAfterUrl(i.getNestedSegment(t.cont)),this.editor._setCaret(t.cont,t.offset),this.editor.setFocus(),this.editor.enable(),this.editor.editorTarget$.trigger(jQuery.Event("onChange"));if(f.dataset.type==="task")return this.editor._stackTaskChange(f.task,"modified")},e.prototype.insertSpaceAfterUrl=function(e){var t,n,r,s,o;return r=e.nextSibling,r.nodeName==="BR"?(s=this.editor._insertSegmentAfterSeg(e),t={cont:s.firstChild,offset:1}):(n=i.getSegmentIndex(e)[1]+1,t=i.normalizeBP(e.parentElement,n,!0),o=t.cont,t.offset=0),t},e}()}),typeof exports!="undefined"&&(exports.js_beautify=js_beautify),!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function s(){i.trigger("closed").remove()}var n=e(this),r=n.attr("data-target"),i;r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=n.hasClass("alert")?n:n.parent()),i.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,s):s()},e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e(function(){e("body").on("click.alert.data-api",t,n.prototype.close)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.parent('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f=e.Event("slide",{relatedTarget:i[0]});this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u]();if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}},e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(function(){e("body").on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=!i.data("modal")&&e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})})}(window.jQuery),!function(e){"use strict";function r(){i(e(t)).removeClass("open")}function i(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var t="[data-toggle=dropdown]",n=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};n.prototype={constructor:n,toggle:function(t){var n=e(this),s,o;if(n.is(".disabled, :disabled"))return;return s=i(n),o=s.hasClass("open"),r(),o||(s.toggleClass("open"),n.focus()),!1},keydown:function(t){var n,r,s,o,u,a;if(!/(38|40|27)/.test(t.keyCode))return;n=e(this),t.preventDefault(),t.stopPropagation();if(n.is(".disabled, :disabled"))return;o=i(n),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return n.click();r=e("[role=menu] li:not(.divider) a",o);if(!r.length)return;a=r.index(r.filter(":focus")),t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<r.length-1&&a++,~a||(a=0),r.eq(a).focus()}},e.fn.dropdown=function(t){return this.each(function(){var r=e(this),i=r.data("dropdown");i||r.data("dropdown",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.dropdown.Constructor=n,e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",r),e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",t,n.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",t+", [role=menu]",n.prototype.keydown)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var t=this,n=this.tip();return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active a").last()[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery);var qq=qq||{};qq.extend=function(e,t){for(var n in t)e[n]=t[n]},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var r=e.length;n<0&&(n+=r);for(;n<r;n++)if(n in e&&e[n]===t)return n;return-1},qq.getUniqueId=function(){var e=0;return function(){return e++}}(),qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!=-1},qq.safari=function(){return navigator.vendor!=undefined&&navigator.vendor.indexOf("Apple")!=-1},qq.chrome=function(){return navigator.vendor!=undefined&&navigator.vendor.indexOf("Google")!=-1},qq.firefox=function(){return navigator.userAgent.indexOf("Mozilla")!=-1&&navigator.vendor!=undefined&&navigator.vendor==""},qq.windows=function(){return navigator.platform=="Win32"},qq.attach=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq.detach(e,t,n)}},qq.detach=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n)},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.insertBefore=function(e,t){t.parentNode.insertBefore(e,t)},qq.remove=function(e){e.parentNode.removeChild(e)},qq.contains=function(e,t){return e==t?!0:e.contains?e.contains(t):!!(t.compareDocumentPosition(e)&8)},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.css=function(e,t){t.opacity!=null&&typeof e.style.opacity!="string"&&typeof e.filters!="undefined"&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t)},qq.hasClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");return n.test(e.className)},qq.addClass=function(e,t){qq.hasClass(e,t)||(e.className+=" "+t)},qq.removeClass=function(e,t){var n=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,"")},qq.setText=function(e,t){e.innerText=t,e.textContent=t},qq.children=function(e){var t=[],n=e.firstChild;while(n)n.nodeType==1&&t.push(n),n=n.nextSibling;return t},qq.getByClass=function(e,t){if(e.querySelectorAll)return e.querySelectorAll("."+t);var n=[],r=e.getElementsByTagName("*"),i=r.length;for(var s=0;s<i;s++)qq.hasClass(r[s],t)&&n.push(r[s]);return n},qq.obj2url=function(e,t,n){var r=[],i="&",s=function(e,n){var i=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;i!="undefined"&&n!="undefined"&&r.push(typeof e=="object"?qq.obj2url(e,i,!0):Object.prototype.toString.call(e)==="[object Function]"?encodeURIComponent(i)+"="+encodeURIComponent(e()):encodeURIComponent(i)+"="+encodeURIComponent(e))};if(!n&&t)i=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",r.push(t),r.push(qq.obj2url(e));else if(Object.prototype.toString.call(e)==="[object Array]"&&typeof e!="undefined")for(var o=0,u=e.length;o<u;++o)s(e[o],o);else if(typeof e!="undefined"&&e!==null&&typeof e=="object")for(var o in e)s(e[o],o);else r.push(encodeURIComponent(t)+"="+encodeURIComponent(e));return r.join(i).replace(/^&/,"").replace(/%20/g,"+")};var qq=qq||{};qq.FileUploaderBasic=function(e){var t=this;this._options={debug:!1,action:"/server/upload",params:{},customHeaders:{},button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,forceMultipart:!1,allowedExtensions:[],acceptFiles:null,sizeLimit:0,minSizeLimit:0,stopOnFirstInvalidFile:!0,onSubmit:function(e,t){},onComplete:function(e,t,n){},onCancel:function(e,t){},onUpload:function(e,t,n){},onProgress:function(e,t,n,r){},onError:function(e,t,n){},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(e){alert(e)},inputName:"qqfile"},qq.extend(this._options,e),this._wrapCallbacks(),qq.extend(this,qq.DisposeSupport),this._filesInProgress=0,this._storedFileIds=[],this._handler=this._createUploadHandler(),this._options.button&&(this._button=this._createUploadButton(this._options.button)),this._preventLeaveInProgress()},qq.FileUploaderBasic.prototype={log:function(e){this._options.debug&&window.console&&console.log("[uploader] "+e)},setParams:function(e){this._options.params=e},getInProgress:function(){return this._filesInProgress},uploadStoredFiles:function(){for(var e=0;e<this._storedFileIds.length;e++)this._filesInProgress++,this._handler.upload(this._storedFileIds[e],this._options.params)},clearStoredFiles:function(){this._storedFileIds=[]},_createUploadButton:function(e){var t=this,n=new qq.UploadButton({element:e,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),acceptFiles:this._options.acceptFiles,onChange:function(e){t._onInputChange(e)}});return this.addDisposer(function(){n.dispose()}),n},_createUploadHandler:function(){var e=this,t;qq.UploadHandlerXhr.isSupported()?t="UploadHandlerXhr":t="UploadHandlerForm";var n=new qq[t]({debug:this._options.debug,action:this._options.action,forceMultipart:this._options.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.customHeaders,inputName:this._options.inputName,demoMode:this._options.demoMode,onProgress:function(t,n,r,i){e._onProgress(t,n,r,i),e._options.onProgress(t,n,r,i)},onComplete:function(t,n,r){e._onComplete(t,n,r),e._options.onComplete(t,n,r)},onCancel:function(t,n){var r=qq.indexOf(e._storedFileIds,t);r>=0&&e._storedFileIds.splice(r,1),e._onCancel(t,n),e._options.onCancel(t,n)},onError:e._options.onError,onUpload:function(t,n,r){e._onUpload(t,n,r),e._options.onUpload(t,n,r)}});return n},_preventLeaveInProgress:function(){var e=this;this._attach(window,"beforeunload",function(t){if(!e._filesInProgress)return;var t=t||window.event;return t.returnValue=e._options.messages.onLeave,e._options.messages.onLeave})},_onSubmit:function(e,t){this._options.autoUpload&&this._filesInProgress++},_onProgress:function(e,t,n,r){},_onComplete:function(e,t,n){var r=qq.indexOf(this._storedFileIds,e);r>=0&&this._storedFileIds.splice(r,1),this._filesInProgress--},_onCancel:function(e,t){this._options.autoUpload&&this._filesInProgress--},_onUpload:function(e,t,n){},_onInputChange:function(e){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(e.files):this._validateFile(e)&&this._uploadFile(e),this._button.reset()},_uploadFileList:function(e){if(e.length>0){for(var t=0;t<e.length;t++)if(this._validateFile(e[t]))this._uploadFile(e[t]);else if(this._options.stopOnFirstInvalidFile)return}else this._error("noFilesError","")},_uploadFile:function(e){var t=this._handler.add(e),n=this._handler.getName(t);this._options.onSubmit(t,n)!==!1&&(this._onSubmit(t,n),this._options.autoUpload?this._handler.upload(t,this._options.params):this._storeFileForLater(t))},_storeFileForLater:function(e){this._storedFileIds.push(e)},_validateFile:function(e){var t,n;return e.value?t=e.value.replace(/.*(\/|\\)/,""):(t=e.fileName!==null&&e.fileName!==undefined?e.fileName:e.name,n=e.fileSize!==null&&e.fileSize!==undefined?e.fileSize:e.size),this._isAllowedExtension(t)?n===0?(this._error("emptyError",t),!1):n&&this._options.sizeLimit&&n>this._options.sizeLimit?(this._error("sizeError",t),!1):n&&n<this._options.minSizeLimit?(this._error("minSizeError",t),!1):!0:(this._error("typeError",t),!1)},_error:function(e,t){function r(e,t){n=n.replace(e,t)}var n=this._options.messages[e],i=this._options.allowedExtensions.join(", ");r("{file}",this._formatFileName(t)),r("{extensions}",i),r("{sizeLimit}",this._formatSize(this._options.sizeLimit)),r("{minSizeLimit}",this._formatSize(this._options.minSizeLimit)),this._options.onError(null,t,n),this._options.showMessage(n)},_formatFileName:function(e){return e.length>33&&(e=e.slice(0,19)+"..."+e.slice(-13)),e},_isAllowedExtension:function(e){var t=-1!==e.indexOf(".")?e.replace(/.*[.]/,"").toLowerCase():"",n=this._options.allowedExtensions;if(!n.length)return!0;for(var r=0;r<n.length;r++)if(n[r].toLowerCase()==t)return!0;return!1},_formatSize:function(e){var t=-1;do e/=1024,t++;while(e>99);return Math.max(e,.1).toFixed(1)+["kB","MB","GB","TB","PB","EB"][t]},_wrapCallbacks:function(){var e,t;e=this,t=function(t,n){try{return t.apply(this,n)}catch(r){e.log("Caught "+r+" in callback: "+t)}};for(var n in this._options)/^on[A-Z]/.test(n)&&function(){var r=e._options[n];e._options[n]=function(){return t(r,arguments)}}()}},qq.FileUploader=function(e){qq.FileUploaderBasic.apply(this,arguments),qq.extend(this._options,{element:null,listElement:null,dragText:"Drop files here to upload",extraDropzones:[],uploadButtonText:"Upload a file",cancelButtonText:"Cancel",failUploadText:"Upload failed",template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>{dragText}</span></div>'+(this._options.button?"":'<div class="qq-upload-button">{uploadButtonText}</div>')+(this._options.listElement?"":'<ul class="qq-upload-list"></ul>')+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><span class="qq-upload-failed-text">{failUploadtext}</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",size:"qq-upload-size",cancel:"qq-upload-cancel",failText:"qq-upload-failed-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null},extraMessages:{formatProgress:"{percent}% of {total_size}",tooManyFilesError:"You may only drop one file"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0}}),qq.extend(this._options,e),this._wrapCallbacks(),qq.extend(this._options.messages,this._options.extraMessages),this._options.template=this._options.template.replace(/\{dragText\}/g,this._options.dragText),this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.uploadButtonText),this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.cancelButtonText),this._options.fileTemplate=this._options.fileTemplate.replace(/\{failUploadtext\}/g,this._options.failUploadText),this._element=this._options.element,this._element.innerHTML=this._options.template,this._listElement=this._options.listElement||this._find(this._element,"list"),this._classes=this._options.classes,this._button||(this._button=this._createUploadButton(this._find(this._element,"button"))),this._bindCancelEvent(),this._setupDragDrop()},qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype),qq.extend(qq.FileUploader.prototype,{clearStoredFiles:function(){qq.FileUploaderBasic.prototype.clearStoredFiles.apply(this,arguments),this._listElement.innerHTML=""},addExtraDropzone:function(e){this._setupExtraDropzone(e)},removeExtraDropzone:function(e){var t=this._options.extraDropzones;for(var n in t)if(t[n]===e)return this._options.extraDropzones.splice(n,1)},_leaving_document_out:function(e){return(qq.chrome()||qq.safari()&&qq.windows())&&e.clientX==0&&e.clientY==0||qq.firefox()&&!e.relatedTarget},_storeFileForLater:function(e){qq.FileUploaderBasic.prototype._storeFileForLater.apply(this,arguments);var t=this._getItemByFileId(e);this._find(t,"spinner").style.display="none"},_find:function(e,t){var n=qq.getByClass(e,this._options.classes[t])[0];if(!n)throw new Error("element not found "+t);return n},_setupExtraDropzone:function(e){this._options.extraDropzones.push(e),this._setupDropzone(e)},_setupDropzone:function(e){var t=this,n=new qq.UploadDropZone({element:e,onEnter:function(n){qq.addClass(e,t._classes.dropActive),n.stopPropagation()},onLeave:function(e){},onLeaveNotDescendants:function(n){qq.removeClass(e,t._classes.dropActive)},onDrop:function(n){e.style.display="none",qq.removeClass(e,t._classes.dropActive),n.dataTransfer.files.length>1&&!t._options.multiple?t._error("tooManyFilesError",""):t._uploadFileList(n.dataTransfer.files)}});this.addDisposer(function(){n.dispose()}),e.style.display="none"},_setupDragDrop:function(){var e=this._find(this._element,"drop"),t=this;this._options.extraDropzones.push(e);var n=this._options.extraDropzones,r;for(r=0;r<n.length;r++)this._setupDropzone(n[r]);qq.ie()||this._attach(document,"dragenter",function(s){if(qq.hasClass(e,t._classes.dropDisabled))return;e.style.display="block";for(r=0;r<n.length;r++)n[r].style.display="block"}),this._attach(document,"dragleave",function(e){var t=document.elementFromPoint(e.clientX,e.clientY);if(qq.FileUploader.prototype._leaving_document_out(e))for(r=0;r<n.length;r++)n[r].style.display="none"}),qq.attach(document,"drop",function(e){for(r=0;r<n.length;r++)n[r].style.display="none";e.preventDefault()})},_onSubmit:function(e,t){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onProgress:function(e,t,n,r){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var i=this._getItemByFileId(e);if(n===r){var s=this._find(i,"cancel");s.style.display="none"}var o=this._find(i,"size");o.style.display="inline";var u,a=Math.round(n/r*100);n!=r?u=this._formatProgress(n,r):u=this._formatSize(r),this._find(i,"progressBar").style.width=a+"%",qq.setText(o,u)},_onComplete:function(e,t,n){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var r=this._getItemByFileId(e);qq.UploadHandlerXhr.isSupported()&&qq.remove(this._find(r,"progressBar")),(!this._options.disableCancelForFormUploads||qq.UploadHandlerXhr.isSupported())&&qq.remove(this._find(r,"cancel")),qq.remove(this._find(r,"spinner"));if(n.success)qq.addClass(r,this._classes.success),this._classes.successIcon&&(this._find(r,"finished").style.display="inline-block",qq.addClass(r,this._classes.successIcon));else{var i=n.error?n.error:this._options.failUploadText;this._options.onError(e,t,i),qq.addClass(r,this._classes.fail),this._classes.failIcon&&(this._find(r,"finished").style.display="inline-block",qq.addClass(r,this._classes.failIcon)),this._controlFailureTextDisplay(r,n)}},_onUpload:function(e,t,n){qq.FileUploaderBasic.prototype._onUpload.apply(this,arguments);var r=this._getItemByFileId(e),i=this._find(r,"spinner");i.style.display=="none"&&(i.style.display="inline-block")},_addToList:function(e,t){var n=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.UploadHandlerXhr.isSupported()){var r=this._find(n,"cancel");qq.remove(r)}qq.UploadHandlerXhr.isSupported()||qq.remove(this._find(n,"progressBar")),n.qqFileId=e;var i=this._find(n,"file");qq.setText(i,this._formatFileName(t)),this._find(n,"size").style.display="none",this._options.multiple||this._clearList(),this._listElement.appendChild(n)},_clearList:function(){this._listElement.innerHTML="",this.clearStoredFiles()},_getItemByFileId:function(e){var t=this._listElement.firstChild;while(t){if(t.qqFileId==e)return t;t=t.nextSibling}},_bindCancelEvent:function(){var e=this,t=this._listElement;this._attach(t,"click",function(t){t=t||window.event;var n=t.target||t.srcElement;if(qq.hasClass(n,e._classes.cancel)){qq.preventDefault(t);var r=n.parentNode;e._handler.cancel(r.qqFileId),qq.remove(r)}})},_formatProgress:function(e,t){function r(e,t){n=n.replace(e,t)}var n=this._options.messages.formatProgress;return r("{percent}",Math.round(e/t*100)),r("{total_size}",this._formatSize(t)),n},_controlFailureTextDisplay:function(e,t){var n,r,i,s,o;n=this._options.failedUploadTextDisplay.mode,r=this._options.failedUploadTextDisplay.maxChars,i=this._options.failedUploadTextDisplay.responseProperty;if(n==="custom"){var s=t[i];s?(s.length>r&&(o=s.substring(0,r)+"..."),this._find(e,"failText").innerText=o||s,this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,s)):this.log("'"+i+"' is not a valid property on the server response.")}else n==="none"?qq.remove(this._find(e,"failText")):n!=="default"&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid")},_showTooltip:function(e,t){e.title=t}}),qq.UploadDropZone=function(e){this._options={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}},qq.extend(this._options,e),qq.extend(this,qq.DisposeSupport),this._element=this._options.element,this._disableDropOutside(),this._attachEvents()},qq.UploadDropZone.prototype={_dragover_should_be_canceled:function(){return qq.safari()||qq.firefox()&&qq.windows()},_disableDropOutside:function(e){qq.UploadDropZone.dropOutsideDisabled||(this._dragover_should_be_canceled?qq.attach(document,"dragover",function(e){e.preventDefault()}):qq.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var e=this;e._attach(e._element,"dragover",function(t){if(!e._isValidFileDrag(t))return;var n=qq.ie()?null:t.dataTransfer.effectAllowed;n=="move"||n=="linkMove"?t.dataTransfer.dropEffect="move":t.dataTransfer.dropEffect="copy",t.stopPropagation(),t.preventDefault()}),e._attach(e._element,"dragenter",function(t){if(!e._isValidFileDrag(t))return;e._options.onEnter(t)}),e._attach(e._element,"dragleave",function(t){if(!e._isValidFileDrag(t))return;e._options.onLeave(t);var n=document.elementFromPoint(t.clientX,t.clientY);if(qq.contains(this,n))return;e._options.onLeaveNotDescendants(t)}),e._attach(e._element,"drop",function(t){if(!e._isValidFileDrag(t))return;t.preventDefault(),e._options.onDrop(t)})},_isValidFileDrag:function(e){if(qq.ie())return!1;var t=e.dataTransfer,n=qq.safari();return t&&t.effectAllowed!="none"&&(t.files||!n&&t.types.contains&&t.types.contains("Files"))}},qq.UploadButton=function(e){this._options={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(e){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},qq.extend(this._options,e),qq.extend(this,qq.DisposeSupport),this._element=this._options.element,qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"}),this._input=this._createInput()},qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input),qq.removeClass(this._element,this._options.focusClass),this._input=this._createInput()},_createInput:function(){var e=document.createElement("input");this._options.multiple&&e.setAttribute("multiple","multiple"),this._options.acceptFiles&&e.setAttribute("accept",this._options.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",this._options.name),qq.css(e,{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),this._element.appendChild(e);var t=this;return this._attach(e,"change",function(){t._options.onChange(e)}),this._attach(e,"mouseover",function(){qq.addClass(t._element,t._options.hoverClass)}),this._attach(e,"mouseout",function(){qq.removeClass(t._element,t._options.hoverClass)}),this._attach(e,"focus",function(){qq.addClass(t._element,t._options.focusClass)}),this._attach(e,"blur",function(){qq.removeClass(t._element,t._options.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}},qq.UploadHandlerAbstract=function(e){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(e,t,n,r){},onComplete:function(e,t,n){},onCancel:function(e,t){},onUpload:function(e,t,n){}},qq.extend(this._options,e),this._queue=[],this._params=[]},qq.UploadHandlerAbstract.prototype={log:function(e){this._options.debug&&window.console&&console.log("[uploader] "+e)},add:function(e){},upload:function(e,t){var n=this._queue.push(e),r={};qq.extend(r,t),this._params[e]=r,n<=this._options.maxConnections&&this._upload(e,this._params[e])},cancel:function(e){this._cancel(e),this._dequeue(e)},cancelAll:function(){for(var e=0;e<this._queue.length;e++)this._cancel(this._queue[e]);this._queue=[]},getName:function(e){},getSize:function(e){},getQueue:function(){return this._queue},_upload:function(e){},_cancel:function(e){},_dequeue:function(e){var t=qq.indexOf(this._queue,e);this._queue.splice(t,1);var n=this._options.maxConnections;if(this._queue.length>=n&&t<n){var r=this._queue[n-1];this._upload(r,this._params[r])}}},qq.UploadHandlerForm=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._inputs={},this._detach_load_events={}},qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerForm.prototype,{add:function(e){e.setAttribute("name",this._options.inputName);var t="qq-upload-handler-iframe"+qq.getUniqueId();return this._inputs[t]=e,e.parentNode&&qq.remove(e),t},getName:function(e){return this._inputs[e].value.replace(/.*(\/|\\)/,"")},_cancel:function(e){this._options.onCancel(e,this.getName(e)),delete this._inputs[e],delete this._detach_load_events[e];var t=document.getElementById(e);t&&(t.setAttribute("src","javascript:false;"),qq.remove(t))},_upload:function(e,t){this._options.onUpload(e,this.getName(e),!1);var n=this._inputs[e];if(!n)throw new Error("file with passed id was not added, or already uploaded or cancelled");var r=this.getName(e);t[this._options.inputName]=r;var i=this._createIframe(e),s=this._createForm(i,t);s.appendChild(n);var o=this;return this._attachLoadEvent(i,function(){o.log("iframe loaded");var t=o._getIframeContentJSON(i);o._options.onComplete(e,r,t),o._dequeue(e),delete o._inputs[e],setTimeout(function(){o._detach_load_events[e](),delete o._detach_load_events[e],qq.remove(i)},1)}),s.submit(),qq.remove(s),e},_attachLoadEvent:function(e,t){this._detach_load_events[e.id]=qq.attach(e,"load",function(){if(!e.parentNode)return;try{if(e.contentDocument&&e.contentDocument.body&&e.contentDocument.body.innerHTML=="false")return}catch(n){}t()})},_getIframeContentJSON:function(iframe){try{var doc=iframe.contentDocument?iframe.contentDocument:iframe.contentWindow.document,response,innerHTML=doc.body.innerHTML;this.log("converting iframe's innerHTML to JSON"),this.log("innerHTML = "+innerHTML),innerHTML.slice(0,5).toLowerCase()=="<pre>"&&innerHTML.slice(-6).toLowerCase()=="</pre>"&&(innerHTML=doc.body.firstChild.firstChild.nodeValue),response=eval("("+innerHTML+")")}catch(err){response={success:!1}}return response},_createIframe:function(e){var t=qq.toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e,t){var n=this._options.demoMode?"GET":"POST",r=qq.toElement('<form method="'+n+'" enctype="multipart/form-data"></form>'),i=qq.obj2url(t,this._options.action);return r.setAttribute("action",i),r.setAttribute("target",e.name),r.style.display="none",document.body.appendChild(r),r}}),qq.UploadHandlerXhr=function(e){qq.UploadHandlerAbstract.apply(this,arguments),this._files=[],this._xhrs=[],this._loaded=[]},qq.UploadHandlerXhr.isSupported=function(){var e=document.createElement("input");return e.type="file","multiple"in e&&typeof File!="undefined"&&typeof FormData!="undefined"&&typeof (new XMLHttpRequest).upload!="undefined"},qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype),qq.extend(qq.UploadHandlerXhr.prototype,{add:function(e){if(e instanceof File)return this._files.push(e)-1;throw new Error("Passed obj in not a File (in qq.UploadHandlerXhr)")},getName:function(e){var t=this._files[e];return t.fileName!==null&&t.fileName!==undefined?t.fileName:t.name},getSize:function(e){var t=this._files[e];return t.fileSize!=null?t.fileSize:t.size},getLoaded:function(e){return this._loaded[e]||0},_upload:function(e,t){this._options.onUpload(e,this.getName(e),!0);var n=this._files[e],r=this.getName(e),i=this.getSize(e);this._loaded[e]=0;var s=this._xhrs[e]=new XMLHttpRequest,o=this;s.upload.onprogress=function(t){t.lengthComputable&&(o._loaded[e]=t.loaded,o._options.onProgress(e,r,t.loaded,t.total))},s.onreadystatechange=function(){s.readyState==4&&o._onComplete(e,s)},t=t||{},t[this._options.inputName]=r;var u=qq.obj2url(t,this._options.action),a=this._options.demoMode?"GET":"POST";s.open(a,u,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("X-File-Name",encodeURIComponent(r));if(this._options.forceMultipart){var f=new FormData;f.append(this._options.inputName,n),n=f}else s.setRequestHeader("Content-Type","application/octet-stream"),s.setRequestHeader("X-Mime-Type",n.type);for(key in this._options.customHeaders)s.setRequestHeader(key,this._options.customHeaders[key]);s.send(n)},_onComplete:function(id,xhr){"use strict";if(!this._files[id])return;var name=this.getName(id),size=this.getSize(id),response;this._options.onProgress(id,name,size,size),this.log("xhr - server response received"),this.log("responseText = "+xhr.responseText);try{typeof JSON.parse=="function"?response=JSON.parse(xhr.responseText):response=eval("("+xhr.responseText+")")}catch(err){response={}}xhr.status!==200&&this._options.onError(id,name,"XHR returned response code "+xhr.status),this._options.onComplete(id,name,response),this._xhrs[id]=null,this._dequeue(id)},_cancel:function(e){this._options.onCancel(e,this.getName(e)),this._files[e]=null,this._xhrs[e]&&(this._xhrs[e].abort(),this._xhrs[e]=null)}}),qq.DisposeSupport={_disposers:[],dispose:function(){var e;while(e=this._disposers.shift())e()},addDisposer:function(e){this._disposers.push(e)},_attach:function(){this.addDisposer(qq.attach.apply(this,arguments))}},function(e){e.cookie=function(t,n,r){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(n))||n===null||n===undefined)){r=e.extend({},r);if(n===null||n===undefined)r.expires=-1;if(typeof r.expires=="number"){var i=r.expires,s=r.expires=new Date;s.setDate(s.getDate()+i)}return n=String(n),document.cookie=[encodeURIComponent(t),"=",r.raw?n:encodeURIComponent(n),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}r=n||{};var o=r.raw?function(e){return e}:decodeURIComponent,u=document.cookie.split("; ");for(var a=0,f;f=u[a]&&u[a].split("=");a++)if(o(f[0])===t)return o(f[1]||"");return null}}(jQuery),function(e){function t(t){if(typeof t.data!="string")return;var n=t.handler,r=t.data.toLowerCase().split(" ");t.handler=function(t){if(!(this===t.target||!/textarea|select/i.test(t.target.nodeName)&&t.target.type!=="text"))return;var i=t.type!=="keypress"&&e.hotkeys.specialKeys[t.which],s=String.fromCharCode(t.which).toLowerCase(),o,u="",a={};t.altKey&&i!=="alt"&&(u+="alt+"),t.ctrlKey&&i!=="ctrl"&&(u+="ctrl+"),t.metaKey&&!t.ctrlKey&&i!=="meta"&&(u+="meta+"),t.shiftKey&&i!=="shift"&&(u+="shift+"),i?a[u+i]=!0:(a[u+s]=!0,a[u+e.hotkeys.shiftNums[s]]=!0,u==="shift+"&&(a[e.hotkeys.shiftNums[s]]=!0));for(var f=0,l=r.length;f<l;f++)if(a[r[f]])return n.apply(this,arguments)}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(jQuery),"use strict",function(){if(jQuery&&jQuery.jstree)return;var e=!1,t=!1,n=!1;(function(r){r.vakata={},r.vakata.css={get_css:function(e,t,n){e=e.toLowerCase();var r=n.cssRules||n.rules,i=0;do{if(r.length&&i>r.length+5)return!1;if(r[i].selectorText&&r[i].selectorText.toLowerCase()==e)return t===!0?(n.removeRule&&n.removeRule(i),n.deleteRule&&n.deleteRule(i),!0):r[i]}while(r[++i]);return!1},add_css:function(e,t){return r.jstree.css.get_css(e,!1,t)?!1:(t.insertRule?t.insertRule(e+" { }",0):t.addRule(e,null,0),r.vakata.css.get_css(e))},remove_css:function(e,t){return r.vakata.css.get_css(e,!0,t)},add_sheet:function(e){var t=!1,n=!0;if(e.str)return e.title&&(t=r("style[id='"+e.title+"-stylesheet']")[0]),t?n=!1:(t=document.createElement("style"),t.setAttribute("type","text/css"),e.title&&t.setAttribute("id",e.title+"-stylesheet")),t.styleSheet?n?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str:(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return t=document.createElement("link"),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(i){}}}};var i=[],s=-1,o={},u={};r.fn.jstree=function(e){var t=typeof e=="string",n=Array.prototype.slice.call(arguments,1),s=this;if(t){if(e.substring(0,1)=="_")return s;this.each(function(){var t=i[r.data(this,"jstree_instance_id")],o=t&&r.isFunction(t[e])?t[e].apply(t,n):t;if(typeof o!="undefined"&&(e.indexOf("is_")===0||o!==!0&&o!==!1))return s=o,!1})}else this.each(function(){var t=r.data(this,"jstree_instance_id"),s=[],u=e?r.extend({},!0,e):{},a=r(this),f=!1,l=[];s=s.concat(n),a.data("jstree")&&s.push(a.data("jstree")),u=s.length?r.extend.apply(null,[!0,u].concat(s)):u,typeof t!="undefined"&&i[t]&&i[t].destroy(),t=parseInt(i.push({}),10)-1,r.data(this,"jstree_instance_id",t),u.plugins=r.isArray(u.plugins)?u.plugins:r.jstree.defaults.plugins.slice(),u.plugins.unshift("core"),u.plugins=u.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),f=r.extend(!0,{},r.jstree.defaults,u),f.plugins=u.plugins,r.each(o,function(e,t){r.inArray(e,f.plugins)===-1?(f[e]=null,delete f[e]):l.push(e)}),f.plugins=l,i[t]=new r.jstree._instance(t,r(this).addClass("jstree jstree-"+t),f),r.each(i[t]._get_settings().plugins,function(e,n){i[t].data[n]={}}),r.each(i[t]._get_settings().plugins,function(e,n){o[n]&&o[n].__init.apply(i[t])}),setTimeout(function(){i[t]&&i[t].init()},0)});return s},r.jstree={defaults:{plugins:[]},_focused:function(){return i[s]||null},_reference:function(e){if(i[e])return i[e];var t=r(e);return!t.length&&typeof e=="string"&&(t=r("#"+e)),t.length?i[t.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(e,t,n){this.data={core:{}},this.get_settings=function(){return r.extend(!0,{},n)},this._get_settings=function(){return n},this.get_index=function(){return e},this.get_container=function(){return t},this.get_container_ul=function(){return t.children("ul:eq(0)")},this._set_settings=function(e){n=r.extend(!0,{},n,e)}},_fn:{},plugin:function(e,t){t=r.extend({},{__init:r.noop,__destroy:r.noop,_fn:{},defaults:!1},t),o[e]=t,r.jstree.defaults[e]=t.defaults,r.each(t._fn,function(t,n){n.plugin=e,n.old=r.jstree._fn[t],r.jstree._fn[t]=function(){var e,i=n,s=Array.prototype.slice.call(arguments),o=new r.Event("before.jstree"),u=!1;if(this.data.core.locked===!0&&t!=="unlock"&&t!=="is_locked")return;do{if(i&&i.plugin&&r.inArray(i.plugin,this._get_settings().plugins)!==-1)break;i=i.old}while(i);if(!i)return;if(t.indexOf("_")===0)e=i.apply(this,s);else{e=this.get_container().triggerHandler(o,{func:t,inst:this,args:s,plugin:i.plugin});if(e===!1)return;typeof e!="undefined"&&(s=e),e=i.apply(r.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:s,rslt:e,rlbk:u})},__rollback:function(){return u=this.get_rollback(),u},__call_old:function(e){return i.old.apply(this,e?Array.prototype.slice.call(arguments,1):s)}}),s)}return e},r.jstree._fn[t].old=n.old,r.jstree._fn[t].plugin=e})},rollback:function(e){e&&(r.isArray(e)||(e=[e]),r.each(e,function(e,t){i[t.i].set_rollback(t.h,t.d)}))}},r.jstree._fn=r.jstree._instance.prototype={},r(function(){var i=navigator.userAgent.toLowerCase(),s=(i.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],o=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(i)&&parseInt(s,10)==6){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(u){}o+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(i)&&parseInt(s,10)==7&&(t=!0,o+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(i)&&/mozilla/.test(i)&&parseFloat(s,10)<1.9&&(n=!0,o+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),r.vakata.css.add_sheet({str:o,title:"jstree"})}),r.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",r.proxy(function(e){var t=r(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",r.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(e){var t;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(n){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",r.proxy(function(e,t){var n=this._get_node(t.rslt.obj),i=this;n===-1&&(n=this.get_container_ul());if(!n.length)return;n.find("li").each(function(){var e=r(this);e.data("jstree")&&r.each(e.data("jstree"),function(t,n){i.data[t]&&r.isFunction(i["_"+t+"_notify"])&&i["_"+t+"_notify"].call(i,e,n)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",r.proxy(function(e,t){var n=this._get_node(t.rslt.obj),i=this;n===-1&&(n=this.get_container_ul());if(!n.length)return;n.find("li.jstree-open:not(:has(ul))").each(function(){i.load_node(this,r.noop,r.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),n=this._get_settings(),u=this;r.each(n.plugins,function(e,t){try{o[t].__destroy.apply(u)}catch(n){}}),this.__callback();if(this.is_focused())for(e in i)if(i.hasOwnProperty(e)&&e!=t){i[e].set_focus();break}t===s&&(s=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")}),r(document).unbind(".jstree-"+t).undelegate(".jstree-"+t),i[t]=null,delete i[t]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,n=!0,i=[],s=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=r.map(r.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=r.map(r.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(r.each(this.data.core.to_load,function(e,t){if(t=="#")return!0;r(t).length?i.push(t):s.push(t)}),i.length&&(this.data.core.to_load=s,r.each(i,function(e,r){t._is_loaded(r)||(t.load_node(r,function(){t.reload_nodes(!0)},function(){t.reload_nodes(!0)}),n=!1)}))),this.data.core.to_open.length&&r.each(this.data.core.to_open,function(e,n){t.open_node(n,!1,!0)}),n&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var e=this;this.data.core.to_open.length&&r.each(this.data.core.to_open,function(t,n){e.open_node(n,!1,!0)}),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),e=this._get_node(e),e||(e=-1),e!==-1?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,function(){t.__callback({obj:e}),t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(this.is_focused())return;var e=r.jstree._focused();e&&e.unset_focus(),this.get_container().addClass("jstree-focused"),s=this.get_index(),this.__callback()},is_focused:function(){return s==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),s=-1),this.__callback()},_get_node:function(e){var t=r(e,this.get_container());return t.is(".jstree")||e==-1?-1:(t=t.closest("li",this.get_container()),t.length?t:!1)},_get_next:function(e,t){return e=this._get_node(e),e===-1?this.get_container().find("> ul > li:first-child"):e.length?t?e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):!1:e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(e,t){e=this._get_node(e);if(e===-1)return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0?e.prevAll("li:eq(0)"):!1;if(e.prev("li").length){e=e.prev("li").eq(0);while(e.hasClass("jstree-open"))e=e.children("ul:eq(0)").children("li:last");return e}var n=e.parentsUntil(".jstree","li:eq(0)");return n.length?n:!1},_get_parent:function(e){e=this._get_node(e);if(e==-1||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return e=this._get_node(e),e===-1?this.get_container().children("ul:eq(0)").children("li"):e.length?e.children("ul:eq(0)").children("li"):!1},get_path:function(e,t){var n=[],r=this;return e=this._get_node(e),e===-1||!e||!e.length?!1:(e.parentsUntil(".jstree","li").each(function(){n.push(t?this.id:r.get_text(this))}),n.reverse(),n.push(t?e.attr("id"):this.get_text(e)),n)},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-open")},is_closed:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-closed")},is_leaf:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-leaf")},correct_state:function(e){e=this._get_node(e);if(!e||e===-1)return!1;e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},open_node:function(t,n,r){t=this._get_node(t);if(!t.length)return!1;if(!t.hasClass("jstree-closed"))return n&&n.call(),!1;var i=r||e?0:this._get_settings().core.animation,s=this;this._is_loaded(t)?(this._get_settings().core.open_parents&&t.parentsUntil(".jstree",".jstree-closed").each(function(){s.open_node(this,!1,!0)}),i&&t.children("ul").css("display","none"),t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),i?t.children("ul").stop(!0,!0).slideDown(i,function(){this.style.display="",s.after_open(t)}):s.after_open(t),this.__callback({obj:t}),n&&n.call()):(t.children("a").addClass("jstree-loading"),this.load_node(t,function(){s.open_node(t,n,r)},n))},after_open:function(e){this.__callback({obj:e})},close_node:function(t,n){t=this._get_node(t);var r=n||e?0:this._get_settings().core.animation,i=this;if(!t.length||!t.hasClass("jstree-open"))return!1;r&&t.children("ul").attr("style","display:block !important"),t.removeClass("jstree-open").addClass("jstree-closed"),r?t.children("ul").stop(!0,!0).slideUp(r,function(){this.style.display="",i.after_close(t)}):i.after_close(t),this.__callback({obj:t})},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){e=this._get_node(e);if(e.hasClass("jstree-closed"))return this.open_node(e);if(e.hasClass("jstree-open"))return this.close_node(e)},open_all:function(e,t,n){e=e?this._get_node(e):-1;if(!e||e===-1)e=this.get_container_ul();n?e=e.find("li.jstree-closed"):(n=e,e.is(".jstree-closed")?e=e.find("li.jstree-closed").andSelf():e=e.find("li.jstree-closed"));var r=this;e.each(function(){var e=this;r._is_loaded(this)?r.open_node(this,!1,!t):r.open_node(this,function(){r.open_all(e,t,n)},!t)}),n.find("li.jstree-closed").length===0&&this.__callback({obj:n})},close_all:function(e,t){var n=this;e=e?this._get_node(e):this.get_container();if(!e||e===-1)e=this.get_container_ul();e.find("li.jstree-open").andSelf().each(function(){n.close_node(this,!t)}),this.__callback({obj:e})},clean_node:function(e){e=e&&e!=-1?r(e):this.get_container_ul(),e=e.is("li")?e.find("li").andSelf():e.find("li"),e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e,t,n){this.__callback({obj:e})},_is_loaded:function(e){return!0},create_node:function(e,t,n,i,s){e=this._get_node(e),t=typeof t=="undefined"?"last":t;var o=r("<li />"),u=this._get_settings().core,a;if(e!==-1&&!e.length)return!1;if(!s&&!this._is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,n,i,!0)}),!1;this.__rollback(),typeof n=="string"&&(n={data:n}),n||(n={}),n.attr&&o.attr(n.attr),n.metadata&&o.data(n.metadata),n.state&&o.addClass("jstree-"+n.state),n.data||(n.data=this._get_string("new_node")),r.isArray(n.data)||(a=n.data,n.data=[],n.data.push(a)),r.each(n.data,function(e,t){a=r("<a />"),r.isFunction(t)&&(t=t.call(this,n)),typeof t=="string"?a.attr("href","#")[u.html_titles?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),a.attr(t.attr)[u.html_titles?"html":"text"](t.title),t.language&&a.addClass(t.language)),a.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&n.icon&&(t.icon=n.icon),t.icon&&(t.icon.indexOf("/")===-1?a.children("ins").addClass(t.icon):a.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),o.append(a)}),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),e===-1&&(e=this.get_container(),t==="before"&&(t="first"),t==="after"&&(t="last"));switch(t){case"before":e.before(o),a=this._get_parent(e);break;case"after":e.after(o),a=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(o),a=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(o),a=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),a=e.children("ul").children("li").eq(t),a.length?a.before(o):e.children("ul").append(o),a=e}if(a===-1||a.get(0)===this.get_container().get(0))a=-1;return this.clean_node(a),this.__callback({obj:o,parent:a}),i&&i.call(this,o),o},get_text:function(e){e=this._get_node(e);if(!e.length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return this.nodeType==3})[0],e.nodeValue)},set_text:function(e,t){e=this._get_node(e);if(!e.length)return!1;e=e.children("a:eq(0)");if(this._get_settings().core.html_titles){var n=e.children("INS").clone();return e.html(t).prepend(n),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){e=this._get_node(e);if(!e.length)return!1;this.__rollback();var t=this._get_parent(e),n=r([]),i=this;return e.each(function(){n=n.add(i._get_prev(this))}),e=e.detach(),t!==-1&&t.find("> ul > li").length===0&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:n,parent:t}),e},prepare_move:function(e,t,n,i,s){var o={};o.ot=r.jstree._reference(e)||this,o.o=o.ot._get_node(e),o.r=t===-1?-1:this._get_node(t),o.p=typeof n=="undefined"||n===!1?"last":n;if(!s&&u.o&&u.o[0]===o.o[0]&&u.r[0]===o.r[0]&&u.p===o.p){this.__callback(u),i&&i.call(this,u);return}o.ot=r.jstree._reference(o.o)||this,o.rt=r.jstree._reference(o.r)||this;if(o.r===-1||!o.r){o.cr=-1;switch(o.p){case"first":case"before":case"inside":o.cp=0;break;case"after":case"last":o.cp=o.rt.get_container().find(" > ul > li").length;break;default:o.cp=o.p}}else{if(!/^(before|after)$/.test(o.p)&&!this._is_loaded(o.r))return this.load_node(o.r,function(){this.prepare_move(e,t,n,i,!0)});switch(o.p){case"before":o.cp=o.r.index(),o.cr=o.rt._get_parent(o.r);break;case"after":o.cp=o.r.index()+1,o.cr=o.rt._get_parent(o.r);break;case"inside":case"first":o.cp=0,o.cr=o.r;break;case"last":o.cp=o.r.find(" > ul > li").length,o.cr=o.r;break;default:o.cp=o.p,o.cr=o.r}}o.np=o.cr==-1?o.rt.get_container():o.cr,o.op=o.ot._get_parent(o.o),o.cop=o.o.index(),o.op===-1&&(o.op=o.ot?o.ot.get_container():this.get_container()),!/^(before|after)$/.test(o.p)&&o.op&&o.np&&o.op[0]===o.np[0]&&o.o.index()<o.cp&&o.cp++,o.or=o.np.find(" > ul > li:nth-child("+(o.cp+1)+")"),u=o,this.__callback(u),i&&i.call(this,u)},check_move:function(){var e=u,t=!0,n=e.r===-1?this.get_container():e.r;return!e||!e.o||e.or[0]===e.o[0]?!1:e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index()?!1:(e.o.each(function(){if(n.parentsUntil(".jstree","li").andSelf().index(this)!==-1)return t=!1,!1}),t)},move_node:function(e,t,n,i,s,o){if(!s)return this.prepare_move(e,t,n,function(e){this.move_node(e,!1,!1,i,!0,o)});i&&(u.cy=!0);if(!o&&!this.check_move())return!1;this.__rollback();var a=!1;i?(a=e.o.clone(!0),a.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):a=e.o,e.or.length?e.or.before(a):(e.np.children("ul").length||r("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(a));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(f){}return i&&(u.cy=!0,u.oc=a),this.__callback(u),u},_get_move:function(){return u}}})})(jQuery),function(e){var t,n,r;e(function(){/msie/.test(navigator.userAgent.toLowerCase())?(n=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),r=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=n.width()-r.width(),n.add(r).remove()):(n=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-n.width(),n.parent().remove())}),e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault(),t.currentTarget.blur(),e(t.currentTarget).hasClass("jstree-loading")||this.select_node(t.currentTarget,!0,t)},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.hover_node(t.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.dehover_node(t.target)},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,n){var r=this._get_settings().ui,i=this._get_node(n.rslt.obj),s=i&&i.length?i.children("ul").find("a.jstree-clicked"):e(),o=this;if(r.selected_parent_close===!1||!s.length)return;s.each(function(){o.deselect_node(this),r.selected_parent_close==="select_parent"&&o.select_node(i)})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var n=this._get_settings().ui.select_prev_on_delete,r=this._get_node(t.rslt.obj),i=r&&r.length?r.find("a.jstree-clicked"):[],s=this;i.each(function(){s.deselect_node(this)}),n&&i.length&&t.rslt.prev.each(function(){if(this.parentNode)return s.select_node(this),!1})},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,n){if(typeof t=="undefined"||t===null)return n?this.data.ui.selected:this.data.ui.last_selected;var r=e(t,this.get_container());return r.is(".jstree")||t==-1?-1:(r=r.closest("li",this.get_container()),r.length?r:!1)},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),e.each(n,function(e,n){n&&n!=="#"&&t.select_node(n)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(e){return this.save_selected(),this.__call_old()},hover_node:function(e){e=this._get_node(e);if(!e.length)return!1;e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),this.__callback({obj:e})},dehover_node:function(){var e=this.data.ui.hovered,t;if(!e||!e.length)return!1;t=e.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===t[0]&&(this.data.ui.hovered=null),this.__callback({obj:e})},select_node:function(e,t,n){e=this._get_node(e);if(e==-1||!e||!e.length)return!1;var r=this._get_settings().ui,i=r.select_multiple_modifier=="on"||r.select_multiple_modifier!==!1&&n&&n[r.select_multiple_modifier+"Key"],s=r.select_range_modifier!==!1&&n&&n[r.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],o=this.is_selected(e),u=!0,a=this;if(t){if(r.disable_selecting_children&&i&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;u=!1;switch(!0){case s:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf(),r.select_limit==-1||e.length<r.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==a.data.ui.last_selected[0]&&a.deselect_node(this)}),o=!1,u=!0):u=!1;break;case o&&!i:this.deselect_all(),o=!1,u=!0;break;case!o&&!i:if(r.select_limit==-1||r.select_limit>0)this.deselect_all(),u=!0;break;case o&&i:this.deselect_node(e);break;case!o&&i:if(r.select_limit==-1||this.data.ui.selected.length+1<=r.select_limit)u=!0}}u&&!o&&(s||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),r.selected_parent_open&&e.parents(".jstree-closed").each(function(){a.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:n}))},_fix_scroll:function(e){var n=this.get_container()[0],r;if(n.scrollHeight>n.offsetHeight){e=this._get_node(e);if(!e||e===-1||!e.length||!e.is(":visible"))return;r=e.offset().top-this.get_container().offset().top,r<0&&(n.scrollTop=n.scrollTop+r-1),r+this.data.core.li_height+(n.scrollWidth>n.offsetWidth?t:0)>n.offsetHeight&&(n.scrollTop=n.scrollTop+(r-n.offsetHeight+this.data.core.li_height+1+(n.scrollWidth>n.offsetWidth?t:0)))}},deselect_node:function(e){e=this._get_node(e);if(!e.length)return!1;this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e}))},toggle_select:function(e){e=this._get_node(e);if(!e.length)return!1;this.is_selected(e)?this.deselect_node(e):this.select_node(e)},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var n=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();n.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback({obj:n})}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var n=this;t.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){n.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(e){return!0}}},_fn:{_show_input:function(t,n){t=this._get_node(t);var r=this._get_settings().core.rtl,i=this._get_settings().crrm.input_width_limit,s=t.children("ins").width(),o=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,u=this.get_text(t),a=e("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),f=t.css("position","relative").append(e("<input />",{value:u,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:r?"auto":s+o+4+"px",right:r?s+o+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),r=e.val();r===""&&(r=u),a.remove(),e.remove(),this.set_text(t,u),this.rename_node(t,r),n.call(this,t,r,u),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;if(t==27){this.value=u,this.blur();return}if(t==13){this.blur();return}f.width(Math.min(a.text("pW"+this.value).width(),i))},keypress:function(e){var t=e.keyCode||e.which;if(t==13)return!1}})).children(".jstree-rename-input");this.set_text(t,""),a.css({fontFamily:f.css("fontFamily")||"",fontSize:f.css("fontSize")||"",fontWeight:f.css("fontWeight")||"",fontStyle:f.css("fontStyle")||"",fontStretch:f.css("fontStretch")||"",fontVariant:f.css("fontVariant")||"",letterSpacing:f.css("letterSpacing")||"",wordSpacing:f.css("wordSpacing")||""}),f.width(Math.min(a.text("pW"+f[0].value).width(),i))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,function(e,n,r){t.call(this,{obj:e,new_name:n,old_name:r})})},create:function(t,n,r,i,s){var o,u=this;return t=this._get_node(t),t||(t=-1),this.__rollback(),o=this.create_node(t,n,r,function(t){var n=this._get_parent(t),r=e(t).index();i&&i.call(this,t),n.length&&n.hasClass("jstree-closed")&&this.open_node(n,!1,!0),s?u.__callback({obj:t,name:this.get_text(t),parent:n,position:r}):this._show_input(t,function(e,t,i){u.__callback({obj:e,name:t,parent:n,position:r})})}),o},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),n=this._get_prev(e);this.__rollback(),e=this.delete_node(e),e!==!1&&this.__callback({obj:e,prev:n,parent:t})},check_move:function(){if(!this.__call_old())return!1;var e=this._get_settings().crrm.move;return e.check_move.call(this,this._get_move())?!0:!1},move_node:function(e,t,n,r,i,s){var o=this._get_settings().crrm.move;if(!i)return typeof n=="undefined"&&(n=o.default_position),n==="inside"&&!o.default_position.match(/^(before|after)$/)&&(n=o.default_position),this.__call_old(!0,e,t,n,r,!1,s);if(o.always_copy===!0||o.always_copy==="multitree"&&e.rt.get_index()!==e.ot.get_index())r=!0;this.__call_old(!0,e,t,n,r,!0,s)},cut:function(e){e=this._get_node(e,!0);if(!e||!e.length)return!1;this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,this.__callback({obj:e})},copy:function(e){e=this._get_node(e,!0);if(!e||!e.length)return!1;this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,this.__callback({obj:e})},paste:function(e){e=this._get_node(e);if(!e||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),this.__callback({obj:e,nodes:t})}}})}(jQuery),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(n,r){if(!n)return!1;r||(r=e.jstree._themes+n+"/style.css"),e.inArray(r,t)==-1&&(e.vakata.css.add_sheet({url:r}),t.push(r)),this.data.themes.theme!=n&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=n),this.get_container().addClass("jstree-"+n),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e(function(){e.jstree._themes===!1&&e("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1}),e.jstree._themes===!1&&(e.jstree._themes="themes/")}),e.jstree.defaults.plugins.push("themes")}(jQuery),function(e){function n(t,n){var r=e.jstree._focused(),i;if(r&&r.data&&r.data.hotkeys&&r.data.hotkeys.enabled){i=r._get_settings().hotkeys[t];if(i)return i.call(r,n)}}var t=[];e.jstree.plugin("hotkeys",{__init:function(){if(typeof e.hotkeys=="undefined")throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,function(r,i){i!==!1&&e.inArray(r,t)==-1&&(e(document).bind("keydown",r,function(e){return n(r,e)}),t.push(r))}),this.get_container().bind("lock.jstree",e.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",e.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(e){e.jstree.plugin("json_data",{__init:function(){var e=this._get_settings().json_data;e.progressive_unload&&this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,n){var r=this;this.load_node_json(e,function(){r.__callback({obj:r._get_node(e)}),t.call(this)},n)},_is_loaded:function(t){var n=this._get_settings().json_data;return t=this._get_node(t),t==-1||!t||!n.ajax&&!n.progressive_render&&!e.isFunction(n.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var n=this._get_settings().json_data;return t&&t!==-1&&n.progressive_unload&&(e.isFunction(n.data)||!!n.ajax)&&t.removeData("jstree_children"),this.__call_old()},load_node_json:function(t,n,r){var i=this.get_settings().json_data,s,o=function(){},u=function(){};t=this._get_node(t);if(t&&t!==-1&&(i.progressive_render||i.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&t.children("ul").children("li").length===0&&t.data("jstree_children")){s=this._parse_json(t.data("jstree_children"),t),s&&(t.append(s),i.progressive_unload||t.removeData("jstree_children")),this.clean_node(t),n&&n.call(this);return}if(t&&t!==-1){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(i.data):i.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t),e?(t===-1||!t?this.get_container().children("ul").empty().append(e.children()):(t.append(e).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")),this.clean_node(t),n&&n.call(this)):(t===-1||!t?i.correct_state&&this.get_container().children("ul").empty():(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),i.correct_state&&this.correct_state(t)),r&&r.call(this))},this));break;case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||t===-1):if(!t||t==-1)s=this._parse_json(i.data,t),s?(this.get_container().children("ul").empty().append(s.children()),this.clean_node()):i.correct_state&&this.get_container().children("ul").empty();n&&n.call(this);break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&t!==-1:o=function(e,n,s){var o=this.get_settings().json_data.ajax.error;o&&o.call(this,e,n,s),t!=-1&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n==="success"&&i.correct_state&&this.correct_state(t)):n==="success"&&i.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},u=function(r,s,u){var a=this.get_settings().json_data.ajax.success;a&&(r=a.call(this,r,s,u)||r);if(r===""||r&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")===""||!e.isArray(r)&&!e.isPlainObject(r))return o.call(this,u,s,"");r=this._parse_json(r,t),r?(t===-1||!t?this.get_container().children("ul").empty().append(r.children()):(t.append(r).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")),this.clean_node(t),n&&n.call(this)):t===-1||!t?i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)):(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),i.correct_state&&(this.correct_state(t),n&&n.call(this)))},i.ajax.context=this,i.ajax.error=o,i.ajax.success=u,i.ajax.dataType||(i.ajax.dataType="json"),e.isFunction(i.ajax.url)&&(i.ajax.url=i.ajax.url.call(this,t)),e.isFunction(i.ajax.data)&&(i.ajax.data=i.ajax.data.call(this,t)),e.ajax(i.ajax)}},_parse_json:function(t,n,r){var i=!1,s=this._get_settings(),o=s.json_data,u=s.core.html_titles,a,f,l,c,h;if(!t)return i;o.progressive_unload&&n&&n!==-1&&n.data("jstree_children",i);if(e.isArray(t)){i=e();if(!t.length)return!1;for(f=0,l=t.length;f<l;f++)a=this._parse_json(t[f],n,!0),a.length&&(i=i.add(a))}else{typeof t=="string"&&(t={data:t});if(!t.data&&t.data!=="")return i;i=e("<li />"),t.attr&&i.attr(t.attr),t.metadata&&i.data(t.metadata),t.state&&i.addClass("jstree-"+t.state),e.isArray(t.data)||(a=t.data,t.data=[],t.data.push(a)),e.each(t.data,function(n,r){a=e("<a />"),e.isFunction(r)&&(r=r.call(this,t)),typeof r=="string"?a.attr("href","#")[u?"html":"text"](r):(r.attr||(r.attr={}),r.attr.href||(r.attr.href="#"),a.attr(r.attr)[u?"html":"text"](r.title),r.language&&a.addClass(r.language)),a.prepend("<ins class='jstree-icon'>&#160;</ins>"),!r.icon&&t.icon&&(r.icon=t.icon),r.icon&&(r.icon.indexOf("/")===-1?a.children("ins").addClass(r.icon):a.children("ins").css("background","url('"+r.icon+"') center center no-repeat")),i.append(a)}),i.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(o.progressive_render&&t.state!=="open"?i.addClass("jstree-closed").data("jstree_children",t.children):(o.progressive_unload&&i.data("jstree_children",t.children),e.isArray(t.children)&&t.children.length&&(a=this._parse_json(t.children,n,!0),a.length&&(h=e("<ul />"),h.append(a),i.append(h)))))}return r||(c=e("<ul />"),c.append(i),i=c),i},get_json:function(t,n,r,i){var s=[],o=this._get_settings(),u=this,a,f,l,c,h,p;t=this._get_node(t);if(!t||t===-1)t=this.get_container().find("> ul > li");return n=e.isArray(n)?n:["id","class"],!i&&this.data.types&&n.push(o.types.type_attr),r=e.isArray(r)?r:[],t.each(function(){l=e(this),a={data:[]},n.length&&(a.attr={}),e.each(n,function(e,t){f=l.attr(t),f&&f.length&&f.replace(/jstree[^ ]*/ig,"").length&&(a.attr[t]=(" "+f).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))}),l.hasClass("jstree-open")&&(a.state="open"),l.hasClass("jstree-closed")&&(a.state="closed"),l.data()&&(a.metadata=l.data()),c=l.children("a"),c.each(function(){h=e(this),r.length||e.inArray("languages",o.plugins)!==-1||h.children("ins").get(0).style.backgroundImage.length||h.children("ins").get(0).className&&h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(p=!1,e.inArray("languages",o.plugins)!==-1&&e.isArray(o.languages)&&o.languages.length&&e.each(o.languages,function(e,t){if(h.hasClass(t))return p=t,!1}),f={attr:{},title:u.get_text(h,p)},e.each(r,function(e,t){f.attr[t]=(" "+(h.attr(t)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),e.inArray("languages",o.plugins)!==-1&&e.isArray(o.languages)&&o.languages.length&&e.each(o.languages,function(e,t){if(h.hasClass(t))return f.language=t,!0}),h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(f.icon=h.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),h.children("ins").get(0).style.backgroundImage.length&&(f.icon=h.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):f=u.get_text(h),c.length>1?a.data.push(f):a.data=f}),l=l.find("> ul > li"),l.length&&(a.children=u.get_json(l,n,r,!0)),s.push(a)}),s}}})}(jQuery),function(e){e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(t){var n=this._get_settings().languages,r=!1,i=".jstree-"+this.get_index()+" a";if(!e.isArray(n)||n.length===0)return!1;if(e.inArray(t,n)==-1){if(!n[t])return!1;t=n[t]}return t==this.data.languages.current_language?!0:(r=e.vakata.css.get_css(i+"."+this.data.languages.current_language,!1,this.data.languages.language_css),r!==!1&&(r.style.display="none"),r=e.vakata.css.get_css(i+"."+t,!1,this.data.languages.language_css),r!==!1&&(r.style.display=""),this.data.languages.current_language=t,this.__callback(t),!0)},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,n){var r=this._get_settings().languages,i=this._get_settings().core.strings;return e.isArray(r)&&r.length&&(n=n&&e.inArray(n,r)!=-1?n:this.data.languages.current_language),i[n]&&i[n][t]?i[n][t]:i[t]?i[t]:t},get_text:function(t,n){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size())return!1;var r=this._get_settings().languages,i=this._get_settings().core.html_titles;return e.isArray(r)&&r.length?(n=n&&e.inArray(n,r)!=-1?n:this.data.languages.current_language,t=t.children("a."+n)):t=t.children("a:eq(0)"),i?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return this.nodeType==3})[0],t.nodeValue)},set_text:function(t,n,r){t=this._get_node(t)||this.data.ui.last_selected;if(!t.size())return!1;var i=this._get_settings().languages,s=this._get_settings().core.html_titles,o;return e.isArray(i)&&i.length?(r=r&&e.inArray(r,i)!=-1?r:this.data.languages.current_language,t=t.children("a."+r)):t=t.children("a:eq(0)"),s?(o=t.children("INS").clone(),t.html(n).prepend(o),this.__callback({obj:t,name:n,lang:r}),!0):(t=t.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:t,name:n,lang:r}),t.nodeValue=n)},_load_css:function(){var t=this._get_settings().languages,n="/* languages css */",r=".jstree-"+this.get_index()+" a",i;if(e.isArray(t)&&t.length){this.data.languages.current_language=t[0];for(i=0;i<t.length;i++)n+=r+"."+t[i]+" {",t[i]!=this.data.languages.current_language&&(n+=" display:none; "),n+=" } ";this.data.languages.language_css=e.vakata.css.add_sheet({str:n,title:"jstree-languages"})}},create_node:function(t,n,r,i){var s=this.__call_old(!0,t,n,r,function(t){var n=this._get_settings().languages,r=t.children("a"),s;if(e.isArray(n)&&n.length){for(s=0;s<n.length;s++)r.is("."+n[s])||t.append(r.eq(0).clone().removeClass(n.join(" ")).addClass(n[s]));r.not("."+n.join(", .")).remove()}i&&i.call(this,t)});return s}}})}(jQuery),function(e){e.jstree.plugin("cookies",{__init:function(){if(typeof e.cookie=="undefined")throw"jsTree cookie: jQuery cookie plugin not included.";var t=this._get_settings().cookies,n;!t.save_loaded||(n=e.cookie(t.save_loaded),n&&n.length&&(this.data.core.to_load=n.split(","))),!t.save_opened||(n=e.cookie(t.save_opened),n&&n.length&&(this.data.core.to_open=n.split(","))),!t.save_selected||(n=e.cookie(t.save_selected),n&&n.length&&this.data.ui&&(this.data.ui.to_select=n.split(","))),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(t){if(this.data.core.refreshing)return;var n=this._get_settings().cookies;if(!t){n.save_loaded&&(this.save_loaded(),e.cookie(n.save_loaded,this.data.core.to_load.join(","),n.cookie_options)),n.save_opened&&(this.save_opened(),e.cookie(n.save_opened,this.data.core.to_open.join(","),n.cookie_options)),n.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(n.save_selected,this.data.ui.to_select.join(","),n.cookie_options));return}switch(t){case"open_node":case"close_node":!n.save_opened||(this.save_opened(),e.cookie(n.save_opened,this.data.core.to_open.join(","),n.cookie_options)),!n.save_loaded||(this.save_loaded(),e.cookie(n.save_loaded,this.data.core.to_load.join(","),n.cookie_options));break;case"select_node":case"deselect_node":!!n.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(n.save_selected,this.data.ui.to_select.join(","),n.cookie_options))}}}})}(jQuery),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var n=this._get_node(t.rslt.obj);n=n===-1?this.get_container().children("ul"):n.children("ul"),this.sort(n)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var n=t.rslt.np==-1?this.get_container():t.rslt.np;this.sort(n.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var n=this._get_settings().sort,r=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(n,r))),t.find("> li > ul").each(function(){r.sort(e(this))}),this.clean_node(t)}}})}(jQuery),function(e){var t=!1,n=!1,r=!1,i=!1,s=!1,o=!1,u=!1,a=!1,f=!1;e.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,n,r){e.vakata.dnd.is_drag&&e.vakata.drag_stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.MozUserSelect="none")}catch(i){}return e.vakata.dnd.init_x=t.pageX,e.vakata.dnd.init_y=t.pageY,e.vakata.dnd.user_data=n,e.vakata.dnd.is_down=!0,e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(r),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.drag_stop),!1},drag:function(t){if(!e.vakata.dnd.is_down)return;if(!e.vakata.dnd.is_drag){if(!(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5))return;e.vakata.dnd.helper.appendTo("body"),e.vakata.dnd.is_drag=!0,e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}if(t.type==="mousemove"){var n=e(document),r=n.scrollTop(),i=n.scrollLeft();t.pageY-r<20?(o&&u==="down"&&(clearInterval(o),o=!1),o||(u="up",o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150))):o&&u==="up"&&(clearInterval(o),o=!1),e(window).height()-(t.pageY-r)<20?(o&&u==="up"&&(clearInterval(o),o=!1),o||(u="down",o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150))):o&&u==="down"&&(clearInterval(o),o=!1),t.pageX-i<20?(s&&a==="right"&&(clearInterval(s),s=!1),s||(a="left",s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150))):s&&a==="left"&&(clearInterval(s),s=!1),e(window).width()-(t.pageX-i)<20?(s&&a==="left"&&(clearInterval(s),s=!1),s||(a="right",s=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150))):s&&a==="right"&&(clearInterval(s),s=!1)}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"}),e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})},drag_stop:function(t){s&&clearInterval(s),o&&clearInterval(o),e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.drag_stop),e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data}),e.vakata.dnd.helper.remove(),e.vakata.dnd.init_x=0,e.vakata.dnd.init_y=0,e.vakata.dnd.user_data={},e.vakata.dnd.is_down=!1,e.vakata.dnd.is_drag=!1}},e(function(){var t="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";e.vakata.css.add_sheet({str:t,title:"vakata"})}),e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",e.proxy(function(n){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){this.data.themes&&(r.attr("class","jstree-"+this.data.themes.theme),i&&i.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));if(n.currentTarget===n.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==n.target){var s=e.jstree._reference(n.target),o;s.data.dnd.foreign?(o=s._get_settings().dnd.drag_check.call(this,{o:t,r:s.get_container(),is_root:!0}),(o===!0||o.inside===!0||o.before===!0||o.after===!0)&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(s.prepare_move(t,s.get_container(),"last"),s.check_move()&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}}},this)).bind("mouseup.jstree",e.proxy(function(n){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&n.currentTarget===n.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==n.target){var r=e.jstree._reference(n.currentTarget),i;r.data.dnd.foreign?(i=r._get_settings().dnd.drag_check.call(this,{o:t,r:r.get_container(),is_root:!0}),(i===!0||i.inside===!0||i.before===!0||i.after===!0)&&r._get_settings().dnd.drag_finish.call(this,{o:t,r:r.get_container(),is_root:!0})):r.move_node(t,r.get_container(),"last",n[r._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",e.proxy(function(t){if(t.relatedTarget&&t.relatedTarget.id&&t.relatedTarget.id==="jstree-marker-line")return!1;e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var n=this.get_container()[0];t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},n),100)):t.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},n),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},n),100)):t.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},n),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&r&&i&&(r.hide(),i.hide())},this)).delegate("a","mousedown.jstree",e.proxy(function(e){if(e.which===1)return this.start_drag(e.currentTarget,e),!1},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_enter(t.currentTarget)},this)).delegate("a","mousemove.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&((!n||!n.length||n.children("a")[0]!==t.currentTarget)&&this.dnd_enter(t.currentTarget),typeof this.data.dnd.off.top=="undefined"&&(this.data.dnd.off=e(t.target).offset()),this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&t.relatedTarget.id==="jstree-marker-line")return!1;r&&r.hide(),i&&i.hide(),this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_finish(t)},this)),e(document).bind("drag_stop.vakata",e.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,r&&r.css({top:"-2000px"}),i&&i.css({top:"-2000px"})},this)).bind("drag_start.vakata",e.proxy(function(t,n){if(n.data.jstree){var r=e(n.event.target);r.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(r)}},this));var s=this._get_settings().dnd;s.drag_target&&e(document).delegate(s.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(n){t=n.target,e.vakata.dnd.drag_start(n,{jstree:!0,obj:n.target},"<ins class='jstree-icon'></ins>"+e(n.target).text()),this.data.themes&&(r&&r.attr("class","jstree-"+this.data.themes.theme),i&&i.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var s=this.get_container();this.data.dnd.cof=s.offset(),this.data.dnd.cw=parseInt(s.width(),10),this.data.dnd.ch=parseInt(s.height(),10),this.data.dnd.foreign=!0,n.preventDefault()},this)),s.drop_target&&e(document).delegate(s.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(n){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(n.target),e:n})&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(s.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(t){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(s.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(n){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(n.target),e:n})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(e){return!0},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(e){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(!n||!n.length)return;this.data.dnd.off=n.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+n.width());if(this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:n});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(t,n,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(t,n,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(n)?(this.prepare_move(t,n,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()},dnd_show:function(){if(!this.data.dnd.prepared)return;var t=["before","inside","after"],n=!1,s=this._get_settings().core.rtl,o;this.data.dnd.w<this.data.core.li_height/3?t=["before","inside","after"]:this.data.dnd.w<=this.data.core.li_height*2/3?t=this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:t=["after","inside","before"],e.each(t,e.proxy(function(t,r){if(this.data.dnd[r])return e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),n=r,!1},this)),n===!1&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),o=s?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(n){case"before":r.css({left:o+"px",top:this.data.dnd.off.top-6+"px"}).show(),i&&i.css({left:o+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":r.css({left:o+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),i&&i.css({left:o+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":r.css({left:o+(s?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),i&&i.hide();break;default:r.hide(),i&&i.hide()}return f=n,n},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(n,e.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:t,r:n,p:f}):(this.dnd_prepare(),this.move_node(t,n,f,e[this._get_settings().dnd.copy_modifier+"Key"])),t=!1,n=!1,r.hide(),i&&i.hide()},dnd_enter:function(t){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var r=this._get_settings().dnd;this.data.dnd.prepared=!1,n=this._get_node(t),r.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),r.check_timeout)):this.dnd_prepare(),r.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),n&&n.length&&n.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),r.open_timeout))):n&&n.length&&n.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(t){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),r.hide(),i&&i.hide(),n&&n[0]===t.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(n,s){t=this._get_node(n),this.data.ui&&this.is_selected(t)&&(t=this._get_node(null,!0));var o=t.length>1?this._get_string("multiple_selection"):this.get_text(t),u=this.get_container();this._get_settings().core.html_titles||(o=o.replace(/</ig,"&lt;").replace(/>/ig,"&gt;")),e.vakata.dnd.drag_start(s,{jstree:!0,obj:t},"<ins class='jstree-icon'></ins>"+o),this.data.themes&&(r&&r.attr("class","jstree-"+this.data.themes.theme),i&&i.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=u.offset(),this.data.dnd.cw=parseInt(u.width(),10),this.data.dnd.ch=parseInt(u.height(),10),this.data.dnd.active=!0}}}),e(function(){var t="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }";e.vakata.css.add_sheet({str:t,title:"jstree"}),r=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){return r.hide(),i.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),i=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(n&&n.length)return n.children("a").trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1}).bind("mouseleave",function(t){var s=e(t.relatedTarget);if(s.is(".jstree")||s.closest(".jstree").length===0)if(n&&n.length)return n.children("a").trigger(t),r.hide(),i.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1}).appendTo("body"),e(document).bind("drag_start.vakata",function(e,t){t.data.jstree&&(r.show(),i&&i.show())}),e(document).bind("drag_stop.vakata",function(e,t){t.data.jstree&&(r.hide(),i&&i.hide())})})}(jQuery),function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target);if(!this.data.ui||!this.data.checkbox.noui)return e.stopImmediatePropagation(),!1;this.save_selected(),this.data.cookies&&this.save_cookie("select_node")},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(Math.random()*1e4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(t){t=!t||t==-1?this.get_container().find("> ul > li"):this._get_node(t);if(t===!1)return;var n,r=this,i,s=this._get_settings().checkbox.two_state,o=this._get_settings().checkbox.real_checkboxes,u=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){i=e(this),n=i.is("li")&&(i.hasClass("jstree-checked")||o&&i.children(":checked").length)?"jstree-checked":"jstree-unchecked",i.find("li").andSelf().each(function(){var t=e(this),i;t.children("a"+(r.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(s?"jstree-unchecked":n),o&&(t.children(":checkbox").length?t.children(":checkbox").addClass("jstree-real-checkbox"):(i=u.call(r,t),t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+i[0]+"' name='"+i[0]+"' value='"+i[1]+"' />"))),s?(t.hasClass("jstree-checked")||t.children(":checked").length)&&t.addClass("jstree-checked").children(":checkbox").prop("checked",!0):(n==="jstree-checked"||t.hasClass("jstree-checked")||t.children(":checked").length)&&t.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),s||t.find(".jstree-checked").parent().parent().each(function(){r._repair_state(this)})},change_state:function(t,n){t=this._get_node(t);var r=!1,i=this._get_settings().checkbox.real_checkboxes;if(!t||t===-1)return!1;n=n===!1||n===!0?n:t.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state)n?(t.removeClass("jstree-checked").addClass("jstree-unchecked"),i&&t.children(":checkbox").prop("checked",!1)):(t.removeClass("jstree-unchecked").addClass("jstree-checked"),i&&t.children(":checkbox").prop("checked",!0));else{if(n){r=t.find("li").andSelf();if(!r.filter(".jstree-checked, .jstree-undetermined").length)return!1;r.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),i&&r.children(":checkbox").prop("checked",!1)}else{r=t.find("li").andSelf();if(!r.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;r.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),i&&r.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(n){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),i&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),i&&t.children(":checkbox").prop("checked",!1)}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),i&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),i&&t.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(t),!0},check_node:function(e){if(this.change_state(e,!1)){e=this._get_node(e);if(this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!0)}),this.__callback()},is_checked:function(e){return e=this._get_node(e),e.length?e.is(".jstree-checked"):!1},get_checked:function(e,t){return e=!e||e===-1?this.get_container():this._get_node(e),t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=!e||e===-1?this.get_container():this._get_node(e),t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){e=this._get_node(e);if(!e.length)return;if(this._get_settings().checkbox.two_state){e.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);return}var t=this._get_settings().checkbox.real_checkboxes,n=e.find("> ul > .jstree-checked").length,r=e.find("> ul > .jstree-undetermined").length,i=e.find("> ul > li").length;i===0?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):n===0&&r===0?this.change_state(e,!0):n===i?this.change_state(e,!1):(e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,n=this.data.ui.to_select;n=e.map(e.makeArray(n),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),e.each(n,function(e,n){t.check_node(n)}),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&e.data.core.to_load.push("#"+this.id)})}}}),e(function(){var t=".jstree .jstree-real-checkbox { display:none; } ";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.vakata.xslt=function(t,n,r){var i="",s,o,u,a;return document.recalc?(s=document.createElement("xml"),o=document.createElement("xml"),s.innerHTML=t,o.innerHTML=n,e("body").append(s).append(o),setTimeout(function(t,n,r){return function(){r.call(null,t.transformNode(n.XMLDocument)),setTimeout(function(t,n){return function(){e(t).remove(),e(n).remove()}}(t,n),200)}}(s,o,r),100),!0):(typeof window.DOMParser!="undefined"&&typeof window.XMLHttpRequest!="undefined"&&typeof window.XSLTProcessor=="undefined"&&(t=(new DOMParser).parseFromString(t,"text/xml"),n=(new DOMParser).parseFromString(n,"text/xml")),typeof window.DOMParser!="undefined"&&typeof window.XMLHttpRequest!="undefined"&&typeof window.XSLTProcessor!="undefined"?(u=new XSLTProcessor,a=e.isFunction(u.transformDocument)?typeof window.XMLSerializer!="undefined":!0,a?(t=(new DOMParser).parseFromString(t,"text/xml"),n=(new DOMParser).parseFromString(n,"text/xml"),e.isFunction(u.transformDocument)?(i=document.implementation.createDocument("","",null),u.transformDocument(t,n,i,null),r.call(null,(new XMLSerializer).serializeToString(i)),!0):(u.importStylesheet(n),i=u.transformToFragment(t,document),r.call(null,e("<div />").append(i).html()),!0)):!1):!1)};var t={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">	<xsl:call-template name="nodes">		<xsl:with-param name="node" select="/root" />	</xsl:call-template></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<ul>	<xsl:for-each select="$node/item">		<xsl:variable name="children" select="count(./item) &gt; 0" />		<li>			<xsl:attribute name="class">				<xsl:if test="position() = last()">jstree-last </xsl:if>				<xsl:choose>					<xsl:when test="@state = \'open\'">jstree-open </xsl:when>					<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>					<xsl:otherwise>jstree-leaf </xsl:otherwise>				</xsl:choose>				<xsl:value-of select="@class" />			</xsl:attribute>			<xsl:for-each select="@*">				<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">					<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>				</xsl:if>			</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>			<xsl:for-each select="content/name">				<a>				<xsl:attribute name="href">					<xsl:choose>					<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>					<xsl:otherwise>#</xsl:otherwise>					</xsl:choose>				</xsl:attribute>				<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>				<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>				<xsl:for-each select="@*">					<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">						<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>					</xsl:if>				</xsl:for-each>					<ins>						<xsl:attribute name="class">jstree-icon 							<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>						</xsl:attribute>						<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>						<xsl:text>&#xa0;</xsl:text>					</ins>					<xsl:copy-of select="./child::node()" />				</a>			</xsl:for-each>			<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>		</li>	</xsl:for-each>	</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">	<ul>	<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">		<xsl:call-template name="nodes">			<xsl:with-param name="node" select="." />			<xsl:with-param name="is_last" select="number(position() = last())" />		</xsl:call-template>	</xsl:for-each>	</ul></xsl:template><xsl:template name="nodes">	<xsl:param name="node" />	<xsl:param name="is_last" />	<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />	<li>	<xsl:attribute name="class">		<xsl:if test="$is_last = true()">jstree-last </xsl:if>		<xsl:choose>			<xsl:when test="@state = \'open\'">jstree-open </xsl:when>			<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>			<xsl:otherwise>jstree-leaf </xsl:otherwise>		</xsl:choose>		<xsl:value-of select="@class" />	</xsl:attribute>	<xsl:for-each select="@*">		<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">		<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>		</xsl:if>	</xsl:for-each>	<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>	<xsl:for-each select="content/name">		<a>		<xsl:attribute name="href">			<xsl:choose>			<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>			<xsl:otherwise>#</xsl:otherwise>			</xsl:choose>		</xsl:attribute>		<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>		<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>		<xsl:for-each select="@*">			<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">				<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>			</xsl:if>		</xsl:for-each>			<ins>				<xsl:attribute name="class">jstree-icon 					<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>				</xsl:attribute>				<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>				<xsl:text>&#xa0;</xsl:text>			</ins>			<xsl:copy-of select="./child::node()" />		</a>	</xsl:for-each>	<xsl:if test="$children">		<ul>		<xsl:for-each select="//item[@parent_id=$node/attribute::id]">			<xsl:call-template name="nodes">				<xsl:with-param name="node" select="." />				<xsl:with-param name="is_last" select="number(position() = last())" />			</xsl:call-template>		</xsl:for-each>		</ul>	</xsl:if>	</li></xsl:template></xsl:stylesheet>'},n=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,n){var r=this;this.load_node_xml(e,function(){r.__callback({obj:r._get_node(e)}),t.call(this)},n)},_is_loaded:function(t){var n=this._get_settings().xml_data;return t=this._get_node(t),t==-1||!t||!n.ajax&&!e.isFunction(n.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,n,r){var i=this.get_settings().xml_data,s=function(){},o=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!i.data&&!i.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(i.data):i.data.call(this,t,e.proxy(function(r){this.parse_xml(r,e.proxy(function(r){r&&(r=r.replace(/ ?xmlns="[^"]*"/ig,""),r.length>10?(r=e(r),t===-1||!t?this.get_container().children("ul").empty().append(r.children()):(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r),t.removeData("jstree_is_loading")),i.clean_node&&this.clean_node(t),n&&n.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),i.correct_state&&(this.correct_state(t),n&&n.call(this))):i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)))},this))},this));break;case!!i.data&&!i.ajax||!!i.data&&!!i.ajax&&(!t||t===-1):(!t||t==-1)&&this.parse_xml(i.data,e.proxy(function(r){r?(r=r.replace(/ ?xmlns="[^"]*"/ig,""),r.length>10&&(r=e(r),this.get_container().children("ul").empty().append(r.children()),i.clean_node&&this.clean_node(t),n&&n.call(this))):i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},this));break;case!i.data&&!!i.ajax||!!i.data&&!!i.ajax&&t&&t!==-1:s=function(e,n,s){var o=this.get_settings().xml_data.ajax.error;o&&o.call(this,e,n,s),t!==-1&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n==="success"&&i.correct_state&&this.correct_state(t)):n==="success"&&i.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},o=function(r,o,u){r=u.responseText;var a=this.get_settings().xml_data.ajax.success;a&&(r=a.call(this,r,o,u)||r);if(r===""||r&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")==="")return s.call(this,u,o,"");this.parse_xml(r,e.proxy(function(r){r&&(r=r.replace(/ ?xmlns="[^"]*"/ig,""),r.length>10?(r=e(r),t===-1||!t?this.get_container().children("ul").empty().append(r.children()):(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r),t.removeData("jstree_is_loading")),i.clean_node&&this.clean_node(t),n&&n.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),i.correct_state&&(this.correct_state(t),n&&n.call(this))):i.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)))},this))},i.ajax.context=this,i.ajax.error=s,i.ajax.success=o,i.ajax.dataType||(i.ajax.dataType="xml"),e.isFunction(i.ajax.url)&&(i.ajax.url=i.ajax.url.call(this,t)),e.isFunction(i.ajax.data)&&(i.ajax.data=i.ajax.data.call(this,t)),e.ajax(i.ajax)}},parse_xml:function(n,r){var i=this._get_settings().xml_data;e.vakata.xslt(n,t[i.xsl],r)},get_xml:function(t,r,i,s,o){var u="",a=this._get_settings(),f=this,l,c,h,p,d;t||(t="flat"),o||(o=0),r=this._get_node(r);if(!r||r===-1)r=this.get_container().find("> ul > li");return i=e.isArray(i)?i:["id","class"],!o&&this.data.types&&e.inArray(a.types.type_attr,i)===-1&&i.push(a.types.type_attr),s=e.isArray(s)?s:[],o||(a.xml_data.get_include_preamble&&(u+='<?xml version="1.0" encoding="UTF-8"?>'),u+="<root>"),r.each(function(){u+="<item",h=e(this),e.each(i,function(e,t){var r=h.attr(t);if(!a.xml_data.get_skip_empty||typeof r!="undefined")u+=" "+t+'="'+n((" "+(r||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}),h.hasClass("jstree-open")&&(u+=' state="open"'),h.hasClass("jstree-closed")&&(u+=' state="closed"'),t==="flat"&&(u+=' parent_id="'+n(o)+'"'),u+=">",u+="<content>",p=h.children("a"),p.each(function(){l=e(this),d=!1,u+="<name",e.inArray("languages",a.plugins)!==-1&&e.each(a.languages,function(e,t){if(l.hasClass(t))return u+=' lang="'+n(t)+'"',d=t,!1}),s.length&&e.each(s,function(e,t){var r=l.attr(t);if(!a.xml_data.get_skip_empty||typeof r!="undefined")u+=" "+t+'="'+n((" "+r||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'}),l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(u+=' icon="'+n(l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'),l.children("ins").get(0).style.backgroundImage.length&&(u+=' icon="'+n(l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"'),u+=">",u+="<![CDATA["+f.get_text(l,d)+"]]>",u+="</name>"}),u+="</content>",c=h[0].id||!0,h=h.find("> ul > li"),h.length?c=f.get_xml(t,h,i,s,c):c="",t=="nest"&&(u+=c),u+="</item>",t=="flat"&&(u+=c)}),o||(u+="</root>"),u}}})}(jQuery),function(e){e.expr[":"].jstree_contains=function(e,t,n){return(e.textContent||e.innerText||"").toLowerCase().indexOf(n[3].toLowerCase())>=0},e.expr[":"].jstree_title_contains=function(e,t,n){return(e.getAttribute("title")||"").toLowerCase().indexOf(n[3].toLowerCase())>=0},e.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=e(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(t,n){e(this).children("ul").find("li").hide().removeClass("jstree-last"),n.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(t,n){if(e.trim(t)===""){this.clear_search();return}var r=this.get_settings().search,i=this,s=function(){},o=function(){};this.data.search.str=t;if(!n&&r.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=!0,s=function(){},o=function(e,t,n){var r=this.get_settings().search.ajax.success;r&&(e=r.call(this,e,t,n)||e),this.data.search.to_open=e,this._search_open()},r.ajax.context=this,r.ajax.error=s,r.ajax.success=o,e.isFunction(r.ajax.url)&&(r.ajax.url=r.ajax.url.call(this,t)),e.isFunction(r.ajax.data)&&(r.ajax.data=r.ajax.data.call(this,t)),r.ajax.data||(r.ajax.data={search_string:t});if(!r.ajax.dataType||/^json/.exec(r.ajax.dataType))r.ajax.dataType="json";e.ajax(r.ajax);return}this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+r.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){i.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:t})},clear_search:function(t){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=e()},_search_open:function(t){var n=this,r=!0,i=[],s=[];this.data.search.to_open.length&&(e.each(this.data.search.to_open,function(t,n){if(n=="#")return!0;e(n).length&&e(n).is(".jstree-closed")?i.push(n):s.push(n)}),i.length&&(this.data.search.to_open=s,e.each(i,function(e,t){n.open_node(t,function(){n._search_open(!0)})}),r=!1)),r&&this.search(this.data.search.str,!0)}}})}(jQuery),function(e){e.vakata.context={hide_on_mouseleave:!1,cnt:e("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(t,n,r,i,s,o,u){e.vakata.context.rtl=!!u;var a=e.vakata.context.parse(t),f,l;if(!a)return;e.vakata.context.vis=!0,e.vakata.context.tgt=n,e.vakata.context.par=o||n||null,e.vakata.context.data=s||null,e.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0}),e.vakata.context.hide_on_mouseleave&&e.vakata.context.cnt.one("mouseleave",function(t){e.vakata.context.hide()}),f=e.vakata.context.cnt.height(),l=e.vakata.context.cnt.width(),r+l>e(document).width()&&(r=e(document).width()-(l+5),e.vakata.context.cnt.find("li > ul").addClass("right")),i+f>e(document).height()&&(i-=f+n[0].offsetHeight,e.vakata.context.cnt.find("li > ul").addClass("bottom")),e.vakata.context.cnt.css({left:r,top:i}).find("li:has(ul)").bind("mouseenter",function(t){var n=e(document).width(),r=e(document).height(),i=e(this).children("ul").show();n!==e(document).width()&&i.toggleClass("right"),r!==e(document).height()&&i.toggleClass("bottom")}).bind("mouseleave",function(t){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),e(document).triggerHandler("context_show.vakata")},hide:function(){e.vakata.context.vis=!1,e.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),e(document).triggerHandler("context_hide.vakata")},parse:function(t,n){if(!t)return!1;var r="",i=!1,s=!0;return n||(e.vakata.context.func={}),r+="<ul>",e.each(t,function(t,n){if(!n)return!0;e.vakata.context.func[t]=n.action,!s&&n.separator_before&&(r+="<li class='vakata-separator vakata-separator-before'></li>"),s=!1,r+="<li class='"+(n._class||"")+(n._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",n.icon&&n.icon.indexOf("/")===-1&&(r+=" class='"+n.icon+"' "),n.icon&&n.icon.indexOf("/")!==-1&&(r+=" style='background:url("+n.icon+") center center no-repeat;' "),r+=">&#160;</ins><a href='#' rel='"+t+"'>",n.submenu&&(r+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),r+=n.label+"</a>",n.submenu&&(i=e.vakata.context.parse(n.submenu,!0),i&&(r+=i)),r+="</li>",n.separator_after&&(r+="<li class='vakata-separator vakata-separator-after'></li>",s=!0)}),r=r.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),r+="</ul>",e(document).triggerHandler("context_parse.vakata"),r.length>10?r:!1},exec:function(t){return e.isFunction(e.vakata.context.func[t])?(e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par),!0):!1}},e(function(){var t="#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";e.vakata.css.add_sheet({str:t,title:"vakata"}),e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(t){!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))?e.vakata.context.hide():e(this).blur()}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),e(document).bind("mousedown",function(t){e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)&&e.vakata.context.hide()}),typeof e.hotkeys!="undefined"&&e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var n=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();n.length||(n=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),n.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var n=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();n.length||(n=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),n.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","right",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","left",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","esc",function(t){e.vakata.context.vis&&(e.vakata.context.hide(),t.preventDefault())}).bind("keydown","space",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),t.preventDefault())})}),e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault(),e(t.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)},this)).delegate("a","click.jstree",e.proxy(function(t){this.data.contextmenu&&e.vakata.context.hide()},this)).bind("destroy.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)),e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,n,r){t=this._get_node(t);var i=this.get_settings().contextmenu,s=t.children("a:visible:eq(0)"),o=!1,u=!1;i.select_node&&this.data.ui&&!this.is_selected(t)&&(this.deselect_all(),this.select_node(t,!0));if(i.show_at_node||typeof n=="undefined"||typeof r=="undefined")o=s.offset(),n=o.left,r=o.top+this.data.core.li_height;u=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:i.items,e.isFunction(u)&&(u=u.call(this,t)),this.data.contextmenu=!0,e.vakata.context.show(u,s,n,r,this,t,this._get_settings().core.rtl),this.data.themes&&e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(jQuery),function(t){t.jstree.plugin("types",{__init:function(){var n=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",t.proxy(function(){var e=n.types,r=n.type_attr,i="",o=this;t.each(e,function(e,n){t.each(n,function(e,t){/^(max_depth|max_children|icon|valid_children)$/.test(e)||o.data.types.attach_to.push(e)});if(!n.icon)return!0;if(n.icon.image||n.icon.position)e=="default"?i+=".jstree-"+o.get_index()+" a > .jstree-icon { ":i+=".jstree-"+o.get_index()+" li["+r+'="'+e+'"] > a > .jstree-icon { ',n.icon.image&&(i+=" background-image:url("+n.icon.image+"); "),n.icon.position?i+=" background-position:"+n.icon.position+"; ":i+=" background-position:0 0; ",i+="} "}),i!==""&&t.vakata.css.add_sheet({str:i,title:"jstree-types"})},this)).bind("before.jstree",t.proxy(function(e,n){var r,i,s=this._get_settings().types.use_data?this._get_node(n.args[0]):!1,o=s&&s!==-1&&s.length?s.data("jstree"):!1;if(o&&o.types&&o.types[n.func]===!1)return e.stopImmediatePropagation(),!1;if(t.inArray(n.func,this.data.types.attach_to)!==-1){if(!n.args[0]||!n.args[0].tagName&&!n.args[0].jquery)return;r=this._get_settings().types.types,i=this._get_type(n.args[0]);if((r[i]&&typeof r[i][n.func]!="undefined"||r["default"]&&typeof r["default"][n.func]!="undefined")&&this._check(n.func,n.args[0])===!1)return e.stopImmediatePropagation(),!1}},this)),e&&this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,n){var r=n&&n.rslt&&n.rslt.obj&&n.rslt.obj!==-1?this._get_node(n.rslt.obj).parent():this.get_container_ul(),i=!1,s=this._get_settings().types;t.each(s.types,function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(i=e==="default"?r.find("li > a > .jstree-icon"):r.find("li["+s.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&i.css("backgroundImage","url("+t.icon.image+")"),i.css("backgroundPosition",t.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return e=this._get_node(e),!e||!e.length?!1:e.attr(this._get_settings().types.type_attr)||"default"},set_type:function(e,t){t=this._get_node(t);var n=!t.length||!e?!1:t.attr(this._get_settings().types.type_attr,e);return n&&this.__callback({obj:t,type:e}),n},_check:function(e,n,r){n=this._get_node(n);var i=!1,s=this._get_type(n),o=0,u=this,a=this._get_settings().types,f=!1;if(n===-1){if(!a[e])return;i=a[e]}else{if(s===!1)return;f=a.use_data?n.data("jstree"):!1,f&&f.types&&typeof f.types[e]!="undefined"?i=f.types[e]:!a.types[s]||typeof a.types[s][e]=="undefined"?!!a.types["default"]&&typeof a.types["default"][e]!="undefined"&&(i=a.types["default"][e]):i=a.types[s][e]}return t.isFunction(i)&&(i=i.call(this,n)),e==="max_depth"&&n!==-1&&r!==!1&&a.max_depth!==-2&&i!==0&&n.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){if(a.max_depth!==-1&&a.max_depth-(t+1)<=0)return i=0,!1;o=t===0?i:u._check(e,this,!1);if(o!==-1&&o-(t+1)<=0)return i=0,!1;o>=0&&(o-(t+1)<i||i<0)&&(i=o-(t+1)),a.max_depth>=0&&(a.max_depth-(t+1)<i||i<0)&&(i=a.max_depth-(t+1))}),i},check_move:function(){if(!this.__call_old())return!1;var e=this._get_move(),n=e.rt._get_settings().types,r=e.rt._check("max_children",e.cr),i=e.rt._check("max_depth",e.cr),s=e.rt._check("valid_children",e.cr),o=0,u=1,a;if(s==="none")return!1;if(t.isArray(s)&&e.ot&&e.ot._get_type){e.o.each(function(){if(t.inArray(e.ot._get_type(this),s)===-1)return u=!1,!1});if(u===!1)return!1}if(n.max_children!==-2&&r!==-1){o=e.cr===-1?this.get_container().find("> ul > li").not(e.o).length:e.cr.find("> ul > li").not(e.o).length;if(o+e.o.length>r)return!1}if(n.max_depth!==-2&&i!==-1){u=0;if(i===0)return!1;if(typeof e.o.d=="undefined"){a=e.o;while(a.length>0)a=a.find("> ul > li"),u++;e.o.d=u}if(i-e.o.d<0)return!1}return!0},create_node:function(e,n,r,i,s,o){if(!o&&(s||this._is_loaded(e))){var u=typeof n=="string"&&n.match(/^before|after$/i)&&e!==-1?this._get_parent(e):this._get_node(e),a=this._get_settings().types,f=this._check("max_children",u),l=this._check("max_depth",u),c=this._check("valid_children",u),h;typeof r=="string"&&(r={data:r}),r||(r={});if(c==="none")return!1;if(t.isArray(c))if(!r.attr||!r.attr[a.type_attr])r.attr||(r.attr={}),r.attr[a.type_attr]=c[0];else if(t.inArray(r.attr[a.type_attr],c)===-1)return!1;if(a.max_children!==-2&&f!==-1){h=u===-1?this.get_container().find("> ul > li").length:u.find("> ul > li").length;if(h+1>f)return!1}if(a.max_depth!==-2&&l!==-1&&l-1<0)return!1}return this.__call_old(!0,e,n,r,i,s,o)}}})}(jQuery),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,n){var r=this;this.load_node_html(e,function(){r.__callback({obj:r._get_node(e)}),t.call(this)},n)},_is_loaded:function(t){return t=this._get_node(t),t==-1||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,n,r){var i,s=this.get_settings().html_data,o=function(){},u=function(){};t=this._get_node(t);if(t&&t!==-1){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case e.isFunction(s.data):s.data.call(this,t,e.proxy(function(r){r&&r!==""&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")!==""?(r=e(r),r.is("ul")||(r=e("<ul />").append(r)),t==-1||!t?this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")),this.clean_node(t),n&&n.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),n&&n.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},this));break;case!s.data&&!s.ajax:if(!t||t==-1)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();n&&n.call(this);break;case!!s.data&&!s.ajax||!!s.data&&!!s.ajax&&(!t||t===-1):if(!t||t==-1)i=e(s.data),i.is("ul")||(i=e("<ul />").append(i)),this.get_container().children("ul").empty().append(i.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();n&&n.call(this);break;case!s.data&&!!s.ajax||!!s.data&&!!s.ajax&&t&&t!==-1:t=this._get_node(t),o=function(e,n,i){var o=this.get_settings().html_data.ajax.error;o&&o.call(this,e,n,i),t!=-1&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n==="success"&&s.correct_state&&this.correct_state(t)):n==="success"&&s.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},u=function(r,i,u){var a=this.get_settings().html_data.ajax.success;a&&(r=a.call(this,r,i,u)||r);if(r===""||r&&r.toString&&r.toString().replace(/^[\s\n]+$/,"")==="")return o.call(this,u,i,"");r?(r=e(r),r.is("ul")||(r=e("<ul />").append(r)),t==-1||!t?this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")),this.clean_node(t),n&&n.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),s.correct_state&&(this.correct_state(t),n&&n.call(this))):s.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},s.ajax.context=this,s.ajax.error=o,s.ajax.success=u,s.ajax.dataType||(s.ajax.dataType="html"),e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),e.ajax(s.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(jQuery),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(n){e(n.currentTarget).hasClass("jstree-loading")||e(this).addClass(t.item_h)}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,n){n.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(e,n){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,n){n.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,n){this.get_container().find("a."+t.item_h).not(n.rslt.obj).removeClass(t.item_h),n.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,n=["ui-icon"];e.each(t,function(e,t){t=t.split(" "),t.length&&(n=n.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+n.join(", .")).removeClass(n.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=!e||e==-1?this.get_container_ul():this._get_node(e).parent(),e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),e(function(){var t=".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,n){var r=[],i=!0,s,o;n.func=="move_node"&&n.args[4]===!0&&n.args[0].o&&n.args[0].o.length&&(n.args[0].o.children("a").each(function(){r.push(e(this).text().replace(/^\s+/g,""))}),i=this._check_unique(r,n.args[0].np.find("> ul > li").not(n.args[0].o),"move_node"));if(n.func=="create_node")if(n.args[4]||this._is_loaded(n.args[0])){s=this._get_node(n.args[0]);if(n.args[1]&&(n.args[1]==="before"||n.args[1]==="after")){s=this._get_parent(n.args[0]);if(!s||s===-1)s=this.get_container()}typeof n.args[2]=="string"?r.push(n.args[2]):!n.args[2]||!n.args[2].data?r.push(this._get_string("new_node")):r.push(n.args[2].data),i=this._check_unique(r,s.find("> ul > li"),"create_node")}if(n.func=="rename_node"){r.push(n.args[1]),o=this._get_node(n.args[0]),s=this._get_parent(o);if(!s||s===-1)s=this.get_container();i=this._check_unique(r,s.find("> ul > li").not(o),"rename_node")}if(!i)return t.stopPropagation(),!1},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,n,r){var i=[];return n.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))}),!i.length||!t.length?!0:(i=i.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),i.length+t.length!=i.concat(t).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,t,n,r),!1):!0)},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),n=[];return t.o&&t.o.length?(t.o.children("a").each(function(){n.push(e(this).text().replace(/^\s+/g,""))}),this._check_unique(n,t.np.find("> ul > li").not(t.o),"check_move")):!0}}})}(jQuery),function(r){r.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",r.proxy(function(e,t){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",r.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",r.proxy(function(e,t){this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",r.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",r.proxy(function(e,t){t.rslt.obj.each(function(){var e=t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((r(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")");e.children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",r.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));if(e.type==="hover_node"){var n=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");n.children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=r(e.currentTarget);if(e.target.tagName==="A"||e.target.tagName==="INS"&&t.closest("li").is(".jstree-open, .jstree-closed"))return;t.closest("li").children("a:visible:eq(0)").click(),e.stopImmediatePropagation()}).delegate("li","mouseover.jstree",r.proxy(function(e){return e.stopImmediatePropagation(),r(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length?!1:(this.hover_node(e.currentTarget),!1)},this)).delegate("li","mouseleave.jstree",r.proxy(function(e){if(r(e.currentTarget).children("a").hasClass("jstree-hovered").length)return;this.dehover_node(e.currentTarget)},this)),(t||e)&&r.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){e=!e||e==-1?this.get_container().find("> ul > li"):this._get_node(e);if(e===!1)return;e.each(function(){r(this).find("li").andSelf().each(function(){var e=r(this);if(e.children(".jstree-wholerow-span").length)return!0;e.prepend("<span class='jstree-wholerow-span' style='width:"+e.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),n=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==n&&(this.data.wholerow.last_html=n,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",(e.height()+(t?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),r(function(){var i=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";n&&(i+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(t||e)i+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";r.vakata.css.add_sheet({str:i,title:"jstree"})})}(jQuery),function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],n=function(t,n){var r=!0;return t=t||{},n=[].concat(n),e.each(n,function(n,i){if(!e.isFunction(t[i]))return r=!1,!1}),r};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(r,i){var s=r==-1?this._get_settings().model.object:r.data("jstree_model");if(!n(s,t))return i.call(null,!1);this._get_settings().model.async?s.getChildren(e.proxy(function(e){this.model_done(e,i)},this)):this.model_done(s.getChildren(),i)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(t,n){var r=[],i=this._get_settings(),s=this;e.isArray(t)||(t=[t]),e.each(t,function(t,n){var o=n.getProps()||{};o.attr=n.getAttr()||{},n.getChildrenCount()&&(o.state="closed"),o.data=n.getName(),e.isArray(o.data)||(o.data=[o.data]),s.data.types&&e.isFunction(n.getType)&&(o.attr[i.types.type_attr]=n.getType()),o.attr.id&&i.model.id_prefix&&(o.attr.id=i.model.id_prefix+o.attr.id),o.metadata||(o.metadata={}),o.metadata.jstree_model=n,r.push(o)}),n.call(null,r)}}})}(jQuery)}(),function(e){e.expr[":"].jstree_contains_multi=function(e,t,n){var r,i=[],s=n[3].toLowerCase().replace(/^_+/g,"").replace(/_+$/g,"");s.indexOf("_")>=0?i=s.split("_"):i=[s];for(var t=0;t<i.length;t++){r=i[t];if((e.textContent||e.innerText||"").toLowerCase().indexOf(r)>=0)return!0}return!1},e.expr[":"].jstree_contains=function(e,t,n){return(e.textContent||e.innerText||"").toLowerCase().indexOf(n[3].toLowerCase())>=0}}(jQuery),function(e){function u(){var e=document.getElementsByTagName("script"),t=e[e.length-1].src.split("?")[0];return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}function b(e,t,n){for(var r=0;r<t.length;r++)n(e,t[r])}var t=!1,n=!1,r=!1,i=5e3,s=2e3,o=e,f=u(),l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||!1}(),c=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||!1}(),h=!1,p=function(){function o(){var n=["-moz-grab","-webkit-grab","grab"];if(t.ischrome&&!t.ischrome22||t.isie)n=[];for(var r=0;r<n.length;r++){var i=n[r];e.style.cursor=i;if(e.style["cursor"]==i)return i}return"url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}if(h)return h;var e=document.createElement("DIV"),t={};t.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,t.isopera="opera"in window,t.isopera12=t.isopera&&"getUserMedia"in navigator,t.isie="all"in document&&"attachEvent"in e&&!t.isopera,t.isieold=t.isie&&!("msInterpolationMode"in e.style),t.isie7=t.isie&&!t.isieold&&(!("documentMode"in document)||document.documentMode==7),t.isie8=t.isie&&"documentMode"in document&&document.documentMode==8,t.isie9=t.isie&&"performance"in window&&document.documentMode>=9,t.isie10=t.isie&&"performance"in window&&document.documentMode>=10,t.isie9mobile=/iemobile.9/i.test(navigator.userAgent),t.isie9mobile&&(t.isie9=!1),t.isie7mobile=!t.isie9mobile&&t.isie7&&/iemobile/i.test(navigator.userAgent),t.ismozilla="MozAppearance"in e.style,t.iswebkit="WebkitAppearance"in e.style,t.ischrome="chrome"in window,t.ischrome22=t.ischrome&&t.haspointerlock,t.cantouch="ontouchstart"in document.documentElement,t.hasmstouch=window.navigator.msPointerEnabled||!1,t.ismac=/^mac$/i.test(navigator.platform),t.isios=t.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),t.isios4=t.isios&&!("seal"in Object),t.isandroid=/android/i.test(navigator.userAgent),t.trstyle=!1,t.hastransform=!1,t.hastranslate3d=!1,t.transitionstyle=!1,t.hastransition=!1,t.transitionend=!1;var n=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(var r=0;r<n.length;r++)if(typeof e.style[n[r]]!="undefined"){t.trstyle=n[r];break}t.hastransform=t.trstyle!=0,t.hastransform&&(e.style[t.trstyle]="translate3d(1px,2px,3px)",t.hastranslate3d=/translate3d/.test(e.style[t.trstyle])),t.transitionstyle=!1,t.prefixstyle="",t.transitionend=!1;var n=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"],i=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],s=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(var r=0;r<n.length;r++)if(n[r]in e.style){t.transitionstyle=n[r],t.prefixstyle=i[r],t.transitionend=s[r];break}return t.hastransition=t.transitionstyle,t.cursorgrabvalue=o(),t.hasmousecapture="setCapture"in e,e=null,h=t,t},d=function(e,r){function g(e,t,n){var r=e.css(t),i=parseFloat(r);if(isNaN(i)){i=m[r]||0;var s=i==3?n?u.win.outerHeight()-u.win.innerHeight():u.win.outerWidth()-u.win.innerWidth():1;return u.isie8&&i&&(i+=1),s?i:0}return i}function y(e,t){var n=0,r=0;if("wheelDeltaY"in e)n=Math.floor(e.wheelDeltaX/2),r=Math.floor(e.wheelDeltaY/2);else{var i=e.detail?e.detail*-1:e.wheelDelta/40;i&&(t?n=Math.floor(i*u.opt.mousescrollstep):r=Math.floor(i*u.opt.mousescrollstep))}n&&(u.scrollmom&&u.scrollmom.stop(),u.lastdeltax+=n,u.synched("mousewheelx",function(){var e=u.lastdeltax;u.lastdeltax=0,u.rail.drag||u.doScrollLeftBy(e)})),r&&(u.scrollmom&&u.scrollmom.stop(),u.lastdeltay+=r,u.synched("mousewheely",function(){var e=u.lastdeltay;u.lastdeltay=0,u.rail.drag||u.doScrollBy(e)}))}var u=this;this.version="3.0.0",this.name="nicescroll",this.me=r,this.opt={doc:o("body"),win:!1,zindex:9e3,cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0},this.opt.snapbackspeed=80;if(e||!1)for(var a in u.opt)typeof e[a]!="undefined"&&(u.opt[a]=e[a]);this.doc=u.opt.doc,this.iddoc=this.doc&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/BODY|HTML/.test(u.opt.win?u.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=u.opt.win!==!1,this.win=u.opt.win||(this.ispage?o(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?o(window):this.win,this.body=o("body"),this.isfixed=!1,this.iframe=!1,this.isiframe=this.doc[0].nodeName=="IFRAME"&&this.win[0].nodeName=="IFRAME",this.istextarea=this.win[0].nodeName=="TEXTAREA",this.forcescreen=!1,this.canshowonmouseevent=u.opt.autohidemode!="scroll",this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1;do this.id="ascrail"+s++;while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.nativescrollingarea=!1,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0;var h=this.detected=p();this.canhwscroll=h.hastransform&&u.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&u.haswrapper,this.istouchcapable=!1,h.cantouch&&h.ischrome&&!h.isios&&!h.isandroid&&(this.istouchcapable=!0,h.cantouch=!1),h.cantouch&&h.ismozilla&&!h.isios&&(this.istouchcapable=!0,h.cantouch=!1),this.delayed=function(e,t,n,r){var i=u.delaylist[e],s=(new Date).getTime();if(!r&&i&&i.tt)return!1;i&&i.tt&&clearTimeout(i.tt);if(i&&i.last+n>s&&!i.tt)u.delaylist[e]={last:s+n,tt:setTimeout(function(){u.delaylist[e].tt=0,t.call()},n)};else if(!i||!i.tt)u.delaylist[e]={last:s,tt:0},setTimeout(function(){t.call()},0)},this.synched=function(e,t){function n(){if(u.onsync)return;l(function(){u.onsync=!1;for(e in u.synclist){var t=u.synclist[e];t&&t.call(u),u.synclist[e]=!1}}),u.onsync=!0}return u.synclist[e]=t,n(),e},this.unsynched=function(e){u.synclist[e]&&(u.synclist[e]=!1)},this.css=function(e,t){for(var n in t)u.saved.css.push([e,n,e.css(n)]),e.css(n,t[n])},this.scrollTop=function(e){return typeof e=="undefined"?u.getScrollTop():u.setScrollTop(e)},this.scrollLeft=function(e){return typeof e=="undefined"?u.getScrollLeft():u.setScrollLeft(e)},BezierClass=function(e,t,n,r,i,s,o){this.st=e,this.ed=t,this.spd=n,this.p1=r||0,this.p2=i||1,this.p3=s||0,this.p4=o||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=(new Date).getTime(),t=1-(e-this.ts)/this.spd,n=this.B2(t)+this.B3(t)+this.B4(t);return t<0?this.ed:this.st+Math.round(this.df*n)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},h.hastranslate3d&&h.isios&&this.doc.css("-webkit-backface-visibility","hidden");function d(){var e=u.doc.css(h.trstyle);return e&&e.substr(0,6)=="matrix"?e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}this.getScrollTop=function(e){if(!e){var t=d();if(t)return t.length==16?-t[13]:-t[5];if(u.timerscroll&&u.timerscroll.bz)return u.timerscroll.bz.getNow()}return u.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=d();if(t)return t.length==16?-t[12]:-t[4];if(u.timerscroll&&u.timerscroll.bh)return u.timerscroll.bh.getNow()}return u.doc.translate.x},document.createEvent?this.notifyScrollEvent=function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?this.notifyScrollEvent=function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:this.notifyScrollEvent=function(e,t){},h.hastranslate3d&&u.opt.enabletranslate3d?(this.setScrollTop=function(e,t){u.doc.translate.y=e,u.doc.translate.ty=e*-1+"px",u.doc.css(h.trstyle,"translate3d("+u.doc.translate.tx+","+u.doc.translate.ty+",0px)"),t||u.notifyScrollEvent(u.win[0])},this.setScrollLeft=function(e,t){u.doc.translate.x=e,u.doc.translate.tx=e*-1+"px",u.doc.css(h.trstyle,"translate3d("+u.doc.translate.tx+","+u.doc.translate.ty+",0px)"),t||u.notifyScrollEvent(u.win[0])}):(this.setScrollTop=function(e,t){u.doc.translate.y=e,u.doc.translate.ty=e*-1+"px",u.doc.css(h.trstyle,"translate("+u.doc.translate.tx+","+u.doc.translate.ty+")"),t||u.notifyScrollEvent(u.win[0])},this.setScrollLeft=function(e,t){u.doc.translate.x=e,u.doc.translate.tx=e*-1+"px",u.doc.css(h.trstyle,"translate("+u.doc.translate.tx+","+u.doc.translate.ty+")"),t||u.notifyScrollEvent(u.win[0])})}else this.getScrollTop=function(){return u.docscroll.scrollTop()},this.setScrollTop=function(e){return u.docscroll.scrollTop(e)},this.getScrollLeft=function(){return u.docscroll.scrollLeft()},this.setScrollLeft=function(e){return u.docscroll.scrollLeft(e)};this.getTarget=function(e){return e?e.target?e.target:e.srcElement?e.srcElement:!1:!1},this.hasParent=function(e,t){if(!e)return!1;var n=e.target||e.srcElement||e||!1;while(n&&n.id!=t)n=n.parentNode||!1;return n!==!1};var m={thin:1,medium:3,thick:5};this.updateScrollBar=function(e){if(u.ishwscroll)u.rail.css({height:u.win.innerHeight()}),u.railh&&u.railh.css({width:u.win.innerWidth()});else{var t=u.isfixed?{top:parseFloat(u.win.css("top")),left:parseFloat(u.win.css("left"))}:u.win.offset(),n={top:t.top,left:t.left};n.top+=g(u.win,"border-top-width",!0);var r=(u.win.outerWidth()-u.win.innerWidth())/2;n.left+=u.rail.align?u.win.outerWidth()-g(u.win,"border-right-width")-u.rail.width:g(u.win,"border-left-width");var i=u.opt.railoffset;i&&(i.top&&(n.top+=i.top),u.rail.align&&i.left&&(n.left+=i.left)),u.locked||u.rail.css({top:n.top,left:n.left,height:e?e.h:u.win.innerHeight()}),u.zoom&&u.zoom.css({top:n.top+1,left:u.rail.align==1?n.left-20:n.left+u.rail.width+4});if(u.railh&&!u.locked){var n={top:t.top,left:t.left},s=u.railh.align?n.top+g(u.win,"border-top-width",!0)+u.win.innerHeight()-u.railh.height:n.top+g(u.win,"border-top-width",!0),o=n.left+g(u.win,"border-left-width");u.railh.css({top:s,left:o,width:u.railh.width})}}},this.doRailClick=function(e,t,n){var r,i,s,o;if(u.rail.drag&&u.rail.drag.pt!=1)return;if(u.locked)return;if(u.rail.drag)return;u.cancelScroll(),u.cancelEvent(e),t?(r=n?u.doScrollLeft:u.doScrollTop,s=n?(e.pageX-u.railh.offset().left-u.cursorwidth/2)*u.scrollratio.x:(e.pageY-u.rail.offset().top-u.cursorheight/2)*u.scrollratio.y,r(s)):(r=n?u.doScrollLeftBy:u.doScrollBy,s=n?u.scroll.x:u.scroll.y,o=n?e.pageX-u.railh.offset().left:e.pageY-u.rail.offset().top,i=n?u.view.w:u.view.h,s>=o?r(i):r(-i))},u.hasanimationframe=l,u.hascancelanimationframe=c,u.hasanimationframe?u.hascancelanimationframe||(c=function(){u.cancelAnimationFrame=!0}):(l=function(e){return setTimeout(e,16)},c=clearInterval),this.init=function(){u.saved.css=[];if(h.isie7mobile)return!0;h.hasmstouch&&u.css(u.ispage?o("html"):u.win,{"-ms-touch-action":"none"});if(!u.ispage||!h.cantouch&&!h.isieold&&!h.isie9mobile){var e=u.docscroll;u.ispage&&(e=u.haswrapper?u.win:u.doc),h.isie9mobile||u.css(e,{"overflow-y":"hidden"}),u.ispage&&h.isie7&&(u.doc[0].nodeName=="BODY"?u.css(o("html"),{"overflow-y":"hidden"}):u.doc[0].nodeName=="HTML"&&u.css(o("body"),{"overflow-y":"hidden"})),h.isios&&!u.ispage&&!u.haswrapper&&u.css(o("body"),{"-webkit-overflow-scrolling":"touch"});var r=o(document.createElement("div"));r.css({position:"relative",top:0,"float":"right",width:u.opt.cursorwidth,height:"0px","background-color":u.opt.cursorcolor,border:u.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":u.opt.cursorborderradius,"-moz-border-radius":u.opt.cursorborderradius,"border-radius":u.opt.cursorborderradius}),r.hborder=parseFloat(r.outerHeight()-r.innerHeight()),u.cursor=r;var s=o(document.createElement("div"));s.attr("id",u.id);var a,l,c=["left","right"];for(var p in c)l=c[p],a=u.opt.railpadding[l],a?s.css("padding-"+l,a+"px"):u.opt.railpadding[l]=0;s.append(r),s.width=Math.max(parseFloat(u.opt.cursorwidth),r.outerWidth())+u.opt.railpadding.left+u.opt.railpadding.right,s.css({width:s.width+"px",zIndex:u.ispage?u.opt.zindex:u.opt.zindex+2,background:u.opt.background}),s.visibility=!0,s.scrollable=!0,s.align=u.opt.railalign=="left"?0:1,u.rail=s,u.rail.drag=!1;var d=!1;u.opt.boxzoom&&!u.ispage&&!h.isieold&&(d=document.createElement("div"),u.bind(d,"click",u.doZoom),u.zoom=o(d),u.zoom.css({cursor:"pointer","z-index":u.opt.zindex,backgroundImage:"url("+f+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),u.opt.dblclickzoom&&u.bind(u.win,"dblclick",u.doZoom),h.cantouch&&u.opt.gesturezoom&&(u.ongesturezoom=function(e){return e.scale>1.5&&u.doZoomIn(e),e.scale<.8&&u.doZoomOut(e),u.cancelEvent(e)},u.bind(u.win,"gestureend",u.ongesturezoom))),u.railh=!1;if(u.opt.horizrailenabled){u.css(e,{"overflow-x":"hidden"});var r=o(document.createElement("div"));r.css({position:"relative",top:0,height:u.opt.cursorwidth,width:"0px","background-color":u.opt.cursorcolor,border:u.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":u.opt.cursorborderradius,"-moz-border-radius":u.opt.cursorborderradius,"border-radius":u.opt.cursorborderradius}),r.wborder=parseFloat(r.outerWidth()-r.innerWidth()),u.cursorh=r;var m=o(document.createElement("div"));m.attr("id",u.id+"-hr"),m.height=1+Math.max(parseFloat(u.opt.cursorwidth),r.outerHeight()),m.css({height:m.height+"px",zIndex:u.ispage?u.opt.zindex:u.opt.zindex+2,background:u.opt.background}),m.append(r),m.visibility=!0,m.scrollable=!0,m.align=u.opt.railvalign=="top"?0:1,u.railh=m,u.railh.drag=!1}if(u.ispage)s.css({position:"fixed",top:"0px",height:"100%"}),s.align?s.css({right:"0px"}):s.css({left:"0px"}),u.body.append(s),u.railh&&(m.css({position:"fixed",left:"0px",width:"100%"}),m.align?m.css({bottom:"0px"}):m.css({top:"0px"}),u.body.append(m));else{if(u.ishwscroll){u.win.css("position")=="static"&&u.css(u.win,{position:"relative"});var g=u.win[0].nodeName=="HTML"?u.body:u.win;u.zoom&&(u.zoom.css({position:"absolute",top:1,right:0,"margin-right":s.width+4}),g.append(u.zoom)),s.css({position:"absolute",top:0}),s.align?s.css({right:0}):s.css({left:0}),g.append(s),m&&(m.css({position:"absolute",left:0,bottom:0}),m.align?m.css({bottom:0}):m.css({top:0}),g.append(m))}else{u.isfixed=u.win.css("position")=="fixed";var y=u.isfixed?"fixed":"absolute";s.css({position:y}),u.zoom&&u.zoom.css({position:y}),u.updateScrollBar(),u.body.append(s),u.zoom&&u.body.append(u.zoom),u.railh&&(m.css({position:y}),u.body.append(m))}h.isios&&u.css(u.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),h.isie&&u.opt.disableoutline&&u.win.attr("hideFocus","true"),h.iswebkit&&u.opt.disableoutline&&u.win.css({outline:"none"})}u.opt.autohidemode===!1?u.autohidedom=!1:u.opt.autohidemode===!0?(u.autohidedom=o().add(u.rail),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh))):u.opt.autohidemode=="scroll"?(u.autohidedom=o().add(u.rail),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh))):u.opt.autohidemode=="cursor"?(u.autohidedom=o().add(u.cursor),u.railh&&(u.autohidedom=u.autohidedom.add(u.railh.cursor))):u.opt.autohidemode=="hidden"&&(u.autohidedom=!1,u.hide(),u.locked=!1);if(h.isie9mobile){u.scrollmom=new v(u),u.onmangotouch=function(e){var t=u.getScrollTop(),n=u.getScrollLeft();if(t==u.scrollmom.lastscrolly&&n==u.scrollmom.lastscrollx)return!0;var r=t-u.mangotouch.sy,i=n-u.mangotouch.sx,s=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));if(s==0)return;var o=r<0?-1:1,a=i<0?-1:1,f=+(new Date);u.mangotouch.lazy&&clearTimeout(u.mangotouch.lazy);if(f-u.mangotouch.tm>80||u.mangotouch.dry!=o||u.mangotouch.drx!=a)u.scrollmom.stop(),u.scrollmom.reset(n,t),u.mangotouch.sy=t,u.mangotouch.ly=t,u.mangotouch.sx=n,u.mangotouch.lx=n,u.mangotouch.dry=o,u.mangotouch.drx=a,u.mangotouch.tm=f;else{u.scrollmom.stop(),u.scrollmom.update(u.mangotouch.sx-i,u.mangotouch.sy-r);var l=f-u.mangotouch.tm;u.mangotouch.tm=f;var c=Math.max(Math.abs(u.mangotouch.ly-t),Math.abs(u.mangotouch.lx-n));u.mangotouch.ly=t,u.mangotouch.lx=n,c>2&&(u.mangotouch.lazy=setTimeout(function(){u.mangotouch.lazy=!1,u.mangotouch.dry=0,u.mangotouch.drx=0,u.mangotouch.tm=0,u.scrollmom.doMomentum(30)},100))}};var b=u.getScrollTop(),w=u.getScrollLeft();u.mangotouch={sy:b,ly:b,dry:0,sx:w,lx:w,drx:0,lazy:!1,tm:0},u.bind(u.docscroll,"scroll",u.onmangotouch)}else{if(h.cantouch||u.istouchcapable||u.opt.touchbehavior||h.hasmstouch){u.scrollmom=new v(u),u.ontouchstart=function(e){if(e.pointerType&&e.pointerType!=2)return!1;if(!u.locked){if(h.hasmstouch){var t=e.target?e.target:!1;while(t){var n=o(t).getNiceScroll();if(n.length>0&&n[0].me==u.me)break;if(n.length>0)return!1;if(t.nodeName=="DIV"&&t.id==u.id)break;t=t.parentNode?t.parentNode:!1}}u.cancelScroll();var t=u.getTarget(e);if(t){var r=/INPUT/i.test(t.nodeName)&&/range/i.test(t.type);if(r)return u.stopPropagation(e)}if(u.forcescreen){var i=e,e={original:e.original?e.original:e};e.clientX=i.screenX,e.clientY=i.screenY}u.rail.drag={x:e.clientX,y:e.clientY,sx:u.scroll.x,sy:u.scroll.y,st:u.getScrollTop(),sl:u.getScrollLeft(),pt:2};if(u.opt.touchbehavior&&u.isiframe&&h.isie){var s=u.win.position();u.rail.drag.x+=s.left,u.rail.drag.y+=s.top}u.hasmoving=!1,u.lastmouseup=!1,u.scrollmom.reset(e.clientX,e.clientY);if(!h.cantouch&&!this.istouchcapable&&!h.hasmstouch){var a=t?/INPUT|SELECT|TEXTAREA/i.test(t.nodeName):!1;if(!a)return!u.ispage&&h.hasmousecapture&&t.setCapture(),u.cancelEvent(e);/SUBMIT|CANCEL|BUTTON/i.test(o(t).attr("type"))&&(pc={tg:t,click:!1},u.preventclick=pc)}}},u.ontouchend=function(e){if(e.pointerType&&e.pointerType!=2)return!1;if(u.rail.drag&&u.rail.drag.pt==2){u.scrollmom.doMomentum(),u.rail.drag=!1;if(u.hasmoving){u.hasmoving=!1,u.lastmouseup=!0,u.hideCursor(),h.hasmousecapture&&document.releaseCapture();if(!h.cantouch)return u.cancelEvent(e)}}};var E=u.opt.touchbehavior&&u.isiframe&&!h.hasmousecapture;u.ontouchmove=function(e,t){if(e.pointerType&&e.pointerType!=2)return!1;if(u.rail.drag&&u.rail.drag.pt==2){if(h.cantouch&&typeof e.original=="undefined")return!0;u.hasmoving=!0,u.preventclick&&!u.preventclick.click&&(u.preventclick.click=u.preventclick.tg.onclick||!1,u.preventclick.tg.onclick=u.onpreventclick);if(u.forcescreen){var n=e,e={original:e.original?e.original:e};e.clientX=n.screenX,e.clientY=n.screenY}var r=ofy=0;if(E&&!t){var i=u.win.position();r=-i.left,ofy=-i.top}var s=e.clientY+ofy,o=s-u.rail.drag.y,a=u.rail.drag.st-o;u.ishwscroll&&u.opt.bouncescroll?a<0?a=Math.round(a/2):a>u.page.maxh&&(a=u.page.maxh+Math.round((a-u.page.maxh)/2)):(a<0&&(a=0,s=0),a>u.page.maxh&&(a=u.page.maxh,s=0));var f=e.clientX+r;if(u.railh&&u.railh.scrollable){var l=f-u.rail.drag.x,c=u.rail.drag.sl-l;u.ishwscroll&&u.opt.bouncescroll?c<0?c=Math.round(c/2):c>u.page.maxw&&(c=u.page.maxw+Math.round((c-u.page.maxw)/2)):(c<0&&(c=0,f=0),c>u.page.maxw&&(c=u.page.maxw,f=0))}return u.synched("touchmove",function(){u.rail.drag&&u.rail.drag.pt==2&&(u.prepareTransition&&u.prepareTransition(0),u.rail.scrollable&&u.setScrollTop(a),u.scrollmom.update(f,s),u.railh&&u.railh.scrollable?(u.setScrollLeft(c),u.showCursor(a,c)):u.showCursor(a),h.isie10&&document.selection.clear())}),u.cancelEvent(e)}}}h.cantouch||u.opt.touchbehavior?(u.onpreventclick=function(e){if(u.preventclick)return u.preventclick.tg.onclick=u.preventclick.click,u.preventclick=!1,u.cancelEvent(e)},u.onmousedown=u.ontouchstart,u.onmouseup=u.ontouchend,u.onclick=h.isios?!1:function(e){return u.lastmouseup?(u.lastmouseup=!1,u.cancelEvent(e)):!0},u.onmousemove=u.ontouchmove,h.cursorgrabvalue&&(u.css(u.ispage?u.doc:u.win,{cursor:h.cursorgrabvalue}),u.css(u.rail,{cursor:h.cursorgrabvalue}))):(u.onmousedown=function(e,t){if(u.rail.drag&&u.rail.drag.pt!=1)return;if(u.locked)return u.cancelEvent(e);u.cancelScroll(),u.rail.drag={x:e.clientX,y:e.clientY,sx:u.scroll.x,sy:u.scroll.y,pt:1,hr:!!t};var n=u.getTarget(e);return!u.ispage&&h.hasmousecapture&&n.setCapture(),u.isiframe&&!h.hasmousecapture&&(u.saved.csspointerevents=u.doc.css("pointer-events"),u.css(u.doc,{"pointer-events":"none"})),u.cancelEvent(e)},u.onmouseup=function(e){if(u.rail.drag){h.hasmousecapture&&document.releaseCapture(),u.isiframe&&!h.hasmousecapture&&u.doc.css("pointer-events",u.saved.csspointerevents);if(u.rail.drag.pt!=1)return;return u.rail.drag=!1,u.cancelEvent(e)}},u.onmousemove=function(e){if(u.rail.drag){if(u.rail.drag.pt!=1)return;if(h.ischrome&&e.which==0)return u.onmouseup(e);u.cursorfreezed=!0;if(u.rail.drag.hr){u.scroll.x=u.rail.drag.sx+(e.clientX-u.rail.drag.x),u.scroll.x<0&&(u.scroll.x=0);var t=u.scrollvaluemaxw;u.scroll.x>t&&(u.scroll.x=t)}else{u.scroll.y=u.rail.drag.sy+(e.clientY-u.rail.drag.y),u.scroll.y<0&&(u.scroll.y=0);var n=u.scrollvaluemax;u.scroll.y>n&&(u.scroll.y=n)}return u.synched("mousemove",function(){u.rail.drag&&u.rail.drag.pt==1&&(u.showCursor(),u.rail.drag.hr?u.doScrollLeft(Math.round(u.scroll.x*u.scrollratio.x)):u.doScrollTop(Math.round(u.scroll.y*u.scrollratio.y)))}),u.cancelEvent(e)}u.checkarea=!0}),(h.cantouch||u.opt.touchbehavior)&&u.bind(u.win,"mousedown",u.onmousedown),h.hasmstouch&&(u.css(u.rail,{"-ms-touch-action":"none"}),u.css(u.cursor,{"-ms-touch-action":"none"}),u.bind(u.win,"MSPointerDown",u.ontouchstart),u.bind(document,"MSPointerUp",u.ontouchend),u.bind(document,"MSPointerMove",u.ontouchmove),u.bind(u.cursor,"MSGestureHold",function(e){e.preventDefault()}),u.bind(u.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(u.bind(u.win,"touchstart",u.ontouchstart),u.bind(document,"touchend",u.ontouchend),u.bind(document,"touchmove",u.ontouchmove)),u.bind(u.cursor,"mousedown",u.onmousedown),u.bind(u.cursor,"mouseup",u.onmouseup),u.railh&&(u.bind(u.cursorh,"mousedown",function(e){u.onmousedown(e,!0)}),u.bind(u.cursorh,"mouseup",function(e){if(u.rail.drag&&u.rail.drag.pt==2)return;return u.rail.drag=!1,u.hasmoving=!1,u.hideCursor(),h.hasmousecapture&&document.releaseCapture(),u.cancelEvent(e)})),u.bind(document,"mouseup",u.onmouseup),h.hasmousecapture&&u.bind(u.win,"mouseup",u.onmouseup),u.bind(document,"mousemove",u.onmousemove),u.onclick&&u.bind(document,"click",u.onclick),!h.cantouch&&!u.opt.touchbehavior&&(u.rail.mouseenter(function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.rail.mouseleave(function(){u.rail.active=!1,u.rail.drag||u.hideCursor()}),u.opt.sensitiverail&&(u.rail.click(function(e){u.doRailClick(e,!1,!1)}),u.rail.dblclick(function(e){u.doRailClick(e,!0,!1)}),u.cursor.click(function(e){u.cancelEvent(e)}),u.cursor.dblclick(function(e){u.cancelEvent(e)})),u.railh&&(u.railh.mouseenter(function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.railh.mouseleave(function(){u.rail.active=!1,u.rail.drag||u.hideCursor()})),u.zoom&&(u.zoom.mouseenter(function(){u.canshowonmouseevent&&u.showCursor(),u.rail.active=!0}),u.zoom.mouseleave(function(){u.rail.active=!1,u.rail.drag||u.hideCursor()}))),u.opt.enablemousewheel&&(u.isiframe||u.bind(h.isie&&u.ispage?document:u.docscroll,"mousewheel",u.onmousewheel),u.bind(u.rail,"mousewheel",u.onmousewheel),u.railh&&u.bind(u.railh,"mousewheel",u.onmousewheelhr)),!u.ispage&&!h.cantouch&&!/HTML|BODY/.test(u.win[0].nodeName)&&(u.win.attr("tabindex")||u.win.attr({tabindex:i++}),u.win.focus(function(e){t=u.getTarget(e).id||!0,u.hasfocus=!0,u.canshowonmouseevent&&u.noticeCursor()}),u.win.blur(function(e){t=!1,u.hasfocus=!1}),u.win.mouseenter(function(e){n=u.getTarget(e).id||!0,u.hasmousefocus=!0,u.canshowonmouseevent&&u.noticeCursor()}),u.win.mouseleave(function(){n=!1,u.hasmousefocus=!1}))}u.onkeypress=function(e){if(u.locked&&u.page.maxh==0)return!0;e=e?e:window.e;var r=u.getTarget(e);if(r&&/INPUT|TEXTAREA|SELECT|OPTION/.test(r.nodeName)){var i=r.getAttribute("type")||r.type||!1;if(!i||!/submit|button|cancel/i.tp)return!0}if(u.hasfocus||u.hasmousefocus&&!t||u.ispage&&!t&&!n){var s=e.keyCode,o=e.ctrlKey||!1;if(u.locked&&s!=27)return u.cancelEvent(e);var a=!1;switch(s){case 38:case 63233:u.doScrollBy(72),a=!0;break;case 40:case 63235:u.doScrollBy(-72),a=!0;break;case 37:case 63232:u.railh&&(o?u.doScrollLeft(0):u.doScrollLeftBy(72),a=!0);break;case 39:case 63234:u.railh&&(o?u.doScrollLeft(u.page.maxw):u.doScrollLeftBy(-72),a=!0);break;case 33:case 63276:u.doScrollBy(u.view.h),a=!0;break;case 34:case 63277:u.doScrollBy(-u.view.h),a=!0;break;case 36:case 63273:u.railh&&o?u.doScrollPos(0,0):u.doScrollTo(0),a=!0;break;case 35:case 63275:u.railh&&o?u.doScrollPos(u.page.maxw,u.page.maxh):u.doScrollTo(u.page.maxh),a=!0;break;case 32:u.opt.spacebarenabled&&(u.doScrollBy(-u.view.h),a=!0);break;case 27:u.zoomactive&&(u.doZoom(),a=!0)}if(a)return u.cancelEvent(e)}},u.opt.enablekeyboard&&u.bind(document,h.isopera&&!h.isopera12?"keypress":"keydown",u.onkeypress),u.bind(window,"resize",u.resize),u.bind(window,"orientationchange",u.resize),u.bind(window,"load",u.resize);if(h.ischrome&&!u.ispage&&!u.haswrapper){var S=u.win.attr("style"),x=parseFloat(u.win.css("width"))+1;u.win.css("width",x),u.synched("chromefix",function(){u.win.attr("style",S)})}u.onAttributeChange=function(e){u.lazyResize()},!u.ispage&&!u.haswrapper&&("WebKitMutationObserver"in window?(u.observer=new WebKitMutationObserver(function(e){e.forEach(u.onAttributeChange)}),u.observer.observe(u.win[0],{attributes:!0,subtree:!1})):(u.bind(u.win,h.isie&&!h.isie9?"propertychange":"DOMAttrModified",u.onAttributeChange),h.isie9&&u.win[0].attachEvent("onpropertychange",u.onAttributeChange))),!u.ispage&&u.opt.boxzoom&&u.bind(window,"resize",u.resizeZoom),u.istextarea&&u.bind(u.win,"mouseup",u.resize),u.resize()}if(this.doc[0].nodeName=="IFRAME"){function T(e){u.iframexd=!1;try{var t="contentDocument"in this?this.contentDocument:this.contentWindow.document,n=t.domain}catch(e){u.iframexd=!0,t=!1}if(u.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;u.forcescreen=!0,u.isiframe&&(u.iframe={doc:o(t),html:u.doc.contents().find("html")[0],body:u.doc.contents().find("body")[0]},u.getContentSize=function(){return{w:Math.max(u.iframe.html.scrollWidth,u.iframe.body.scrollWidth),h:Math.max(u.iframe.html.scrollHeight,u.iframe.body.scrollHeight)}},u.docscroll=o(u.iframe.body));if(!h.isios&&u.opt.iframeautoresize&&!u.isiframe){u.win.scrollTop(0),u.doc.height("");var r=Math.max(t.getElementsByTagName("html")[0].scrollHeight,t.body.scrollHeight);u.doc.height(r)}u.resize(),h.isie7&&u.css(o(u.iframe.html),{"overflow-y":"hidden"}),u.css(o(u.iframe.body),{"overflow-y":"hidden"}),"contentWindow"in this?u.bind(this.contentWindow,"scroll",u.onscroll):u.bind(t,"scroll",u.onscroll),u.opt.enablemousewheel&&u.bind(t,"mousewheel",u.onmousewheel),u.opt.enablekeyboard&&u.bind(t,h.isopera?"keypress":"keydown",u.onkeypress);if(h.cantouch||u.opt.touchbehavior)u.bind(t,"mousedown",u.onmousedown),u.bind(t,"mousemove",function(e){u.onmousemove(e,!0)}),h.cursorgrabvalue&&u.css(o(t.body),{cursor:h.cursorgrabvalue});u.bind(t,"mouseup",u.onmouseup),u.zoom&&(u.opt.dblclickzoom&&u.bind(t,"dblclick",u.doZoom),u.ongesturezoom&&u.bind(t,"gestureend",u.ongesturezoom))}this.doc[0].readyState&&this.doc[0].readyState=="complete"&&setTimeout(function(){T.call(u.doc[0],!1)},500),u.bind(this.doc,"load",T)}},this.showCursor=function(e,t){u.cursortimeout&&(clearTimeout(u.cursortimeout),u.cursortimeout=0);if(!u.rail)return;u.autohidedom&&(u.autohidedom.stop().css({opacity:u.opt.cursoropacitymax}),u.cursoractive=!0),typeof e!="undefined"&&e!==!1&&(u.scroll.y=Math.round(e*1/u.scrollratio.y)),typeof t!="undefined"&&(u.scroll.x=Math.round(t*1/u.scrollratio.x)),u.cursor.css({height:u.cursorheight,top:u.scroll.y}),u.cursorh&&(!u.rail.align&&u.rail.visibility?u.cursorh.css({width:u.cursorwidth,left:u.scroll.x+u.rail.width}):u.cursorh.css({width:u.cursorwidth,left:u.scroll.x}),u.cursoractive=!0),u.zoom&&u.zoom.stop().css({opacity:u.opt.cursoropacitymax})},this.hideCursor=function(e){if(u.cursortimeout)return;if(!u.rail)return;if(!u.autohidedom)return;u.cursortimeout=setTimeout(function(){if(!u.rail.active||!u.showonmouseevent)u.autohidedom.stop().animate({opacity:u.opt.cursoropacitymin}),u.zoom&&u.zoom.stop().animate({opacity:u.opt.cursoropacitymin}),u.cursoractive=!1;u.cursortimeout=0},e||400)},this.noticeCursor=function(e,t,n){u.showCursor(t,n),u.rail.active||u.hideCursor(e)},this.getContentSize=u.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:u.haswrapper?function(){return{w:u.doc.outerWidth()+parseInt(u.win.css("paddingLeft"))+parseInt(u.win.css("paddingRight")),h:u.doc.outerHeight()+parseInt(u.win.css("paddingTop"))+parseInt(u.win.css("paddingBottom"))}}:function(){return{w:u.docscroll[0].scrollWidth,h:u.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!u.win)return!1;if(!u.haswrapper&&!u.ispage){if(u.win.css("display")=="none")return u.visibility&&u.hideRail().hideRailHr(),!1;!u.hidden&&!u.visibility&&u.showRail().showRailHr()}var n=u.page.maxh,r=u.page.maxw,i={h:u.view.h,w:u.view.w};u.view={w:u.ispage?u.win.width():parseInt(u.win[0].clientWidth),h:u.ispage?u.win.height():parseInt(u.win[0].clientHeight)},u.page=t?t:u.getContentSize(),u.page.maxh=Math.max(0,u.page.h-u.view.h),u.page.maxw=Math.max(0,u.page.w-u.view.w);if(u.page.maxh==n&&u.page.maxw==r&&u.view.w==i.w){if(!!u.ispage)return u;var s=u.win.offset();if(u.lastposition){var o=u.lastposition;if(o.top==s.top&&o.left==s.left)return u}u.lastposition=s}u.page.maxh==0?(u.hideRail(),u.scrollvaluemax=0,u.scroll.y=0,u.scrollratio.y=0,u.cursorheight=0,u.setScrollTop(0),u.rail.scrollable=!1):u.rail.scrollable=!0,u.page.maxw==0?(u.hideRailHr(),u.scrollvaluemaxw=0,u.scroll.x=0,u.scrollratio.x=0,u.cursorwidth=0,u.setScrollLeft(0),u.railh.scrollable=!1):u.railh.scrollable=!0,u.locked=u.page.maxh==0&&u.page.maxw==0;if(u.locked)return u.ispage||u.updateScrollBar(u.view),!1;!u.hidden&&!u.visibility?u.showRail().showRailHr():!u.hidden&&!u.railh.visibility&&u.showRailHr(),u.istextarea&&u.win.css("resize")&&u.win.css("resize")!="none"&&(u.view.h-=20),u.ispage||u.updateScrollBar(u.view),u.cursorheight=Math.min(u.view.h,Math.round(u.view.h*(u.view.h/u.page.h))),u.cursorheight=Math.max(u.opt.cursorminheight,u.cursorheight),u.cursorwidth=Math.min(u.view.w,Math.round(u.view.w*(u.view.w/u.page.w))),u.cursorwidth=Math.max(u.opt.cursorminheight,u.cursorwidth),u.scrollvaluemax=u.view.h-u.cursorheight-u.cursor.hborder,u.railh&&(u.railh.width=u.page.maxh>0?u.view.w-u.rail.width:u.view.w,u.scrollvaluemaxw=u.railh.width-u.cursorwidth-u.cursorh.wborder),u.scrollratio={x:u.page.maxw/u.scrollvaluemaxw,y:u.page.maxh/u.scrollvaluemax};var a=u.getScrollTop();return a>u.page.maxh?u.doScroll(u.page.maxh):(u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.scroll.x=Math.round(u.getScrollLeft()*(1/u.scrollratio.x)),u.cursoractive&&u.noticeCursor()),u.scroll.y&&u.getScrollTop()==0&&u.doScrollTo(Math.floor(u.scroll.y*u.scrollratio.y)),u},this.resize=function(){return u.delayed("resize",u.onResize,30),u},this.lazyResize=function(){u.delayed("resize",u.resize,250)},this._bind=function(e,t,n,r){u.events.push({e:e,n:t,f:n,b:r}),e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},this.bind=function(e,t,n,r){var i="jquery"in e?e[0]:e;if(i.addEventListener){if(h.cantouch&&/mouseup|mousedown|mousemove/.test(t)){var s=t=="mousedown"?"touchstart":t=="mouseup"?"touchend":"touchmove";u._bind(i,s,function(e){if(e.touches){if(e.touches.length<2){var t=e.touches.length?e.touches[0]:e;t.original=e,n.call(this,t)}}else if(e.changedTouches){var t=e.changedTouches[0];t.original=e,n.call(this,t)}},r||!1)}u._bind(i,t,n,r||!1),t=="mousewheel"&&u._bind(i,"DOMMouseScroll",n,r||!1),h.cantouch&&t=="mouseup"&&u._bind(i,"touchcancel",n,r||!1)}else u._bind(i,t,function(e){return e=e||window.event||!1,e&&e.srcElement&&(e.target=e.srcElement),n.call(i,e)===!1||r===!1?u.cancelEvent(e):!0})},this._unbind=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<u.events.length;e++){var t=u.events[e];u._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1):!1},this.stopPropagation=function(e){var e=e.original?e.original:e?e:window.event||!1;return e?e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1):!1},this.showRail=function(){return u.page.maxh!=0&&(u.ispage||u.win.css("display")!="none")&&(u.visibility=!0,u.rail.visibility=!0,u.rail.css("display","block")),u},this.showRailHr=function(){return u.railh?(u.page.maxw!=0&&(u.ispage||u.win.css("display")!="none")&&(u.railh.visibility=!0,u.railh.css("display","block")),u):u},this.hideRail=function(){return u.visibility=!1,u.rail.visibility=!1,u.rail.css("display","none"),u},this.hideRailHr=function(){return u.railh?(u.railh.visibility=!1,u.railh.css("display","none"),u):u},this.show=function(){return u.hidden=!1,u.locked=!1,u.showRail().showRailHr()},this.hide=function(){return u.hidden=!0,u.locked=!0,u.hideRail().hideRailHr()},this.remove=function(){u.doZoomOut(),u.unbindAll(),u.observer!==!1&&u.observer.disconnect(),u.events=[],u.cursor&&(u.cursor.remove(),u.cursor=null),u.cursorh&&(u.cursorh.remove(),u.cursorh=null),u.rail&&(u.rail.remove(),u.rail=null),u.railh&&(u.railh.remove(),u.railh=null),u.zoom&&(u.zoom.remove(),u.zoom=null);for(var e=0;e<u.saved.css.length;e++){var t=u.saved.css[e];t[0].css(t[1],typeof t[2]=="undefined"?"":t[2])}return u.saved=!1,u.me.data("__nicescroll",""),u.me=null,u.doc=null,u.docscroll=null,u.win=null,u},this.scrollstart=function(e){return this.onscrollstart=e,u},this.scrollend=function(e){return this.onscrollend=e,u},this.scrollcancel=function(e){return this.onscrollcancel=e,u},this.zoomin=function(e){return this.onzoomin=e,u},this.zoomout=function(e){return this.onzoomout=e,u},this.isScrollable=function(e){var t=e.target?e.target:e;while(t&&t.nodeType==1&&!/BODY|HTML/.test(t.nodeName)){var n=o(t),r=n.css("overflowY")||n.css("overflowX")||n.css("overflow")||"";if(/scroll|auto/.test(r))return t.clientHeight!=t.scrollHeight;t=t.parentNode?t.parentNode:!1}return!1},this.onmousewheel=function(e){return u.locked?!0:u.rail.scrollable?(u.opt.preservenativescrolling&&u.checkarea&&(u.checkarea=!1,u.nativescrollingarea=u.isScrollable(e)),u.nativescrollingarea?!0:u.locked?u.cancelEvent(e):u.rail.drag?u.cancelEvent(e):(y(e,!1),u.cancelEvent(e))):u.railh&&u.railh.scrollable?u.onmousewheelhr(e):!0},this.onmousewheelhr=function(e){return u.locked||!u.railh.scrollable?!0:(u.opt.preservenativescrolling&&u.checkarea&&(u.checkarea=!1,u.nativescrollingarea=u.isScrollable(e)),u.nativescrollingarea?!0:u.locked?u.cancelEvent(e):u.rail.drag?u.cancelEvent(e):(y(e,!0),u.cancelEvent(e)))},this.stop=function(){return u.cancelScroll(),u.scrollmon&&u.scrollmon.stop(),u.cursorfreezed=!1,u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.noticeCursor(),u},this.getTransitionSpeed=function(e){var t=Math.round(u.opt.scrollspeed*10),n=Math.min(t,Math.round(e/20*u.opt.scrollspeed));return n>20?n:0},u.opt.smoothscroll?u.ishwscroll&&h.hastransition&&u.opt.usetransition?(this.prepareTransition=function(e,t){var n=t?e>20?e:0:u.getTransitionSpeed(e),r=n?h.prefixstyle+"transform "+n+"ms ease-out":"";if(!u.lasttransitionstyle||u.lasttransitionstyle!=r)u.lasttransitionstyle=r,u.doc.css(h.transitionstyle,r);return n},this.doScrollLeft=function(e,t){var n=u.scrollrunning?u.newscrolly:u.getScrollTop();u.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=u.scrollrunning?u.newscrollx:u.getScrollLeft();u.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var r=u.getScrollTop(),i=u.getScrollLeft();((u.newscrolly-r)*(t-r)<0||(u.newscrollx-i)*(e-i)<0)&&u.cancelScroll(),u.newscrolly=t,u.newscrollx=e,u.newscrollspeed=n||!1;if(u.timer)return!1;u.timer=setTimeout(function(){var n=u.getScrollTop(),r=u.getScrollLeft(),i={};i.x=e-r,i.y=t-n,i.px=r,i.py=n;var s=Math.round(Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))),o=u.newscrollspeed?u.newscrollspeed:s,a=u.prepareTransition(o);u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm);if(a>0){if(!u.scrollrunning&&u.onscrollstart){var f={type:"scrollstart",current:{x:r,y:n},request:{x:e,y:t},end:{x:u.newscrollx,y:u.newscrolly},speed:a};u.onscrollstart.call(u,f)}h.transitionend?u.scrollendtrapped||(u.scrollendtrapped=!0,u.bind(u.doc,h.transitionend,u.onScrollEnd,!1)):(u.scrollendtrapped&&clearTimeout(u.scrollendtrapped),u.scrollendtrapped=setTimeout(u.onScrollEnd,a));var l=n,c=r;u.timerscroll={bz:new BezierClass(l,u.newscrolly,a,0,0,.58,1),bh:new BezierClass(c,u.newscrollx,a,0,0,.58,1)},u.cursorfreezed||(u.timerscroll.tm=setInterval(function(){u.showCursor(u.getScrollTop(),u.getScrollLeft())},60))}u.synched("doScroll-set",function(){u.timer=0,u.scrollendtrapped&&(u.scrollrunning=!0),u.setScrollTop(u.newscrolly),u.setScrollLeft(u.newscrollx),u.scrollendtrapped||u.onScrollEnd()})},50)},this.cancelScroll=function(){if(!u.scrollendtrapped)return!0;var e=u.getScrollTop(),t=u.getScrollLeft();return u.scrollrunning=!1,h.transitionend||clearTimeout(h.transitionend),u.scrollendtrapped=!1,u._unbind(u.doc,h.transitionend,u.onScrollEnd),u.prepareTransition(0),u.setScrollTop(e),u.railh&&u.setScrollLeft(t),u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm),u.timerscroll=!1,u.cursorfreezed=!1,u.showCursor(e,t),u},this.onScrollEnd=function(){u.scrollendtrapped&&u._unbind(u.doc,h.transitionend,u.onScrollEnd),u.scrollendtrapped=!1,u.prepareTransition(0),u.timerscroll&&u.timerscroll.tm&&clearInterval(u.timerscroll.tm),u.timerscroll=!1;var e=u.getScrollTop(),t=u.getScrollLeft();u.setScrollTop(e),u.railh&&u.setScrollLeft(t),u.noticeCursor(!1,e,t),u.cursorfreezed=!1,e<0?e=0:e>u.page.maxh&&(e=u.page.maxh),t<0?t=0:t>u.page.maxw&&(t=u.page.maxw);if(e!=u.newscrolly||t!=u.newscrollx)return u.doScrollPos(t,e,u.opt.snapbackspeed);if(u.onscrollend&&u.scrollrunning){var n={type:"scrollend",current:{x:t,y:e},end:{x:u.newscrollx,y:u.newscrolly}};u.onscrollend.call(u,n)}u.scrollrunning=!1}):(this.doScrollLeft=function(e){var t=u.scrollrunning?u.newscrolly:u.getScrollTop();u.doScrollPos(e,t)},this.doScrollTop=function(e){var t=u.scrollrunning?u.newscrollx:u.getScrollLeft();u.doScrollPos(t,e)},this.doScrollPos=function(e,t){function h(){if(u.cancelAnimationFrame)return!0;u.scrollrunning=!0,f=1-f;if(f)return u.timer=l(h)||1;var e=0,t=sy=u.getScrollTop();if(u.dst.ay){t=u.bzscroll?u.dst.py+u.bzscroll.getNow()*u.dst.ay:u.newscrolly;var n=t-sy;if(n<0&&t<u.newscrolly||n>0&&t>u.newscrolly)t=u.newscrolly;u.setScrollTop(t),t==u.newscrolly&&(e=1)}else e=1;var r=sx=u.getScrollLeft();if(u.dst.ax){r=u.bzscroll?u.dst.px+u.bzscroll.getNow()*u.dst.ax:u.newscrollx;var n=r-sx;if(n<0&&r<u.newscrollx||n>0&&r>u.newscrollx)r=u.newscrollx;u.setScrollLeft(r),r==u.newscrollx&&(e+=1)}else e+=1;if(e==2){u.timer=0,u.cursorfreezed=!1,u.bzscroll=!1,u.scrollrunning=!1,t<0?t=0:t>u.page.maxh&&(t=u.page.maxh),r<0?r=0:r>u.page.maxw&&(r=u.page.maxw);if(r!=u.newscrollx||t!=u.newscrolly)u.doScrollPos(r,t);else if(u.onscrollend){var i={type:"scrollend",current:{x:sx,y:sy},end:{x:u.newscrollx,y:u.newscrolly}};u.onscrollend.call(u,i)}}else u.timer=l(h)||1}var t=typeof t=="undefined"||t===!1?u.getScrollTop(!0):t;if(u.timer&&u.newscrolly==t&&u.newscrollx==e)return!0;u.timer&&c(u.timer),u.timer=0;var n=u.getScrollTop(),r=u.getScrollLeft();((u.newscrolly-n)*(t-n)<0||(u.newscrollx-r)*(e-r)<0)&&u.cancelScroll(),u.newscrolly=t,u.newscrollx=e;if(!u.bouncescroll||!u.rail.visibility)u.newscrolly<0?u.newscrolly=0:u.newscrolly>u.page.maxh&&(u.newscrolly=u.page.maxh);if(!u.bouncescroll||!u.railh.visibility)u.newscrollx<0?u.newscrollx=0:u.newscrollx>u.page.maxw&&(u.newscrollx=u.page.maxw);u.dst={},u.dst.x=e-r,u.dst.y=t-n,u.dst.px=r,u.dst.py=n;var i=Math.round(Math.sqrt(Math.pow(u.dst.x,2)+Math.pow(u.dst.y,2)));u.dst.ax=u.dst.x/i,u.dst.ay=u.dst.y/i;var s=0,o=i;u.dst.x==0?(s=n,o=t,u.dst.ay=1,u.dst.py=0):u.dst.y==0&&(s=r,o=e,u.dst.ax=1,u.dst.px=0);var a=u.getTransitionSpeed(i);a>0?u.bzscroll=u.bzscroll?u.bzscroll.update(o,a):new BezierClass(s,o,a,0,1,0,1):u.bzscroll=!1;if(u.timer)return;(n==u.page.maxh&&t>=u.page.maxh||r==u.page.maxw&&e>=u.page.maxw)&&u.checkContentSize();var f=1;u.cancelAnimationFrame=!1,u.timer=1;if(u.onscrollstart&&!u.scrollrunning){var p={type:"scrollstart",current:{x:r,y:n},request:{x:e,y:t},end:{x:u.newscrollx,y:u.newscrolly},speed:a};u.onscrollstart.call(u,p)}h(),(n==u.page.maxh&&t>=n||r==u.page.maxw&&e>=r)&&u.checkContentSize(),u.noticeCursor()},this.cancelScroll=function(){return u.timer&&c(u.timer),u.timer=0,u.bzscroll=!1,u.scrollrunning=!1,u}):(this.doScrollLeft=function(e,t){var n=u.getScrollTop();u.doScrollPos(e,n,t)},this.doScrollTop=function(e,t){var n=u.getScrollLeft();u.doScrollPos(n,e,t)},this.doScrollPos=function(e,t,n){var r=e>u.page.maxw?u.page.maxw:e;r<0&&(r=0);var i=t>u.page.maxh?u.page.maxh:t;i<0&&(i=0),u.synched("scroll",function(){u.setScrollTop(i),u.setScrollLeft(r)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var n=0;if(t)n=Math.floor((u.scroll.y-e)*u.scrollratio.y);else{var r=u.timer?u.newscrolly:u.getScrollTop(!0);n=r-e}if(u.bouncescroll){var i=Math.round(u.view.h/2);n<-i?n=-i:n>u.page.maxh+i&&(n=u.page.maxh+i)}u.cursorfreezed=!1,py=u.getScrollTop(!0);if(n<0&&py<=0)return u.noticeCursor();if(n>u.page.maxh&&py>=u.page.maxh)return u.checkContentSize(),u.noticeCursor();u.doScrollTop(n)},this.doScrollLeftBy=function(e,t){var n=0;if(t)n=Math.floor((u.scroll.x-e)*u.scrollratio.x);else{var r=u.timer?u.newscrollx:u.getScrollLeft(!0);n=r-e}if(u.bouncescroll){var i=Math.round(u.view.w/2);n<-i?n=-i:n>u.page.maxw+i&&(n=u.page.maxw+i)}u.cursorfreezed=!1,px=u.getScrollLeft(!0);if(n<0&&px<=0)return u.noticeCursor();if(n>u.page.maxw&&px>=u.page.maxw)return u.noticeCursor();u.doScrollLeft(n)},this.doScrollTo=function(e,t){var n=t?Math.round(e*u.scrollratio.y):e;n<0?n=0:n>u.page.maxh&&(n=u.page.maxh),u.cursorfreezed=!1,u.doScrollTop(e)},this.checkContentSize=function(){var e=u.getContentSize();(e.h!=u.page.h||e.w!=u.page.w)&&u.resize(!1,e)},u.onscroll=function(e){if(u.rail.drag)return;u.cursorfreezed||u.synched("scroll",function(){u.scroll.y=Math.round(u.getScrollTop()*(1/u.scrollratio.y)),u.railh&&(u.scroll.x=Math.round(u.getScrollLeft()*(1/u.scrollratio.x))),u.noticeCursor()})},u.bind(u.docscroll,"scroll",u.onscroll),this.doZoomIn=function(e){if(u.zoomactive)return;u.zoomactive=!0,u.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],n=u.win[0].style;for(var r in t){var i=t[r];u.zoomrestore.style[i]=typeof n[i]!="undefined"?n[i]:""}u.zoomrestore.style.width=u.win.css("width"),u.zoomrestore.style.height=u.win.css("height"),u.zoomrestore.padding={w:u.win.outerWidth()-u.win.width(),h:u.win.outerHeight()-u.win.height()},h.isios4&&(u.zoomrestore.scrollTop=o(window).scrollTop(),o(window).scrollTop(0)),u.win.css({position:h.isios4?"absolute":"fixed",top:0,left:0,"z-index":u.opt.zindex+100,margin:"0px"});var s=u.win.css("backgroundColor");return(s==""||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&u.win.css("backgroundColor","#fff"),u.rail.css({"z-index":u.opt.zindex+110}),u.zoom.css({"z-index":u.opt.zindex+112}),u.zoom.css("backgroundPosition","0px -18px"),u.resizeZoom(),u.onzoomin&&u.onzoomin.call(u),u.cancelEvent(e)},this.doZoomOut=function(e){if(!u.zoomactive)return;return u.zoomactive=!1,u.win.css("margin",""),u.win.css(u.zoomrestore.style),h.isios4&&o(window).scrollTop(u.zoomrestore.scrollTop),u.rail.css({"z-index":u.ispage?u.opt.zindex:u.opt.zindex+2}),u.zoom.css({"z-index":u.opt.zindex}),u.zoomrestore=!1,u.zoom.css("backgroundPosition","0px 0px"),u.onResize(),u.onzoomout&&u.onzoomout.call(u),u.cancelEvent(e)},this.doZoom=function(e){return u.zoomactive?u.doZoomOut(e):u.doZoomIn(e)},this.resizeZoom=function(){if(!u.zoomactive)return;var e=u.getScrollTop();u.win.css({width:o(window).width()-u.zoomrestore.padding.w+"px",height:o(window).height()-u.zoomrestore.padding.h+"px"}),u.onResize(),u.setScrollTop(Math.min(u.page.maxh,e))},this.init(),o.nicescroll.push(this)},v=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+(new Date)},this.reset=function(e,n){t.stop();var r=t.time();t.steptime=0,t.lasttime=r,t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=n,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,n){var r=t.time();t.steptime=r-t.lasttime,t.lasttime=r;var i=n-t.lasty,s=e-t.lastx,o=t.nc.getScrollTop(),u=t.nc.getScrollLeft(),a=o+i,f=u+s;t.snapx=f<0||f>t.nc.page.maxw,t.snapy=a<0||a>t.nc.page.maxh,t.speedx=s,t.speedy=i,t.lastx=e,t.lasty=n},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,n){var r=!1;n<0?(n=0,r=!0):n>t.nc.page.maxh&&(n=t.nc.page.maxh,r=!0),e<0?(e=0,r=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,r=!0),r&&t.nc.doScrollPos(e,n,t.nc.opt.snapbackspeed)},this.doMomentum=function(e){var n=t.time(),r=e?n+e:t.lasttime,i=t.nc.getScrollLeft(),s=t.nc.getScrollTop(),o=t.nc.page.maxh,u=t.nc.page.maxw;t.speedx=u>0?Math.min(60,t.speedx):0,t.speedy=o>0?Math.min(60,t.speedy):0;var a=r&&n-r<=50;if(s<0||s>o||i<0||i>u)a=!1;var f=t.speedy&&a?t.speedy:!1,l=t.speedx&&a?t.speedx:!1;if(f||l){var c=Math.max(16,t.steptime);if(c>50){var h=c/50;t.speedx*=h,t.speedy*=h,c=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var p=t.lastscrollx,d=t.lastscrolly,v=function(){var e=t.time()-n>600?.04:.02;if(t.speedx){p=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=p;if(p<0||p>u)e=.1}if(t.speedy){d=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=d;if(d<0||d>o)e=.1}t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",function(){if(t.speedx){var e=t.nc.getScrollLeft();e!=t.chkx&&t.stop(),t.chkx=p,t.nc.setScrollLeft(p)}if(t.speedy){var n=t.nc.getScrollTop();n!=t.chky&&t.stop(),t.chky=d,t.nc.setScrollTop(d)}t.timer||(t.nc.hideCursor(),t.doSnapy(p,d))}),t.demulxy<1?t.timer=setTimeout(v,c):(t.stop(),t.nc.hideCursor(),t.doSnapy(p,d))};v()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},m=e.fn.scrollTop;o.cssHooks.pageYOffset={get:function(e,t,n){var r=o.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollTop():m.call(e)},set:function(e,t){var n=o.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollTop(parseInt(t)):m.call(e,t),this}},e.fn.scrollTop=function(e){if(typeof e=="undefined"){var t=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollTop():m.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):m.call(o(this),e)})};var g=e.fn.scrollLeft;o.cssHooks.pageXOffset={get:function(e,t,n){var r=o.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.getScrollLeft():g.call(e)},set:function(e,t){var n=o.data(e,"__nicescroll")||!1;return n&&n.ishwscroll?n.setScrollLeft(parseInt(t)):g.call(e,t),this}},e.fn.scrollLeft=function(e){if(typeof e=="undefined"){var t=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollLeft():g.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):g.call(o(this),e)})};var y=function(e){var t=this;this.length=0,this.name="nicescrollarray",this.each=function(e){for(var n=0;n<t.length;n++)e.call(t[n]);return t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]};if(e)for(a=0;a<e.length;a++){var n=o.data(e[a],"__nicescroll")||!1;n&&(this[this.length]=n,this.length++)}return this};b(y.prototype,["show","hide","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){if(typeof e=="undefined")return new y(this);var t=o.data(this[e],"__nicescroll")||!1;return t},e.extend(e.expr[":"],{nicescroll:function(e){return o.data(e,"__nicescroll")?!0:!1}}),o.fn.niceScroll=function(e,t){typeof t=="undefined"&&typeof e=="object"&&!("jquery"in e)&&(t=e,e=!1);var n=new y;typeof t=="undefined"&&(t={});if(e||!1)t.doc=o(e),t.win=o(this);var r=!("doc"in t);return!r&&!("win"in t)&&(t.win=o(this)),this.each(function(){var e=o(this).data("__nicescroll")||!1;e||(t.doc=r?o(this):t.doc,e=new d(t,o(this)),o(this).data("__nicescroll",e)),n.push(e)}),n.length==1?n[0]:n},window.NiceScroll={getjQuery:function(){return e}},o.nicescroll||(o.nicescroll=new y)}(jQuery),function(e,t){function n(){}function r(){}function i(){}function s(e,t){typeof t=="string"&&(t=t.split("."));var n=t.join(".").replace(/\.(\w)/g,function(e,t){return t.toUpperCase()}),r=t.shift(),i;return typeof (i=e[n])!=l?i=i:typeof (i=e[r])!=l&&t.length>0&&(i=s(i,t)),i}function o(){function e(e,t){r.bind(e,function(){return t.apply(n,arguments)})}var t=f.apply(arguments),n=this,r=t.length===1?n:t.shift(),i;t=t[0]||{};for(i in t)e(i,t[i])}function u(e,t){return{input:e,form:t}}var a=(JSON||{}).stringify,f=Array.prototype.slice,l="undefined",c="item.manager",h="plugins",d="ext",v="html.wrap",m="html.hidden",g="keys",y="preInvalidate",b="postInvalidate",w="getFormData",E="setFormData",S="setInputData",x="postInit",T="ready",N={itemManager:r,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!a)throw new Error("JSON.stringify() not found");p=r.prototype,p.init=function(e){},p.filter=function(e,t){var n=[],r,i;for(r=0;r<e.length;r++)i=e[r],this.itemContains(i,t)&&n.push(i);return n},p.itemContains=function(e,t){return this.itemToString(e).toLowerCase().indexOf(t.toLowerCase())==0},p.stringToItem=function(e){return e},p.itemToString=function(e){return e},p.compareItems=function(e,t){return e==t},p=n.prototype,p.init=function(t,n){var r=this,i,s,o;r._defaults=e.extend({},N),r._opts=n||{},r._plugins={},r._itemManager=s=new(r.opts(c)),t=e(t),o=e(r.opts(v)),i=e(r.opts(m)),t.wrap(o).keydown(function(e){return r.onKeyDown(e)}).keyup(function(e){return r.onKeyUp(e)}).data("textext",r),e(r).data({hiddenInput:i,wrapElement:t.parents(".text-wrap").first(),input:t}),i.attr("name",t.attr("name")),t.attr("name",null),i.insertAfter(t),e.extend(!0,s,r.opts(d+".item.manager")),e.extend(!0,r,r.opts(d+".*"),r.opts(d+".core")),r.originalWidth=t.outerWidth(),r.invalidateBounds(),s.init(r),r.initPatches(),r.initPlugins(r.opts(h),e.fn.textext.plugins),r.on({setFormData:r.onSetFormData,getFormData:r.onGetFormData,setInputData:r.onSetInputData,anyKeyUp:r.onAnyKeyUp}),r.trigger(x),r.trigger(T),r.getFormData(0)},p.initPatches=function(){var t=[],n=e.fn.textext.patches,r;for(r in n)t.push(r);this.initPlugins(t,n)},p.initPlugins=function(t,n){var r=this,i,s,o,u=[],a;typeof t=="string"&&(t=t.split(/\s*,\s*|\s+/g));for(a=0;a<t.length;a++)s=t[a],o=n[s],o&&(r._plugins[s]=o=new o,r[s]=function(e){return function(){return e}}(o),u.push(o),e.extend(!0,o,r.opts(d+".*"),r.opts(d+"."+s)));u.sort(function(e,t){return e=e.initPriority(),t=t.initPriority(),e===t?0:e<t?1:-1});for(a=0;a<u.length;a++)u[a].init(r)},p.hasPlugin=function(e){return!!this._plugins[e]},p.on=o,p.bind=function(e,t){this.input().bind(e,t)},p.trigger=function(){var e=arguments;this.input().trigger(e[0],f.call(e,1))},p.itemManager=function(){return this._itemManager},p.input=function(){return e(this).data("input")},p.opts=function(e){var t=s(this._opts,e);return typeof t=="undefined"?s(this._defaults,e):t},p.wrapElement=function(){return e(this).data("wrapElement")},p.invalidateBounds=function(){var e=this,t=e.input(),n=e.wrapElement(),r=n.parent(),i=e.originalWidth,s;e.trigger(y),s=t.outerHeight(),t.width(i),n.width(i).height(s),r.height(s),e.trigger(b)},p.focusInput=function(){this.input()[0].focus()},p.serializeData=a,p.hiddenInput=function(t){return e(this).data("hiddenInput")},p.getWeightedEventResponse=function(e,t){var n=this,r={},i=0;n.trigger(e,r,t);for(var s in r)i=Math.max(i,s);return r[i]},p.getFormData=function(e){var t=this,n=t.getWeightedEventResponse(w,e||0);t.trigger(E,n.form),t.trigger(S,n.input)},p.onAnyKeyUp=function(e,t){this.getFormData(t)},p.onSetInputData=function(e,t){this.input().val(t)},p.onSetFormData=function(e,t){var n=this;n.hiddenInput().val(n.serializeData(t))},p.onGetFormData=function(e,t){var n=this.input().val();t[0]=u(n,n)},e(["Down","Up"]).each(function(){var e=this.toString();p["onKey"+e]=function(t){var n=this,r=n.opts(g)[t.keyCode],i=!0;return r&&(i=r.substr(-1)!="!",r=r.replace("!",""),n.trigger(r+"Key"+e),e=="Up"&&n._lastKeyDown==t.keyCode&&(n._lastKeyDown=null,n.trigger(r+"KeyPress")),e=="Down"&&(n._lastKeyDown=t.keyCode)),n.trigger("anyKey"+e,t.keyCode),i}}),p=i.prototype,p.on=o,p.formDataObject=u,p.init=function(e){throw new Error("Not implemented")},p.baseInit=function(t,n){var r=this;t._defaults=e.extend(!0,t._defaults,n),r._core=t,r._timers={}},p.startTimer=function(e,t,n){var r=this;r.stopTimer(e),r._timers[e]=setTimeout(function(){delete r._timers[e],n.apply(r)},t*1e3)},p.stopTimer=function(e){clearTimeout(this._timers[e])},p.core=function(){return this._core},p.opts=function(e){return this.core().opts(e)},p.itemManager=function(){return this.core().itemManager()},p.input=function(){return this.core().input()},p.val=function(e){var t=this.input();if(typeof e===l)return t.val();t.val(e)},p.trigger=function(){var e=this.core();e.trigger.apply(e,arguments)},p.bind=function(e,t){this.core().bind(e,t)},p.initPriority=function(){return 0};var C=!1,k=e.fn.textext=function(t){var r;return!C&&(r=e.fn.textext.css)!=null&&(e("head").append("<style>"+r+"</style>"),C=!0),this.map(function(){var r=e(this);if(t==null)return r.data("textext");var i=new n;return i.init(r,t),r.data("textext",i),i.input()[0]})};k.addPlugin=function(e,t){k.plugins[e]=t,t.prototype=new k.TextExtPlugin},k.addPatch=function(e,t){k.patches[e]=t,t.prototype=new k.TextExtPlugin},k.TextExt=n,k.TextExtPlugin=i,k.ItemManager=r,k.plugins={},k.patches={}}(jQuery),function(e){function t(){}e.fn.textext.TextExtIE9Patches=t,e.fn.textext.addPatch("ie9",t);var n=t.prototype;n.init=function(e){if(navigator.userAgent.indexOf("MSIE 9")==-1)return;var t=this;e.on({postInvalidate:t.onPostInvalidate})},n.onPostInvalidate=function(){var e=this,t=e.input(),n=t.val();t.val(Math.random()),t.val(n)}}(jQuery),function(e){function t(){}e.fn.textext.TextExtAjax=t,e.fn.textext.addPlugin("ajax",t);var n=t.prototype,r="ajax.data.callback",i="ajax.cache.results",s="ajax.loading.delay",o="ajax.loading.message",u="ajax.type.delay",a="setSuggestions",f="showDropdown",l="loading",c={ajax:{typeDelay:.5,loadingMessage:"Loading...",loadingDelay:.5,cacheResults:!1,dataCallback:null}};n.init=function(e){var t=this;t.baseInit(e,c),t.on({getSuggestions:t.onGetSuggestions}),t._suggestions=null},n.load=function(t){var n=this,i=n.opts(r)||function(e){return{q:e}},s;s=e.extend(!0,{data:i(t),success:function(e){n.onComplete(e,t)},error:function(e,n){console.error(n,t)}},n.opts("ajax")),e.ajax(s)},n.onComplete=function(e,t){var n=this,r=e;n.dontShowLoading(),n.opts(i)==1&&(n._suggestions=e,r=n.itemManager().filter(e,t)),n.trigger(a,{result:r})},n.dontShowLoading=function(){this.stopTimer(l)},n.showLoading=function(){var e=this;e.dontShowLoading(),e.startTimer(l,e.opts(s),function(){e.trigger(f,function(t){t.clearItems();var n=t.addDropdownItem(e.opts(o));n.addClass("text-loading")})})},n.onGetSuggestions=function(e,t){var n=this,r=n._suggestions,s=(t||{}).query||"";if(r&&n.opts(i)===!0)return n.onComplete(r,s);n.startTimer("ajax",n.opts(u),function(){n.showLoading(),n.load(s)})}}(jQuery),function(e){function t(){}e.fn.textext.TextExtArrow=t,e.fn.textext.addPlugin("arrow",t);var n=t.prototype,r="html.arrow",i={html:{arrow:'<div class="text-arrow"/>'}};n.init=function(t){var n=this,s;n.baseInit(t,i),n._arrow=s=e(n.opts(r)),n.core().wrapElement().append(s),s.bind("click",function(e){n.onArrowClick(e)})},n.onArrowClick=function(e){this.trigger("toggleDropdown"),this.core().focusInput()}}(jQuery),function(e){function t(){}e.fn.textext.TextExtAutocomplete=t,e.fn.textext.addPlugin("autocomplete",t);var n=t.prototype,r=".",i="text-selected",s=r+i,o="text-suggestion",u=r+o,a="text-label",f=r+a,l="autocomplete.enabled",c="autocomplete.dropdown.position",h="autocomplete.dropdown.maxHeight",p="autocomplete.render",d="html.dropdown",v="html.suggestion",m="hideDropdown",g="showDropdown",y="getSuggestions",b="getFormData",w="toggleDropdown",E="above",S="below",x="mousedownOnAutocomplete",T={autocomplete:{enabled:!0,dropdown:{position:S,maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};n.init=function(t){var n=this;n.baseInit(t,T);var r=n.input(),i;n.opts(l)===!0&&(n.on({blur:n.onBlur,anyKeyUp:n.onAnyKeyUp,deleteKeyUp:n.onAnyKeyUp,backspaceKeyPress:n.onBackspaceKeyPress,enterKeyPress:n.onEnterKeyPress,escapeKeyPress:n.onEscapeKeyPress,setSuggestions:n.onSetSuggestions,showDropdown:n.onShowDropdown,hideDropdown:n.onHideDropdown,toggleDropdown:n.onToggleDropdown,postInvalidate:n.positionDropdown,getFormData:n.onGetFormData,downKeyDown:n.onDownKeyDown,upKeyDown:n.onUpKeyDown}),i=e(n.opts(d)),i.insertAfter(r),n.on(i,{mouseover:n.onMouseOver,mousedown:n.onMouseDown,click:n.onClick}),i.css("maxHeight",n.opts(h)).addClass("text-position-"+n.opts(c)),e(n).data("container",i),e(document.body).click(function(e){n.isDropdownVisible()&&!n.withinWrapElement(e.target)&&n.trigger(m)}),n.positionDropdown())},n.containerElement=function(){return e(this).data("container")},n.onMouseOver=function(t){var n=this,r=e(t.target);r.is(u)&&(n.clearSelected(),r.addClass(i))},n.onMouseDown=function(e){this.containerElement().data(x,!0)},n.onClick=function(t){var n=this,r=e(t.target);(r.is(u)||r.is(f))&&n.trigger("enterKeyPress"),n.core().hasPlugin("tags")&&n.val("")},n.onBlur=function(e){var t=this,n=t.containerElement(),r=n.data(x)===!0;t.isDropdownVisible()&&(r?t.core().focusInput():t.trigger(m)),n.removeData(x)},n.onBackspaceKeyPress=function(e){var t=this,n=t.val().length>0;(n||t.isDropdownVisible())&&t.getSuggestions()},n.onAnyKeyUp=function(e,t){var n=this,r=n.opts("keys."+t)!=null;n.val().length>0&&!r&&n.getSuggestions()},n.onDownKeyDown=function(e){var t=this;t.isDropdownVisible()?t.toggleNextSuggestion():t.getSuggestions()},n.onUpKeyDown=function(e){this.togglePreviousSuggestion()},n.onEnterKeyPress=function(e){var t=this;t.isDropdownVisible()&&t.selectFromDropdown()},n.onEscapeKeyPress=function(e){var t=this;t.isDropdownVisible()&&t.trigger(m)},n.positionDropdown=function(){var e=this,t=e.containerElement(),n=e.opts(c),r=e.core().wrapElement().outerHeight(),i={};i[n===E?"bottom":"top"]=r+"px",t.css(i)},n.suggestionElements=function(){return this.containerElement().find(u)},n.setSelectedSuggestion=function(t){if(!t)return;var n=this,r=n.suggestionElements(),s=r.first(),u,a;n.clearSelected();for(a=0;a<r.length;a++){u=e(r[a]);if(n.itemManager().compareItems(u.data(o),t)){s=u.addClass(i);break}}s.addClass(i),n.scrollSuggestionIntoView(s)},n.selectedSuggestionElement=function(){return this.suggestionElements().filter(s).first()},n.isDropdownVisible=function(){return this.containerElement().is(":visible")===!0},n.onGetFormData=function(e,t,n){var r=this,i=r.val(),s=i,o=i;t[100]=r.formDataObject(s,o)},n.initPriority=function(){return 200},n.onHideDropdown=function(e){this.hideDropdown()},n.onToggleDropdown=function(e){var t=this;t.trigger(t.containerElement().is(":visible")?m:g)},n.onShowDropdown=function(t,n){var r=this,i=r.selectedSuggestionElement().data(o),s=r._suggestions;if(!s)return r.trigger(y);e.isFunction(n)?n(r):(r.renderSuggestions(r._suggestions),r.toggleNextSuggestion()),r.showDropdown(r.containerElement()),r.setSelectedSuggestion(i)},n.onSetSuggestions=function(e,t){var n=this,r=n._suggestions=t.result;t.showHideDropdown!==!1&&n.trigger(r===null||r.length===0?m:g)},n.getSuggestions=function(){var e=this,t=e.val();if(e._previousInputValue==t)return;t==""&&(current=null),e._previousInputValue=t,e.trigger(y,{query:t})},n.clearItems=function(){this.containerElement().find(".text-list").children().remove()},n.renderSuggestions=function(t){var n=this;n.clearItems(),e.each(t||[],function(e,t){n.addSuggestion(t)})},n.showDropdown=function(){this.containerElement().show()},n.hideDropdown=function(){var e=this,t=e.containerElement();e._previousInputValue=null,t.hide()},n.addSuggestion=function(e){var t=this,n=t.opts(p),r=t.addDropdownItem(n?n.call(t,e):t.itemManager().itemToString(e));r.data(o,e)},n.addDropdownItem=function(t){var n=this,r=n.containerElement().find(".text-list"),i=e(n.opts(v));return i.find(".text-label").html(t),r.append(i),i},n.clearSelected=function(){this.suggestionElements().removeClass(i)},n.toggleNextSuggestion=function(){var e=this,t=e.selectedSuggestionElement(),n;t.length>0?(n=t.next(),n.length>0&&t.removeClass(i)):n=e.suggestionElements().first(),n.addClass(i),e.scrollSuggestionIntoView(n)},n.togglePreviousSuggestion=function(){var e=this,t=e.selectedSuggestionElement(),n=t.prev();if(n.length==0)return;e.clearSelected(),n.addClass(i),e.scrollSuggestionIntoView(n)},n.scrollSuggestionIntoView=function(e){var t=e.outerHeight(),n=this.containerElement(),r=n.innerHeight(),i=n.scrollTop(),s=(e.position()||{}).top,o=null,u=parseInt(n.css("paddingTop"));if(s==null)return;s+t>r&&(o=s+i+t-r+u),s<0&&(o=s+i-u),o!=null&&n.scrollTop(o)},n.selectFromDropdown=function(){var e=this,t=e.selectedSuggestionElement().data(o);t&&(e.val(e.itemManager().itemToString(t)),e.core().getFormData()),e.trigger(m)},n.withinWrapElement=function(e){return this.core().wrapElement().find(e).size()>0}}(jQuery),function(e){function t(){}e.fn.textext.TextExtFilter=t,e.fn.textext.addPlugin("filter",t);var n=t.prototype,r="filter.enabled",i="filter.items",s={filter:{enabled:!0,items:null}};n.init=function(e){var t=this;t.baseInit(e,s),t.on({getFormData:t.onGetFormData,isTagAllowed:t.onIsTagAllowed,setSuggestions:t.onSetSuggestions}),t._suggestions=null},n.onGetFormData=function(e,t,n){var r=this,i=r.val(),s=i,o="";r.core().hasPlugin("tags")||(r.isValueAllowed(s)&&(o=i),t[300]=r.formDataObject(s,o))},n.isValueAllowed=function(e){var t=this,n=t.opts("filterItems")||t._suggestions||[],i=t.itemManager(),s=!t.opts(r),o;for(o=0;o<n.length&&!s;o++)i.compareItems(e,n[o])&&(s=!0);return s},n.onIsTagAllowed=function(e,t){t.result=this.isValueAllowed(t.tag)},n.onSetSuggestions=function(e,t){this._suggestions=t.result}}(jQuery),function(e){function t(){}e.fn.textext.TextExtFocus=t,e.fn.textext.addPlugin("focus",t);var n=t.prototype,r="html.focus",i={html:{focus:'<div class="text-focus"/>'}};n.init=function(e){var t=this;t.baseInit(e,i),t.core().wrapElement().append(t.opts(r)),t.on({blur:t.onBlur,focus:t.onFocus}),t._timeoutId=0},n.onBlur=function(e){var t=this;clearTimeout(t._timeoutId),t._timeoutId=setTimeout(function(){t.getFocus().hide()},100)},n.onFocus=function(e){var t=this;clearTimeout(t._timeoutId),t.getFocus().show()},n.getFocus=function(){return this.core().wrapElement().find(".text-focus")}}(jQuery),function(e){function t(){}e.fn.textext.TextExtPrompt=t,e.fn.textext.addPlugin("prompt",t);var n=t.prototype,r="text-hide-prompt",i="prompt",s="html.prompt",o={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};n.init=function(t){var n=this,r="placeholder",u,l;n.baseInit(t,o),u=e(n.opts(s)),e(n).data("container",u),n.core().wrapElement().append(u),n.setPrompt(n.opts(i)),l=t.input().attr(r),l||(l=n.opts(i)),t.input().attr(r,""),l&&n.setPrompt(l),e.trim(n.val()).length>0&&n.hidePrompt(),n.on({blur:n.onBlur,focus:n.onFocus,postInvalidate:n.onPostInvalidate,postInit:n.onPostInit})},n.onPostInit=function(e){this.invalidateBounds()},n.onPostInvalidate=function(e){this.invalidateBounds()},n.invalidateBounds=function(){var e=this,t=e.input();e.containerElement().css({paddingLeft:t.css("paddingLeft"),paddingTop:t.css("paddingTop")})},n.onBlur=function(e){var t=this;t.startTimer("prompt",.1,function(){t.showPrompt()})},n.showPrompt=function(){var t=this,n=t.input();e.trim(t.val()).length===0&&!n.is(":focus")&&t.containerElement().removeClass(r)},n.hidePrompt=function(){this.stopTimer("prompt"),this.containerElement().addClass(r)},n.onFocus=function(e){this.hidePrompt()},n.setPrompt=function(e){this.containerElement().text(e)},n.containerElement=function(){return e(this).data("container")}}(jQuery),function(e){function t(){}e.fn.textext.TextExtSuggestions=t,e.fn.textext.addPlugin("suggestions",t);var n=t.prototype,r="suggestions",i={suggestions:null};n.init=function(e){var t=this;t.baseInit(e,i),t.on({getSuggestions:t.onGetSuggestions,postInit:t.onPostInit})},n.setSuggestions=function(e,t){this.trigger("setSuggestions",{result:e,showHideDropdown:t!=0})},n.onPostInit=function(e){var t=this;t.setSuggestions(t.opts(r),!1)},n.onGetSuggestions=function(e,t){var n=this,i=n.opts(r);i.sort(),n.setSuggestions(n.itemManager().filter(i,t.query))}}(jQuery),function(e){function t(){}e.fn.textext.TextExtTags=t,e.fn.textext.addPlugin("tags",t);var n=t.prototype,r=".",i="text-tags-on-top",s=r+i,o="text-tag",u=r+o,a="text-tags",f=r+a,l="text-label",c=r+l,h="text-remove",p=r+h,d="tags.enabled",v="tags.items",m="html.tag",g="html.tags",y="isTagAllowed",b="tagClick",w={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};n.init=function(t){this.baseInit(t,w);var n=this,r=n.input(),i;n.opts(d)&&(i=e(n.opts(g)),r.after(i),e(n).data("container",i),n.on({enterKeyPress:n.onEnterKeyPress,backspaceKeyDown:n.onBackspaceKeyDown,preInvalidate:n.onPreInvalidate,postInit:n.onPostInit,getFormData:n.onGetFormData}),n.on(i,{click:n.onClick,mousemove:n.onContainerMouseMove}),n.on(r,{mousemove:n.onInputMouseMove})),n._originalPadding={left:parseInt(r.css("paddingLeft")||0),top:parseInt(r.css("paddingTop")||0)},n._paddingBox={left:0,top:0},n.updateFormCache()},n.containerElement=function(){return e(this).data("container")},n.onPostInit=function(e){var t=this;t.addTags(t.opts(v))},n.onGetFormData=function(e,t,n){var r=this,i=n===13?"":r.val(),s=r._formData;t[200]=r.formDataObject(i,s)},n.initPriority=function(){return 100},n.onInputMouseMove=function(e){this.toggleZIndex(e)},n.onContainerMouseMove=function(e){this.toggleZIndex(e)},n.onBackspaceKeyDown=function(e){var t=this,n=t.tagElements().last();t.val().length==0&&t.removeTag(n)},n.onPreInvalidate=function(e){var t=this,n=t.tagElements().last(),r=n.position();n.length>0?r.left+=n.innerWidth():r=t._originalPadding,t._paddingBox=r,t.input().css({paddingLeft:r.left,paddingTop:r.top})},n.onClick=function(t){function n(e,t){l.data(o,e),l.find(c).text(r.itemManager().itemToString(e)),r.updateFormCache(),i.getFormData(),i.invalidateBounds(),t&&i.focusInput()}var r=this,i=r.core(),s=e(t.target),a=0,l;s.is(f)?a=1:s.is(p)?(r.removeTag(s.parents(u+":first")),a=1):s.is(c)&&(l=s.parents(u+":first"),r.trigger(b,l,l.data(o),n)),a&&i.focusInput()},n.onEnterKeyPress=function(e){var t=this,n=t.val(),r=t.itemManager().stringToItem(n);t.isTagAllowed(r)&&(t.addTags([r]),t.core().focusInput())},n.updateFormCache=function(){var t=this,n=[];t.tagElements().each(function(){n.push(e(this).data(o))}),t._formData=n},n.toggleZIndex=function(e){var t=this,n=t.input().offset(),r=e.clientX-n.left,o=e.clientY-n.top,u=t._paddingBox,a=t.containerElement(),f=a.is(s),l=r>u.left&&o>u.top;(!f&&!l||f&&l)&&a[(f?"remove":"add")+"Class"](i)},n.tagElements=function(){return this.containerElement().find(u)},n.isTagAllowed=function(e){var t={tag:e,result:!0};return this.trigger(y,t),t.result===!0},n.addTags=function(e){if(!e||e.length==0)return;var t=this,n=t.core(),r=t.containerElement(),i,s;for(i=0;i<e.length;i++)s=e[i],s&&t.isTagAllowed(s)&&r.append(t.renderTag(s));t.updateFormCache(),n.getFormData(),n.invalidateBounds()},n.getTagElement=function(t){var n=this,r=n.tagElements(),i,s;for(i=0;i<r.length,s=e(r[i]);i++)if(n.itemManager().compareItems(s.data(o),t))return s},n.removeTag=function(t){var n=this,r=n.core(),i;t instanceof e?(i=t,t=t.data(o)):i=n.getTagElement(t),i.remove(),n.updateFormCache(),r.getFormData(),r.invalidateBounds()},n.renderTag=function(t){var n=this,r=e(n.opts(m));return r.find(".text-label").text(n.itemManager().itemToString(t)),r.data(o,t),r}}(jQuery),function(e){var t=document,n="getElementsByTagName",r=t[n]("head")[0]||t[n]("body")[0],i=t.createElement("style");i.innerHTML=e,r.appendChild(i)}('\n.text-core{position:relative;}\n.text-core .text-wrap{background:#fff;position:absolute;}\n.text-core .text-wrap textarea,.text-core .text-wrap input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:0px;-moz-border-radius:0px;border-radius:0px;border:1px solid #9daccc;outline:none;resize:none;position:absolute;z-index:1;background:none;overflow:hidden;margin:0;padding:3px 5px 4px 5px;white-space:nowrap;font:11px "lucida grande",tahoma,verdana,arial,sans-serif;line-height:13px;height:auto;}\n\n.text-core .text-wrap .text-arrow{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;top:0;right:0;width:22px;height:22px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAOAQMAAADHWqTrAAAAA3NCSVQICAjb4U/gAAAABlBMVEX///8yXJnt8Ns4AAAACXBIWXMAAAsSAAALEgHS3X78AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1MzmNZGAwAAABpJREFUCJljYEAF/xsY6hkY7BgYZBgYOFBkADkdAmFDagYFAAAAAElFTkSuQmCC") 50% 50% no-repeat;cursor:pointer;z-index:2;}\n\n.text-core .text-wrap .text-dropdown{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0;position:absolute;z-index:3;background:#fff;border:1px solid #9daccc;width:100%;max-height:100px;padding:1px;font:11px "lucida grande",tahoma,verdana,arial,sans-serif;display:none;overflow-x:hidden;overflow-y:auto;}\n.text-core .text-wrap .text-dropdown.text-position-below{margin-top:1px;}\n.text-core .text-wrap .text-dropdown.text-position-above{margin-bottom:1px;}\n.text-core .text-wrap .text-dropdown .text-list .text-suggestion{padding:3px 5px;cursor:pointer;}\n.text-core .text-wrap .text-dropdown .text-list .text-suggestion em{font-style:normal;text-decoration:underline;}\n.text-core .text-wrap .text-dropdown .text-list .text-suggestion.text-selected{color:#fff;background:#6d84b4;}\n\n.text-core .text-wrap .text-focus{-webkit-box-shadow:0px 0px 6px #6d84b4;-moz-box-shadow:0px 0px 6px #6d84b4;box-shadow:0px 0px 6px #6d84b4;position:absolute;width:100%;height:100%;display:none;}\n.text-core .text-wrap .text-focus.text-show-focus{display:block;}\n\n.text-core .text-wrap .text-prompt{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;width:100%;height:100%;margin:1px 0 0 2px;font:11px "lucida grande",tahoma,verdana,arial,sans-serif;color:#c0c0c0;overflow:hidden;white-space:pre;}\n.text-core .text-wrap .text-prompt.text-hide-prompt{display:none;}\n\n.text-core .text-wrap .text-tags{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;width:100%;height:100%;padding:3px 35px 3px 3px;cursor:text;}\n.text-core .text-wrap .text-tags.text-tags-on-top{z-index:2;}\n.text-core .text-wrap .text-tags .text-tag{float:left;}\n.text-core .text-wrap .text-tags .text-tag .text-button{-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;float:left;border:1px solid #9daccc;background:#e2e6f0;color:#000;padding:0px 17px 0px 3px;margin:0 2px 2px 0;cursor:pointer;height:16px;font:11px "lucida grande",tahoma,verdana,arial,sans-serif;}\n.text-core .text-wrap .text-tags .text-tag .text-button a.text-remove{position:absolute;right:3px;top:2px;display:block;width:11px;height:11px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAhCAYAAAAPm1F2AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB50RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNS4xqx9I6wAAAQ5JREFUOI2dlD0WwiAQhCc8L6HHgAPoASwtSYvX8BrQxtIyveYA8RppLO1jE+LwE8lzms2yH8MCj1QoaBzH+VuUYNYMS213UlvDRamtUbXb5ZyPHuDoxwGgip3ipfvGuGzPz+vZ/coDONdzFuYCO6ramQQG0DJIE1oPBBvM6e9LqaS2FwD7FWwnVoIAsOc2Xn1jDlyd8pfPBRVOBHA8cc/3yCmQqt0jcY4LuTyAF3pOYS6wI48LAm4MUrx5JthgSQJAt5LtNgAUgEMBBIC3AL2xgo58dEPfhE9wygef89FtCeC49UwltR1pQrK2qr9vNr7uRTCBF3pOYS6wI4/zdQ8MUpxPI9hgSQL0Xyio/QBt54DzsHQx6gAAAABJRU5ErkJggg==") 0 0 no-repeat;}\n.text-core .text-wrap .text-tags .text-tag .text-button a.text-remove:hover{background-position:0 -11px;}\n.text-core .text-wrap .text-tags .text-tag .text-button a.text-remove:active{background-position:0 -22px;}\n'),rangy.createModule("Serializer",function(e,t){function n(e,t){t=t||[];var r=e.nodeType,i=e.childNodes,s=i.length,o=[r,e.nodeName,s].join(":"),u="",a="";switch(r){case 3:u=e.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");break;case 8:u="<!--"+e.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"-->";break;default:u="<"+o+">",a="</>"}u&&t.push(u);for(r=0;r<s;++r)n(i[r],t);return a&&t.push(a),t}function r(e){return e=n(e).join(""),c(e).toString(16)}function i(e,t,n){var r=[],i=e;for(n=n||h.getDocument(e).documentElement;i&&i!=n;)r.push(h.getNodeIndex(i,!0)),i=i.parentNode;return r.join("/")+":"+t}function s(e,n,r){n?r||h.getDocument(n):(r=r||document,n=r.documentElement),e=e.split(":"),n=n,r=e[0]?e[0].split("/"):[];for(var i=r.length,s;i--;){s=parseInt(r[i],10);if(!(s<n.childNodes.length))throw t.createError("deserializePosition failed: node "+h.inspectNode(n)+" has no child with index "+s+", "+i);n=n.childNodes[parseInt(r[i],10)]}return new h.DomPosition(n,parseInt(e[1],10))}function o(t,n,s){s=s||e.DomRange.getRangeDocument(t).documentElement;if(!h.isAncestorOf(s,t.commonAncestorContainer,!0))throw Error("serializeRange: range is not wholly contained within specified root node");return t=i(t.startContainer,t.startOffset,s)+","+i(t.endContainer,t.endOffset,s),n||(t+="{"+r(s)+"}"),t}function u(t,n,i){n?i=i||h.getDocument(n):(i=i||document,n=i.documentElement),t=/^([^,]+),([^,\{]+)({([^}]+)})?$/.exec(t);var o=t[4],u=r(n);if(o&&o!==r(n))throw Error("deserializeRange: checksums of serialized range root node ("+o+") and target root node ("+u+") do not match");return o=s(t[1],n,i),n=s(t[2],n,i),i=e.createRange(i),i.setStart(o.node,o.offset),i.setEnd(n.node,n.offset),i}function a(e,t,n){return t?n||h.getDocument(t):(n=n||document,t=n.documentElement),e=/^([^,]+),([^,]+)({([^}]+)})?$/.exec(e)[3],!e||e===r(t)}function f(t,n,r){t=t||e.getSelection(),t=t.getAllRanges();for(var i=[],s=0,u=t.length;s<u;++s)i[s]=o(t[s],n,r);return i.join("|")}function l(t,n,r){n?r=r||h.getWindow(n):(r=r||window,n=r.document.documentElement),t=t.split("|");for(var i=e.getSelection(r),s=[],o=0,a=t.length;o<a;++o)s[o]=u(t[o],n,r.document);return i.setRanges(s),i}e.requireModules(["WrappedSelection","WrappedRange"]),(typeof encodeURIComponent=="undefined"||typeof decodeURIComponent=="undefined")&&t.fail("Global object is missing encodeURIComponent and/or decodeURIComponent method");var c=function(){var e=null;return function(t){for(var n=[],r=0,i=t.length,s;r<i;++r)s=t.charCodeAt(r),s<128?n.push(s):s<2048?n.push(s>>6|192,s&63|128):n.push(s>>12|224,s>>6&63|128,s&63|128);t=-1;if(!e){r=[],i=0;for(var o;i<256;++i){o=i;for(s=8;s--;)(o&1)==1?o=o>>>1^3988292384:o>>>=1;r[i]=o>>>0}e=r}r=e,i=0;for(s=n.length;i<s;++i)o=(t^n[i])&255,t=t>>>8^r[o];return(t^-1)>>>0}}(),h=e.dom;e.serializePosition=i,e.deserializePosition=s,e.serializeRange=o,e.deserializeRange=u,e.canDeserializeRange=a,e.serializeSelection=f,e.deserializeSelection=l,e.canDeserializeSelection=function(e,t,n){var r;t?r=n?n.document:h.getDocument(t):(n=n||window,t=n.document.documentElement),e=e.split("|"),n=0;for(var i=e.length;n<i;++n)if(!a(e[n],t,r))return!1;return!0},e.restoreSelectionFromCookie=function(e){e=e||window;var t;e:{t=e.document.cookie.split(/[;,]/);for(var n=0,r=t.length,i;n<r;++n){i=t[n].split("=");if(i[0].replace(/^\s+/,"")=="rangySerializedSelection")if(i=i[1]){t=decodeURIComponent(i.replace(/\s+$/,""));break e}}t=null}t&&l(t,e.doc)},e.saveSelectionCookie=function(t,n){t=t||window,n=typeof n=="object"?n:{};var r=n.expires?";expires="+n.expires.toUTCString():"",i=n.path?";path="+n.path:"",s=n.domain?";domain="+n.domain:"",o=n.secure?";secure":"",u=f(e.getSelection(t));t.document.cookie=encodeURIComponent("rangySerializedSelection")+"="+encodeURIComponent(u)+r+i+s+o},e.getElementChecksum=r});var Showdown={};Showdown.converter=function(){var e,t,n,r=0;this.makeHtml=function(r){return e=new Array,t=new Array,n=new Array,r=r.replace(/~/g,"~T"),r=r.replace(/\$/g,"~D"),r=r.replace(/\r\n/g,"\n"),r=r.replace(/\r/g,"\n"),r="\n\n"+r+"\n\n",r=M(r),r=r.replace(/^[ \t]+$/mg,""),r=y(r),r=s(r),r=i(r),r=u(r),r=A(r),r=r.replace(/~D/g,"$$"),r=r.replace(/~T/g,"~"),r};var i=function(n){var n=n.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|\Z)/gm,function(n,r,i,s,o){return r=r.toLowerCase(),e[r]=N(i),s?s+o:(o&&(t[r]=o.replace(/"/g,"&quot;")),"")});return n},s=function(e){e=e.replace(/\n/g,"\n\n");var t="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del|style|section|header|footer|nav|article|aside",n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside";return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,o),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,o),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,o),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,o),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,o),e=e.replace(/\n\n/g,"\n"),e},o=function(e,t){var r=t;return r=r.replace(/\n\n/g,"\n"),r=r.replace(/^\n/,""),r=r.replace(/\n+$/g,""),r="\n\n~K"+(n.push(r)-1)+"K\n\n",r},u=function(e){e=d(e);var t=b("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=m(e),e=g(e),e=x(e),e=s(e),e=T(e),e},a=function(e){return e=w(e),e=f(e),e=C(e),e=h(e),e=l(e),e=k(e),e=N(e),e=S(e),e=e.replace(/  +\n/g," <br />\n"),e},f=function(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=_(t,"\\`*_"),t}),e},l=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,c),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,c),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,c),e},c=function(n,r,i,s,o,u,a,f){f==undefined&&(f="");var l=r,c=i,h=s.toLowerCase(),p=o,d=f;if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(e[h]!=undefined)p=e[h],t[h]!=undefined&&(d=t[h]);else{if(!(l.search(/\(\s*\)$/m)>-1))return l;p=""}}p=_(p,"*_");var v='<a href="'+p+'"';return d!=""&&(d=d.replace(/"/g,"&quot;"),d=_(d,"*_"),v+=' title="'+d+'"'),v+=">"+c+"</a>",v},h=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p),e},p=function(n,r,i,s,o,u,a,f){var l=r,c=i,h=s.toLowerCase(),p=o,d=f;d||(d="");if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(e[h]==undefined)return l;p=e[h],t[h]!=undefined&&(d=t[h])}c=c.replace(/"/g,"&quot;"),p=_(p,"*_");var v='<img src="'+p+'" alt="'+c+'"';return d=d.replace(/"/g,"&quot;"),d=_(d,"*_"),v+=' title="'+d+'"',v+=" />",v},d=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return b('<h1 id="'+t(n)+'">'+a(n)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return b('<h2 id="'+t(n)+'">'+a(n)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var i=n.length;return b("<h"+i+' id="'+t(r)+'">'+a(r)+"</h"+i+">")}),e},v,m=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return r?e=e.replace(t,function(e,t,n){var r=t,i=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var s=v(r);return s=s.replace(/\s+$/,""),s="<"+i+">"+s+"</"+i+">\n",s}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var i=t,s=n,o=r.search(/[*+-]/g)>-1?"ul":"ol",s=s.replace(/\n{2,}/g,"\n\n\n"),u=v(s);return u=i+"<"+o+">\n"+u+"</"+o+">\n",u})),e=e.replace(/~0/,""),e};v=function(e){return r++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,r,i){var s=i,o=t,f=n;return o||s.search(/\n{2,}/)>-1?s=u(O(s)):(s=m(O(s)),s=s.replace(/\n$/,""),s=a(s)),"<li>"+s+"</li>\n"}),e=e.replace(/~0/g,""),r--,e};var g=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,i=n;return r=E(O(r)),r=M(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",b(r)+i}),e=e.replace(/~0/,""),e},y=function(e){return e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,t,n){var r=t,i=n;return i=E(i),i=M(i),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code"+(r?' class="'+r+'"':"")+">"+i+"\n</code></pre>",b(i)}),e=e.replace(/~0/,""),e},b=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(n.push(e)-1)+"K\n\n"},w=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,i){var s=r;return s=s.replace(/^([ \t]*)/g,""),s=s.replace(/[ \t]*$/g,""),s=E(s),t+"<code>"+s+"</code>"}),e},E=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=_(e,"*_{}[]\\",!1),e},S=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e},x=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=u(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /mg,"~0"),n=n.replace(/~0/g,""),n}),b("<blockquote>\n"+n+"\n</blockquote>")}),e},T=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");var t=e.split(/\n{2,}/g),r=new Array,i=t.length;for(var s=0;s<i;s++){var o=t[s];o.search(/~K(\d+)K/g)>=0?r.push(o):o.search(/\S/)>=0&&(o=a(o),o=o.replace(/^([ \t]*)/g,"<p>"),o+="</p>",r.push(o))}i=r.length;for(var s=0;s<i;s++)while(r[s].search(/~K(\d+)K/)>=0){var u=n[RegExp.$1];u=u.replace(/\$/g,"$$$$"),r[s]=r[s].replace(/~K\d+K/,u)}return r.join("\n\n")},N=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;"),e},C=function(e){return e=e.replace(/\\(\\)/g,D),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,D),e},k=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,t){return L(A(t))}),e},L=function(e){function t(e){var t="0123456789ABCDEF",n=e.charCodeAt(0);return t.charAt(n>>4)+t.charAt(n&15)}var n=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+t(e)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if(e=="@")e=n[Math.floor(Math.random()*2)](e);else if(e!=":"){var t=Math.random();e=t>.9?n[2](e):t>.45?n[1](e):n[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">'),e},A=function(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)}),e},O=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,""),e},M=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,t,n){var r=t,i=4-r.length%4;for(var s=0;s<i;s++)r+=" ";return r}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,""),e},_=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,D),e},D=function(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}},typeof module!="undefined"&&(module.exports=Showdown),function(e,t,n){function o(e,n){var r=t.createElement(e||"div"),i;for(i in n)r[i]=n[i];return r}function u(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function f(e,t,n,r){var o=["opacity",t,~~(e*100),n,r].join("-"),u=.01+n/r*100,f=Math.max(1-(1-e)/t*(100-u),e),l=s.substring(0,s.indexOf("Animation")).toLowerCase(),c=l&&"-"+l+"-"||"";return i[o]||(a.insertRule("@"+c+"keyframes "+o+"{"+"0%{opacity:"+f+"}"+u+"%{opacity:"+e+"}"+(u+.01)+"%{opacity:1}"+(u+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+f+"}"+"}",0),i[o]=1),o}function l(e,t){var i=e.style,s,o;if(i[t]!==n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(o=0;o<r.length;o++){s=r[o]+t;if(i[s]!==n)return s}}function c(e,t){for(var n in t)e.style[l(e,n)||n]=t[n];return e}function h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)e[i]===n&&(e[i]=r[i])}return e}function p(e){var t={x:e.offsetLeft,y:e.offsetTop};while(e=e.offsetParent)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var r=["webkit","Moz","ms","O"],i={},s,a=function(){var e=o("style");return u(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),d={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},v=function m(e){if(!this.spin)return new m(e);this.opts=h(e||{},m.defaults,d)};v.defaults={},h(v.prototype,{spin:function(e){this.stop();var t=this,n=t.opts,r=t.el=c(o(0,{className:n.className}),{position:"relative",zIndex:n.zIndex}),i=n.radius+n.length+n.width,u,a;e&&(e.insertBefore(r,e.firstChild||null),a=p(e),u=p(r),c(r,{left:(n.left=="auto"?a.x-u.x+(e.offsetWidth>>1):n.left+i)+"px",top:(n.top=="auto"?a.y-u.y+(e.offsetHeight>>1):n.top+i)+"px"})),r.setAttribute("aria-role","progressbar"),t.lines(r,t.opts);if(!s){var f=0,l=n.fps,h=l/n.speed,d=(1-n.opacity)/(h*n.trail/100),v=h/n.lines;!function m(){f++;for(var e=n.lines;e;e--){var i=Math.max(1-(f+e*v)%h*d,n.opacity);t.opacity(r,n.lines-e,i,n)}t.timeout=t.el&&setTimeout(m,~~(1e3/l))}()}return t},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function i(e,r){return c(o(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:r,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*n+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.width>>1)+"px"})}var n=0,r;for(;n<t.lines;n++)r=c(o(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:s&&f(t.opacity,t.trail,n,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&u(r,c(i("#000","0 0 4px #000"),{top:"2px"})),u(e,u(r,i(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),!function(){function e(e,t){return o("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=c(o("group"),{behavior:"url(#default#VML)"});!l(t,"transform")&&t.adj?(a.addRule(".spin-vml","behavior:url(#default#VML)"),v.prototype.lines=function(t,n){function s(){return c(e("group",{coordsize:i+" "+i,coordorigin:-r+" "+ -r}),{width:i,height:i})}function l(t,i,o){u(a,u(c(s(),{rotation:360/n.lines*t+"deg",left:~~i}),u(c(e("roundrect",{arcsize:1}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:o}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r=n.length+n.width,i=2*r,o=-(n.width+n.length)*2+"px",a=c(s(),{position:"absolute",top:o,left:o}),f;if(n.shadow)for(f=1;f<=n.lines;f++)l(f,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(f=1;f<=n.lines;f++)l(f);return u(t,a)},v.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}):s=l(t,"animation")}(),e.Spinner=v}(window,document);var swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?"ActiveX":"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();jade=function(e){function t(e){return e!=null}return Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),e.merge=function(n,r){var i=n["class"],s=r["class"];if(i||s)i=i||[],s=s||[],Array.isArray(i)||(i=[i]),Array.isArray(s)||(s=[s]),i=i.filter(t),s=s.filter(t),n["class"]=i.concat(s).join(" ");for(var o in r)o!="class"&&(n[o]=r[o]);return n},e.attrs=function(n,r){var i=[],s=n.terse;delete n.terse;var o=Object.keys(n),u=o.length;if(u){i.push("");for(var a=0;a<u;++a){var f=o[a],l=n[f];"boolean"==typeof l||null==l?l&&(s?i.push(f):i.push(f+'="'+f+'"')):0==f.indexOf("data")&&"string"!=typeof l?i.push(f+"='"+JSON.stringify(l)+"'"):"class"==f&&Array.isArray(l)?i.push(f+'="'+e.escape(l.join(" "))+'"'):r&&r[f]?i.push(f+'="'+e.escape(l)+'"'):i.push(f+'="'+l+'"')}}return i.join(" ")},e.escape=function(t){return String(t).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.rethrow=function(t,n,r){if(!n)throw t;var i=3,s=require("fs").readFileSync(n,"utf8"),o=s.split("\n"),u=Math.max(r-i,0),a=Math.min(o.length,r+i),i=o.slice(u,a).map(function(e,t){var n=t+u+1;return(n==r?"  > ":"    ")+n+"| "+e}).join("\n");throw t.path=n,t.message=(n||"Jade")+":"+r+"\n"+i+"\n\n"+t.message,t},e}({})